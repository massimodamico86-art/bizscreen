(function(Sn,kn){typeof exports=="object"&&typeof module<"u"?module.exports=kn():typeof define=="function"&&define.amd?define(kn):(Sn=typeof globalThis<"u"?globalThis:Sn||self,Sn.Pixie=kn())})(this,function(){"use strict";var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var im={exports:{}},$a={},om={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),CS=Symbol.for("react.portal"),_S=Symbol.for("react.fragment"),SS=Symbol.for("react.strict_mode"),kS=Symbol.for("react.profiler"),ES=Symbol.for("react.provider"),TS=Symbol.for("react.context"),OS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),DS=Symbol.for("react.memo"),AS=Symbol.for("react.lazy"),sm=Symbol.iterator;function MS(e){return e===null||typeof e!="object"?null:(e=sm&&e[sm]||e["@@iterator"],typeof e=="function"?e:null)}var am={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lm=Object.assign,cm={};function $i(e,t,n){this.props=e,this.context=t,this.refs=cm,this.updater=n||am}$i.prototype.isReactComponent={},$i.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},$i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function um(){}um.prototype=$i.prototype;function Bu(e,t,n){this.props=e,this.context=t,this.refs=cm,this.updater=n||am}var Nu=Bu.prototype=new um;Nu.constructor=Bu,lm(Nu,$i.prototype),Nu.isPureReactComponent=!0;var hm=Array.isArray,fm=Object.prototype.hasOwnProperty,$u={current:null},dm={key:!0,ref:!0,__self:!0,__source:!0};function pm(e,t,n){var r,i={},s=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(s=""+t.key),t)fm.call(t,r)&&!dm.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jo,type:e,key:s,ref:d,props:i,_owner:$u.current}}function jS(e,t){return{$$typeof:Jo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jo}function IS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gm=/\/+/g;function Hu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IS(""+e.key):t.toString(36)}function Va(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(s){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Jo:case CS:d=!0}}if(d)return d=e,i=i(d),e=r===""?"."+Hu(d,0):r,hm(i)?(n="",e!=null&&(n=e.replace(gm,"$&/")+"/"),Va(i,t,n,"",function(c){return c})):i!=null&&(Vu(i)&&(i=jS(i,n+(!i.key||d&&d.key===i.key?"":(""+i.key).replace(gm,"$&/")+"/")+e)),t.push(i)),1;if(d=0,r=r===""?".":r+":",hm(e))for(var a=0;a<e.length;a++){s=e[a];var o=r+Hu(s,a);d+=Va(s,t,n,o,i)}else if(o=MS(e),typeof o=="function")for(e=o.call(e),a=0;!(s=e.next()).done;)s=s.value,o=r+Hu(s,a++),d+=Va(s,t,n,o,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Ha(e,t,n){if(e==null)return e;var r=[],i=0;return Va(e,r,"","",function(s){return t.call(n,s,i++)}),r}function FS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},Wa={transition:null},RS={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:$u};ke.Children={map:Ha,forEach:function(e,t,n){Ha(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ha(e,function(){t++}),t},toArray:function(e){return Ha(e,function(t){return t})||[]},only:function(e){if(!Vu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},ke.Component=$i,ke.Fragment=_S,ke.Profiler=kS,ke.PureComponent=Bu,ke.StrictMode=SS,ke.Suspense=PS,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RS,ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lm({},e.props),i=e.key,s=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,d=$u.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(o in t)fm.call(t,o)&&!dm.hasOwnProperty(o)&&(r[o]=t[o]===void 0&&a!==void 0?a[o]:t[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jo,type:e.type,key:i,ref:s,props:r,_owner:d}},ke.createContext=function(e){return e={$$typeof:TS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ES,_context:e},e.Consumer=e},ke.createElement=pm,ke.createFactory=function(e){var t=pm.bind(null,e);return t.type=e,t},ke.createRef=function(){return{current:null}},ke.forwardRef=function(e){return{$$typeof:OS,render:e}},ke.isValidElement=Vu,ke.lazy=function(e){return{$$typeof:AS,_payload:{_status:-1,_result:e},_init:FS}},ke.memo=function(e,t){return{$$typeof:DS,type:e,compare:t===void 0?null:t}},ke.startTransition=function(e){var t=Wa.transition;Wa.transition={};try{e()}finally{Wa.transition=t}},ke.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},ke.useCallback=function(e,t){return St.current.useCallback(e,t)},ke.useContext=function(e){return St.current.useContext(e)},ke.useDebugValue=function(){},ke.useDeferredValue=function(e){return St.current.useDeferredValue(e)},ke.useEffect=function(e,t){return St.current.useEffect(e,t)},ke.useId=function(){return St.current.useId()},ke.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)},ke.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)},ke.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)},ke.useMemo=function(e,t){return St.current.useMemo(e,t)},ke.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)},ke.useRef=function(e){return St.current.useRef(e)},ke.useState=function(e){return St.current.useState(e)},ke.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)},ke.useTransition=function(){return St.current.useTransition()},ke.version="18.2.0",om.exports=ke;var E=om.exports;const he=kn(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS=E,zS=Symbol.for("react.element"),BS=Symbol.for("react.fragment"),NS=Object.prototype.hasOwnProperty,$S=LS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VS={key:!0,ref:!0,__self:!0,__source:!0};function mm(e,t,n){var r,i={},s=null,d=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)NS.call(t,r)&&!VS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:zS,type:e,key:s,ref:d,props:i,_owner:$S.current}}$a.Fragment=BS,$a.jsx=mm,$a.jsxs=mm,im.exports=$a;var w=im.exports,fe={};const Wu=wS(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var n=Wu,r=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=r.document,t.jsdomImplForWrapper=Wu.implForWrapper,t.nodeCanvas=Wu.Canvas,t.window=r,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function a(u,p){if(this.__eventListeners[u]){var m=this.__eventListeners[u];p?m[m.indexOf(p)]=!1:t.util.array.fill(m,!1)}}function o(u,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in u)this.on(m,u[m]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(p);return this}function c(u,p){var m=(function(){p.apply(this,arguments),this.off(u,m)}).bind(this);this.on(u,m)}function f(u,p){if(arguments.length===1)for(var m in u)c.call(this,m,u[m]);else c.call(this,u,p);return this}function l(u,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)a.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in u)a.call(this,m,u[m]);else a.call(this,u,p);return this}function h(u,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[u];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[u]=m.filter(function(y){return y!==!1}),this}t.Observable={fire:h,on:o,once:f,off:l}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,o=arguments.length;a<o;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,o,c){var f=this._objects;return c?f[o]=a:f.splice(o,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,o,c=!1,f=0,l=arguments.length;f<l;f++)o=a.indexOf(arguments[f]),o!==-1&&(c=!0,a.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,o){for(var c=this.getObjects(),f=0,l=c.length;f<l;f++)a.call(o,c[f],f,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,o){return this._objects.indexOf(a)>-1?!0:o?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,o){return a+=o.complexity?o.complexity():0,a},0)}},t.CommonMethods={_setOptions:function(a){for(var o in a)this.set(o,a[o])},_initGradient:function(a,o){a&&a.colorStops&&!(a instanceof t.Gradient)&&this.set(o,new t.Gradient(a))},_initPattern:function(a,o,c){a&&a.source&&!(a instanceof t.Pattern)?this.set(o,new t.Pattern(a,c)):c&&c()},_setObject:function(a){for(var o in a)this._set(o,a[o])},set:function(a,o){return typeof a=="object"?this._setObject(a):this._set(a,o),this},_set:function(a,o){this[a]=o},toggle:function(a){var o=this.get(a);return typeof o=="boolean"&&this.set(a,!o),this},get:function(a){return this[a]}},function(a){var o=Math.sqrt,c=Math.atan2,f=Math.pow,l=Math.PI/180,h=Math.PI/2;t.util={cos:function(u){if(u===0)return 1;u<0&&(u=-u);var p=u/h;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(u)},sin:function(u){if(u===0)return 0;var p=u/h,m=1;switch(u<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(u)},removeFromArray:function(u,p){var m=u.indexOf(p);return m!==-1&&u.splice(m,1),u},getRandomInt:function(u,p){return Math.floor(Math.random()*(p-u+1))+u},degreesToRadians:function(u){return u*l},radiansToDegrees:function(u){return u/l},rotatePoint:function(u,p,m){var g=new t.Point(u.x-p.x,u.y-p.y),v=t.util.rotateVector(g,m);return new t.Point(v.x,v.y).addEquals(p)},rotateVector:function(u,p){var m=t.util.sin(p),g=t.util.cos(p),v=u.x*g-u.y*m,y=u.x*m+u.y*g;return{x:v,y}},createVector:function(u,p){return new t.Point(p.x-u.x,p.y-u.y)},calcAngleBetweenVectors:function(u,p){return Math.acos((u.x*p.x+u.y*p.y)/(Math.hypot(u.x,u.y)*Math.hypot(p.x,p.y)))},getHatVector:function(u){return new t.Point(u.x,u.y).multiply(1/Math.hypot(u.x,u.y))},getBisector:function(u,p,m){var g=t.util.createVector(u,p),v=t.util.createVector(u,m),y=t.util.calcAngleBetweenVectors(g,v),b=t.util.calcAngleBetweenVectors(t.util.rotateVector(g,y),v),x=y*(b===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(g,x)),angle:y}},projectStrokeOnPoints:function(u,p,m){var g=[],v=p.strokeWidth/2,y=p.strokeUniform?new t.Point(1/p.scaleX,1/p.scaleY):new t.Point(1,1),b=function(x){var C=v/Math.hypot(x.x,x.y);return new t.Point(x.x*C*y.x,x.y*C*y.y)};return u.length<=1||u.forEach(function(x,C){var _=new t.Point(x.x,x.y),S,T;C===0?(T=u[C+1],S=m?b(t.util.createVector(T,_)).addEquals(_):u[u.length-1]):C===u.length-1?(S=u[C-1],T=m?b(t.util.createVector(S,_)).addEquals(_):u[0]):(S=u[C-1],T=u[C+1]);var I=t.util.getBisector(_,S,T),F=I.vector,$=I.angle,G,ne;if(p.strokeLineJoin==="miter"&&(G=-v/Math.sin($/2),ne=new t.Point(F.x*G*y.x,F.y*G*y.y),Math.hypot(ne.x,ne.y)/v<=p.strokeMiterLimit)){g.push(_.add(ne)),g.push(_.subtract(ne));return}G=-v*Math.SQRT2,ne=new t.Point(F.x*G*y.x,F.y*G*y.y),g.push(_.add(ne)),g.push(_.subtract(ne))}),g},transformPoint:function(u,p,m){return m?new t.Point(p[0]*u.x+p[2]*u.y,p[1]*u.x+p[3]*u.y):new t.Point(p[0]*u.x+p[2]*u.y+p[4],p[1]*u.x+p[3]*u.y+p[5])},makeBoundingBoxFromPoints:function(u,p){if(p)for(var m=0;m<u.length;m++)u[m]=t.util.transformPoint(u[m],p);var g=[u[0].x,u[1].x,u[2].x,u[3].x],v=t.util.array.min(g),y=t.util.array.max(g),b=y-v,x=[u[0].y,u[1].y,u[2].y,u[3].y],C=t.util.array.min(x),_=t.util.array.max(x),S=_-C;return{left:v,top:C,width:b,height:S}},invertTransform:function(u){var p=1/(u[0]*u[3]-u[1]*u[2]),m=[p*u[3],-p*u[1],-p*u[2],p*u[0]],g=t.util.transformPoint({x:u[4],y:u[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(u,p){return parseFloat(Number(u).toFixed(p))},parseUnit:function(u,p){var m=/\D{0,2}$/.exec(u),g=parseFloat(u);switch(p||(p=t.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*t.DPI/25.4;case"cm":return g*t.DPI/2.54;case"in":return g*t.DPI;case"pt":return g*t.DPI/72;case"pc":return g*t.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(u,p){return u=t.util.string.camelize(u.charAt(0).toUpperCase()+u.slice(1)),t.util.resolveNamespace(p)[u]},getSvgAttributes:function(u){var p=["instantiated_by_use","style","id","class"];switch(u){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(u){if(!u)return t;var p=u.split("."),m=p.length,g,v=a||t.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(u,p,m,g){if(!u){p&&p.call(m,u);return}var v=t.util.createImage(),y=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=y,v.onerror=function(){t.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},u.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),u.substring(0,14)==="data:image/svg"&&(v.onload=null,t.util.loadImageInDom(v,y)),v.src=u},loadImageInDom:function(u,p){var m=t.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(u),t.document.querySelector("body").appendChild(m),u.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(u,p,m,g){u=u||[];var v=[],y=0,b=u.length;function x(){++y===b&&p&&p(v.filter(function(C){return C}))}if(!b){p&&p(v);return}u.forEach(function(C,_){if(!C||!C.type){x();return}var S=t.util.getKlass(C.type,m);S.fromObject(C,function(T,I){I||(v[_]=T),g&&g(C,T,I),x()})})},enlivenObjectEnlivables:function(u,p,m){var g=t.Object.ENLIVEN_PROPS.filter(function(v){return!!u[v]});t.util.enlivenObjects(g.map(function(v){return u[v]}),function(v){var y={};g.forEach(function(b,x){y[b]=v[x],p&&(p[b]=v[x])}),m&&m(y)})},enlivenPatterns:function(u,p){u=u||[];function m(){++v===y&&p&&p(g)}var g=[],v=0,y=u.length;if(!y){p&&p(g);return}u.forEach(function(b,x){b&&b.source?new t.Pattern(b,function(C){g[x]=C,m()}):(g[x]=b,m())})},groupSVGElements:function(u,p,m){var g;return u&&u.length===1?(typeof m<"u"&&(u[0].sourcePath=m),u[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new t.Group(u,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(u,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in u&&(p[m[g]]=u[m[g]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(u){var p=t.util.createCanvasElement();return p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0),p},toDataURL:function(u,p,m){return u.toDataURL("image/"+p,m)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(u,p,m){return[u[0]*p[0]+u[2]*p[1],u[1]*p[0]+u[3]*p[1],u[0]*p[2]+u[2]*p[3],u[1]*p[2]+u[3]*p[3],m?0:u[0]*p[4]+u[2]*p[5]+u[4],m?0:u[1]*p[4]+u[3]*p[5]+u[5]]},qrDecompose:function(u){var p=c(u[1],u[0]),m=f(u[0],2)+f(u[1],2),g=o(m),v=(u[0]*u[3]-u[2]*u[1])/g,y=c(u[0]*u[2]+u[1]*u[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:y/l,skewY:0,translateX:u[4],translateY:u[5]}},calcRotateMatrix:function(u){if(!u.angle)return t.iMatrix.concat();var p=t.util.degreesToRadians(u.angle),m=t.util.cos(p),g=t.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(u){var p=typeof u.scaleX>"u"?1:u.scaleX,m=typeof u.scaleY>"u"?1:u.scaleY,g=[u.flipX?-p:p,0,0,u.flipY?-m:m,0,0],v=t.util.multiplyTransformMatrices,y=t.util.degreesToRadians;return u.skewX&&(g=v(g,[1,0,Math.tan(y(u.skewX)),1],!0)),u.skewY&&(g=v(g,[1,Math.tan(y(u.skewY)),0,1],!0)),g},composeMatrix:function(u){var p=[1,0,0,1,u.translateX||0,u.translateY||0],m=t.util.multiplyTransformMatrices;return u.angle&&(p=m(p,t.util.calcRotateMatrix(u))),(u.scaleX!==1||u.scaleY!==1||u.skewX||u.skewY||u.flipX||u.flipY)&&(p=m(p,t.util.calcDimensionsMatrix(u))),p},resetObjectTransform:function(u){u.scaleX=1,u.scaleY=1,u.skewX=0,u.skewY=0,u.flipX=!1,u.flipY=!1,u.rotate(0)},saveObjectTransform:function(u){return{scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,angle:u.angle,left:u.left,flipX:u.flipX,flipY:u.flipY,top:u.top}},isTransparent:function(u,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,y,b,x=u.getImageData(p,m,g*2||1,g*2||1),C=x.data.length;for(y=3;y<C&&(b=x.data[y],v=b<=0,v!==!1);y+=4);return x=null,v},parsePreserveAspectRatioAttribute:function(u){var p="meet",m="Mid",g="Mid",v=u.split(" "),y;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(y=p,p="meet"):v.length&&(y=v.pop())),m=y!=="none"?y.slice(1,4):"none",g=y!=="none"?y.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(u){u=(u||"").toLowerCase(),u?t.charWidthsCache[u]&&delete t.charWidthsCache[u]:t.charWidthsCache={}},limitDimsByArea:function(u,p){var m=Math.sqrt(p*u),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(u,p,m){return Math.max(u,Math.min(p,m))},findScaleToFit:function(u,p){return Math.min(p.width/u.width,p.height/u.height)},findScaleToCover:function(u,p){return Math.max(p.width/u.width,p.height/u.height)},matrixToSVG:function(u){return"matrix("+u.map(function(p){return t.util.toFixed(p,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(u,p){var m=t.util.invertTransform(p),g=t.util.multiplyTransformMatrices(m,u.calcOwnMatrix());t.util.applyTransformToObject(u,g)},addTransformToObject:function(u,p){t.util.applyTransformToObject(u,t.util.multiplyTransformMatrices(p,u.calcOwnMatrix()))},applyTransformToObject:function(u,p){var m=t.util.qrDecompose(p),g=new t.Point(m.translateX,m.translateY);u.flipX=!1,u.flipY=!1,u.set("scaleX",m.scaleX),u.set("scaleY",m.scaleY),u.skewX=m.skewX,u.skewY=m.skewY,u.angle=m.angle,u.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(u,p,m){var g=u/2,v=p/2,y=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=t.util.calcDimensionsMatrix(m),x=t.util.makeBoundingBoxFromPoints(y,b);return{x:x.width,y:x.height}},mergeClipPaths:function(u,p){var m=u,g=p;m.inverted&&!g.inverted&&(m=p,g=u),t.util.applyTransformToObject(g,t.util.multiplyTransformMatrices(t.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new t.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(u,p,m){return m=m||!1,u.fill!==p.fill||u.stroke!==p.stroke||u.strokeWidth!==p.strokeWidth||u.fontSize!==p.fontSize||u.fontFamily!==p.fontFamily||u.fontWeight!==p.fontWeight||u.fontStyle!==p.fontStyle||u.textBackgroundColor!==p.textBackgroundColor||u.deltaY!==p.deltaY||m&&(u.overline!==p.overline||u.underline!==p.underline||u.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=t.util.object.clone(m,!0),g=p.split(`
`),v=-1,y={},b=[],x=0;x<g.length;x++){if(!m[x]){v+=g[x].length;continue}for(var C=0;C<g[x].length;C++){v++;var _=m[x][C];if(_&&Object.keys(_).length>0){var S=t.util.hasStyleChanged(y,_,!0);S?b.push({start:v,end:v+1,style:_}):b[b.length-1].end++}y=_||{}}}return b},stylesFromArray:function(u,p){if(!Array.isArray(u))return u;for(var m=p.split(`
`),g=-1,v=0,y={},b=0;b<m.length;b++)for(var x=0;x<m[b].length;x++)g++,u[v]&&u[v].start<=g&&g<u[v].end&&(y[b]=y[b]||{},y[b][x]=Object.assign({},u[v].style),g===u[v].end-1&&v++);return y}}}(e),function(){var a=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function f(k,P,A,j,H,M,O,R,B,U,W){var ee=t.util.cos(k),re=t.util.sin(k),ue=t.util.cos(P),X=t.util.sin(P),z=A*H*ue-j*M*X+O,K=j*H*ue+A*M*X+R,te=U+B*(-A*H*re-j*M*ee),N=W+B*(-j*H*re+A*M*ee),q=z+B*(A*H*X+j*M*ue),le=K+B*(j*H*X-A*M*ue);return["C",te,N,q,le,z,K]}function l(k,P,A,j,H,M,O){var R=Math.PI,B=O*R/180,U=t.util.sin(B),W=t.util.cos(B),ee=0,re=0;A=Math.abs(A),j=Math.abs(j);var ue=-W*k*.5-U*P*.5,X=-W*P*.5+U*k*.5,z=A*A,K=j*j,te=X*X,N=ue*ue,q=z*K-z*te-K*N,le=0;if(q<0){var xe=Math.sqrt(1-q/(z*K));A*=xe,j*=xe}else le=(H===M?-1:1)*Math.sqrt(q/(z*te+K*N));var me=le*A*X/j,J=-le*j*ue/A,ge=W*me-U*J+k*.5,we=U*me+W*J+P*.5,Se=h(1,0,(ue-me)/A,(X-J)/j),Le=h((ue-me)/A,(X-J)/j,(-ue-me)/A,(-X-J)/j);M===0&&Le>0?Le-=2*R:M===1&&Le<0&&(Le+=2*R);for(var Ae=Math.ceil(Math.abs(Le/R*2)),Pt=[],Je=Le/Ae,Ni=8/3*Math.sin(Je/4)*Math.sin(Je/4)/Math.sin(Je/2),Na=Se+Je,zn=0;zn<Ae;zn++)Pt[zn]=f(Se,Na,W,U,A,j,ge,we,Ni,ee,re),ee=Pt[zn][5],re=Pt[zn][6],Se=Na,Na+=Je;return Pt}function h(k,P,A,j){var H=Math.atan2(P,k),M=Math.atan2(j,A);return M>=H?M-H:2*Math.PI-(H-M)}function u(k,P,A,j,H,M,O,R){var B;if(t.cachesBoundsOfCurve&&(B=a.call(arguments),t.boundsOfCurveCache[B]))return t.boundsOfCurveCache[B];var U=Math.sqrt,W=Math.min,ee=Math.max,re=Math.abs,ue=[],X=[[],[]],z,K,te,N,q,le,xe,me;K=6*k-12*A+6*H,z=-3*k+9*A-9*H+3*O,te=3*A-3*k;for(var J=0;J<2;++J){if(J>0&&(K=6*P-12*j+6*M,z=-3*P+9*j-9*M+3*R,te=3*j-3*P),re(z)<1e-12){if(re(K)<1e-12)continue;N=-te/K,0<N&&N<1&&ue.push(N);continue}xe=K*K-4*te*z,!(xe<0)&&(me=U(xe),q=(-K+me)/(2*z),0<q&&q<1&&ue.push(q),le=(-K-me)/(2*z),0<le&&le<1&&ue.push(le))}for(var ge,we,Se=ue.length,Le=Se,Ae;Se--;)N=ue[Se],Ae=1-N,ge=Ae*Ae*Ae*k+3*Ae*Ae*N*A+3*Ae*N*N*H+N*N*N*O,X[0][Se]=ge,we=Ae*Ae*Ae*P+3*Ae*Ae*N*j+3*Ae*N*N*M+N*N*N*R,X[1][Se]=we;X[0][Le]=k,X[1][Le]=P,X[0][Le+1]=O,X[1][Le+1]=R;var Pt=[{x:W.apply(null,X[0]),y:W.apply(null,X[1])},{x:ee.apply(null,X[0]),y:ee.apply(null,X[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[B]=Pt),Pt}function p(k,P,A){for(var j=A[1],H=A[2],M=A[3],O=A[4],R=A[5],B=A[6],U=A[7],W=l(B-k,U-P,j,H,O,R,M),ee=0,re=W.length;ee<re;ee++)W[ee][1]+=k,W[ee][2]+=P,W[ee][3]+=k,W[ee][4]+=P,W[ee][5]+=k,W[ee][6]+=P;return W}function m(k){var P=0,A=0,j=k.length,H=0,M=0,O,R,B,U=[],W,ee,re;for(R=0;R<j;++R){switch(B=!1,O=k[R].slice(0),O[0]){case"l":O[0]="L",O[1]+=P,O[2]+=A;case"L":P=O[1],A=O[2];break;case"h":O[1]+=P;case"H":O[0]="L",O[2]=A,P=O[1];break;case"v":O[1]+=A;case"V":O[0]="L",A=O[1],O[1]=P,O[2]=A;break;case"m":O[0]="M",O[1]+=P,O[2]+=A;case"M":P=O[1],A=O[2],H=O[1],M=O[2];break;case"c":O[0]="C",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A,O[5]+=P,O[6]+=A;case"C":ee=O[3],re=O[4],P=O[5],A=O[6];break;case"s":O[0]="S",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A;case"S":W==="C"?(ee=2*P-ee,re=2*A-re):(ee=P,re=A),P=O[3],A=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=ee,O[2]=re,ee=O[3],re=O[4];break;case"q":O[0]="Q",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A;case"Q":ee=O[1],re=O[2],P=O[3],A=O[4];break;case"t":O[0]="T",O[1]+=P,O[2]+=A;case"T":W==="Q"?(ee=2*P-ee,re=2*A-re):(ee=P,re=A),O[0]="Q",P=O[1],A=O[2],O[1]=ee,O[2]=re,O[3]=P,O[4]=A;break;case"a":O[0]="A",O[6]+=P,O[7]+=A;case"A":B=!0,U=U.concat(p(P,A,O)),P=O[6],A=O[7];break;case"z":case"Z":P=H,A=M;break}B||U.push(O),W=O[0]}return U}function g(k,P,A,j){return Math.sqrt((A-k)*(A-k)+(j-P)*(j-P))}function v(k){return k*k*k}function y(k){return 3*k*k*(1-k)}function b(k){return 3*k*(1-k)*(1-k)}function x(k){return(1-k)*(1-k)*(1-k)}function C(k,P,A,j,H,M,O,R){return function(B){var U=v(B),W=y(B),ee=b(B),re=x(B);return{x:O*U+H*W+A*ee+k*re,y:R*U+M*W+j*ee+P*re}}}function _(k,P,A,j,H,M,O,R){return function(B){var U=1-B,W=3*U*U*(A-k)+6*U*B*(H-A)+3*B*B*(O-H),ee=3*U*U*(j-P)+6*U*B*(M-j)+3*B*B*(R-M);return Math.atan2(ee,W)}}function S(k){return k*k}function T(k){return 2*k*(1-k)}function I(k){return(1-k)*(1-k)}function F(k,P,A,j,H,M){return function(O){var R=S(O),B=T(O),U=I(O);return{x:H*R+A*B+k*U,y:M*R+j*B+P*U}}}function $(k,P,A,j,H,M){return function(O){var R=1-O,B=2*R*(A-k)+2*O*(H-A),U=2*R*(j-P)+2*O*(M-j);return Math.atan2(U,B)}}function G(k,P,A){var j={x:P,y:A},H,M=0,O;for(O=1;O<=100;O+=1)H=k(O/100),M+=g(j.x,j.y,H.x,H.y),j=H;return M}function ne(k,P){for(var A=0,j=0,H=k.iterator,M={x:k.x,y:k.y},O,R,B=.01,U=k.angleFinder,W;j<P&&B>1e-4;)O=H(A),W=A,R=g(M.x,M.y,O.x,O.y),R+j>P?(A-=B,B/=2):(M=O,A+=B,j+=R);return O.angle=U(W),O}function Y(k){for(var P=0,A=k.length,j,H=0,M=0,O=0,R=0,B=[],U,W,ee,re=0;re<A;re++){switch(j=k[re],W={x:H,y:M,command:j[0]},j[0]){case"M":W.length=0,O=H=j[1],R=M=j[2];break;case"L":W.length=g(H,M,j[1],j[2]),H=j[1],M=j[2];break;case"C":U=C(H,M,j[1],j[2],j[3],j[4],j[5],j[6]),ee=_(H,M,j[1],j[2],j[3],j[4],j[5],j[6]),W.iterator=U,W.angleFinder=ee,W.length=G(U,H,M),H=j[5],M=j[6];break;case"Q":U=F(H,M,j[1],j[2],j[3],j[4]),ee=$(H,M,j[1],j[2],j[3],j[4]),W.iterator=U,W.angleFinder=ee,W.length=G(U,H,M),H=j[3],M=j[4];break;case"Z":case"z":W.destX=O,W.destY=R,W.length=g(H,M,O,R),H=O,M=R;break}P+=W.length,B.push(W)}return B.push({length:P,x:H,y:M}),B}function Q(k,P,A){A||(A=Y(k));for(var j=0;P-A[j].length>0&&j<A.length-2;)P-=A[j].length,j++;var H=A[j],M=P/H.length,O=H.command,R=k[j],B;switch(O){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return B=new t.Point(H.x,H.y).lerp(new t.Point(H.destX,H.destY),M),B.angle=Math.atan2(H.destY-H.y,H.destX-H.x),B;case"L":return B=new t.Point(H.x,H.y).lerp(new t.Point(R[1],R[2]),M),B.angle=Math.atan2(R[2]-H.y,R[1]-H.x),B;case"C":return ne(H,P);case"Q":return ne(H,P)}}function Z(k){var P=[],A=[],j,H,M=t.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",R="("+O+")"+t.commaWsp,B="([01])"+t.commaWsp+"?",U=R+"?"+R+"?"+R+B+B+R+"?("+O+")",W=new RegExp(U,"g"),ee,re,ue;if(!k||!k.match)return P;ue=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var X=0,z,K=ue.length;X<K;X++){j=ue[X],re=j.slice(1).trim(),A.length=0;var te=j.charAt(0);if(z=[te],te.toLowerCase()==="a")for(var N;N=W.exec(re);)for(var q=1;q<N.length;q++)A.push(N[q]);else for(;ee=M.exec(re);)A.push(ee[0]);for(var q=0,le=A.length;q<le;q++)H=parseFloat(A[q]),isNaN(H)||z.push(H);var xe=o[te.toLowerCase()],me=c[te]||te;if(z.length-1>xe)for(var J=1,ge=z.length;J<ge;J+=xe)P.push([te].concat(z.slice(J,J+xe))),te=me;else P.push(z)}return P}function ie(k,P){var A=[],j,H=new t.Point(k[0].x,k[0].y),M=new t.Point(k[1].x,k[1].y),O=k.length,R=1,B=0,U=O>2;for(P=P||0,U&&(R=k[2].x<M.x?-1:k[2].x===M.x?0:1,B=k[2].y<M.y?-1:k[2].y===M.y?0:1),A.push(["M",H.x-R*P,H.y-B*P]),j=1;j<O;j++){if(!H.eq(M)){var W=H.midPointFrom(M);A.push(["Q",H.x,H.y,W.x,W.y])}H=k[j],j+1<k.length&&(M=k[j+1])}return U&&(R=H.x>k[j-2].x?1:H.x===k[j-2].x?0:-1,B=H.y>k[j-2].y?1:H.y===k[j-2].y?0:-1),A.push(["L",H.x+R*P,H.y+B*P]),A}function V(k,P,A){return A&&(P=t.util.multiplyTransformMatrices(P,[1,0,0,1,-A.x,-A.y])),k.map(function(j){for(var H=j.slice(0),M={},O=1;O<j.length-1;O+=2)M.x=j[O],M.y=j[O+1],M=t.util.transformPoint(M,P),H[O]=M.x,H[O+1]=M.y;return H})}t.util.joinPath=function(k){return k.map(function(P){return P.join(" ")}).join(" ")},t.util.parsePath=Z,t.util.makePathSimpler=m,t.util.getSmoothPathFromPoints=ie,t.util.getPathSegmentsInfo=Y,t.util.getBoundsOfCurve=u,t.util.getPointOnPath=Q,t.util.transformPath=V}(),function(){var a=Array.prototype.slice;function o(u,p){for(var m=a.call(arguments,2),g=[],v=0,y=u.length;v<y;v++)g[v]=m.length?u[v][p].apply(u[v],m):u[v][p].call(u[v]);return g}function c(u,p){return h(u,p,function(m,g){return m>=g})}function f(u,p){return h(u,p,function(m,g){return m<g})}function l(u,p){for(var m=u.length;m--;)u[m]=p;return u}function h(u,p,m){if(!(!u||u.length===0)){var g=u.length-1,v=p?u[g][p]:u[g];if(p)for(;g--;)m(u[g][p],v)&&(v=u[g][p]);else for(;g--;)m(u[g],v)&&(v=u[g]);return v}}t.util.array={fill:l,invoke:o,min:f,max:c}}(),function(){function a(c,f,l){if(l)if(!t.isLikelyNode&&f instanceof Element)c=f;else if(f instanceof Array){c=[];for(var h=0,u=f.length;h<u;h++)c[h]=a({},f[h],l)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?c[p]=null:f.hasOwnProperty(p)&&(c[p]=a({},f[p],l));else c=f;else for(var p in f)c[p]=f[p];return c}function o(c,f){return a({},c,f)}t.util.object={extend:a,clone:o},t.util.object.extend(t.util,t.Observable)}(),function(){function a(h){return h.replace(/-+(.)?/g,function(u,p){return p?p.toUpperCase():""})}function o(h,u){return h.charAt(0).toUpperCase()+(u?h.slice(1):h.slice(1).toLowerCase())}function c(h){return h.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(h){var u=0,p,m=[];for(u=0,p;u<h.length;u++)(p=l(h,u))!==!1&&m.push(p);return m}function l(h,u){var p=h.charCodeAt(u);if(isNaN(p))return"";if(p<55296||p>57343)return h.charAt(u);if(55296<=p&&p<=56319){if(h.length<=u+1)throw"High surrogate without following low surrogate";var m=h.charCodeAt(u+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return h.charAt(u)+h.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var g=h.charCodeAt(u-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:a,capitalize:o,escapeXml:c,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,o=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(y){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var x=m[y].apply(this,arguments);if(this.constructor.superclass=b,y!=="initialize")return x}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function h(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function u(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,y=m.length;v<y;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=o),g.prototype.constructor=g,g.prototype.callSuper=h,g}t.util.createClass=u}(),function(){var a=!!t.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];t.util.addListener=function(f,l,h,u){f&&f.addEventListener(l,h,a?!1:u)},t.util.removeListener=function(f,l,h,u){f&&f.removeEventListener(l,h,a?!1:u)};function c(f){var l=f.changedTouches;return l&&l[0]?l[0]:f}t.util.getPointer=function(f){var l=f.target,h=t.util.getScrollLeftTop(l),u=c(f);return{x:u.clientX+h.left,y:u.clientY+h.top}},t.util.isTouchEvent=function(f){return o.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(u,p){var m=u.style;if(!m)return u;if(typeof p=="string")return u.style.cssText+=";"+p,p.indexOf("opacity")>-1?h(u,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):u;for(var g in p)if(g==="opacity")h(u,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return u}var o=t.document.createElement("div"),c=typeof o.style.opacity=="string",f=typeof o.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,h=function(u){return u};c?h=function(u,p){return u.style.opacity=p,u}:f&&(h=function(u,p){var m=u.style;return u.currentStyle&&!u.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",u}),t.util.setStyle=a}(),function(){var a=Array.prototype.slice;function o(x){return typeof x=="string"?t.document.getElementById(x):x}var c,f=function(x){return a.call(x,0)};try{c=f(t.document.childNodes)instanceof Array}catch{}c||(f=function(x){for(var C=new Array(x.length),_=x.length;_--;)C[_]=x[_];return C});function l(x,C){var _=t.document.createElement(x);for(var S in C)S==="class"?_.className=C[S]:S==="for"?_.htmlFor=C[S]:_.setAttribute(S,C[S]);return _}function h(x,C){x&&(" "+x.className+" ").indexOf(" "+C+" ")===-1&&(x.className+=(x.className?" ":"")+C)}function u(x,C,_){return typeof C=="string"&&(C=l(C,_)),x.parentNode&&x.parentNode.replaceChild(C,x),C.appendChild(x),C}function p(x){for(var C=0,_=0,S=t.document.documentElement,T=t.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===t.document?(C=T.scrollLeft||S.scrollLeft||0,_=T.scrollTop||S.scrollTop||0):(C+=x.scrollLeft||0,_+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:C,top:_}}function m(x){var C,_=x&&x.ownerDocument,S={left:0,top:0},T={left:0,top:0},I,F={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!_)return T;for(var $ in F)T[F[$]]+=parseInt(g(x,$),10)||0;return C=_.documentElement,typeof x.getBoundingClientRect<"u"&&(S=x.getBoundingClientRect()),I=p(x),{left:S.left+I.left-(C.clientLeft||0)+T.left,top:S.top+I.top-(C.clientTop||0)+T.top}}var g;t.document.defaultView&&t.document.defaultView.getComputedStyle?g=function(x,C){var _=t.document.defaultView.getComputedStyle(x,null);return _?_[C]:void 0}:g=function(x,C){var _=x.style[C];return!_&&x.currentStyle&&(_=x.currentStyle[C]),_},function(){var x=t.document.documentElement.style,C="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function _(T){return typeof T.onselectstart<"u"&&(T.onselectstart=t.util.falseFunction),C?T.style[C]="none":typeof T.unselectable=="string"&&(T.unselectable="on"),T}function S(T){return typeof T.onselectstart<"u"&&(T.onselectstart=null),C?T.style[C]="":typeof T.unselectable=="string"&&(T.unselectable=""),T}t.util.makeElementUnselectable=_,t.util.makeElementSelectable=S}();function v(x){var C=t.jsdomImplForWrapper(x);return C._canvas||C._image}function y(x){if(t.isLikelyNode){var C=t.jsdomImplForWrapper(x);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(x,C){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=C}t.util.setImageSmoothing=b,t.util.getById=o,t.util.toArray=f,t.util.addClass=h,t.util.makeElement=l,t.util.wrapElement=u,t.util.getScrollLeftTop=p,t.util.getElementOffset=m,t.util.getNodeCanvas=v,t.util.cleanUpJsdomNode=y}(),function(){function a(f,l){return f+(/\?/.test(f)?"&":"?")+l}function o(){}function c(f,l){l||(l={});var h=l.method?l.method.toUpperCase():"GET",u=l.onComplete||function(){},p=new t.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(u(p),p.onreadystatechange=o)},h==="GET"&&(m=null,typeof l.parameters=="string"&&(f=a(f,l.parameters))),p.open(h,f,!0),(h==="POST"||h==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var a=t.util.object.extend,o=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(y){y.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var y=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return y.forEach(function(b){b.cancel()}),y},cancelByTarget:function(v){var y=this.findAnimationsByTarget(v);return y.forEach(function(b){b.cancel()}),y},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(y){return y.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(y){return y.target===v}):[]}});function f(){return!1}function l(v,y,b,x){return-b*Math.cos(v/x*(Math.PI/2))+b+y}function h(v){v||(v={});var y=!1,b,x=function(){var C=t.runningAnimations.indexOf(b);return C>-1&&t.runningAnimations.splice(C,1)[0]};return b=a(o(v),{cancel:function(){return y=!0,x()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(b),m(function(C){var _=C||+new Date,S=v.duration||500,T=_+S,I,F=v.onChange||f,$=v.abort||f,G=v.onComplete||f,ne=v.easing||l,Y="startValue"in v?v.startValue.length>0:!1,Q="startValue"in v?v.startValue:0,Z="endValue"in v?v.endValue:100,ie=v.byValue||(Y?Q.map(function(V,k){return Z[k]-Q[k]}):Z-Q);v.onStart&&v.onStart(),function V(k){I=k||+new Date;var P=I>T?S:I-_,A=P/S,j=Y?Q.map(function(M,O){return ne(P,Q[O],ie[O],S)}):ne(P,Q,ie,S),H=Math.abs(Y?(j[0]-Q[0])/ie[0]:(j-Q)/ie);if(b.currentValue=Y?j.slice():j,b.completionRate=H,b.durationRate=A,!y){if($(j,H,A)){x();return}if(I>T){b.currentValue=Y?Z.slice():Z,b.completionRate=1,b.durationRate=1,F(Y?Z.slice():Z,1,1),G(Z,1,1),x();return}else F(j,H,A),m(V)}}(_)}),b.cancel}var u=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(v){return t.window.setTimeout(v,1e3/60)},p=t.window.cancelAnimationFrame||t.window.clearTimeout;function m(){return u.apply(t.window,arguments)}function g(){return p.apply(t.window,arguments)}t.util.animate=h,t.util.requestAnimFrame=m,t.util.cancelAnimFrame=g,t.runningAnimations=c}(),function(){function a(c,f,l){var h="rgba("+parseInt(c[0]+l*(f[0]-c[0]),10)+","+parseInt(c[1]+l*(f[1]-c[1]),10)+","+parseInt(c[2]+l*(f[2]-c[2]),10);return h+=","+(c&&f?parseFloat(c[3]+l*(f[3]-c[3])):1),h+=")",h}function o(c,f,l,h){var u=new t.Color(c).getSource(),p=new t.Color(f).getSource(),m=h.onComplete,g=h.onChange;return h=h||{},t.util.animate(t.util.object.extend(h,{duration:l||500,startValue:u,endValue:p,byValue:p,easing:function(v,y,b,x){var C=h.colorEasing?h.colorEasing(v,x):1-Math.cos(v/x*(Math.PI/2));return a(y,b,C)},onComplete:function(v,y,b){if(m)return m(a(p,p,0),y,b)},onChange:function(v,y,b){if(g){if(Array.isArray(v))return g(a(v,v,0),y,b);g(v,y,b)}}}))}t.util.animateColor=o}(),function(){function a(k,P,A,j){return k<Math.abs(P)?(k=P,j=A/4):P===0&&k===0?j=A/(2*Math.PI)*Math.asin(1):j=A/(2*Math.PI)*Math.asin(P/k),{a:k,c:P,p:A,s:j}}function o(k,P,A){return k.a*Math.pow(2,10*(P-=1))*Math.sin((P*A-k.s)*(2*Math.PI)/k.p)}function c(k,P,A,j){return A*((k=k/j-1)*k*k+1)+P}function f(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k+P:A/2*((k-=2)*k*k+2)+P}function l(k,P,A,j){return A*(k/=j)*k*k*k+P}function h(k,P,A,j){return-A*((k=k/j-1)*k*k*k-1)+P}function u(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k*k+P:-A/2*((k-=2)*k*k*k-2)+P}function p(k,P,A,j){return A*(k/=j)*k*k*k*k+P}function m(k,P,A,j){return A*((k=k/j-1)*k*k*k*k+1)+P}function g(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k*k*k+P:A/2*((k-=2)*k*k*k*k+2)+P}function v(k,P,A,j){return-A*Math.cos(k/j*(Math.PI/2))+A+P}function y(k,P,A,j){return A*Math.sin(k/j*(Math.PI/2))+P}function b(k,P,A,j){return-A/2*(Math.cos(Math.PI*k/j)-1)+P}function x(k,P,A,j){return k===0?P:A*Math.pow(2,10*(k/j-1))+P}function C(k,P,A,j){return k===j?P+A:A*(-Math.pow(2,-10*k/j)+1)+P}function _(k,P,A,j){return k===0?P:k===j?P+A:(k/=j/2,k<1?A/2*Math.pow(2,10*(k-1))+P:A/2*(-Math.pow(2,-10*--k)+2)+P)}function S(k,P,A,j){return-A*(Math.sqrt(1-(k/=j)*k)-1)+P}function T(k,P,A,j){return A*Math.sqrt(1-(k=k/j-1)*k)+P}function I(k,P,A,j){return k/=j/2,k<1?-A/2*(Math.sqrt(1-k*k)-1)+P:A/2*(Math.sqrt(1-(k-=2)*k)+1)+P}function F(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j,k===1)return P+A;M||(M=j*.3);var R=a(O,A,M,H);return-o(R,k,j)+P}function $(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j,k===1)return P+A;M||(M=j*.3);var R=a(O,A,M,H);return R.a*Math.pow(2,-10*k)*Math.sin((k*j-R.s)*(2*Math.PI)/R.p)+R.c+P}function G(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j/2,k===2)return P+A;M||(M=j*(.3*1.5));var R=a(O,A,M,H);return k<1?-.5*o(R,k,j)+P:R.a*Math.pow(2,-10*(k-=1))*Math.sin((k*j-R.s)*(2*Math.PI)/R.p)*.5+R.c+P}function ne(k,P,A,j,H){return H===void 0&&(H=1.70158),A*(k/=j)*k*((H+1)*k-H)+P}function Y(k,P,A,j,H){return H===void 0&&(H=1.70158),A*((k=k/j-1)*k*((H+1)*k+H)+1)+P}function Q(k,P,A,j,H){return H===void 0&&(H=1.70158),k/=j/2,k<1?A/2*(k*k*(((H*=1.525)+1)*k-H))+P:A/2*((k-=2)*k*(((H*=1.525)+1)*k+H)+2)+P}function Z(k,P,A,j){return A-ie(j-k,0,A,j)+P}function ie(k,P,A,j){return(k/=j)<1/2.75?A*(7.5625*k*k)+P:k<2/2.75?A*(7.5625*(k-=1.5/2.75)*k+.75)+P:k<2.5/2.75?A*(7.5625*(k-=2.25/2.75)*k+.9375)+P:A*(7.5625*(k-=2.625/2.75)*k+.984375)+P}function V(k,P,A,j){return k<j/2?Z(k*2,0,A,j)*.5+P:ie(k*2-j,0,A,j)*.5+A*.5+P}t.util.ease={easeInQuad:function(k,P,A,j){return A*(k/=j)*k+P},easeOutQuad:function(k,P,A,j){return-A*(k/=j)*(k-2)+P},easeInOutQuad:function(k,P,A,j){return k/=j/2,k<1?A/2*k*k+P:-A/2*(--k*(k-2)-1)+P},easeInCubic:function(k,P,A,j){return A*(k/=j)*k*k+P},easeOutCubic:c,easeInOutCubic:f,easeInQuart:l,easeOutQuart:h,easeInOutQuart:u,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:y,easeInOutSine:b,easeInExpo:x,easeOutExpo:C,easeInOutExpo:_,easeInCirc:S,easeOutCirc:T,easeInOutCirc:I,easeInElastic:F,easeOutElastic:$,easeInOutElastic:G,easeInBack:ne,easeOutBack:Y,easeInOutBack:Q,easeInBounce:Z,easeOutBounce:ie,easeInOutBounce:V}}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.util.object.clone,l=o.util.toFixed,h=o.util.parseUnit,u=o.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",C="clip-path";o.svgValidTagNamesRegEx=T(p),o.svgViewBoxElementsRegEx=T(m),o.svgInvalidAncestorsRegEx=T(g),o.svgValidParentsRegEx=T(v),o.cssRules={},o.gradientDefs={},o.clipPaths={};function _(M){return M in y?y[M]:M}function S(M,O,R,B){var U=Array.isArray(O),W;if((M==="fill"||M==="stroke")&&O==="none")O="";else{if(M==="strokeUniform")return O==="non-scaling-stroke";if(M==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(M==="transformMatrix")R&&R.transformMatrix?O=u(R.transformMatrix,o.parseTransformAttribute(O)):O=o.parseTransformAttribute(O);else if(M==="visible")O=O!=="none"&&O!=="hidden",R&&R.visible===!1&&(O=!1);else if(M==="opacity")O=parseFloat(O),R&&typeof R.opacity<"u"&&(O*=R.opacity);else if(M==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(M==="charSpacing")W=h(O,B)/B*1e3;else if(M==="paintFirst"){var ee=O.indexOf("fill"),re=O.indexOf("stroke"),O="fill";(ee>-1&&re>-1&&re<ee||ee===-1&&re>-1)&&(O="stroke")}else{if(M==="href"||M==="xlink:href"||M==="font")return O;if(M==="imageSmoothing")return O==="optimizeQuality";W=U?O.map(h):h(O,B)}}return!U&&isNaN(W)?O:W}function T(M){return new RegExp("^("+M.join("|")+")\\b","i")}function I(M){for(var O in b)if(!(typeof M[b[O]]>"u"||M[O]==="")){if(typeof M[O]>"u"){if(!o.Object.prototype[O])continue;M[O]=o.Object.prototype[O]}if(M[O].indexOf("url(")!==0){var R=new o.Color(M[O]);M[O]=R.setAlpha(l(R.getAlpha()*M[b[O]],2)).toRgba()}}return M}function F(M,O){var R,B=[],U,W,ee;for(W=0,ee=O.length;W<ee;W++)R=O[W],U=M.getElementsByTagName(R),B=B.concat(Array.prototype.slice.call(U));return B}o.parseTransformAttribute=function(){function M(J,ge){var we=o.util.cos(ge[0]),Se=o.util.sin(ge[0]),Le=0,Ae=0;ge.length===3&&(Le=ge[1],Ae=ge[2]),J[0]=we,J[1]=Se,J[2]=-Se,J[3]=we,J[4]=Le-(we*Le-Se*Ae),J[5]=Ae-(Se*Le+we*Ae)}function O(J,ge){var we=ge[0],Se=ge.length===2?ge[1]:ge[0];J[0]=we,J[3]=Se}function R(J,ge,we){J[we]=Math.tan(o.util.degreesToRadians(ge[0]))}function B(J,ge){J[4]=ge[0],ge.length===2&&(J[5]=ge[1])}var U=o.iMatrix,W=o.reNum,ee=o.commaWsp,re="(?:(skewX)\\s*\\(\\s*("+W+")\\s*\\))",ue="(?:(skewY)\\s*\\(\\s*("+W+")\\s*\\))",X="(?:(rotate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+")"+ee+"("+W+"))?\\s*\\))",z="(?:(scale)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))",K="(?:(translate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")\\s*\\))",N="(?:"+te+"|"+K+"|"+z+"|"+X+"|"+re+"|"+ue+")",q="(?:"+N+"(?:"+ee+"*"+N+")*)",le="^\\s*(?:"+q+"?)\\s*$",xe=new RegExp(le),me=new RegExp(N,"g");return function(J){var ge=U.concat(),we=[];if(!J||J&&!xe.test(J))return ge;J.replace(me,function(Le){var Ae=new RegExp(N).exec(Le).filter(function(Ni){return!!Ni}),Pt=Ae[1],Je=Ae.slice(2).map(parseFloat);switch(Pt){case"translate":B(ge,Je);break;case"rotate":Je[0]=o.util.degreesToRadians(Je[0]),M(ge,Je);break;case"scale":O(ge,Je);break;case"skewX":R(ge,Je,2);break;case"skewY":R(ge,Je,1);break;case"matrix":ge=Je;break}we.push(ge.concat()),ge=U.concat()});for(var Se=we[0];we.length>1;)we.shift(),Se=o.util.multiplyTransformMatrices(Se,we[0]);return Se}}();function $(M,O){var R,B;M.replace(/;\s*$/,"").split(";").forEach(function(U){var W=U.split(":");R=W[0].trim().toLowerCase(),B=W[1].trim(),O[R]=B})}function G(M,O){var R,B;for(var U in M)typeof M[U]>"u"||(R=U.toLowerCase(),B=M[U],O[R]=B)}function ne(M,O){var R={};for(var B in o.cssRules[O])if(Y(M,B.split(" ")))for(var U in o.cssRules[O][B])R[U]=o.cssRules[O][B][U];return R}function Y(M,O){var R,B=!0;return R=Z(M,O.pop()),R&&O.length&&(B=Q(M,O)),R&&B&&O.length===0}function Q(M,O){for(var R,B=!0;M.parentNode&&M.parentNode.nodeType===1&&O.length;)B&&(R=O.pop()),M=M.parentNode,B=Z(M,R);return O.length===0}function Z(M,O){var R=M.nodeName,B=M.getAttribute("class"),U=M.getAttribute("id"),W,ee;if(W=new RegExp("^"+R,"i"),O=O.replace(W,""),U&&O.length&&(W=new RegExp("#"+U+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"")),B&&O.length)for(B=B.split(" "),ee=B.length;ee--;)W=new RegExp("\\."+B[ee]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"");return O.length===0}function ie(M,O){var R;if(M.getElementById&&(R=M.getElementById(O)),R)return R;var B,U,W,ee=M.getElementsByTagName("*");for(U=0,W=ee.length;U<W;U++)if(B=ee[U],O===B.getAttribute("id"))return B}function V(M){for(var O=F(M,["use","svg:use"]),R=0;O.length&&R<O.length;){var B=O[R],U=B.getAttribute("xlink:href")||B.getAttribute("href");if(U===null)return;var W=U.slice(1),ee=B.getAttribute("x")||0,re=B.getAttribute("y")||0,ue=ie(M,W).cloneNode(!0),X=(ue.getAttribute("transform")||"")+" translate("+ee+", "+re+")",z,K=O.length,te,N,q,le,xe=o.svgNS;if(P(ue),/^svg$/i.test(ue.nodeName)){var me=ue.ownerDocument.createElementNS(xe,"g");for(N=0,q=ue.attributes,le=q.length;N<le;N++)te=q.item(N),me.setAttributeNS(xe,te.nodeName,te.nodeValue);for(;ue.firstChild;)me.appendChild(ue.firstChild);ue=me}for(N=0,q=B.attributes,le=q.length;N<le;N++)te=q.item(N),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?X=te.nodeValue+" "+X:ue.setAttribute(te.nodeName,te.nodeValue));ue.setAttribute("transform",X),ue.setAttribute("instantiated_by_use","1"),ue.removeAttribute("id"),z=B.parentNode,z.replaceChild(ue,B),O.length===K&&R++}}var k=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function P(M){if(!o.svgViewBoxElementsRegEx.test(M.nodeName))return{};var O=M.getAttribute("viewBox"),R=1,B=1,U=0,W=0,ee,re,ue,X,z=M.getAttribute("width"),K=M.getAttribute("height"),te=M.getAttribute("x")||0,N=M.getAttribute("y")||0,q=M.getAttribute("preserveAspectRatio")||"",le=!O||!(O=O.match(k)),xe=!z||!K||z==="100%"||K==="100%",me=le&&xe,J={},ge="",we=0,Se=0;if(J.width=0,J.height=0,J.toBeParsed=me,le&&(te||N)&&M.parentNode&&M.parentNode.nodeName!=="#document"&&(ge=" translate("+h(te)+" "+h(N)+") ",ue=(M.getAttribute("transform")||"")+ge,M.setAttribute("transform",ue),M.removeAttribute("x"),M.removeAttribute("y")),me)return J;if(le)return J.width=h(z),J.height=h(K),J;if(U=-parseFloat(O[1]),W=-parseFloat(O[2]),ee=parseFloat(O[3]),re=parseFloat(O[4]),J.minX=U,J.minY=W,J.viewBoxWidth=ee,J.viewBoxHeight=re,xe?(J.width=ee,J.height=re):(J.width=h(z),J.height=h(K),R=J.width/ee,B=J.height/re),q=o.util.parsePreserveAspectRatioAttribute(q),q.alignX!=="none"&&(q.meetOrSlice==="meet"&&(B=R=R>B?B:R),q.meetOrSlice==="slice"&&(B=R=R>B?R:B),we=J.width-ee*R,Se=J.height-re*R,q.alignX==="Mid"&&(we/=2),q.alignY==="Mid"&&(Se/=2),q.alignX==="Min"&&(we=0),q.alignY==="Min"&&(Se=0)),R===1&&B===1&&U===0&&W===0&&te===0&&N===0)return J;if((te||N)&&M.parentNode.nodeName!=="#document"&&(ge=" translate("+h(te)+" "+h(N)+") "),ue=ge+" matrix("+R+" 0 0 "+B+" "+(U*R+we)+" "+(W*B+Se)+") ",M.nodeName==="svg"){for(X=M.ownerDocument.createElementNS(o.svgNS,"g");M.firstChild;)X.appendChild(M.firstChild);M.appendChild(X)}else X=M,X.removeAttribute("x"),X.removeAttribute("y"),ue=X.getAttribute("transform")+ue;return X.setAttribute("transform",ue),J}function A(M,O){for(;M&&(M=M.parentNode);)if(M.nodeName&&O.test(M.nodeName.replace("svg:",""))&&!M.getAttribute("instantiated_by_use"))return!0;return!1}o.parseSVGDocument=function(M,O,R,B){if(M){V(M);var U=o.Object.__uid++,W,ee,re=P(M),ue=o.util.toArray(M.getElementsByTagName("*"));if(re.crossOrigin=B&&B.crossOrigin,re.svgUid=U,ue.length===0&&o.isLikelyNode){ue=M.selectNodes('//*[name(.)!="svg"]');var X=[];for(W=0,ee=ue.length;W<ee;W++)X[W]=ue[W];ue=X}var z=ue.filter(function(te){return P(te),o.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!A(te,o.svgInvalidAncestorsRegEx)});if(!z||z&&!z.length){O&&O([],{});return}var K={};ue.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var N=te.getAttribute("id");K[N]=o.util.toArray(te.getElementsByTagName("*")).filter(function(q){return o.svgValidTagNamesRegEx.test(q.nodeName.replace("svg:",""))})}),o.gradientDefs[U]=o.getGradientDefs(M),o.cssRules[U]=o.getCSSRules(M),o.clipPaths[U]=K,o.parseElements(z,function(te,N){O&&(O(te,re,N,ue),delete o.gradientDefs[U],delete o.cssRules[U],delete o.clipPaths[U])},f(re),R,B)}};function j(M,O){var R=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],B="xlink:href",U=O.getAttribute(B).slice(1),W=ie(M,U);if(W&&W.getAttribute(B)&&j(M,W),R.forEach(function(re){W&&!O.hasAttribute(re)&&W.hasAttribute(re)&&O.setAttribute(re,W.getAttribute(re))}),!O.children.length)for(var ee=W.cloneNode(!0);ee.firstChild;)O.appendChild(ee.firstChild);O.removeAttribute(B)}var H=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");c(o,{parseFontDeclaration:function(M,O){var R=M.match(H);if(R){var B=R[1],U=R[3],W=R[4],ee=R[5],re=R[6];B&&(O.fontStyle=B),U&&(O.fontWeight=isNaN(parseFloat(U))?U:parseFloat(U)),W&&(O.fontSize=h(W)),re&&(O.fontFamily=re),ee&&(O.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(M){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],R=F(M,O),B,U=0,W={};for(U=R.length;U--;)B=R[U],B.getAttribute("xlink:href")&&j(M,B),W[B.getAttribute("id")]=B;return W},parseAttributes:function(M,O,R){if(M){var B,U={},W,ee;typeof R>"u"&&(R=M.getAttribute("svgUid")),M.parentNode&&o.svgValidParentsRegEx.test(M.parentNode.nodeName)&&(U=o.parseAttributes(M.parentNode,O,R));var re=O.reduce(function(q,le){return B=M.getAttribute(le),B&&(q[le]=B),q},{}),ue=c(ne(M,R),o.parseStyleAttribute(M));re=c(re,ue),ue[C]&&M.setAttribute(C,ue[C]),W=ee=U.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,re[x]&&(re[x]=W=h(re[x],ee));var X,z,K={};for(var te in re)X=_(te),z=S(X,re[te],U,W),K[X]=z;K&&K.font&&o.parseFontDeclaration(K.font,K);var N=c(U,K);return o.svgValidParentsRegEx.test(M.nodeName)?N:I(N)}},parseElements:function(M,O,R,B,U){new o.ElementsParser(M,O,R,B,U).parse()},parseStyleAttribute:function(M){var O={},R=M.getAttribute("style");return R&&(typeof R=="string"?$(R,O):G(R,O)),O},parsePointsAttribute:function(M){if(!M)return null;M=M.replace(/,/g," ").trim(),M=M.split(/\s+/);var O=[],R,B;for(R=0,B=M.length;R<B;R+=2)O.push({x:parseFloat(M[R]),y:parseFloat(M[R+1])});return O},getCSSRules:function(M){var O=M.getElementsByTagName("style"),R,B,U={},W;for(R=0,B=O.length;R<B;R++){var ee=O[R].textContent;ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(W=ee.split("}"),W=W.filter(function(re){return re.trim()}),W.forEach(function(re){var ue=re.split("{"),X={},z=ue[1].trim(),K=z.split(";").filter(function(le){return le.trim()});for(R=0,B=K.length;R<B;R++){var te=K[R].split(":"),N=te[0].trim(),q=te[1].trim();X[N]=q}re=ue[0].trim(),re.split(",").forEach(function(le){le=le.replace(/^svg/i,"").trim(),le!==""&&(U[le]?o.util.object.extend(U[le],X):U[le]=o.util.object.clone(X))})}))}return U},loadSVGFromURL:function(M,O,R,B){M=M.replace(/^\n\s*/,"").trim(),new o.util.request(M,{method:"get",onComplete:U});function U(W){var ee=W.responseXML;if(!ee||!ee.documentElement)return O&&O(null),!1;o.parseSVGDocument(ee.documentElement,function(re,ue,X,z){O&&O(re,ue,X,z)},R,B)}},loadSVGFromString:function(M,O,R,B){var U=new o.window.DOMParser,W=U.parseFromString(M.trim(),"text/xml");o.parseSVGDocument(W.documentElement,function(ee,re,ue,X){O(ee,re,ue,X)},R,B)}})}(e),t.ElementsParser=function(a,o,c,f,l,h){this.elements=a,this.callback=o,this.options=c,this.reviver=f,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=h},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var o=this;this.elements.forEach(function(c,f){c.setAttribute("svgUid",o.svgUid),o.createObject(c,f)})},a.findTag=function(o){return t[t.util.string.capitalize(o.tagName.replace("svg:",""))]},a.createObject=function(o,c){var f=this.findTag(o);if(f&&f.fromElement)try{f.fromElement(o,this.createCallback(c,o),this.options)}catch(l){t.log(l)}else this.checkIfDone()},a.createCallback=function(o,c){var f=this;return function(l){var h;f.resolveGradient(l,c,"fill"),f.resolveGradient(l,c,"stroke"),l instanceof t.Image&&l._originalElement&&(h=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(h),f.resolveClipPath(l,c),f.reviver&&f.reviver(c,l),f.instances[o]=l,f.checkIfDone()}},a.extractPropertyDefinition=function(o,c,f){var l=o[c],h=this.regexUrl;if(h.test(l)){h.lastIndex=0;var u=h.exec(l)[1];return h.lastIndex=0,t[f][this.svgUid][u]}},a.resolveGradient=function(o,c,f){var l=this.extractPropertyDefinition(o,f,"gradientDefs");if(l){var h=c.getAttribute(f+"-opacity"),u=t.Gradient.fromElement(l,o,h,this.options);o.set(f,u)}},a.createClipPathCallback=function(o,c){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,c.push(f)}},a.resolveClipPath=function(o,c){var f=this.extractPropertyDefinition(o,"clipPath","clipPaths"),l,h,u,p,m,g;if(f){p=[],u=t.util.invertTransform(o.calcTransformMatrix());for(var v=f[0].parentNode,y=c;y.parentNode&&y.getAttribute("clip-path")!==o.clipPath;)y=y.parentNode;y.parentNode.appendChild(v);for(var b=0;b<f.length;b++)l=f[b],h=this.findTag(l),h.fromElement(l,this.createClipPathCallback(o,p),this.options);p.length===1?f=p[0]:f=new t.Group(p),m=t.util.multiplyTransformMatrices(u,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,y);var g=t.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),o.clipPath=f}else delete o.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(o){return o!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(a){var o=a.fabric||(a.fabric={});if(o.Point){o.warn("fabric.Point is already defined");return}o.Point=c;function c(f,l){this.x=f,this.y=l}c.prototype={type:"point",constructor:c,add:function(f){return new c(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new c(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new c(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new c(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new c(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new c(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(f.x-this.x)*l,this.y+(f.y-this.y)*l)},distanceFrom:function(f){var l=this.x-f.x,h=this.y-f.y;return Math.sqrt(l*l+h*h)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new c(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new c(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,l){return this.x=f,this.y=l,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var l=this.x,h=this.y;this.x=f.x,this.y=f.y,f.x=l,f.y=h},clone:function(){return new c(this.x,this.y)}}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Intersection){o.warn("fabric.Intersection is already defined");return}function c(f){this.status=f,this.points=[]}o.Intersection=c,o.Intersection.prototype={constructor:c,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},o.Intersection.intersectLineLine=function(f,l,h,u){var p,m=(u.x-h.x)*(f.y-h.y)-(u.y-h.y)*(f.x-h.x),g=(l.x-f.x)*(f.y-h.y)-(l.y-f.y)*(f.x-h.x),v=(u.y-h.y)*(l.x-f.x)-(u.x-h.x)*(l.y-f.y);if(v!==0){var y=m/v,b=g/v;0<=y&&y<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new o.Point(f.x+y*(l.x-f.x),f.y+y*(l.y-f.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},o.Intersection.intersectLinePolygon=function(f,l,h){var u=new c,p=h.length,m,g,v,y;for(y=0;y<p;y++)m=h[y],g=h[(y+1)%p],v=c.intersectLineLine(f,l,m,g),u.appendPoints(v.points);return u.points.length>0&&(u.status="Intersection"),u},o.Intersection.intersectPolygonPolygon=function(f,l){var h=new c,u=f.length,p;for(p=0;p<u;p++){var m=f[p],g=f[(p+1)%u],v=c.intersectLinePolygon(m,g,l);h.appendPoints(v.points)}return h.points.length>0&&(h.status="Intersection"),h},o.Intersection.intersectPolygonRectangle=function(f,l,h){var u=l.min(h),p=l.max(h),m=new o.Point(p.x,u.y),g=new o.Point(u.x,p.y),v=c.intersectLinePolygon(u,m,f),y=c.intersectLinePolygon(m,p,f),b=c.intersectLinePolygon(p,g,f),x=c.intersectLinePolygon(g,u,f),C=new c;return C.appendPoints(v.points),C.appendPoints(y.points),C.appendPoints(b.points),C.appendPoints(x.points),C.points.length>0&&(C.status="Intersection"),C}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Color){o.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}o.Color=c,o.Color.prototype={_tryParsingColor:function(l){var h;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(h=[255,255,255,0]),h||(h=c.sourceFromHex(l)),h||(h=c.sourceFromRgb(l)),h||(h=c.sourceFromHsl(l)),h||(h=[0,0,0,1]),h&&this.setSource(h)},_rgbToHsl:function(l,h,u){l/=255,h/=255,u/=255;var p,m,g,v=o.util.array.max([l,h,u]),y=o.util.array.min([l,h,u]);if(g=(v+y)/2,v===y)p=m=0;else{var b=v-y;switch(m=g>.5?b/(2-v-y):b/(v+y),v){case l:p=(h-u)/b+(h<u?6:0);break;case h:p=(u-l)/b+2;break;case u:p=(l-h)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),h=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+h[0]+","+h[1]+"%,"+h[2]+"%)"},toHsla:function(){var l=this.getSource(),h=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+h[0]+","+h[1]+"%,"+h[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),h,u,p;return h=l[0].toString(16),h=h.length===1?"0"+h:h,u=l[1].toString(16),u=u.length===1?"0"+u:u,p=l[2].toString(16),p=p.length===1?"0"+p:p,h.toUpperCase()+u.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),h;return h=Math.round(l[3]*255),h=h.toString(16),h=h.length===1?"0"+h:h,this.toHex()+h.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var h=this.getSource();return h[3]=l,this.setSource(h),this},toGrayscale:function(){var l=this.getSource(),h=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),u=l[3];return this.setSource([h,h,h,u]),this},toBlackWhite:function(l){var h=this.getSource(),u=(h[0]*.3+h[1]*.59+h[2]*.11).toFixed(0),p=h[3];return l=l||127,u=Number(u)<Number(l)?0:255,this.setSource([u,u,u,p]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var h=[],u=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)h.push(Math.round(m[v]*(1-p)+g[v]*p));return h[3]=u,this.setSource(h),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(l,h,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?l+(h-l)*6*u:u<1/2?h:u<2/3?l+(h-l)*(2/3-u)*6:l}o.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},o.Color.sourceFromRgb=function(l){var h=l.match(c.reRGBa);if(h){var u=parseInt(h[1],10)/(/%$/.test(h[1])?100:1)*(/%$/.test(h[1])?255:1),p=parseInt(h[2],10)/(/%$/.test(h[2])?100:1)*(/%$/.test(h[2])?255:1),m=parseInt(h[3],10)/(/%$/.test(h[3])?100:1)*(/%$/.test(h[3])?255:1);return[parseInt(u,10),parseInt(p,10),parseInt(m,10),h[4]?parseFloat(h[4]):1]}},o.Color.fromRgba=c.fromRgb,o.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},o.Color.sourceFromHsl=function(l){var h=l.match(c.reHSLa);if(h){var u=(parseFloat(h[1])%360+360)%360/360,p=parseFloat(h[2])/(/%$/.test(h[2])?100:1),m=parseFloat(h[3])/(/%$/.test(h[3])?100:1),g,v,y;if(p===0)g=v=y=m;else{var b=m<=.5?m*(p+1):m+p-m*p,x=m*2-b;g=f(x,b,u+1/3),v=f(x,b,u),y=f(x,b,u-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(y*255),h[4]?parseFloat(h[4]):1]}},o.Color.fromHsla=c.fromHsl,o.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},o.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var h=l.slice(l.indexOf("#")+1),u=h.length===3||h.length===4,p=h.length===8||h.length===4,m=u?h.charAt(0)+h.charAt(0):h.substring(0,2),g=u?h.charAt(1)+h.charAt(1):h.substring(2,4),v=u?h.charAt(2)+h.charAt(2):h.substring(4,6),y=p?u?h.charAt(3)+h.charAt(3):h.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},o.Color.fromSource=function(l){var h=new c;return h.setSource(l),h}}(e),function(a){var o=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],l={},h="left",u="top",p="right",m="bottom",g="center",v={top:m,bottom:u,left:p,right:h,center:g},y=o.util.radiansToDegrees,b=Math.sign||function(X){return(X>0)-(X<0)||+X};function x(X,z){var K=X.angle+y(Math.atan2(z.y,z.x))+360;return Math.round(K%360/45)}function C(X,z){var K=z.transform.target,te=K.canvas,N=o.util.object.clone(z);N.target=K,te&&te.fire("object:"+X,N),K.fire(X,z)}function _(X,z){var K=z.canvas,te=K.uniScaleKey,N=X[te];return K.uniformScaling&&!N||!K.uniformScaling&&N}function S(X){return X.originX===g&&X.originY===g}function T(X,z,K){var te=X.lockScalingX,N=X.lockScalingY;return!!(te&&N||!z&&(te||N)&&K||te&&z==="x"||N&&z==="y")}function I(X,z,K){var te="not-allowed",N=_(X,K),q="";if(z.x!==0&&z.y===0?q="x":z.x===0&&z.y!==0&&(q="y"),T(K,q,N))return te;var le=x(K,z);return c[le]+"-resize"}function F(X,z,K){var te="not-allowed";if(z.x!==0&&K.lockSkewingY||z.y!==0&&K.lockSkewingX)return te;var N=x(K,z)%4;return f[N]+"-resize"}function $(X,z,K){return X[K.canvas.altActionKey]?l.skewCursorStyleHandler(X,z,K):l.scaleCursorStyleHandler(X,z,K)}function G(X,z,K){var te=X[K.canvas.altActionKey];if(z.x===0)return te?"skewX":"scaleY";if(z.y===0)return te?"skewY":"scaleX"}function ne(X,z,K){return K.lockRotation?"not-allowed":z.cursorStyle}function Y(X,z,K,te){return{e:X,transform:z,pointer:{x:K,y:te}}}function Q(X){return function(z,K,te,N){var q=K.target,le=q.getCenterPoint(),xe=q.translateToOriginPoint(le,K.originX,K.originY),me=X(z,K,te,N);return q.setPositionByOrigin(xe,K.originX,K.originY),me}}function Z(X,z){return function(K,te,N,q){var le=z(K,te,N,q);return le&&C(X,Y(K,te,N,q)),le}}function ie(X,z,K,te,N){var q=X.target,le=q.controls[X.corner],xe=q.canvas.getZoom(),me=q.padding/xe,J=q.toLocalPoint(new o.Point(te,N),z,K);return J.x>=me&&(J.x-=me),J.x<=-me&&(J.x+=me),J.y>=me&&(J.y-=me),J.y<=me&&(J.y+=me),J.x-=le.offsetX,J.y-=le.offsetY,J}function V(X){return X.flipX!==X.flipY}function k(X,z,K,te,N){if(X[z]!==0){var q=X._getTransformedDimensions()[te],le=N/q*X[K];X.set(K,le)}}function P(X,z,K,te){var N=z.target,q=N._getTransformedDimensions(0,N.skewY),le=ie(z,z.originX,z.originY,K,te),xe=Math.abs(le.x*2)-q.x,me=N.skewX,J;xe<2?J=0:(J=y(Math.atan2(xe/N.scaleX,q.y/N.scaleY)),z.originX===h&&z.originY===m&&(J=-J),z.originX===p&&z.originY===u&&(J=-J),V(N)&&(J=-J));var ge=me!==J;if(ge){var we=N._getTransformedDimensions().y;N.set("skewX",J),k(N,"skewY","scaleY","y",we)}return ge}function A(X,z,K,te){var N=z.target,q=N._getTransformedDimensions(N.skewX,0),le=ie(z,z.originX,z.originY,K,te),xe=Math.abs(le.y*2)-q.y,me=N.skewY,J;xe<2?J=0:(J=y(Math.atan2(xe/N.scaleY,q.x/N.scaleX)),z.originX===h&&z.originY===m&&(J=-J),z.originX===p&&z.originY===u&&(J=-J),V(N)&&(J=-J));var ge=me!==J;if(ge){var we=N._getTransformedDimensions().x;N.set("skewY",J),k(N,"skewX","scaleX","x",we)}return ge}function j(X,z,K,te){var N=z.target,q=N.skewX,le,xe=z.originY;if(N.lockSkewingX)return!1;if(q===0){var me=ie(z,g,g,K,te);me.x>0?le=h:le=p}else q>0&&(le=xe===u?h:p),q<0&&(le=xe===u?p:h),V(N)&&(le=le===h?p:h);z.originX=le;var J=Z("skewing",Q(P));return J(X,z,K,te)}function H(X,z,K,te){var N=z.target,q=N.skewY,le,xe=z.originX;if(N.lockSkewingY)return!1;if(q===0){var me=ie(z,g,g,K,te);me.y>0?le=u:le=m}else q>0&&(le=xe===h?u:m),q<0&&(le=xe===h?m:u),V(N)&&(le=le===u?m:u);z.originY=le;var J=Z("skewing",Q(A));return J(X,z,K,te)}function M(X,z,K,te){var N=z,q=N.target,le=q.translateToOriginPoint(q.getCenterPoint(),N.originX,N.originY);if(q.lockRotation)return!1;var xe=Math.atan2(N.ey-le.y,N.ex-le.x),me=Math.atan2(te-le.y,K-le.x),J=y(me-xe+N.theta),ge=!0;if(q.snapAngle>0){var we=q.snapAngle,Se=q.snapThreshold||we,Le=Math.ceil(J/we)*we,Ae=Math.floor(J/we)*we;Math.abs(J-Ae)<Se?J=Ae:Math.abs(J-Le)<Se&&(J=Le)}return J<0&&(J=360+J),J%=360,ge=q.angle!==J,q.angle=J,ge}function O(X,z,K,te,N){N=N||{};var q=z.target,le=q.lockScalingX,xe=q.lockScalingY,me=N.by,J,ge,we,Se,Le=_(X,q),Ae=T(q,me,Le),Pt,Je,Ni=z.gestureScale;if(Ae)return!1;if(Ni)ge=z.scaleX*Ni,we=z.scaleY*Ni;else{if(J=ie(z,z.originX,z.originY,K,te),Pt=me!=="y"?b(J.x):1,Je=me!=="x"?b(J.y):1,z.signX||(z.signX=Pt),z.signY||(z.signY=Je),q.lockScalingFlip&&(z.signX!==Pt||z.signY!==Je))return!1;if(Se=q._getTransformedDimensions(),Le&&!me){var Na=Math.abs(J.x)+Math.abs(J.y),zn=z.original,lB=Math.abs(Se.x*zn.scaleX/q.scaleX)+Math.abs(Se.y*zn.scaleY/q.scaleY),bS=Na/lB;ge=zn.scaleX*bS,we=zn.scaleY*bS}else ge=Math.abs(J.x*q.scaleX/Se.x),we=Math.abs(J.y*q.scaleY/Se.y);S(z)&&(ge*=2,we*=2),z.signX!==Pt&&me!=="y"&&(z.originX=v[z.originX],ge*=-1,z.signX=Pt),z.signY!==Je&&me!=="x"&&(z.originY=v[z.originY],we*=-1,z.signY=Je)}var cB=q.scaleX,uB=q.scaleY;return me?(me==="x"&&q.set("scaleX",ge),me==="y"&&q.set("scaleY",we)):(!le&&q.set("scaleX",ge),!xe&&q.set("scaleY",we)),cB!==q.scaleX||uB!==q.scaleY}function R(X,z,K,te){return O(X,z,K,te)}function B(X,z,K,te){return O(X,z,K,te,{by:"x"})}function U(X,z,K,te){return O(X,z,K,te,{by:"y"})}function W(X,z,K,te){return X[z.target.canvas.altActionKey]?l.skewHandlerX(X,z,K,te):l.scalingY(X,z,K,te)}function ee(X,z,K,te){return X[z.target.canvas.altActionKey]?l.skewHandlerY(X,z,K,te):l.scalingX(X,z,K,te)}function re(X,z,K,te){var N=z.target,q=ie(z,z.originX,z.originY,K,te),le=N.strokeWidth/(N.strokeUniform?N.scaleX:1),xe=S(z)?2:1,me=N.width,J=Math.abs(q.x*xe/N.scaleX)-le;return N.set("width",Math.max(J,0)),me!==J}function ue(X,z,K,te){var N=z.target,q=K-z.offsetX,le=te-z.offsetY,xe=!N.get("lockMovementX")&&N.left!==q,me=!N.get("lockMovementY")&&N.top!==le;return xe&&N.set("left",q),me&&N.set("top",le),(xe||me)&&C("moving",Y(X,z,K,te)),xe||me}l.scaleCursorStyleHandler=I,l.skewCursorStyleHandler=F,l.scaleSkewCursorStyleHandler=$,l.rotationWithSnapping=Z("rotating",Q(M)),l.scalingEqually=Z("scaling",Q(R)),l.scalingX=Z("scaling",Q(B)),l.scalingY=Z("scaling",Q(U)),l.scalingYOrSkewingX=W,l.scalingXOrSkewingY=ee,l.changeWidth=Z("resizing",Q(re)),l.skewHandlerX=j,l.skewHandlerY=H,l.dragHandler=ue,l.scaleOrSkewActionName=G,l.rotationStyleHandler=ne,l.fireEvent=C,l.wrapWithFixedAnchor=Q,l.wrapWithFireEvent=Z,l.getLocalPoint=ie,o.controlsUtils=l}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians,f=o.controlsUtils;function l(u,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,x=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=x?"stroke":"fill",_=!x&&(g.cornerStrokeColor||v.cornerStrokeColor),S=p,T=m,I;u.save(),u.fillStyle=g.cornerColor||v.cornerColor,u.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,y>b?(I=y,u.scale(1,b/y),T=m*y/b):b>y?(I=b,u.scale(y/b,1),S=p*b/y):I=y,u.lineWidth=1,u.beginPath(),u.arc(S,T,I/2,0,2*Math.PI,!1),u[C](),_&&u.stroke(),u.restore()}function h(u,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,x=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=x?"stroke":"fill",_=!x&&(g.cornerStrokeColor||v.cornerStrokeColor),S=y/2,T=b/2;u.save(),u.fillStyle=g.cornerColor||v.cornerColor,u.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,u.lineWidth=1,u.translate(p,m),u.rotate(c(v.angle)),u[C+"Rect"](-S,-T,y,b),_&&u.strokeRect(-S,-T,y,b),u.restore()}f.renderCircleControl=l,f.renderSquareControl=h}(e),function(a){var o=a.fabric||(a.fabric={});function c(f){for(var l in f)this[l]=f[l]}o.Control=c,o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,l){return l.cursorStyle},getActionName:function(f,l){return l.actionName},getVisibility:function(f,l){var h=f._controlsVisibility;return h&&typeof h[l]<"u"?h[l]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,l){var h=o.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},l);return h},calcCornerCoords:function(f,l,h,u,p){var m,g,v,y,b=p?this.touchSizeX:this.sizeX,x=p?this.touchSizeY:this.sizeY;if(b&&x&&b!==x){var C=Math.atan2(x,b),_=Math.sqrt(b*b+x*x)/2,S=C-o.util.degreesToRadians(f),T=Math.PI/2-C-o.util.degreesToRadians(f);m=_*o.util.cos(S),g=_*o.util.sin(S),v=_*o.util.cos(T),y=_*o.util.sin(T)}else{var I=b&&x?b:l;_=I*.7071067812;var S=o.util.degreesToRadians(45-f);m=v=_*o.util.cos(S),g=y=_*o.util.sin(S)}return{tl:{x:h-y,y:u-v},tr:{x:h+m,y:u-g},bl:{x:h-m,y:u+g},br:{x:h+y,y:u+v}}},render:function(f,l,h,u,p){switch(u=u||{},u.cornerStyle||p.cornerStyle){case"circle":o.controlsUtils.renderCircleControl.call(this,f,l,h,u,p);break;default:o.controlsUtils.renderSquareControl.call(this,f,l,h,u,p)}}}}(e),function(){function a(h,u){var p=h.getAttribute("style"),m=h.getAttribute("offset")||0,g,v,y,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var x=p.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),b=x.length;b--;){var C=x[b].split(/\s*:\s*/),_=C[0].trim(),S=C[1].trim();_==="stop-color"?g=S:_==="stop-opacity"&&(y=S)}}return g||(g=h.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=h.getAttribute("stop-opacity")),g=new t.Color(g),v=g.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=v*u,{offset:m,color:g.toRgb(),opacity:y}}function o(h){return{x1:h.getAttribute("x1")||0,y1:h.getAttribute("y1")||0,x2:h.getAttribute("x2")||"100%",y2:h.getAttribute("y2")||0}}function c(h){return{x1:h.getAttribute("fx")||h.getAttribute("cx")||"50%",y1:h.getAttribute("fy")||h.getAttribute("cy")||"50%",r1:0,x2:h.getAttribute("cx")||"50%",y2:h.getAttribute("cy")||"50%",r2:h.getAttribute("r")||"50%"}}var f=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(h){h||(h={}),h.coords||(h.coords={});var u,p=this;Object.keys(h).forEach(function(m){p[m]=h[m]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,u={x1:h.coords.x1||0,y1:h.coords.y1||0,x2:h.coords.x2||0,y2:h.coords.y2||0},this.type==="radial"&&(u.r1=h.coords.r1||0,u.r2=h.coords.r2||0),this.coords=u,this.colorStops=h.colorStops.slice()},addColorStop:function(h){for(var u in h){var p=new t.Color(h[u]);this.colorStops.push({offset:parseFloat(u),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(h){var u={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,u,h),u},toSVG:function(h,v){var p=f(this.coords,!0),m,g,v=v||{},y,b,x=f(this.colorStops,!0),C=p.r1>p.r2,_=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),S=-this.offsetX,T=-this.offsetY,I=!!v.additionalTransform,F=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(Q,Z){return Q.offset-Z.offset}),F==="objectBoundingBox"?(S/=h.width,T/=h.height):(S+=h.width/2,T+=h.height/2),h.type==="path"&&this.gradientUnits!=="percentage"&&(S-=h.pathOffset.x,T-=h.pathOffset.y),_[4]-=S,_[5]-=T,b='id="SVGID_'+this.id+'" gradientUnits="'+F+'"',b+=' gradientTransform="'+(I?v.additionalTransform+" ":"")+t.util.matrixToSVG(_)+'" ',this.type==="linear"?y=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",b,' cx="',C?p.x1:p.x2,'" cy="',C?p.y1:p.y2,'" r="',C?p.r1:p.r2,'" fx="',C?p.x2:p.x1,'" fy="',C?p.y2:p.y1,`">
`]),this.type==="radial"){if(C)for(x=x.concat(),x.reverse(),m=0,g=x.length;m<g;m++)x[m].offset=1-x[m].offset;var $=Math.min(p.r1,p.r2);if($>0){var G=Math.max(p.r1,p.r2),ne=$/G;for(m=0,g=x.length;m<g;m++)x[m].offset+=ne*(1-x[m].offset)}}for(m=0,g=x.length;m<g;m++){var Y=x[m];y.push("<stop ",'offset="',Y.offset*100+"%",'" style="stop-color:',Y.color,typeof Y.opacity<"u"?";stop-opacity: "+Y.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(h){var u,p=t.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?u=h.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(u=h.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,y=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof y<"u"&&(v=new t.Color(v).setAlpha(y).toRgba()),u.addColorStop(b,v)}return u}}}),t.util.object.extend(t.Gradient,{fromElement:function(h,u,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=h.getElementsByTagName("stop"),y,b=h.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=h.getAttribute("gradientTransform")||"",C=[],_,S,T=0,I=0,F;for(h.nodeName==="linearGradient"||h.nodeName==="LINEARGRADIENT"?(y="linear",_=o(h)):(y="radial",_=c(h)),S=v.length;S--;)C.push(a(v[S],g));F=t.parseTransformAttribute(x),l(u,_,m,b),b==="pixels"&&(T=-u.left,I=-u.top);var $=new t.Gradient({id:h.getAttribute("id"),type:y,coords:_,colorStops:C,gradientUnits:b,gradientTransform:F,offsetX:T,offsetY:I});return $}});function l(h,u,p,m){var g,v;Object.keys(u).forEach(function(y){g=u[y],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(u[y],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(v*=p.viewBoxWidth||p.width),(y==="y1"||y==="y2")&&(v*=p.viewBoxHeight||p.height)))),u[y]=v})}}(),function(){var a=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,c){if(o||(o={}),this.id=t.Object.__uid++,this.setOptions(o),!o.source||o.source&&typeof o.source!="string"){c&&c(this);return}else{var f=this;this.source=t.util.createImage(),t.util.loadImage(o.source,function(l,h){f.source=l,c&&c(f,h)},null,this.crossOrigin)}},toObject:function(o){var c=t.Object.NUM_FRACTION_DIGITS,f,l;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),l={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,l,o),l},toSVG:function(o){var c=typeof this.source=="function"?this.source():this.source,f=c.width/o.width,l=c.height/o.height,h=this.offsetX/o.width,u=this.offsetY/o.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,u&&(l+=Math.abs(u))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,h&&(f+=Math.abs(h))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+h+'" y="'+u+'" width="'+f+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(o){for(var c in o)this[c]=o[c]},toLive:function(o){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":o.createPattern(c,this.repeat)}})}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.toFixed;if(o.Shadow){o.warn("fabric.Shadow is already defined.");return}o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var l in f)this[l]=f[l];this.id=o.Object.__uid++},_parseShadow:function(f){var l=f.trim(),h=o.Shadow.reOffsetsAndBlur.exec(l)||[],u=l.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:u.trim(),offsetX:parseFloat(h[1],10)||0,offsetY:parseFloat(h[2],10)||0,blur:parseFloat(h[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var l=40,h=40,u=o.Object.NUM_FRACTION_DIGITS,p=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-f.angle)),m=20,g=new o.Color(this.color);return f.width&&f.height&&(l=c((Math.abs(p.x)+this.blur)/f.width,u)*100+m,h=c((Math.abs(p.y)+this.blur)/f.height,u)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+h+'%" height="'+(100+2*h)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,u)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,u)+'" dy="'+c(p.y,u)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},l=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(h){this[h]!==l[h]&&(f[h]=this[h])},this),f}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var a=t.util.object.extend,o=t.util.getElementOffset,c=t.util.removeFromArray,f=t.util.toFixed,l=t.util.transformPoint,h=t.util.invertTransform,u=t.util.getNodeCanvas,p=t.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,y),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,y),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,y),v.overlayColor&&this.setOverlayColor(v.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=t.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,y){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),y.scale(g,g)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(g,v,y){return this.__setBgOverlayImage("overlayImage",g,v,y)},setBackgroundImage:function(g,v,y){return this.__setBgOverlayImage("backgroundImage",g,v,y)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,y,b){return typeof v=="string"?t.util.loadImage(v,function(x,C){if(x){var _=new t.Image(x,b);this[g]=_,_.canvas=this}y&&y(x,C)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),y&&y(v,!1)),this},__setBgOverlayColor:function(g,v,y){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,y),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=t.util.getById(g)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var y;v=v||{};for(var b in g)y=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),y+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,y=this.backgroundImage,b=this.overlayImage,x,C,_;for(this.viewportTransform=g,C=0,_=this._objects.length;C<_;C++)x=this._objects[C],x.group||x.setCoords(!0);return v&&v.setCoords(),y&&y.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var y=g,b=this.viewportTransform.slice(0);g=l(g,h(this.viewportTransform)),b[0]=v,b[3]=v;var x=l(g,b);return b[4]+=y.x-x.x,b[5]+=y.y-x.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new t.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new t.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,y=this.height,b=h(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y},b),g.tr=new t.Point(g.br.x,g.tl.y),g.bl=new t.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var y=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),t.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,y=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",y.transform(g),g.scale(1/y.zoomX,1/y.zoomY),g.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var y,b;for(y=0,b=v.length;y<b;++y)v[y]&&v[y].render(g)},_renderBackgroundOrOverlay:function(g,v){var y=this[v+"Color"],b=this[v+"Image"],x=this.viewportTransform,C=this[v+"Vpt"];if(!(!y&&!b)){if(y){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=y.toLive?y.toLive(g,this):y,C&&g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),g.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var _=y.gradientTransform||y.patternTransform;_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.fill(),g.restore()}b&&(g.save(),C&&g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new t.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new t.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=h(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var y=this.clipPath,b={version:t.version,objects:this._toObjects(g,v)};return y&&!y.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),t.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,g,v)},this)},_toObject:function(g,v,y){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var x=g[v](y);return this.includeDefaultValues||(g.includeDefaultValues=b),x},__serializeBgOverlay:function(g,v){var y={},b=this.backgroundImage,x=this.overlayImage,C=this.backgroundColor,_=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(y.background=C.toObject(v)):C&&(y.background=C),_&&_.toObject?_.excludeFromExport||(y.overlay=_.toObject(v)):_&&(y.overlay=_),b&&!b.excludeFromExport&&(y.backgroundImage=this._toObject(b,g,v)),x&&!x.excludeFromExport&&(y.overlayImage=this._toObject(x,g,v)),y},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var y=[];return this._setSVGPreamble(y,g),this._setSVGHeader(y,g),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",v),this._setSVGObjects(y,v),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",v),y.push("</svg>"),y.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var y=v.width||this.width,b=v.height||this.height,x,C='viewBox="0 0 '+this.width+" "+this.height+'" ',_=t.Object.NUM_FRACTION_DIGITS;v.viewBox?C='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,C='viewBox="'+f(-x[4]/x[0],_)+" "+f(-x[5]/x[3],_)+" "+f(this.width/x[0],_)+" "+f(this.height/x[3],_)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(y){var b=g[y+"Color"];if(b&&b.toLive){var x=g[y+"Vpt"],C=g.viewportTransform,_={width:g.width/(x?C[0]:1),height:g.height/(x?C[3]:1)};return b.toSVG(_,{additionalTransform:x?t.util.matrixToSVG(C):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},y,b,x,C,_,S,T,I,F,$=t.fontPaths,G=[];for(this._objects.forEach(function Y(Q){G.push(Q),Q._objects&&Q._objects.forEach(Y)}),I=0,F=G.length;I<F;I++)if(y=G[I],b=y.fontFamily,!(y.type.indexOf("text")===-1||v[b]||!$[b])&&(v[b]=!0,!!y.styles)){x=y.styles;for(_ in x){C=x[_];for(T in C)S=C[T],b=S.fontFamily,!v[b]&&$[b]&&(v[b]=!0)}}for(var ne in v)g+=[`		@font-face {
`,"			font-family: '",ne,`';
`,"			src: url('",$[ne],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var y,b,x,C=this._objects;for(b=0,x=C.length;b<x;b++)y=C[b],!y.excludeFromExport&&this._setSVGObject(g,y,v)},_setSVGObject:function(g,v,y){g.push(v.toSVG(y))},_setSVGBgOverlayImage:function(g,v,y){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(y))},_setSVGBgOverlayColor:function(g,v){var y=this[v+"Color"],b=this.viewportTransform,x=this.width,C=this.height;if(y)if(y.toLive){var _=y.repeat,S=t.util.invertTransform(b),T=this[v+"Vpt"],I=T?t.util.matrixToSVG(S):"";g.push('<rect transform="'+I+" translate(",x/2,",",C/2,')"',' x="',y.offsetX-x/2,'" y="',y.offsetY-C/2,'" ','width="',_==="repeat-y"||_==="no-repeat"?y.source.width:x,'" height="',_==="repeat-x"||_==="no-repeat"?y.source.height:C,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,y,b,x;if(g===v&&g.type==="activeSelection")for(x=v._objects,y=x.length;y--;)b=x[y],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,y,b,x;if(g===v&&g.type==="activeSelection")for(x=v._objects,y=0;y<x.length;y++)b=x[y],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var y=this._activeObject,b,x,C,_,S,T=0;if(g===y&&g.type==="activeSelection")for(S=y._objects,b=0;b<S.length;b++)x=S[b],C=this._objects.indexOf(x),C>0+T&&(_=C-1,c(this._objects,x),this._objects.splice(_,0,x)),T++;else C=this._objects.indexOf(g),C!==0&&(_=this._findNewLowerIndex(g,C,v),c(this._objects,g),this._objects.splice(_,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,y){var b,x;if(y)for(b=v,x=v-1;x>=0;--x){var C=g.intersectsWithObject(this._objects[x])||g.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(g);if(C){b=x;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var y=this._activeObject,b,x,C,_,S,T=0;if(g===y&&g.type==="activeSelection")for(S=y._objects,b=S.length;b--;)x=S[b],C=this._objects.indexOf(x),C<this._objects.length-1-T&&(_=C+1,c(this._objects,x),this._objects.splice(_,0,x)),T++;else C=this._objects.indexOf(g),C!==this._objects.length-1&&(_=this._findNewUpperIndex(g,C,v),c(this._objects,g),this._objects.splice(_,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,y){var b,x,C;if(y)for(b=v,x=v+1,C=this._objects.length;x<C;++x){var _=g.intersectsWithObject(this._objects[x])||g.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(g);if(_){b=x;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(t.StaticCanvas.prototype,t.Observable),a(t.StaticCanvas.prototype,t.Collection),a(t.StaticCanvas.prototype,t.DataURLExporter),a(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var y=v.getContext("2d");if(!y)return null;switch(g){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var g=u(this.lowerCanvasEl);return g&&g.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(g){var v=u(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var o=this.canvas.viewportTransform;a.save(),a.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,o=this.shadow,c=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=t.devicePixelRatio),c.shadowColor=o.color,c.shadowBlur=o.blur*f,c.shadowOffsetX=o.offsetX*f,c.shadowOffsetY=o.offsetY*f}},needsFullRender:function(){var a=new t.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,o,c){var f=o.midPointFrom(c);return a.quadraticCurveTo(o.x,o.y,f.x,f.y),f},onMouseDown:function(a,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,f=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[f-2],c[f-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var o=new t.Point(a.x,a.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var o=new t.Point(a.x,a.y);return this._addPoint(o)},_render:function(a){var o,c,f=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===l.x&&f.y===l.y){var h=this.width/1e3;f=new t.Point(f.x,f.y),l=new t.Point(l.x,l.y),f.x-=h,l.x+=h}for(a.moveTo(f.x,f.y),o=1,c=this._points.length;o<c;o++)this._drawSegment(a,f,l),f=this._points[o],l=this._points[o+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var o=this.width/1e3;return t.util.getSmoothPathFromPoints(a,o)},_isEmptySVGPath:function(a){var o=t.util.joinPath(a);return o==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var o=new t.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new t.Shadow(this.shadow)),o},decimatePoints:function(a,o){if(a.length<=2)return a;var c=this.canvas.getZoom(),f=Math.pow(o/c,2),l,h=a.length-1,u=a[0],p=[u],m;for(l=1;l<h-1;l++)m=Math.pow(u.x-a[l].x,2)+Math.pow(u.y-a[l].y,2),m>=f&&(u=a[l],p.push(u));return p.push(a[h]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o)){this.canvas.requestRenderAll();return}var c=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var o=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,o),c.restore()},dot:function(a,o){a.fillStyle=o.fill,a.beginPath(),a.arc(o.x,o.y,o.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,o,c,f=this.points;for(this._saveAndTransform(a),o=0,c=f.length;o<c;o++)this.dot(a,f[o]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,o,c;this.canvas.renderOnAddRemove=!1;var f=[];for(o=0,c=this.points.length;o<c;o++){var l=this.points[o],h=new t.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(h.shadow=new t.Shadow(this.shadow)),f.push(h)}var u=new t.Group(f);u.canvas=this.canvas,this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var o=new t.Point(a.x,a.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return o.radius=c,o.fill=f,this.points.push(o),o}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],c=0,f=this.sprayChunks.length;c<f;c++)for(var l=this.sprayChunks[c],h=0,u=l.length;h<u;h++){var p=new t.Rect({width:l[h].width,height:l[h].width,left:l[h].x+1,top:l[h].y+1,originX:"center",originY:"center",fill:this.color});o.push(p)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var m=new t.Group(o);this.shadow&&m.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var o={},c,f,l;for(f=0,l=a.length;f<l;f++)c=a[f].left+""+a[f].top,o[c]||(o[c]=a[f]);var h=[];for(c in o)h.push(o[c]);return h},render:function(a){var o=this.canvas.contextTop,c,f;for(o.fillStyle=this.color,this._saveAndTransform(o),c=0,f=a.length;c<f;c++){var l=a[c];typeof l.opacity<"u"&&(o.globalAlpha=l.opacity),o.fillRect(l.x,l.y,l.width,l.width)}o.restore()},_render:function(){var a=this.canvas.contextTop,o,c;for(a.fillStyle=this.color,this._saveAndTransform(a),o=0,c=this.sprayChunks.length;o<c;o++)this.render(this.sprayChunks[o]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var o,c,f,l=this.width/2,h;for(h=0;h<this.density;h++){o=t.util.getRandomInt(a.x-l,a.x+l),c=t.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?f=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var u=new t.Point(o,c);u.width=f,this.randomOpacity&&(u.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(u)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var a=20,o=5,c=t.util.createCanvasElement(),f=c.getContext("2d");return c.width=c.height=a+o,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var o=this.callSuper("createPath",a),c=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),o}}),function(){var a=t.util.getPointer,o=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(l,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,h),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),h,u,p;if(l.length>0&&!this.preserveObjectStacking){u=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)h=this._objects[m],l.indexOf(h)===-1?u.push(h):p.push(h);l.length>1&&(this._activeObject._objects=p),u.push.apply(u,p)}else u=this._objects;return u},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,h){var u=l.calcTransformMatrix(),p=t.util.invertTransform(u),m=this.restorePointerVpt(h);return t.util.transformPoint(m,p)},isTargetTransparent:function(l,h,u){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:h,y:u}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),x=t.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return x}var v=this.contextCache,y=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=y;var x=t.util.isTransparent(v,h,u,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(l){var h=!1;return Array.isArray(this.selectionKey)?h=!!this.selectionKey.find(function(u){return l[u]===!0}):h=l[this.selectionKey],h},_shouldClearSelection:function(l,h){var u=this.getActiveObjects(),p=this._activeObject;return!h||h&&p&&u.length>1&&u.indexOf(h)===-1&&p!==h&&!this._isSelectionKeyPressed(l)||h&&!h.evented||h&&!h.selectable&&p&&p!==h},_shouldCenterTransform:function(l,h,u){if(l){var p;return h==="scale"||h==="scaleX"||h==="scaleY"||h==="resizing"?p=this.centeredScaling||l.centeredScaling:h==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!u:u}},_getOriginFromCorner:function(l,h){var u={x:l.originX,y:l.originY};return h==="ml"||h==="tl"||h==="bl"?u.x="right":(h==="mr"||h==="tr"||h==="br")&&(u.x="left"),h==="tl"||h==="mt"||h==="tr"?u.y="bottom":(h==="bl"||h==="mb"||h==="br")&&(u.y="top"),u},_getActionFromCorner:function(l,h,u,p){if(!h||!l)return"drag";var m=p.controls[h];return m.getActionName(u,m,p)},_setupCurrentTransform:function(l,h,u){if(h){var p=this.getPointer(l),m=h.__corner,g=h.controls[m],v=u&&m?g.getActionHandler(l,h,g):t.controlsUtils.dragHandler,y=this._getActionFromCorner(u,m,l,h),b=this._getOriginFromCorner(h,m),x=l[this.centeredKey],C={target:h,action:y,actionHandler:v,corner:m,scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,offsetX:p.x-h.left,offsetY:p.y-h.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:o(h.angle),width:h.width*h.scaleX,shiftKey:l.shiftKey,altKey:x,original:t.util.saveObjectTransform(h)};this._shouldCenterTransform(h,y,x)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var h=this._groupSelector,u=new t.Point(h.ex,h.ey),p=t.util.transformPoint(u,this.viewportTransform),m=new t.Point(h.ex+h.left,h.ey+h.top),g=t.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),y=Math.min(p.y,g.y),b=Math.max(p.x,g.x),x=Math.max(p.y,g.y),C=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,y,b-v,x-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=C,y+=C,b-=C,x-=C,t.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,y,b-v,x-y))},findTarget:function(l,h){if(!this.skipTargetFind){var u=!0,p=this.getPointer(l,u),m=this._activeObject,g=this.getActiveObjects(),v,y,b=c(l),x=g.length>1&&!h||g.length===1;if(this.targets=[],x&&m._findTargetCorner(p,b)||g.length>1&&!h&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,y=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&C&&v&&C!==v&&(C=v,this.targets=y),C}},_checkTarget:function(l,h,u){if(h&&h.visible&&h.evented&&h.containsPoint(l))if((this.perPixelTargetFind||h.perPixelTargetFind)&&!h.isEditing){var p=this.isTargetTransparent(h,u.x,u.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,h){for(var u,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,h):h;if(this._checkTarget(v,g,h)){u=l[p],u.subTargetCheck&&u instanceof t.Group&&(m=this._searchPossibleTargets(u._objects,h),m&&this.targets.push(m));break}}return u},restorePointerVpt:function(l){return t.util.transformPoint(l,t.util.invertTransform(this.viewportTransform))},getPointer:function(l,h){if(this._absolutePointer&&!h)return this._absolutePointer;if(this._pointer&&h)return this._pointer;var u=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,y;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),u.x=u.x-this._offset.left,u.y=u.y-this._offset.top,h||(u=this.restorePointerVpt(u));var b=this.getRetinaScaling();return b!==1&&(u.x/=b,u.y/=b),g===0||v===0?y={width:1,height:1}:y={width:p.width/g,height:p.height/v},{x:u.x*y.width,y:u.y*y.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),h=this.lowerCanvasEl,u=this.upperCanvasEl;u?u.className="":(u=this._createCanvasElement(),this.upperCanvasEl=u),t.util.addClass(u,"upper-canvas "+l),this.wrapperEl.appendChild(u),this._copyCanvasStyle(h,u),this._applyCanvasStyle(u),this.contextTop=u.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var h=this.width||l.width,u=this.height||l.height;t.util.setStyle(l,{position:"absolute",width:h+"px",height:u+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=h,l.height=u,t.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,h){h.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,h){var u=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(u=!0,v.fire("deselected",{e:h,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(u=!0,v.fire("selected",{e:h,target:v}),m.push(v))}),l.length>0&&p.length>0?u&&this.fire("selection:updated",{e:h,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:h,selected:m}):l.length>0&&this.fire("selection:cleared",{e:h,deselected:g})},setActiveObject:function(l,h){var u=this.getActiveObjects();return this._setActiveObject(l,h),this._fireSelectionEvents(u,h),this},_setActiveObject:function(l,h){return this._activeObject===l||!this._discardActiveObject(h,l)||l.onSelect({e:h})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,h){var u=this._activeObject;if(u){if(u.onDeselect({e:l,object:h}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var h=this.getActiveObjects(),u=this.getActiveObject();return h.length&&this.fire("before:selection:cleared",{target:u,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(h,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(h){t.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var h=this._activeObject;h&&h._renderControls(l)},_toObject:function(l,h,u){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,h,u);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var h=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],u={};return h.forEach(function(p){u[p]=l[p]}),t.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),u}else return null},_unwindGroupTransformOnObject:function(l,h){h&&l.set(h)},_setSVGObject:function(l,h,u){var p=this._realizeGroupTransformOnObject(h);this.callSuper("_setSVGObject",l,h,u),this._unwindGroupTransformOnObject(h,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var f in t.StaticCanvas)f!=="prototype"&&(t.Canvas[f]=t.StaticCanvas[f])}(),function(){var a=t.util.addListener,o=t.util.removeListener,c=3,f=2,l=1,h={passive:!1};function u(p,m){return p.button&&p.button===m-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(t.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,h),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,h),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var p=this._getEventPrefix();o(t.document,p+"up",this._onMouseUp),o(t.document,"touchend",this._onTouchEnd,h),o(t.document,p+"move",this._onMouseMove,h),o(t.document,"touchmove",this._onMouseMove,h)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,h),a(t.document,"touchmove",this._onMouseMove,h),o(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();o(m,g+"move",this._onMouseMove,h),a(t.document,g+"up",this._onMouseUp),a(t.document,g+"move",this._onMouseMove,h)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();o(t.document,"touchend",this._onTouchEnd,h),o(t.document,"touchmove",this._onMouseMove,h);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(o(t.document,g+"up",this._onMouseUp),o(t.document,g+"move",this._onMouseMove,h),a(m,g+"move",this._onMouseMove,h))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,y=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),u(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(u(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),y=g.actionPerformed),!b){var x=m===this._activeObject;this._maybeGroupObjects(p),y||(y=this._shouldRender(m)||!x&&m===this._activeObject)}var C,_;if(m){if(C=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),y=!0;else{var S=m.controls[C],T=S&&S.getMouseUpHandler(p,m,S);T&&(_=this.getPointer(p),T(p,g,_.x,_.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==C)){var I=g.target&&g.target.controls[g.corner],F=I&&I.getMouseUpHandler(p,m,S);_=_||this.getPointer(p),F&&F(p,g,_.x,_.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),y?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,y={e:m,target:g,subTargets:v};if(this.fire(p,y),g&&g.fire(p,y),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,y);return g},_handleEvent:function(p,m,g,v){var y=this._target,b=this.targets||[],x={e:p,target:y,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(x.currentTarget=this.findTarget(p),x.currentSubTargets=this.targets),this.fire("mouse:"+m,x),y&&y.fire("mouse"+m,x);for(var C=0;C<b.length;C++)b[C].fire("mouse"+m,x)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(u(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(u(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),y=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):y&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var x=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p));if(m.__corner=x,m===this._activeObject&&(x||!y)){this._setupCurrentTransform(p,m,b);var C=m.controls[x],g=this.getPointer(p),_=C&&C.getMouseDownHandler(p,m,C);_&&_(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],m,{oldTarget:v[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],m,{oldTarget:v[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,y,b=g.oldTarget,x,C,_=b!==p,S=g.canvasEvtIn,T=g.canvasEvtOut;_&&(v={e:m,target:p,previousTarget:b},y={e:m,target:b,nextTarget:p}),C=p&&_,x=b&&_,x&&(T&&this.fire(T,y),b.fire(g.evtOut,y)),C&&(S&&this.fire(S,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,y=g.y,b=m.action,x=!1,C=m.actionHandler;C&&(x=C(p,m,v,y)),b==="drag"&&x&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||x},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));y?this.setCursor(this.getCornerCursor(y,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,o=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,f){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&f&&f.selectable&&this.selection&&(l!==f||l.type==="activeSelection")&&!f.onSelect({e:c})},_handleGrouping:function(c,f){var l=this._activeObject;l.__corner||f===l&&(f=this.findTarget(c,!0),!f||!f.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(f,c):this._createActiveSelection(f,c))},_updateActiveSelection:function(c,f){var l=this._activeObject,h=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),f)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(h,f)},_createActiveSelection:function(c,f){var l=this.getActiveObjects(),h=this._createGroup(c);this._hoveredTarget=h,this._setActiveObject(h,f),this._fireSelectionEvents(l,f)},_createGroup:function(c){var f=this._objects,l=f.indexOf(this._activeObject)<f.indexOf(c),h=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(h,{canvas:this})},_groupSelectedObjects:function(c){var f=this._collectObjects(c),l;f.length===1?this.setActiveObject(f[0],c):f.length>1&&(l=new t.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var f=[],l,h=this._groupSelector.ex,u=this._groupSelector.ey,p=h+this._groupSelector.left,m=u+this._groupSelector.top,g=new t.Point(a(h,p),a(u,m)),v=new t.Point(o(h,p),o(u,m)),y=!this.selectionFullyContained,b=h===p&&u===m,x=this._objects.length;x--&&(l=this._objects[x],!(!(!l||!l.selectable||!l.visible)&&(y&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||y&&l.containsPoint(g,null,!0)||y&&l.containsPoint(v,null,!0))&&(f.push(l),b))););return f.length>1&&(f=f.filter(function(C){return!C.onSelect({e:c})})),f},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var o=a.format||"png",c=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(f,a);return t.util.toDataURL(l,o,c)},toCanvasElement:function(a,o){a=a||1,o=o||{};var c=(o.width||this.width)*a,f=(o.height||this.height)*a,l=this.getZoom(),h=this.width,u=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(o.left||0))*a,v=(m[5]-(o.top||0))*a,y=this.interactive,b=[p,0,0,p,g,v],x=this.enableRetinaScaling,C=t.util.createCanvasElement(),_=this.contextTop;return C.width=c,C.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=m,this.width=h,this.height=u,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=x,this.contextTop=_,C}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(a,o,c){if(a){var f=typeof a=="string"?JSON.parse(a):t.util.object.clone(a),l=this,h=f.clipPath,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){l.clear(),l._setBgOverlay(f,function(){h?l._enlivenObjects([h],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,f,p,u,o)}):l.__setupCanvas.call(l,f,p,u,o)})},c),this}},__setupCanvas:function(a,o,c,f){var l=this;o.forEach(function(h,u){l.insertAt(h,u)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,o){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){o&&o();return}var f=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,f),this.__setBgOverlay("overlayImage",a.overlayImage,c,f),this.__setBgOverlay("backgroundColor",a.background,c,f),this.__setBgOverlay("overlayColor",a.overlay,c,f)},__setBgOverlay:function(a,o,c,f){var l=this;if(!o){c[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?t.util.enlivenObjects([o],function(h){l[a]=h[0],c[a]=!0,f&&f()}):this["set"+t.util.string.capitalize(a,!0)](o,function(){c[a]=!0,f&&f()})},_enlivenObjects:function(a,o,c){if(!a||a.length===0){o&&o([]);return}t.util.enlivenObjects(a,function(f){o&&o(f)},null,c)},_toDataURL:function(a,o){this.clone(function(c){o(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,o,c){this.clone(function(f){c(f.toDataURLWithMultiplier(a,o))})},clone:function(a,o){var c=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(f){f.loadFromJSON(c,function(){a&&a(f)})})},cloneWithoutData:function(a){var o=t.util.createCanvasElement();o.width=this.width,o.height=this.height;var c=new t.Canvas(o);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.util.object.clone,l=o.util.toFixed,h=o.util.string.capitalize,u=o.util.degreesToRadians,p=!o.isLikelyNode,m=2;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=o.perfLimitSizeTotal,y=g.width,b=g.height,x=o.maxCacheSideLimit,C=o.minCacheSideLimit;if(y<=x&&b<=x&&y*b<=v)return y<C&&(g.width=C),b<C&&(g.height=C),g;var _=y/b,S=o.util.limitDimsByArea(_,v),T=o.util.capValue,I=T(C,S.x,x),F=T(C,S.y,x);return y>I&&(g.zoomX/=y/I,g.width=I,g.capped=!0),b>F&&(g.zoomY/=b/F,g.height=F,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:y+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:y,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,y=g._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),C=o.minCacheSideLimit,_=x.width,S=x.height,T,I,F=x.zoomX,$=x.zoomY,G=_!==this.cacheWidth||S!==this.cacheHeight,ne=this.zoomX!==F||this.zoomY!==$,Y=G||ne,Q=0,Z=0,ie=!1;if(G){var V=this._cacheCanvas.width,k=this._cacheCanvas.height,P=_>V||S>k,A=(_<V*.9||S<k*.9)&&V>C&&k>C;ie=P||A,P&&!x.capped&&(_>C||S>C)&&(Q=_*.1,Z=S*.1)}return this instanceof o.Text&&this.path&&(Y=!0,ie=!0,Q+=this.getHeightOfLine(0)*this.zoomX,Z+=this.getHeightOfLine(0)*this.zoomY),Y?(ie?(b.width=Math.ceil(_+Q),b.height=Math.ceil(S+Z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),T=x.x/2,I=x.y/2,this.cacheTranslationX=Math.round(b.width/2-T)+T,this.cacheTranslationY=Math.round(b.height/2-I)+I,this.cacheWidth=_,this.cacheHeight=S,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,$),this.zoomX=F,this.zoomY=$,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,y=this.calcTransformMatrix(!v);g.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(g){var v=o.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(g),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,y,g),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=o.util.getKlass(g.type).prototype,y=v.stateProperties;return y.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+h(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,y=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();v*=b*x,y*=b*x}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var y=g==="scaleX"||g==="scaleY",b=this[g]!==v,x=!1;return y&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof o.Shadow)?v=new o.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var y=o.util.invertTransform(this.calcTransformMatrix());g.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var y=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=y,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var y=v.stroke;y&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(g,y):(g.strokeStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,y)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var y=v.fill;y&&(y.toLive?(g.fillStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=y)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var y=this.getViewportTransform(),b=this.calcTransformMatrix(),x,C,_;v=v||{},C=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,_=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=o.util.multiplyTransformMatrices(y,b),x=o.util.qrDecompose(b),g.save(),g.translate(x.translateX,x.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),g.rotate(u(this.group?x.angle:this.angle)),v.forActiveSelection||this.group?C&&this.drawBordersInGroup(g,x,v):C&&this.drawBorders(g,v),_&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,y=this.canvas,b,x=y&&y.viewportTransform[0]||1,C=y&&y.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),y&&y._isRetinaScaling()&&(x*=o.devicePixelRatio,C*=o.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*o.browserShadowBlurConstant*(x+C)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*x*b.scaleX,g.shadowOffsetY=v.offsetY*C*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,x=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,x):g.transform(1,0,0,1,b,x),y&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:b,offsetY:x}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),b=o.util.createCanvasElement(),x,C=this.canvas.getRetinaScaling(),_=y.x/this.scaleX/C,S=y.y/this.scaleY/C;b.width=_,b.height=S,x=b.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(_,0),x.lineTo(_,S),x.lineTo(0,S),x.closePath(),x.translate(_/2,S/2),x.scale(y.zoomX/this.scaleX/C,y.zoomY/this.scaleY/C),this._applyPatternGradientTransform(x,v),x.fillStyle=v.toLive(g),x.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(C*this.scaleX/y.zoomX,C*this.scaleY/y.zoomY),g.strokeStyle=x.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=o.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,g):o.Object._fromObject("Object",y,g)},cloneAsImage:function(g,v){var y=this.toCanvasElement(v);return g&&g(new o.Image(y)),this},toCanvasElement:function(g){g||(g={});var v=o.util,y=v.saveObjectTransform(this),b=this.group,x=this.shadow,C=Math.abs,_=(g.multiplier||1)*(g.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var S=o.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),I=this.shadow,F,$={x:0,y:0},G,ne,Y;I&&(G=I.blur,I.nonScaling?F={scaleX:1,scaleY:1}:F=this.getObjectScaling(),$.x=2*Math.round(C(I.offsetX)+G)*C(F.scaleX),$.y=2*Math.round(C(I.offsetY)+G)*C(F.scaleY)),ne=T.width+$.x,Y=T.height+$.y,S.width=Math.ceil(ne),S.height=Math.ceil(Y);var Q=new o.StaticCanvas(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(Q.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(Q.width/2,Q.height/2),"center","center");var Z=this.canvas;Q.add(this);var ie=Q.toCanvasElement(_||1,g);return this.shadow=x,this.set("canvas",Z),b&&(this.group=b),this.set(y).setCoords(),Q._objects=[],Q.dispose(),Q=null,ie},toDataURL:function(g){return g||(g={}),o.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var y=new o.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(y=o.util.rotatePoint(y,b,u(-this.angle))),{x:y.x-b.x,y:y.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),c(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(g,v,y,b){var x=o[g];v=f(v,!0),o.util.enlivenPatterns([v.fill,v.stroke],function(C){typeof C[0]<"u"&&(v.fill=C[0]),typeof C[1]<"u"&&(v.stroke=C[1]),o.util.enlivenObjectEnlivables(v,v,function(){var _=b?new x(v[b],v):new x(v);y&&y(_)})})},o.Object.__uid=0)}(e),function(){var a=t.util.degreesToRadians,o={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(f,l,h,u,p){var m=f.x,g=f.y,v,y,b;return typeof l=="string"?l=o[l]:l-=.5,typeof u=="string"?u=o[u]:u-=.5,v=u-l,typeof h=="string"?h=c[h]:h-=.5,typeof p=="string"?p=c[p]:p-=.5,y=p-h,(v||y)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+y*b.y),new t.Point(m,g)},translateToCenterPoint:function(f,l,h){var u=this.translateToGivenOrigin(f,l,h,"center","center");return this.angle?t.util.rotatePoint(u,f,a(this.angle)):u},translateToOriginPoint:function(f,l,h){var u=this.translateToGivenOrigin(f,"center","center",l,h);return this.angle?t.util.rotatePoint(u,f,a(this.angle)):u},getCenterPoint:function(){var f=new t.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,l){var h=this.getCenterPoint();return this.translateToOriginPoint(h,f,l)},toLocalPoint:function(f,l,h){var u=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof h<"u"?p=this.translateToGivenOrigin(u,"center","center",l,h):p=new t.Point(this.left,this.top),m=new t.Point(f.x,f.y),this.angle&&(m=t.util.rotatePoint(m,u,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,l,h){var u=this.translateToCenterPoint(f,l,h),p=this.translateToOriginPoint(u,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var l=a(this.angle),h=this.getScaledWidth(),u=t.util.cos(l)*h,p=t.util.sin(l)*h,m,g;typeof this.originX=="string"?m=o[this.originX]:m=this.originX-.5,typeof f=="string"?g=o[f]:g=f-.5,this.left+=u*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(h){return[new t.Point(h.tl.x,h.tl.y),new t.Point(h.tr.x,h.tr.y),new t.Point(h.br.x,h.br.y),new t.Point(h.bl.x,h.bl.y)]}var o=t.util,c=o.degreesToRadians,f=o.multiplyTransformMatrices,l=o.transformPoint;o.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(h,u){return u?h?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),h?this.aCoords:this.lineCoords)},getCoords:function(h,u){return a(this._getCoords(h,u))},intersectsWithRect:function(h,u,p,m){var g=this.getCoords(p,m),v=t.Intersection.intersectPolygonRectangle(g,h,u);return v.status==="Intersection"},intersectsWithObject:function(h,u,p){var m=t.Intersection.intersectPolygonPolygon(this.getCoords(u,p),h.getCoords(u,p));return m.status==="Intersection"||h.isContainedWithinObject(this,u,p)||this.isContainedWithinObject(h,u,p)},isContainedWithinObject:function(h,u,p){for(var m=this.getCoords(u,p),g=u?h.aCoords:h.lineCoords,v=0,y=h._getImageLines(g);v<4;v++)if(!h.containsPoint(m[v],y))return!1;return!0},isContainedWithinRect:function(h,u,p,m){var g=this.getBoundingRect(p,m);return g.left>=h.x&&g.left+g.width<=u.x&&g.top>=h.y&&g.top+g.height<=u.y},containsPoint:function(h,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),y=this._findCrossPoints(h,v);return y!==0&&y%2===1},isOnScreen:function(h){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,h);return m.some(function(g){return g.x<=p.x&&g.x>=u.x&&g.y<=p.y&&g.y>=u.y})||this.intersectsWithRect(u,p,!0,h)?!0:this._containsCenterOfCanvas(u,p,h)},_containsCenterOfCanvas:function(h,u,p){var m={x:(h.x+u.x)/2,y:(h.y+u.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(h){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(u,p,!0,h))return!0;var m=this.getCoords(!0,h).every(function(g){return(g.x>=p.x||g.x<=u.x)&&(g.y>=p.y||g.y<=u.y)});return m&&this._containsCenterOfCanvas(u,p,h)},_getImageLines:function(h){var u={topline:{o:h.tl,d:h.tr},rightline:{o:h.tr,d:h.br},bottomline:{o:h.br,d:h.bl},leftline:{o:h.bl,d:h.tl}};return u},_findCrossPoints:function(h,u){var p,m,g,v,y,b=0,x;for(var C in u)if(x=u[C],!(x.o.y<h.y&&x.d.y<h.y)&&!(x.o.y>=h.y&&x.d.y>=h.y)&&(x.o.x===x.d.x&&x.o.x>=h.x?y=x.o.x:(p=0,m=(x.d.y-x.o.y)/(x.d.x-x.o.x),g=h.y-p*h.x,v=x.o.y-m*x.o.x,y=-(g-v)/(p-m)),y>=h.x&&(b+=1),b===2))break;return b},getBoundingRect:function(h,u){var p=this.getCoords(h,u);return o.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(h){return Math.abs(h)<this.minScaleLimit?h<0?-this.minScaleLimit:this.minScaleLimit:h===0?1e-4:h},scale:function(h){return this._set("scaleX",h),this._set("scaleY",h),this.setCoords()},scaleToWidth:function(h,u){var p=this.getBoundingRect(u).width/this.getScaledWidth();return this.scale(h/this.width/p)},scaleToHeight:function(h,u){var p=this.getBoundingRect(u).height/this.getScaledHeight();return this.scale(h/this.height/p)},calcLineCoords:function(){var h=this.getViewportTransform(),u=this.padding,p=c(this.angle),m=o.cos(p),g=o.sin(p),v=m*u,y=g*u,b=v+y,x=v-y,C=this.calcACoords(),_={tl:l(C.tl,h),tr:l(C.tr,h),bl:l(C.bl,h),br:l(C.br,h)};return u&&(_.tl.x-=x,_.tl.y-=b,_.tr.x+=b,_.tr.y-=x,_.bl.x-=b,_.bl.y+=x,_.br.x+=x,_.br.y+=b),_},calcOCoords:function(){var h=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,u),g=f(m,h),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(b,x,C){y[x]=b.positionHandler(v,g,C)}),y},calcACoords:function(){var h=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),p=f(u,h),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(h){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),h?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var h=this.getCenterPoint();return[1,0,0,1,h.x,h.y]},transformMatrixKey:function(h){var u="_",p="";return!h&&this.group&&(p=this.group.transformMatrixKey(h)+u),p+this.top+u+this.left+u+this.scaleX+u+this.scaleY+u+this.skewX+u+this.skewY+u+this.angle+u+this.originX+u+this.originY+u+this.width+u+this.height+u+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(h){var u=this.calcOwnMatrix();if(h||!this.group)return u;var p=this.transformMatrixKey(h),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(u=f(this.group.calcTransformMatrix(!1),u)),m.key=p,m.value=u,u)},calcOwnMatrix:function(){var h=this.transformMatrixKey(!0),u=this.ownMatrixCache||(this.ownMatrixCache={});if(u.key===h)return u.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return u.key=h,u.value=o.composeMatrix(m),u.value},_getNonTransformedDimensions:function(){var h=this.strokeWidth,u=this.width+h,p=this.height+h;return{x:u,y:p}},_getTransformedDimensions:function(h,u){typeof h>"u"&&(h=this.skewX),typeof u>"u"&&(u=this.skewY);var p,m,g,v=h===0&&u===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var y=o.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:h,skewY:u});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(h,u){return this.strokeUniform?{x:h+this.strokeWidth,y:u+this.strokeWidth}:{x:h,y:u}},_calculateCurrentDimensions:function(){var h=this.getViewportTransform(),u=this._getTransformedDimensions(),p=l(u,h,!0);return p.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,f){if(f){if(f.toLive)return c+": url(#SVGID_"+f.id+"); ";var l=new t.Color(f),h=c+": "+l.toRgb()+"; ",u=l.getAlpha();return u!==1&&(h+=c+"-opacity: "+u.toString()+"; "),h}else return c+": none; "}var o=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var f=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",h=this.strokeDashArray?this.strokeDashArray.join(" "):"none",u=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),x=a("fill",this.fill),C=a("stroke",this.stroke);return[C,"stroke-width: ",l,"; ","stroke-dasharray: ",h,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",u,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",x,"fill-rule: ",f,"; ","opacity: ",v,";",b,y].join("")},getSvgSpanStyles:function(c,f){var l="; ",u=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",h=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",u=u,p=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",g=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?a("fill",c.fill):"",y=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),x=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[y,h,u,p,m,g,b,v,x,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(f){return c[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,f){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),h='transform="'+t.util.matrixToSVG(l);return h+(f||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var f=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,f),'" y="',o(-this.height/2,f),'" width="',o(this.width,f),'" height="',o(this.height,f),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,f){f=f||{};var l=f.reviver,h=f.additionalTransform||"",u=[this.getSvgTransform(!0,h),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=u,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,f){f=f||{};var l=f.noStyle,h=f.reviver,u=l?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,y=this.stroke,b=this.fill,x=this.shadow,C,_=[],S,T=c.indexOf("COMMON_PARTS"),I=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+t.Object.__uid++,S='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(h)+`</clipPath>
`),v&&_.push("<g ",p,this.getSvgCommons(),` >
`),_.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),C=[u,g,l?"":this.addPaintOrder()," ",I?'transform="'+I+'" ':""].join(""),c[T]=C,b&&b.toLive&&_.push(b.toSVG(this)),y&&y.toLive&&_.push(y.toSVG(this)),x&&_.push(x.toSVG(this)),m&&_.push(S),_.push(c.join("")),_.push(`</g>
`),v&&_.push(`</g>
`),h?h(_.join("")):_.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=t.util.object.extend,o="stateProperties";function c(l,h,u){var p={},m=!0;u.forEach(function(g){p[g]=l[g]}),a(l[h],p,m)}function f(l,h,u){if(l===h)return!0;if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!f(l[p],h[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!h||typeof h!="object"||!u&&g.length!==Object.keys(h).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(l[v],h[v]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(l){l=l||o;var h="_"+l;return Object.keys(this[h]).length<this[l].length?!0:!f(this[h],this,!0)},saveState:function(l){var h=l&&l.propertySet||o,u="_"+h;return this[u]?(c(this,u,this[h]),l&&l.stateProperties&&c(this,u,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var h=l.propertySet||o;return l.propertySet=h,this["_"+h]={},this.saveState(l),this}})}(),function(){var a=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(o,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=o.x,l=o.y,h,u,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(u=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),h=this._findCrossPoints({x:f,y:l},u),h!==0&&h%2===1))return this.__corner=g,g;return!1},forEachControl:function(o){for(var c in this.controls)o(this.controls[c],c,this)},_setCornerCoords:function(){var o=this.oCoords;for(var c in o){var f=this.controls[c];o[c].corner=f.calcCornerCoords(this.angle,this.cornerSize,o[c].x,o[c].y,!1),o[c].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,o[c].x,o[c].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var c=this.getCenterPoint(),f=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return o.translate(c.x,c.y),o.scale(1/l[0],1/l[3]),o.rotate(a(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-f.x/2,-f.y/2,f.x,f.y),o.restore(),this},drawBorders:function(o,c){c=c||{};var f=this._calculateCurrentDimensions(),l=this.borderScaleFactor,h=f.x+l,u=f.y+l,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return o.save(),o.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeRect(-h/2,-u/2,h,u),p&&(o.beginPath(),this.forEachControl(function(g,v,y){g.withConnection&&g.getVisibility(y,v)&&(m=!0,o.moveTo(g.x*h,g.y*u),o.lineTo(g.x*h+g.offsetX,g.y*u+g.offsetY))}),m&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,c,f){f=f||{};var l=t.util.sizeAfterTransform(this.width,this.height,c),h=this.strokeWidth,u=this.strokeUniform,p=this.borderScaleFactor,m=l.x+h*(u?this.canvas.getZoom():c.scaleX)+p,g=l.y+h*(u?this.canvas.getZoom():c.scaleY)+p;return o.save(),this._setLineDash(o,f.borderDashArray||this.borderDashArray),o.strokeStyle=f.borderColor||this.borderColor,o.strokeRect(-m/2,-g/2,m,g),o.restore(),this},drawControls:function(o,c){c=c||{},o.save();var f=this.canvas.getRetinaScaling(),l,h;return o.setTransform(f,0,0,f,0,0),o.strokeStyle=o.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(u,p,m){h=m.oCoords[p],u.getVisibility(m,p)&&(l&&(h=t.util.transformPoint(h,l)),u.render(o,h.x,h.y,c,m))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=c,this},setControlsVisibility:function(o){o||(o={});for(var c in o)this.setControlVisible(c,o[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,o){o=o||{};var c=function(){},f=o.onComplete||c,l=o.onChange||c,h=this;return t.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(u){a.set("left",u),h.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,o){o=o||{};var c=function(){},f=o.onComplete||c,l=o.onChange||c,h=this;return t.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(u){a.set("top",u),h.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,o){o=o||{};var c=function(){},f=o.onComplete||c,l=o.onChange||c,h=this;return t.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(u){a.set("opacity",u),h.requestRenderAll(),l()},onComplete:function(){h.remove(a),f()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],o,c,f=[];for(o in arguments[0])a.push(o);for(var l=0,h=a.length;l<h;l++)o=a[l],c=l!==h-1,f.push(this._animate(o,arguments[0][o],arguments[1],c));return f}else return this._animate.apply(this,arguments)},_animate:function(a,o,c,f){var l=this,h;o=o.toString(),c?c=t.util.object.clone(c):c={},~a.indexOf(".")&&(h=a.split("."));var u=l.colorProperties.indexOf(a)>-1||h&&l.colorProperties.indexOf(h[1])>-1,p=h?this.get(h[0])[h[1]]:this.get(a);"from"in c||(c.from=p),u||(~o.indexOf("=")?o=p+parseFloat(o.replace("=","")):o=parseFloat(o));var m={target:this,startValue:c.from,endValue:o,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,y){return c.abort.call(l,g,v,y)},onChange:function(g,v,y){h?l[h[0]][h[1]]=g:l.set(a,g),!f&&c.onChange&&c.onChange(g,v,y)},onComplete:function(g,v,y){f||(l.setCoords(),c.onComplete&&c.onComplete(g,v,y))}};return u?t.util.animateColor(m.startValue,m.endValue,m.duration,m):t.util.animate(m)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(o.Line){o.warn("fabric.Line is already defined");return}o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,p){u||(u=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(p)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,p){return this.callSuper("_set",u,p),typeof l[u]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:h({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:h({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){u.beginPath();var p=this.calcLinePoints();u.moveTo(p.x1,p.y1),u.lineTo(p.x2,p.y2),u.lineWidth=this.strokeWidth;var m=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return c(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=u*this.width*.5,g=p*this.height*.5,v=u*this.width*-.5,y=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:y}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(u,p,m){m=m||{};var g=o.parseAttributes(u,o.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new o.Line(v,c(g,m)))},o.Line.fromObject=function(u,p){function m(v){delete v.points,p&&p(v)}var g=f(u,!0);g.points=[u.x1,u.y1,u.x2,u.y2],o.Object._fromObject("Line",g,m,"points")};function h(u,p){var m=u.origin,g=u.axis1,v=u.axis2,y=u.dimension,b=p.nearest,x=p.center,C=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case x:return Math.min(this.get(g),this.get(v))+.5*this.get(y);case C:return Math.max(this.get(g),this.get(v))}}}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians;if(o.Circle){o.warn("fabric.Circle is already defined.");return}o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,h){return this.callSuper("_set",l,h),l==="radius"&&this.setRadius(h),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,h=0,u=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+h+'" cy="'+u+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,y=o.util.cos(m)*v,b=o.util.sin(m)*v,x=o.util.cos(g)*v,C=o.util.sin(g)*v,_=p>180?"1":"0";l=['<path d="M '+y+" "+b," A "+v+" "+v," 0 ",+_+" 1"," "+x+" "+C,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(l,h){var u=o.parseAttributes(l,o.Circle.ATTRIBUTE_NAMES);if(!f(u))throw new Error("value of `r` attribute is required and can not be negative");u.left=(u.left||0)-u.radius,u.top=(u.top||0)-u.radius,h(new o.Circle(u))};function f(l){return"radius"in l&&l.radius>=0}o.Circle.fromObject=function(l,h){o.Object._fromObject("Circle",l,h)}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Triangle){o.warn("fabric.Triangle is already defined");return}o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(c){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,l),c.lineTo(0,-l),c.lineTo(f,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,f=this.height/2,l=[-c+" "+f,"0 "+-f,c+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),o.Triangle.fromObject=function(c,f){return o.Object._fromObject("Triangle",c,f)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=Math.PI*2;if(o.Ellipse){o.warn("fabric.Ellipse is already defined.");return}o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,l){switch(this.callSuper("_set",f,l),f){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,c,!1),f.restore(),this._renderPaintInOrder(f)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(f,l){var h=o.parseAttributes(f,o.Ellipse.ATTRIBUTE_NAMES);h.left=(h.left||0)-h.rx,h.top=(h.top||0)-h.ry,l(new o.Ellipse(h))},o.Ellipse.fromObject=function(f,l){o.Object._fromObject("Ellipse",f,l)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var l=this.rx?Math.min(this.rx,this.width/2):0,h=this.ry?Math.min(this.ry,this.height/2):0,u=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||h!==0,y=1-.5522847498;f.beginPath(),f.moveTo(m+l,g),f.lineTo(m+u-l,g),v&&f.bezierCurveTo(m+u-y*l,g,m+u,g+y*h,m+u,g+h),f.lineTo(m+u,g+p-h),v&&f.bezierCurveTo(m+u,g+p-y*h,m+u-y*l,g+p,m+u-l,g+p),f.lineTo(m+l,g+p),v&&f.bezierCurveTo(m+y*l,g+p,m,g+p-y*h,m,g+p-h),f.lineTo(m,g+h),v&&f.bezierCurveTo(m,g+y*h,m+y*l,g,m+l,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(f,l,h){if(!f)return l(null);h=h||{};var u=o.parseAttributes(f,o.Rect.ATTRIBUTE_NAMES);u.left=u.left||0,u.top=u.top||0,u.height=u.height||0,u.width=u.width||0;var p=new o.Rect(c(h?o.util.object.clone(h):{},u));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},o.Rect.fromObject=function(f,l){return o.Object._fromObject("Rect",f,l)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.util.array.min,l=o.util.array.max,h=o.util.toFixed,u=o.util.projectStrokeOnPoints;if(o.Polyline){o.warn("fabric.Polyline is already defined");return}o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return u(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=l(p,"x")||0,y=l(p,"y")||0,b=v-m,x=y-g;return{left:m,top:g,width:b,height:x}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=o.Object.NUM_FRACTION_DIGITS,y=0,b=this.points.length;y<b;y++)p.push(h(this.points[y].x-m,v),",",h(this.points[y].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,y=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-y);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-y);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var y=o.parsePointsAttribute(m.getAttribute("points")),b=o.parseAttributes(m,o[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new o[p](y,c(b,v)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(p,m){return o.Object._fromObject("Polyline",p,m,"points")}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.projectStrokeOnPoints;if(o.Polygon){o.warn("fabric.Polygon is already defined");return}o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(f,l){o.Object._fromObject("Polygon",f,l,"points")}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,f=o.util.array.max,l=o.util.object.extend,h=o.util.object.clone,u=o.util.toFixed;if(o.Path){o.warn("fabric.Path is already defined");return}o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=h(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=o.util.makePathSimpler(Array.isArray(p)?p:o.util.parsePath(p)),o.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,y=0,b=0,x=0,C=0,_=-this.pathOffset.x,S=-this.pathOffset.y;p.beginPath();for(var T=0,I=this.path.length;T<I;++T)switch(m=this.path[T],m[0]){case"L":y=m[1],b=m[2],p.lineTo(y+_,b+S);break;case"M":y=m[1],b=m[2],g=y,v=b,p.moveTo(y+_,b+S);break;case"C":y=m[5],b=m[6],x=m[3],C=m[4],p.bezierCurveTo(m[1]+_,m[2]+S,x+_,C+S,y+_,b+S);break;case"Q":p.quadraticCurveTo(m[1]+_,m[2]+S,m[3]+_,m[4]+S),y=m[3],b=m[4],x=m[1],C=m[2];break;case"z":case"Z":y=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=o.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=o.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,p)+", "+u(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,y=0,b=0,x=0,C,_=0,S=this.path.length;_<S;++_){switch(g=this.path[_],g[0]){case"L":b=g[1],x=g[2],C=[];break;case"M":b=g[1],x=g[2],v=b,y=x,C=[];break;case"C":C=o.util.getBoundsOfCurve(b,x,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],x=g[6];break;case"Q":C=o.util.getBoundsOfCurve(b,x,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],x=g[4];break;case"z":case"Z":b=v,x=y;break}C.forEach(function(Y){p.push(Y.x),m.push(Y.y)}),p.push(b),m.push(x)}var T=c(p)||0,I=c(m)||0,F=f(p)||0,$=f(m)||0,G=F-T,ne=$-I;return{left:T,top:I,width:G,height:ne}}}),o.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;o.loadSVGFromURL(g,function(v){var y=v[0];y.setOptions(p),p.clipPath?o.util.enlivenObjects([p.clipPath],function(b){y.clipPath=b[0],m&&m(y)}):m&&m(y)})}else o.Object._fromObject("Path",p,m,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(p,m,g){var v=o.parseAttributes(p,o.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new o.Path(v.d,l(v,g)))}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,f=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,h,u){h=h||{},this._objects=[],u&&this.callSuper("initialize",h),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(u)this._updateObjectsACoords();else{var m=h&&h.centerPoint;h.originX!==void 0&&(this.originX=h.originX),h.originY!==void 0&&(this.originY=h.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete h.centerPoint,this.callSuper("initialize",h)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,h=this._objects.length;h--;)this._objects[h].setCoords(l)},_updateObjectsCoords:function(h){for(var h=h||this.getCenterPoint(),u=this._objects.length;u--;)this._updateObjectCoords(this._objects[u],h)},_updateObjectCoords:function(l,h){var u=l.left,p=l.top,m=!0;l.set({left:u-h.x,top:p-h.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var h=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),l&&(h&&o.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,h?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,h){var u=this._objects.length;if(this.useSetOnGroup)for(;u--;)this._objects[u].setOnGroup(l,h);if(l==="canvas")for(;u--;)this._objects[u]._set(l,h);o.Object.prototype._set.call(this,l,h)},toObject:function(l){var h=this.includeDefaultValues,u=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=h;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=o.Object.prototype.toObject.call(this,l);return p.objects=u,p},toDatalessObject:function(l){var h,u=this.sourcePath;if(u)h=u;else{var p=this.includeDefaultValues;h=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var y=g.toDatalessObject(l);return g.includeDefaultValues=v,y})}var m=o.Object.prototype.toDatalessObject.call(this,l);return m.objects=h,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=o.Object.prototype.shouldCache.call(this);if(l){for(var h=0,u=this._objects.length;h<u;h++)if(this._objects[h].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,h=this._objects.length;l<h;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var h=0,u=this._objects.length;h<u;h++)this._objects[h].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var h=0,u=this._objects.length;h<u;h++)if(this._objects[h].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(h){o.util.addTransformToObject(h,l),delete h.group,h.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,h=this.canvas;this._objects=[];var u=this.toObject();delete u.objects;var p=new o.ActiveSelection([]);return p.set(u),p.type="activeSelection",h.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,h.add(m)}),p.canvas=h,p._objects=l,h._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(h){h.setCoords(l)}),this},_calcBounds:function(l){for(var h=[],u=[],p,m,g,v=["tr","br","bl","tl"],y=0,b=this._objects.length,x,C=v.length;y<b;++y){for(p=this._objects[y],g=p.calcACoords(),x=0;x<C;x++)m=v[x],h.push(g[m].x),u.push(g[m].y);p.aCoords=g}this._getBounds(h,u,l)},_getBounds:function(l,h,u){var p=new o.Point(c(l),c(h)),m=new o.Point(f(l),f(h)),g=p.y||0,v=p.x||0,y=m.x-p.x||0,b=m.y-p.y||0;this.width=y,this.height=b,u||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var h=["<g ","COMMON_PARTS",` >
`],u=0,p=this._objects.length;u<p;u++)h.push("		",this._objects[u].toSVG(l));return h.push(`</g>
`),h},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",h=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),h].join("")},toClipPathSVG:function(l){for(var h=[],u=0,p=this._objects.length;u<p;u++)h.push("	",this._objects[u].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(h,{reviver:l})}}),o.Group.fromObject=function(l,h){var u=l.objects,p=o.util.object.clone(l,!0);if(delete p.objects,typeof u=="string"){o.loadSVGFromURL(u,function(m){var g=o.util.groupSVGElements(m,l,u),v=p.clipPath;delete p.clipPath,g.set(p),v?o.util.enlivenObjects([v],function(y){g.clipPath=y[0],h&&h(g)}):h&&h(g)});return}o.util.enlivenObjects(u,function(m){o.util.enlivenObjectEnlivables(l,p,function(){h&&h(new o.Group(m,p,!0))})})})}(e),function(a){var o=a.fabric||(a.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(c,f){f=f||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var f=o.Object.prototype.toObject.call(this),l=new o.Group([]);if(delete f.type,l.set(f),c.forEach(function(u){u.canvas.remove(u),u.group=l}),l._objects=c,!this.canvas)return l;var h=this.canvas;return h.add(l),h._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,f,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,f),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var h=0,u=this._objects.length;h<u;h++)this._objects[h]._renderControls(c,l);c.restore()}}),o.ActiveSelection.fromObject=function(c,f){o.util.enlivenObjects(c.objects,function(l){delete c.objects,f&&f(new o.ActiveSelection(l,c,!0))})})}(e),function(a){var o=t.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,f){f||(f={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",f),this._initElement(c,f)},getElement:function(){return this._element||{}},setElement:function(c,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var f=t.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,-l),c.lineTo(f,-l),c.lineTo(f,l),c.lineTo(-f,l),c.lineTo(-f,-l),c.closePath()}},toObject:function(c){var f=[];this.filters.forEach(function(h){h&&f.push(h.toObject())});var l=o(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],f=[],l,h=this._element,u=-this.width/2,p=-this.height/2,m="",g="";if(!h)return[];if(this.hasCrop()){var v=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+u+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',u-this.cropX,'" y="',p-this.cropY,'" width="',h.width||h.naturalWidth,'" height="',h.height||h.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,l=["	<rect ",'x="',u,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?c=c.concat(l,f):c=c.concat(f,l),c},getSrc:function(c){var f=c?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(c,f,l){return t.util.loadImage(c,function(h,u){this.setElement(h,l),this._setWidthHeight(),f&&f(this,u)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,f=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),h=l.scaleX,u=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||h>f&&u>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=h,this._lastScaleY=u;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var m=t.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,y=p.height;m.width=v,m.height=y,this._element=m,this._lastScaleX=c.scaleX=h,this._lastScaleY=c.scaleY=u,t.filterBackend.applyFilters([c],p,v,y,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,l=f.naturalWidth||f.width,h=f.naturalHeight||f.height;if(this._element===this._originalElement){var u=t.util.createCanvasElement();u.width=l,u.height=h,this._element=u,this._filteredEl=u}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,h),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,l,h,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var f=this._element;if(f){var l=this._filterScalingX,h=this._filterScalingY,u=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),y=g(this.cropY,0),b=f.naturalWidth||f.width,x=f.naturalHeight||f.height,C=v*l,_=y*h,S=m(u*l,b-C),T=m(p*h,x-_),I=-u/2,F=-p/2,$=m(u,b/l-v),G=m(p,x/h-y);f&&c.drawImage(f,C,_,S,T,I,F,$,G)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,f){this.setElement(t.util.getById(c),f),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,f){c&&c.length?t.util.enlivenObjects(c,function(l){f&&f(l)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(c){c||(c={});var f=this.getElement();this.width=c.width||f.naturalWidth||f.width||0,this.height=c.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,l=this._element.height,h=1,u=1,p=0,m=0,g=0,v=0,y,b=this.width,x=this.height,C={width:b,height:x};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(h=u=t.util.findScaleToFit(this._element,C),y=(b-f*h)/2,c.alignX==="Min"&&(p=-y),c.alignX==="Max"&&(p=y),y=(x-l*u)/2,c.alignY==="Min"&&(m=-y),c.alignY==="Max"&&(m=y)),c.meetOrSlice==="slice"&&(h=u=t.util.findScaleToCover(this._element,C),y=f-b/h,c.alignX==="Mid"&&(g=y/2),c.alignX==="Max"&&(g=y),y=l-x/u,c.alignY==="Mid"&&(v=y/2),c.alignY==="Max"&&(v=y),f=b/h,l=x/u)):(h=b/f,u=x/l),{width:f,height:l,scaleX:h,scaleY:u,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,f){var l=t.util.object.clone(c);t.util.loadImage(l.src,function(h,u){if(u){f&&f(null,!0);return}t.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],t.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],t.util.enlivenObjectEnlivables(l,l,function(){var g=new t.Image(h,l);f(g,!1)})})})},null,l.crossOrigin)},t.Image.fromURL=function(c,f,l){t.util.loadImage(c,function(h,u){f&&f(new t.Image(h,l),u)},null,l&&l.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,f,l){var h=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(h["xlink:href"],f,o(l?t.util.object.clone(l):{},h))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var o=function(){},c=a.onComplete||o,f=a.onChange||o,l=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(h){l.rotate(h),f()},onComplete:function(){l.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,f){var l="precision "+f+` float;
void main(){}`,h=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(h,l),c.compileShader(h),!!c.getShaderParameter(h,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),l=f.getContext("webgl")||f.getContext("experimental-webgl"),h=!1;if(l){t.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),h=t.maxTextureSize>=c;for(var u=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,u[p])){t.webGlPrecision=u[p];break}}return this.isSupported=h,h},t.WebglFilterBackend=o;function o(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.prototype={tileSize:2048,resources:{},setupGLContext:function(c,f){this.dispose(),this.createWebGLCanvas(c,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,f)},chooseFastestCopyGLTo2DMethod:function(c,f){var l=typeof window.performance<"u",h;try{new ImageData(1,1),h=!0}catch{h=!1}var u=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&h&&u&&p){var m=t.util.createCanvasElement(),g=new ArrayBuffer(c*f*4);if(t.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=d;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:f,targetCanvas:m},y,b,x;m.width=c,m.height=f,y=window.performance.now(),s.call(v,this.gl,v),b=window.performance.now()-y,y=window.performance.now(),d.call(v,this.gl,v),x=window.performance.now()-y,b>x?(this.imageBuffer=g,this.copyGLTo2D=d):this.copyGLTo2D=s}},createWebGLCanvas:function(c,f){var l=t.util.createCanvasElement();l.width=c,l.height=f;var h={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},u=l.getContext("webgl",h);u||(u=l.getContext("experimental-webgl",h)),u&&(u.clearColor(0,0,0,0),this.canvas=l,this.gl=u)},applyFilters:function(c,f,l,h,u,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:l,sourceHeight:h,destinationWidth:l,destinationHeight:h,context:m,sourceTexture:this.createTexture(m,l,h,!g&&f),targetTexture:this.createTexture(m,l,h),originalTexture:g||this.createTexture(m,l,h,!g&&f),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:u},y=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,y),c.forEach(function(b){b&&b.applyTo(v)}),i(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(y),u.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,f,l,h,u){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,u||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,u||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),h?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,l,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,f){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,f={renderer:"",vendor:""};if(!c)return f;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var h=c.getParameter(l.UNMASKED_RENDERER_WEBGL),u=c.getParameter(l.UNMASKED_VENDOR_WEBGL);h&&(f.renderer=h.toLowerCase()),u&&(f.vendor=u.toLowerCase())}return this.gpuInfo=f,f}}}();function i(a){var o=a.targetCanvas,c=o.width,f=o.height,l=a.destinationWidth,h=a.destinationHeight;(c!==l||f!==h)&&(o.width=l,o.height=h)}function s(a,o){var c=a.canvas,f=o.targetCanvas,l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1);var h=c.height-f.height;l.drawImage(c,0,h,f.width,f.height,0,0,f.width,f.height)}function d(a,o){var c=o.targetCanvas,f=c.getContext("2d"),l=o.destinationWidth,h=o.destinationHeight,u=l*h*4,p=new Uint8Array(this.imageBuffer,0,u),m=new Uint8ClampedArray(this.imageBuffer,0,u);a.readPixels(0,0,l,h,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,h);f.putImageData(g,0,0)}(function(){var a=function(){};t.Canvas2dFilterBackend=o;function o(){}o.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,f,l,h,u){var p=u.getContext("2d");p.drawImage(f,0,0,l,h);var m=p.getImageData(0,0,l,h),g=p.getImageData(0,0,l,h),v={sourceWidth:l,sourceHeight:h,imageData:m,originalEl:f,originalImageData:g,canvasEl:u,ctx:p,filterBackend:this};return c.forEach(function(y){y.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==h)&&(u.width=v.imageData.width,u.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var o in a)this[o]=a[o]},createProgram:function(a,o,c){o=o||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(o=o.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,c),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,o),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var h=a.createProgram();if(a.attachShader(h,f),a.attachShader(h,l),a.linkProgram(h),!a.getProgramParameter(h,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(h));var u=this.getAttributeLocations(a,h),p=this.getUniformLocations(a,h)||{};return p.uStepW=a.getUniformLocation(h,"uStepW"),p.uStepH=a.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:u,uniformLocations:p}},getAttributeLocations:function(a,o){return{aPosition:a.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,o,c){var f=o.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var o=a.context,c,f;a.passes>1?(c=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==f)&&(o.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(o,c,f)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,a.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(a){a.passes--,a.pass++;var o=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=o},isNeutralState:function(){var a=this.mainParameter,o=t.Image.filters[this.type].prototype;if(a)if(Array.isArray(o[a])){for(var c=o[a].length;c--;)if(this[a][c]!==o[a][c])return!1;return!0}else return o[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var o=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?o.bindTexture(o.TEXTURE_2D,a.originalTexture):o.bindTexture(o.TEXTURE_2D,a.sourceTexture),o.useProgram(c.program),this.sendAttributeData(o,c.attributeLocations,a.aPosition),o.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),o.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(o,c.uniformLocations),o.viewport(0,0,a.destinationWidth,a.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,o,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,o),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,o){a.activeTexture(o),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var o=document.createElement("canvas");o.width=a.sourceWidth,o.height=a.sourceHeight,a.helpLayer=o}},toObject:function(){var a={type:this.type},o=this.mainParameter;return o&&(a[o]=this[o]),a},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(a,o){var c=new t.Image.filters[a.type](a);return o&&o(c),c},function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.ColorMatrix=f(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var h=l.imageData,u=h.data,p=u.length,m=this.matrix,g,v,y,b,x,C=this.colorsOnly;for(x=0;x<p;x+=4)g=u[x],v=u[x+1],y=u[x+2],C?(u[x]=g*m[0]+v*m[1]+y*m[2]+m[4]*255,u[x+1]=g*m[5]+v*m[6]+y*m[7]+m[9]*255,u[x+2]=g*m[10]+v*m[11]+y*m[12]+m[14]*255):(b=u[x+3],u[x]=g*m[0]+v*m[1]+y*m[2]+b*m[3]+m[4]*255,u[x+1]=g*m[5]+v*m[6]+y*m[7]+b*m[8]+m[9]*255,u[x+2]=g*m[10]+v*m[11]+y*m[12]+b*m[13]+m[14]*255,u[x+3]=g*m[15]+v*m[16]+y*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,h){return{uColorMatrix:l.getUniformLocation(h,"uColorMatrix"),uConstants:l.getUniformLocation(h,"uConstants")}},sendUniformData:function(l,h){var u=this.matrix,p=[u[0],u[1],u[2],u[3],u[5],u[6],u[7],u[8],u[10],u[11],u[12],u[13],u[15],u[16],u[17],u[18]],m=[u[4],u[9],u[14],u[19]];l.uniformMatrix4fv(h.uColorMatrix,!1,p),l.uniform4fv(h.uConstants,m)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Brightness=f(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var h=l.imageData,u=h.data,p,m=u.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)u[p]=u[p]+g,u[p+1]=u[p+1]+g,u[p+2]=u[p+2]+g}},getUniformLocations:function(l,h){return{uBrightness:l.getUniformLocation(h,"uBrightness")}},sendUniformData:function(l,h){l.uniform1f(h.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.Image.filters,l=o.util.createClass;f.Convolute=l(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(h){var u=Math.sqrt(this.matrix.length),p=this.type+"_"+u+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return h.programCache.hasOwnProperty(p)||(h.programCache[p]=this.createProgram(h.context,m)),h.programCache[p]},applyTo2d:function(h){var u=h.imageData,p=u.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),y=u.width,b=u.height,x=h.ctx.createImageData(y,b),C=x.data,_=this.opaque?1:0,S,T,I,F,$,G,ne,Y,Q,Z,ie,V,k;for(ie=0;ie<b;ie++)for(Z=0;Z<y;Z++){for($=(ie*y+Z)*4,S=0,T=0,I=0,F=0,k=0;k<g;k++)for(V=0;V<g;V++)ne=ie+k-v,G=Z+V-v,!(ne<0||ne>=b||G<0||G>=y)&&(Y=(ne*y+G)*4,Q=m[k*g+V],S+=p[Y]*Q,T+=p[Y+1]*Q,I+=p[Y+2]*Q,_||(F+=p[Y+3]*Q));C[$]=S,C[$+1]=T,C[$+2]=I,_?C[$+3]=p[$+3]:C[$+3]=F}h.imageData=x},getUniformLocations:function(h,u){return{uMatrix:h.getUniformLocation(u,"uMatrix"),uOpaque:h.getUniformLocation(u,"uOpaque"),uHalfSize:h.getUniformLocation(u,"uHalfSize"),uSize:h.getUniformLocation(u,"uSize")}},sendUniformData:function(h,u){h.uniform1fv(u.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Grayscale=f(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var h=l.imageData,u=h.data,p,m=u.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(u[p]+u[p+1]+u[p+2])/3:v==="lightness"?g=(Math.min(u[p],u[p+1],u[p+2])+Math.max(u[p],u[p+1],u[p+2]))/2:v==="luminosity"&&(g=.21*u[p]+.72*u[p+1]+.07*u[p+2]),u[p]=g,u[p+1]=g,u[p+2]=g},retrieveShader:function(l){var h=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(h)){var u=this.fragmentSource[this.mode];l.programCache[h]=this.createProgram(l.context,u)}return l.programCache[h]},getUniformLocations:function(l,h){return{uMode:l.getUniformLocation(h,"uMode")}},sendUniformData:function(l,h){var u=1;l.uniform1i(h.uMode,u)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Invert=f(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var h=l.imageData,u=h.data,p,m=u.length;for(p=0;p<m;p+=4)u[p]=255-u[p],u[p+1]=255-u[p+1],u[p+2]=255-u[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,h){return{uInvert:l.getUniformLocation(h,"uInvert")}},sendUniformData:function(l,h){l.uniform1i(h.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.Image.filters,l=o.util.createClass;f.Noise=l(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(h){if(this.noise!==0){var u=h.imageData,p=u.data,m,g=p.length,v=this.noise,y;for(m=0,g=p.length;m<g;m+=4)y=(.5-Math.random())*v,p[m]+=y,p[m+1]+=y,p[m+2]+=y}},getUniformLocations:function(h,u){return{uNoise:h.getUniformLocation(u,"uNoise"),uSeed:h.getUniformLocation(u,"uSeed")}},sendUniformData:function(h,u){h.uniform1f(u.uNoise,this.noise/255),h.uniform1f(u.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Pixelate=f(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var h=l.imageData,u=h.data,p=h.height,m=h.width,g,v,y,b,x,C,_,S,T,I,F;for(v=0;v<p;v+=this.blocksize)for(y=0;y<m;y+=this.blocksize)for(g=v*4*m+y*4,b=u[g],x=u[g+1],C=u[g+2],_=u[g+3],I=Math.min(v+this.blocksize,p),F=Math.min(y+this.blocksize,m),S=v;S<I;S++)for(T=y;T<F;T++)g=S*4*m+T*4,u[g]=b,u[g+1]=x,u[g+2]=C,u[g+3]=_},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,h){return{uBlocksize:l.getUniformLocation(h,"uBlocksize"),uStepW:l.getUniformLocation(h,"uStepW"),uStepH:l.getUniformLocation(h,"uStepH")}},sendUniformData:function(l,h){l.uniform1f(h.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,f=o.Image.filters,l=o.util.createClass;f.RemoveColor=l(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(h){var u=h.imageData,p=u.data,m,g=this.distance*255,v,y,b,x=new o.Color(this.color).getSource(),C=[x[0]-g,x[1]-g,x[2]-g],_=[x[0]+g,x[1]+g,x[2]+g];for(m=0;m<p.length;m+=4)v=p[m],y=p[m+1],b=p[m+2],v>C[0]&&y>C[1]&&b>C[2]&&v<_[0]&&y<_[1]&&b<_[2]&&(p[m+3]=0)},getUniformLocations:function(h,u){return{uLow:h.getUniformLocation(u,"uLow"),uHigh:h.getUniformLocation(u,"uHigh")}},sendUniformData:function(h,u){var p=new o.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];h.uniform4fv(u.uLow,g),h.uniform4fv(u.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var h in l)c[h]=f(c.ColorMatrix,{type:h,matrix:l[h],mainParameter:!1,colorsOnly:!0}),o.Image.filters[h].fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric,c=o.Image.filters,f=o.util.createClass;c.BlendColor=f(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var h=this.type+"_"+this.mode,u;return l.programCache.hasOwnProperty(h)||(u=this.buildSource(this.mode),l.programCache[h]=this.createProgram(l.context,u)),l.programCache[h]},applyTo2d:function(l){var h=l.imageData,u=h.data,p=u.length,m,g,v,y,b,x,C,_=1-this.alpha;C=new o.Color(this.color).getSource(),m=C[0]*this.alpha,g=C[1]*this.alpha,v=C[2]*this.alpha;for(var S=0;S<p;S+=4)switch(y=u[S],b=u[S+1],x=u[S+2],this.mode){case"multiply":u[S]=y*m/255,u[S+1]=b*g/255,u[S+2]=x*v/255;break;case"screen":u[S]=255-(255-y)*(255-m)/255,u[S+1]=255-(255-b)*(255-g)/255,u[S+2]=255-(255-x)*(255-v)/255;break;case"add":u[S]=y+m,u[S+1]=b+g,u[S+2]=x+v;break;case"diff":case"difference":u[S]=Math.abs(y-m),u[S+1]=Math.abs(b-g),u[S+2]=Math.abs(x-v);break;case"subtract":u[S]=y-m,u[S+1]=b-g,u[S+2]=x-v;break;case"darken":u[S]=Math.min(y,m),u[S+1]=Math.min(b,g),u[S+2]=Math.min(x,v);break;case"lighten":u[S]=Math.max(y,m),u[S+1]=Math.max(b,g),u[S+2]=Math.max(x,v);break;case"overlay":u[S]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,u[S+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,u[S+2]=v<128?2*x*v/255:255-2*(255-x)*(255-v)/255;break;case"exclusion":u[S]=m+y-2*m*y/255,u[S+1]=g+b-2*g*b/255,u[S+2]=v+x-2*v*x/255;break;case"tint":u[S]=m+y*_,u[S+1]=g+b*_,u[S+2]=v+x*_}},getUniformLocations:function(l,h){return{uColor:l.getUniformLocation(h,"uColor")}},sendUniformData:function(l,h){var u=new o.Color(this.color).getSource();u[0]=this.alpha*u[0]/255,u[1]=this.alpha*u[1]/255,u[2]=this.alpha*u[2]/255,u[3]=this.alpha,l.uniform4fv(h.uColor,u)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric,c=o.Image.filters,f=o.util.createClass;c.BlendImage=f(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var h=this.type+"_"+this.mode,u=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,u)),l.programCache[h]},applyToWebGL:function(l){var h=l.context,u=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(h,u,h.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(h,h.TEXTURE1)},createTexture:function(l,h){return l.getCachedTexture(h.cacheKey,h._element)},calculateMatrix:function(){var l=this.image,h=l._element.width,u=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/h,-l.top/u,1]},applyTo2d:function(l){var h=l.imageData,u=l.filterBackend.resources,p=h.data,m=p.length,g=h.width,v=h.height,y,b,x,C,_,S,T,I,F,$,G=this.image,ne;u.blendImage||(u.blendImage=o.util.createCanvasElement()),F=u.blendImage,$=F.getContext("2d"),F.width!==g||F.height!==v?(F.width=g,F.height=v):$.clearRect(0,0,g,v),$.setTransform(G.scaleX,0,0,G.scaleY,G.left,G.top),$.drawImage(G._element,0,0,g,v),ne=$.getImageData(0,0,g,v).data;for(var Y=0;Y<m;Y+=4)switch(_=p[Y],S=p[Y+1],T=p[Y+2],I=p[Y+3],y=ne[Y],b=ne[Y+1],x=ne[Y+2],C=ne[Y+3],this.mode){case"multiply":p[Y]=_*y/255,p[Y+1]=S*b/255,p[Y+2]=T*x/255,p[Y+3]=I*C/255;break;case"mask":p[Y+3]=C;break}},getUniformLocations:function(l,h){return{uTransformMatrix:l.getUniformLocation(h,"uTransformMatrix"),uImage:l.getUniformLocation(h,"uImage")}},sendUniformData:function(l,h){var u=this.calculateMatrix();l.uniform1i(h.uImage,1),l.uniformMatrix3fv(h.uTransformMatrix,!1,u)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(l,h){o.Image.fromObject(l.image,function(u){var p=o.util.object.clone(l);p.image=u,h(new o.Image.filters.BlendImage(p))})}}(e),function(a){var o=a.fabric||(a.fabric={}),c=Math.pow,f=Math.floor,l=Math.sqrt,h=Math.abs,u=Math.round,p=Math.sin,m=Math.ceil,g=o.Image.filters,v=o.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,b){return{uDelta:y.getUniformLocation(b,"uDelta"),uTaps:y.getUniformLocation(b,"uTaps")}},sendUniformData:function(y,b){y.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(y){var b=this.getFilterWindow(),x=this.type+"_"+b;if(!y.programCache.hasOwnProperty(x)){var C=this.generateShader(b);y.programCache[x]=this.createProgram(y.context,C)}return y.programCache[x]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,x=this.getFilterWindow(),C=new Array(x),_=1;_<=x;_++)C[_-1]=y(_*b);return C},generateShader:function(C){for(var b=new Array(C),x=this.fragmentSourceTOP,C,_=1;_<=C;_++)b[_-1]=_+".0 * uDelta";return x+="uniform float uTaps["+C+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,b.forEach(function(S,T){x+="  color += texture2D(uTexture, vTexCoord + "+S+") * uTaps["+T+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+S+") * uTaps["+T+`];
`,x+="  sum += 2.0 * uTaps["+T+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(b){if(b>=y||b<=-y)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var x=b/y;return p(b)/b*p(x)/x}},applyTo2d:function(y){var b=y.imageData,x=this.scaleX,C=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/C;var _=b.width,S=b.height,T=u(_*x),I=u(S*C),F;this.resizeType==="sliceHack"?F=this.sliceByTwo(y,_,S,T,I):this.resizeType==="hermite"?F=this.hermiteFastResize(y,_,S,T,I):this.resizeType==="bilinear"?F=this.bilinearFiltering(y,_,S,T,I):this.resizeType==="lanczos"&&(F=this.lanczosResize(y,_,S,T,I)),y.imageData=F},sliceByTwo:function(y,b,x,C,_){var S=y.imageData,T=.5,I=!1,F=!1,$=b*T,G=x*T,ne=o.filterBackend.resources,Y,Q,Z=0,ie=0,V=b,k=0;for(ne.sliceByTwo||(ne.sliceByTwo=document.createElement("canvas")),Y=ne.sliceByTwo,(Y.width<b*1.5||Y.height<x)&&(Y.width=b*1.5,Y.height=x),Q=Y.getContext("2d"),Q.clearRect(0,0,b*1.5,x),Q.putImageData(S,0,0),C=f(C),_=f(_);!I||!F;)b=$,x=G,C<f($*T)?$=f($*T):($=C,I=!0),_<f(G*T)?G=f(G*T):(G=_,F=!0),Q.drawImage(Y,Z,ie,b,x,V,k,$,G),Z=V,ie=k,k+=G;return Q.getImageData(Z,ie,C,_)},lanczosResize:function(y,b,x,C,_){function S(A){var j,H,M,O,R,B,U,W,ee,re,ue;for(k.x=(A+.5)*G,P.x=f(k.x),j=0;j<_;j++){for(k.y=(j+.5)*ne,P.y=f(k.y),R=0,B=0,U=0,W=0,ee=0,H=P.x-Z;H<=P.x+Z;H++)if(!(H<0||H>=b)){re=f(1e3*h(H-k.x)),V[re]||(V[re]={});for(var X=P.y-ie;X<=P.y+ie;X++)X<0||X>=x||(ue=f(1e3*h(X-k.y)),V[re][ue]||(V[re][ue]=$(l(c(re*Y,2)+c(ue*Q,2))/1e3)),M=V[re][ue],M>0&&(O=(X*b+H)*4,R+=M,B+=M*T[O],U+=M*T[O+1],W+=M*T[O+2],ee+=M*T[O+3]))}O=(j*C+A)*4,F[O]=B/R,F[O+1]=U/R,F[O+2]=W/R,F[O+3]=ee/R}return++A<C?S(A):I}var T=y.imageData.data,I=y.ctx.createImageData(C,_),F=I.data,$=this.lanczosCreate(this.lanczosLobes),G=this.rcpScaleX,ne=this.rcpScaleY,Y=2/this.rcpScaleX,Q=2/this.rcpScaleY,Z=m(G*this.lanczosLobes/2),ie=m(ne*this.lanczosLobes/2),V={},k={},P={};return S(0)},bilinearFiltering:function(y,b,x,C,_){var S,T,I,F,$,G,ne,Y,Q,Z,ie,V,k=0,P,A=this.rcpScaleX,j=this.rcpScaleY,H=4*(b-1),M=y.imageData,O=M.data,R=y.ctx.createImageData(C,_),B=R.data;for(ne=0;ne<_;ne++)for(Y=0;Y<C;Y++)for($=f(A*Y),G=f(j*ne),Q=A*Y-$,Z=j*ne-G,P=4*(G*b+$),ie=0;ie<4;ie++)S=O[P+ie],T=O[P+4+ie],I=O[P+H+ie],F=O[P+H+4+ie],V=S*(1-Q)*(1-Z)+T*Q*(1-Z)+I*Z*(1-Q)+F*Q*Z,B[k++]=V;return R},hermiteFastResize:function(y,b,x,C,_){for(var S=this.rcpScaleX,T=this.rcpScaleY,I=m(S/2),F=m(T/2),$=y.imageData,G=$.data,ne=y.ctx.createImageData(C,_),Y=ne.data,Q=0;Q<_;Q++)for(var Z=0;Z<C;Z++){for(var ie=(Z+Q*C)*4,V=0,k=0,P=0,A=0,j=0,H=0,M=0,O=(Q+.5)*T,R=f(Q*T);R<(Q+1)*T;R++)for(var B=h(O-(R+.5))/F,U=(Z+.5)*S,W=B*B,ee=f(Z*S);ee<(Z+1)*S;ee++){var re=h(U-(ee+.5))/I,ue=l(W+re*re);ue>1&&ue<-1||(V=2*ue*ue*ue-3*ue*ue+1,V>0&&(re=4*(ee+R*b),M+=V*G[re+3],P+=V,G[re+3]<255&&(V=V*G[re+3]/250),A+=V*G[re],j+=V*G[re+1],H+=V*G[re+2],k+=V))}Y[ie]=A/k,Y[ie+1]=j/k,Y[ie+2]=H/k,Y[ie+3]=M/P}return ne},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Contrast=f(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var h=l.imageData,u,m,p=h.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(u=0;u<m;u+=4)p[u]=v*(p[u]-128)+128,p[u+1]=v*(p[u+1]-128)+128,p[u+2]=v*(p[u+2]-128)+128}},getUniformLocations:function(l,h){return{uContrast:l.getUniformLocation(h,"uContrast")}},sendUniformData:function(l,h){l.uniform1f(h.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Saturation=f(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var h=l.imageData,u=h.data,p=u.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(u[g],u[g+1],u[g+2]),u[g]+=v!==u[g]?(v-u[g])*m:0,u[g+1]+=v!==u[g+1]?(v-u[g+1])*m:0,u[g+2]+=v!==u[g+2]?(v-u[g+2])*m:0}},getUniformLocations:function(l,h){return{uSaturation:l.getUniformLocation(h,"uSaturation")}},sendUniformData:function(l,h){l.uniform1f(h.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Vibrance=f(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var h=l.imageData,u=h.data,p=u.length,m=-this.vibrance,g,v,y,b;for(g=0;g<p;g+=4)v=Math.max(u[g],u[g+1],u[g+2]),y=(u[g]+u[g+1]+u[g+2])/3,b=Math.abs(v-y)*2/255*m,u[g]+=v!==u[g]?(v-u[g])*b:0,u[g+1]+=v!==u[g+1]?(v-u[g+1])*b:0,u[g+2]+=v!==u[g+2]?(v-u[g+2])*b:0}},getUniformLocations:function(l,h){return{uVibrance:l.getUniformLocation(h,"uVibrance")}},sendUniformData:function(l,h){l.uniform1f(h.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Blur=f(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var h=l.filterBackend.resources,u,p,m=l.imageData.width,g=l.imageData.height;h.blurLayer1||(h.blurLayer1=o.util.createCanvasElement(),h.blurLayer2=o.util.createCanvasElement()),u=h.blurLayer1,p=h.blurLayer2,(u.width!==m||u.height!==g)&&(p.width=u.width=m,p.height=u.height=g);var v=u.getContext("2d"),y=p.getContext("2d"),b=15,x,C,_,S,T=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),y.clearRect(0,0,m,g),S=-b;S<=b;S++)x=(Math.random()-.5)/4,C=S/b,_=T*C*m+x,y.globalAlpha=1-Math.abs(C),y.drawImage(u,_,x),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);for(S=-b;S<=b;S++)x=(Math.random()-.5)/4,C=S/b,_=T*C*g+x,y.globalAlpha=1-Math.abs(C),y.drawImage(u,x,_),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);l.ctx.drawImage(u,0,0);var I=l.ctx.getImageData(0,0,u.width,u.height);return v.globalAlpha=1,v.clearRect(0,0,u.width,u.height),I},getUniformLocations:function(l,h){return{delta:l.getUniformLocation(h,"uDelta")}},sendUniformData:function(l,h){var u=this.chooseRightDelta();l.uniform2fv(h.delta,u)},chooseRightDelta:function(){var l=1,h=[0,0],u;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),u=l*this.blur*.12,this.horizontal?h[0]=u:h[1]=u,h}}),c.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Gamma=f(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var h=l.imageData,u=h.data,p=this.gamma,m=u.length,g=1/p[0],v=1/p[1],y=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,y)*255;for(b=0,m=u.length;b<m;b+=4)u[b]=this.rVals[u[b]],u[b+1]=this.gVals[u[b+1]],u[b+2]=this.bVals[u[b+2]]},getUniformLocations:function(l,h){return{uGamma:l.getUniformLocation(h,"uGamma")}},sendUniformData:function(l,h){l.uniform3fv(h.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.Composed=f(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(h){h.applyTo(l)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(l,h){var u=l.subFilters||[],p=u.map(function(g){return new o.Image.filters[g.type](g)}),m=new o.Image.filters.Composed({subFilters:p});return h&&h(m),m}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,f=o.util.createClass;c.HueRotation=f(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,h=o.util.cos(l),u=o.util.sin(l),p=1/3,m=Math.sqrt(p)*u,g=1-h;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=h+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=h+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=h+p*g},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.clone;if(o.Text){o.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(f),cacheProperties:o.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,h){this.styles=h?h.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",h),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=o.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,h,u,p,m,g,v,y=0,b=this._textLines.length;y<b;y++)if(!(this.textAlign!=="justify"&&(y===b-1||this.isEndOfWrapping(y)))&&(p=0,m=this._textLines[y],h=this.getLineWidth(y),h<this.width&&(v=this.textLines[y].match(this._reSpacesAndTabs)))){u=v.length,l=(this.width-h)/u;for(var x=0,C=m.length;x<=C;x++)g=this.__charBounds[y][x],this._reSpaceAndTab.test(m[x])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),h=this.fontSize;return l.width+=h*l.zoomX,l.height+=h*l.zoomY,l},_render:function(l){var h=this.path;h&&!h.isNotVisible()&&h._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,h,u){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(h,u)},calcTextWidth:function(){for(var l=this.getLineWidth(0),h=1,u=this._textLines.length;h<u;h++){var p=this.getLineWidth(h);p>l&&(l=p)}return l},_renderTextLine:function(l,h,u,p,m,g){this._renderChars(l,h,u,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var h,u,p=l.fillStyle,m,g,v=this._getLeftOffset(),y=this._getTopOffset(),b=0,x=0,C,_,S=this.path,T,I=0,F=this._textLines.length;I<F;I++){if(h=this.getHeightOfLine(I),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",I)){y+=h;continue}m=this._textLines[I],u=this._getLineLeftOffset(I),x=0,b=0,g=this.getValueOfPropertyAt(I,0,"textBackgroundColor");for(var $=0,G=m.length;$<G;$++)C=this.__charBounds[I][$],_=this.getValueOfPropertyAt(I,$,"textBackgroundColor"),S?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),l.fillStyle=_,_&&l.fillRect(-C.width/2,-h/this.lineHeight*(1-this._fontSizeFraction),C.width,h/this.lineHeight),l.restore()):_!==g?(T=v+u+b,this.direction==="rtl"&&(T=this.width-T-x),l.fillStyle=g,g&&l.fillRect(T,y,x,h/this.lineHeight),b=C.left,x=C.width,g=_):x+=C.kernedWidth;_&&!S&&(T=v+u+b,this.direction==="rtl"&&(T=this.width-T-x),l.fillStyle=_,l.fillRect(T,y,x,h/this.lineHeight)),y+=h}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var h=l.fontFamily.toLowerCase();o.charWidthsCache[h]||(o.charWidthsCache[h]={});var u=o.charWidthsCache[h],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return u[p]||(u[p]={}),u[p]},_measureChar:function(l,h,u,p){var m=this.getFontCache(h),g=this._getFontDeclaration(h),v=this._getFontDeclaration(p),y=u+l,b=g===v,x,C,_,S=h.fontSize/this.CACHE_FONT_SIZE,T;if(u&&m[u]!==void 0&&(_=m[u]),m[l]!==void 0&&(T=x=m[l]),b&&m[y]!==void 0&&(C=m[y],T=C-_),x===void 0||_===void 0||C===void 0){var I=this.getMeasuringContext();this._setTextStyles(I,h,!0)}return x===void 0&&(T=x=I.measureText(l).width,m[l]=x),_===void 0&&b&&u&&(_=I.measureText(u).width,m[u]=_),b&&C===void 0&&(C=I.measureText(y).width,m[y]=C,T=C-_),{width:x*S,kernedWidth:T*S}},getHeightOfChar:function(l,h){return this.getValueOfPropertyAt(l,h,"fontSize")},measureLine:function(l){var h=this._measureLine(l);return this.charSpacing!==0&&(h.width-=this._getWidthOfCharSpacing()),h.width<0&&(h.width=0),h},_measureLine:function(l){var h=0,u,p,m=this._textLines[l],g,v,y=0,b=new Array(m.length),x=0,C,_,S=this.path,T=this.pathSide==="right";for(this.__charBounds[l]=b,u=0;u<m.length;u++)p=m[u],v=this._getGraphemeBox(p,l,u,g),b[u]=v,h+=v.kernedWidth,g=p;if(b[u]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},S){switch(_=S.segmentsInfo[S.segmentsInfo.length-1].length,C=o.util.getPointOnPath(S.path,0,S.segmentsInfo),C.x+=S.pathOffset.x,C.y+=S.pathOffset.y,this.textAlign){case"left":x=T?_-h:0;break;case"center":x=(_-h)/2;break;case"right":x=T?0:_-h;break}for(x+=this.pathStartOffset*(T?-1:1),u=T?m.length-1:0;T?u>=0:u<m.length;T?u--:u++)v=b[u],x>_?x%=_:x<0&&(x+=_),this._setGraphemeOnPath(x,v,C),x+=v.kernedWidth}return{width:h,numOfSpaces:y}},_setGraphemeOnPath:function(l,h,u){var p=l+h.kernedWidth/2,m=this.path,g=o.util.getPointOnPath(m.path,p,m.segmentsInfo);h.renderLeft=g.x-u.x,h.renderTop=g.y-u.y,h.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,h,u,p,m){var g=this.getCompleteStyleDeclaration(h,u),v=p?this.getCompleteStyleDeclaration(h,u-1):{},y=this._measureChar(l,g,p,v),b=y.kernedWidth,x=y.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),x+=C,b+=C);var _={width:x,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(u>0&&!m){var S=this.__charBounds[h][u-1];_.left=S.left+S.width+y.kernedWidth-y.width}return _},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var h=this._textLines[l],u=this.getHeightOfChar(l,0),p=1,m=h.length;p<m;p++)u=Math.max(this.getHeightOfChar(l,p),u);return this.__lineHeights[l]=u*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,h=0,u=0,p=this._textLines.length;u<p;u++)l=this.getHeightOfLine(u),h+=u===p-1?l/this.lineHeight:l;return h},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,h){l.save();for(var u=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var y=this.getHeightOfLine(g),b=y/this.lineHeight,x=this._getLineLeftOffset(g);this._renderTextLine(h,l,this._textLines[g],p+x,m+u+b,g),u+=y}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,h,u,p,m,g){var v=this.getHeightOfLine(g),y=this.textAlign.indexOf("justify")!==-1,b,x,C="",_,S=0,T,I=this.path,F=!y&&this.charSpacing===0&&this.isEmptyStyles(g)&&!I,$=this.direction==="ltr",G=this.direction==="ltr"?1:-1,ne,Y=h.canvas.getAttribute("dir");if(h.save(),Y!==this.direction&&(h.canvas.setAttribute("dir",$?"ltr":"rtl"),h.direction=$?"ltr":"rtl",h.textAlign=$?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,F){this._renderChar(l,h,g,0,u.join(""),p,m,v),h.restore();return}for(var Q=0,Z=u.length-1;Q<=Z;Q++)T=Q===Z||this.charSpacing||I,C+=u[Q],_=this.__charBounds[g][Q],S===0?(p+=G*(_.kernedWidth-_.width),S+=_.width):S+=_.kernedWidth,y&&!T&&this._reSpaceAndTab.test(u[Q])&&(T=!0),T||(b=b||this.getCompleteStyleDeclaration(g,Q),x=this.getCompleteStyleDeclaration(g,Q+1),T=o.util.hasStyleChanged(b,x,!1)),T&&(I?(h.save(),h.translate(_.renderLeft,_.renderTop),h.rotate(_.angle),this._renderChar(l,h,g,Q,C,-S/2,0,v),h.restore()):(ne=p,this._renderChar(l,h,g,Q,C,ne,m,v)),C="",b=x,p+=G*S,S=0);h.restore()},_applyPatternGradientTransformText:function(l){var h=o.util.createCanvasElement(),u,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return h.width=p,h.height=m,u=h.getContext("2d"),u.beginPath(),u.moveTo(0,0),u.lineTo(p,0),u.lineTo(p,m),u.lineTo(0,m),u.closePath(),u.translate(p/2,m/2),u.fillStyle=l.toLive(u),this._applyPatternGradientTransform(u,l),u.fill(),u.createPattern(h,"no-repeat")},handleFiller:function(l,h,u){var p,m;return u.toLive?u.gradientUnits==="percentage"||u.gradientTransform||u.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[h]=this._applyPatternGradientTransformText(u),{offsetX:p,offsetY:m}):(l[h]=u.toLive(l,this),this._applyPatternGradientTransform(l,u)):(l[h]=u,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,h){return l.lineWidth=h.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",h.stroke)},_setFillStyles:function(l,h){return this.handleFiller(l,"fillStyle",h.fill)},_renderChar:function(l,h,u,p,m,g,v){var y=this._getStyleDeclaration(u,p),b=this.getCompleteStyleDeclaration(u,p),x=l==="fillText"&&b.fill,C=l==="strokeText"&&b.stroke&&b.strokeWidth,_,S;!C&&!x||(h.save(),x&&(_=this._setFillStyles(h,b)),C&&(S=this._setStrokeStyles(h,b)),h.font=this._getFontDeclaration(b),y&&y.textBackgroundColor&&this._removeShadow(h),y&&y.deltaY&&(v+=y.deltaY),x&&h.fillText(m,g-_.offsetX,v-_.offsetY),C&&h.strokeText(m,g-S.offsetX,v-S.offsetY),h.restore())},setSuperscript:function(l,h){return this._setScript(l,h,this.superscript)},setSubscript:function(l,h){return this._setScript(l,h,this.subscript)},_setScript:function(l,h,u){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*u.size,deltaY:g+m*u.baseline};return this.setSelectionStyles(v,l,h),this},_getLineLeftOffset:function(l){var h=this.getLineWidth(l),u=this.width-h,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=u/2),p==="right"&&(g=u),p==="justify-center"&&(g=u/2),p==="justify-right"&&(g=u),m==="rtl"&&(g-=u),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var h=this.measureLine(l),u=h.width;return this.__lineWidths[l]=u,u},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,h,u){var p=this._getStyleDeclaration(l,h);return p&&typeof p[u]<"u"?p[u]:this[u]},_renderTextDecoration:function(l,h){if(!(!this[h]&&!this.styleHas(h))){for(var u,p,m,g,v,y,b,x,C=this._getLeftOffset(),_=this._getTopOffset(),S,T,I,F,$,G,ne,Y,Q=this.path,Z=this._getWidthOfCharSpacing(),ie=this.offsets[h],V=0,k=this._textLines.length;V<k;V++){if(u=this.getHeightOfLine(V),!this[h]&&!this.styleHas(h,V)){_+=u;continue}b=this._textLines[V],G=u/this.lineHeight,g=this._getLineLeftOffset(V),T=0,I=0,x=this.getValueOfPropertyAt(V,0,h),Y=this.getValueOfPropertyAt(V,0,"fill"),S=_+G*(1-this._fontSizeFraction),p=this.getHeightOfChar(V,0),v=this.getValueOfPropertyAt(V,0,"deltaY");for(var P=0,A=b.length;P<A;P++)if(F=this.__charBounds[V][P],$=this.getValueOfPropertyAt(V,P,h),ne=this.getValueOfPropertyAt(V,P,"fill"),m=this.getHeightOfChar(V,P),y=this.getValueOfPropertyAt(V,P,"deltaY"),Q&&$&&ne)l.save(),l.fillStyle=Y,l.translate(F.renderLeft,F.renderTop),l.rotate(F.angle),l.fillRect(-F.kernedWidth/2,ie*m+y,F.kernedWidth,this.fontSize/15),l.restore();else if(($!==x||ne!==Y||m!==p||y!==v)&&I>0){var j=C+g+T;this.direction==="rtl"&&(j=this.width-j-I),x&&Y&&(l.fillStyle=Y,l.fillRect(j,S+ie*p+v,I,this.fontSize/15)),T=F.left,I=F.width,x=$,Y=ne,p=m,v=y}else I+=F.kernedWidth;var j=C+g+T;this.direction==="rtl"&&(j=this.width-j-I),l.fillStyle=ne,$&&ne&&l.fillRect(j,S+ie*p+v,I-Z,this.fontSize/15),_+=u}this._removeShadow(l)}},_getFontDeclaration:function(l,h){var u=l||this,p=this.fontFamily,m=o.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?u.fontFamily:'"'+u.fontFamily+'"';return[o.isLikelyNode?u.fontWeight:u.fontStyle,o.isLikelyNode?u.fontStyle:u.fontWeight,h?this.CACHE_FONT_SIZE+"px":u.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var h=l.split(this._reNewline),u=new Array(h.length),p=[`
`],m=[],g=0;g<h.length;g++)u[g]=o.util.string.graphemeSplit(h[g]),m=m.concat(u[g],p);return m.pop(),{_unwrappedLines:u,lines:h,graphemeText:m,graphemeLines:u}},toObject:function(l){var h=f.concat(l),u=this.callSuper("toObject",h);return u.styles=o.util.stylesToArray(this.styles,this.text),u.path&&(u.path=this.path.toObject()),u},set:function(l,h){this.callSuper("set",l,h);var u=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),u=u||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else u=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),u&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(l,h,u){if(!l)return h(null);var p=o.parseAttributes(l,o.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(u=o.util.object.extend(u?c(u):{},p),u.top=u.top||0,u.left=u.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(u.underline=!0),g.indexOf("overline")!==-1&&(u.overline=!0),g.indexOf("line-through")!==-1&&(u.linethrough=!0),delete u.textDecoration}"dx"in p&&(u.left+=p.dx),"dy"in p&&(u.top+=p.dy),"fontSize"in u||(u.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=u.strokeWidth;u.strokeWidth=0;var b=new o.Text(v,u),x=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,_=C*x,S=b.getScaledHeight()+_,T=0;m==="center"&&(T=b.getScaledWidth()/2),m==="right"&&(T=b.getScaledWidth()),b.set({left:b.left-T,top:b.top-(S-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof y<"u"?y:1}),h(b)},o.Text.fromObject=function(l,h){var u=c(l),p=l.path;return delete u.path,o.Object._fromObject("Text",u,function(m){m.styles=o.util.stylesFromArray(l.styles,l.text),p?o.Object._fromObject("Path",p,function(g){m.set("path",g),h(m)},"path"):h(m)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var o=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in o)for(var f in o[c])for(var l in o[c][f])return!1;return!0},styleHas:function(a,o){if(!this.styles||!a||a===""||typeof o<"u"&&!this.styles[o])return!1;var c=typeof o>"u"?this.styles:{0:this.styles[o]};for(var f in c)for(var l in c[f])if(typeof c[f][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var o=this.styles,c=0,f,l,h=!0,u=0,p;for(var m in o){f=0;for(var g in o[m]){var p=o[m][g],v=p.hasOwnProperty(a);c++,v?(l?p[a]!==l&&(h=!1):l=p[a],p[a]===this[a]&&delete p[a]):h=!1,Object.keys(p).length!==0?f++:delete o[m][g]}f===0&&delete o[m]}for(var y=0;y<this._textLines.length;y++)u+=this._textLines[y].length;h&&c===u&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var o=this.styles,c,f,l;for(f in o){c=o[f];for(l in c)delete c[l][a],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete o[f]}}},_extendStyles:function(a,o){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),o)},get2DCursorLocation:function(a,o){typeof a>"u"&&(a=this.selectionStart);for(var c=o?this._unwrappedTextLines:this._textLines,f=c.length,l=0;l<f;l++){if(a<=c[l].length)return{lineIndex:l,charIndex:a};a-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<a?c[l-1].length:a}},getSelectionStyles:function(a,o,c){typeof a>"u"&&(a=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||a);for(var f=[],l=a;l<o;l++)f.push(this.getStyleAtPosition(l,c));return f},getStyleAtPosition:function(a,o){var c=this.get2DCursorLocation(a),f=o?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return f||{}},setSelectionStyles:function(a,o,c){typeof o>"u"&&(o=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||o);for(var f=o;f<c;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,o){var c=this.styles&&this.styles[a];return c?c[o]:null},getCompleteStyleDeclaration:function(a,o){for(var c=this._getStyleDeclaration(a,o)||{},f={},l,h=0;h<this._styleProperties.length;h++)l=this._styleProperties[h],f[l]=typeof c[l]>"u"?this[l]:c[l];return f},_setStyleDeclaration:function(a,o,c){this.styles[a][o]=c},_deleteStyleDeclaration:function(a,o){delete this.styles[a][o]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,c){this.callSuper("initialize",o,c),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,c){this[o]!==c&&(this._fireSelectionChanged(),this[o]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,f=this.canvas.viewportTransform;c.save(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(c),this._clearTextArea(c),o||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var o=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,c):this.renderSelection(o,c),c.restore()}},_clearTextArea:function(o){var c=this.width+4,f=this.height+4;o.clearRect(-c/2,-f/2,c,f)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var c=this._getLeftOffset(),f=this._getTopOffset(),l=this._getCursorBoundariesOffsets(o);return{left:c,top:f,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,f,l,h=0,u=0,p,m=this.get2DCursorLocation(o);l=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)h+=this.getHeightOfLine(g);c=this._getLineLeftOffset(f);var v=this.__charBounds[f][l];return v&&(u=v.left),this.charSpacing!==0&&l===this._textLines[f].length&&(u-=this._getWidthOfCharSpacing()),p={top:h,left:c+(u>0?u:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(o,c){var f=this.get2DCursorLocation(),l=f.lineIndex,h=f.charIndex>0?f.charIndex-1:0,u=this.getValueOfPropertyAt(l,h,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=o.topOffset,v=this.getValueOfPropertyAt(l,h,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-u*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,h,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(o.left+o.leftOffset-m/2,g+o.top+v,m,u)},renderSelection:function(o,c){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,h=this.textAlign.indexOf("justify")!==-1,u=this.get2DCursorLocation(f),p=this.get2DCursorLocation(l),m=u.lineIndex,g=p.lineIndex,v=u.charIndex<0?0:u.charIndex,y=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var x=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),_=0,S=0,T=0;if(b===m&&(S=this.__charBounds[m][v].left),b>=m&&b<g)T=h&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(y===0)T=this.__charBounds[g][y].left;else{var I=this._getWidthOfCharSpacing();T=this.__charBounds[g][y-1].left+this.__charBounds[g][y-1].width-I}_=C,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(C/=this.lineHeight);var F=o.left+x+S,$=T-S,G=C,ne=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",G=1,ne=C):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(F=this.width-F-$),c.fillRect(F,o.top+o.topOffset+ne,$,G),o.topOffset+=_}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0),c=o.charIndex>0?o.charIndex-1:0;return{l:o.lineIndex,c}}}),t.IText.fromObject=function(o,c){var f=t.util.stylesFromArray(o.styles,o.text),l=Object.assign({},o,{styles:f});if(a(l),l.styles)for(var h in l.styles)for(var u in l.styles[h])a(l.styles[h][u]);t.Object._fromObject("IText",l,c,"text")}}(),function(){var a=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var c=o.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,o._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var c=o.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,o),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,o._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,c,f,l){var h;return h={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",c,{duration:f,onComplete:function(){h.isAborted||o[l]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return h.isAborted}}),h},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var c=this,f=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},f)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var c=0,f=o-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f--;for(;/\S/.test(this._text[f])&&f>-1;)c++,f--;return o-c},findWordBoundaryRight:function(o){var c=0,f=o;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)c++,f++;return o+c},findLineBoundaryLeft:function(o){for(var c=0,f=o-1;!/\n/.test(this._text[f])&&f>-1;)c++,f--;return o-c},findLineBoundaryRight:function(o){for(var c=0,f=o;!/\n/.test(this._text[f])&&f<this._text.length;)c++,f++;return o+c},searchWordBoundary:function(o,c){for(var f=this._text,l=this._reSpace.test(f[o])?o-1:o,h=f[l],u=t.reNonWord;!u.test(h)&&l>0&&l<f.length;)l+=c,h=f[l];return u.test(h)&&(l+=c===1?0:1),l},selectWord:function(o){o=o||this.selectionStart;var c=this.searchWordBoundary(o,-1),f=this.searchWordBoundary(o,1);this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){o=o||this.selectionStart;var c=this.findLineBoundaryLeft(o),f=this.findLineBoundaryRight(o);return this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(o.e),f=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||f===l)&&(f===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,c,f){var l=f.slice(0,o),h=t.util.string.graphemeSplit(l).length;if(o===c)return{selectionStart:h,selectionEnd:h};var u=f.slice(o,c),p=t.util.string.graphemeSplit(u).length;return{selectionStart:h,selectionEnd:h+p}},fromGraphemeToStringSelection:function(o,c,f){var l=f.slice(0,o),h=l.join("").length;if(o===c)return{selectionStart:h,selectionEnd:h};var u=f.slice(o,c),p=u.join("").length;return{selectionStart:h,selectionEnd:h+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(o),f=this.get2DCursorLocation(o),l=f.lineIndex,h=f.charIndex,u=this.getValueOfPropertyAt(l,h,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+u},v=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/v,x=y.height/v,C=b-u,_=x-u,S=y.clientWidth/b,T=y.clientHeight/x;return g=t.util.transformPoint(g,m),g=t.util.transformPoint(g,this.canvas.viewportTransform),g.x*=S,g.y*=T,g.x<0&&(g.x=0),g.x>C&&(g.x=C),g.y<0&&(g.y=0),g.y>_&&(g.y=_),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:u+"px",charHeight:u}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,c){var f=this.get2DCursorLocation(o,!0),l=this.get2DCursorLocation(c,!0),h=f.lineIndex,u=f.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(h!==p){if(this.styles[h])for(g=u;g<this._unwrappedTextLines[h].length;g++)delete this.styles[h][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[h]||(this.styles[h]={}),this.styles[h][u+g-m]=v);for(g=h+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,h-p)}else if(this.styles[h]){v=this.styles[h];var y=m-u,b,x;for(g=u;g<m;g++)delete v[g];for(x in this.styles[h])b=parseInt(x,10),b>=m&&(v[b-y]=v[x],delete v[x])}},shiftLineStyles:function(o,c){var f=a(this.styles);for(var l in this.styles){var h=parseInt(l,10);h>o&&(this.styles[h+c]=f[h],f[h-c]||delete this.styles[h])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,c,f,l){var h,u={},p=!1,m=this._unwrappedTextLines[o].length===c;f||(f=1),this.shiftLineStyles(o,f),this.styles[o]&&(h=this.styles[o][c===0?c:c-1]);for(var g in this.styles[o]){var v=parseInt(g,10);v>=c&&(p=!0,u[v-c]=this.styles[o][g],m&&c===0||delete this.styles[o][g])}var y=!1;for(p&&!m&&(this.styles[o+f]=u,y=!0),y&&f--;f>0;)l&&l[f-1]?this.styles[o+f]={0:a(l[f-1])}:h?this.styles[o+f]={0:a(h)}:delete this.styles[o+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(o,c,f,l){this.styles||(this.styles={});var h=this.styles[o],u=h?a(h):{};f||(f=1);for(var p in u){var m=parseInt(p,10);m>=c&&(h[m+f]=u[m],u[m-f]||delete h[m])}if(this._forceClearCache=!0,l){for(;f--;)Object.keys(l[f]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][c+f]=a(l[f]));return}if(h)for(var g=h[c?c-1:1];g&&f--;)this.styles[o][c+f]=a(g)},insertNewStyleBlock:function(o,c,f){for(var l=this.get2DCursorLocation(c,!0),h=[0],u=0,p=0;p<o.length;p++)o[p]===`
`?(u++,h[u]=0):h[u]++;h[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,h[0],f),f=f&&f.slice(h[0]+1)),u&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+h[0],u);for(var p=1;p<u;p++)h[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,h[p],f):f&&this.styles[l.lineIndex+p]&&f[0]&&(this.styles[l.lineIndex+p][0]=f[0]),f=f&&f.slice(h[p]+1);h[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,h[p],f)},setSelectionStartEndWithShift:function(o,c,f){f<=o?(c===o?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=f):f>o&&f<c?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(c===o?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=f)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var o=a.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var o=this.getSelectionStartFromPointer(a),c=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,f,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var o=this.getLocalPointer(a),c=0,f=0,l=0,h=0,u=0,p,m,g=0,v=this._textLines.length;g<v&&l<=o.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,u=g,g>0&&(h+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(u),f=p*this.scaleX,m=this._textLines[u],this.direction==="rtl"&&(o.x=this.width*this.scaleX-o.x+f);for(var y=0,b=m.length;y<b&&(c=f,f+=this.__charBounds[u][y].kernedWidth*this.scaleX,f<=o.x);y++)h++;return this._getNewSelectionStartFromOffset(o,c,f,h,b)},_getNewSelectionStartFromOffset:function(a,o,c,f,l){var h=a.x-o,u=c-a.x,p=u>h||u<0?0:1,m=f+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var o=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in o)this[o[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var o=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,l=c.length,h,u,p=l-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,y,b,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=m>C.selectionStart;v?(h=this._text.slice(m,g),p+=g-m):l<f&&(_?h=this._text.slice(g+p,g):h=this._text.slice(m,m-p)),u=c.slice(C.selectionEnd-p,C.selectionEnd),h&&h.length&&(u.length&&(y=this.getSelectionStyles(m,m+1,!1),y=u.map(function(){return y[0]})),v?(b=m,x=g):_?(b=g-h.length,x=g):(b=g,x=g+h.length),this.removeStyleFromTo(b,x)),u.length&&(o&&u.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(y=t.copiedTextStyle),this.insertNewStyleBlock(u,m,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(a,o){var c=this._getLineLeftOffset(a),f;return o>0&&(f=this.__charBounds[a][o-1],c+=f.left+f.width),c},getDownCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var h=f.charIndex,u=this._getWidthBeforeCursor(l,h),p=this._getIndexOnLine(l+1,u),m=this._textLines[l].slice(h);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,o){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-c;var h=f.charIndex,u=this._getWidthBeforeCursor(l,h),p=this._getIndexOnLine(l-1,u),m=this._textLines[l].slice(0,h),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,o){for(var c=this._textLines[a],f=this._getLineLeftOffset(a),l=f,h=0,u,p,m=0,g=c.length;m<g;m++)if(u=this.__charBounds[a][m].width,l+=u,l>o){p=!0;var v=l-u,y=l,b=Math.abs(v-o),x=Math.abs(y-o);h=x<b?m:m-1;break}return p||(h=c.length-1),h},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,o){var c="get"+a+"CursorOffset",f=this[c](o,this._selectionDirection==="right");o.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var o=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,o,c){var f;if(a.altKey)f=this["findWordBoundary"+c](this[o]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+c](this[o]);else return this[o]+=c==="Left"?-1:1,!0;if(typeof f<"u"&&this[o]!==f)return this[o]=f,!0},_moveLeft:function(a,o){return this._move(a,o,"Left")},_moveRight:function(a,o){return this._move(a,o,"Right")},moveCursorLeftWithoutShift:function(a){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(o=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,o){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,o.shiftKey?c+="Shift":c+="outShift",this[c](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(a,o){typeof o>"u"&&(o=a+1),this.removeStyleFromTo(a,o),this._text.splice(a,o-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,o,c,f){typeof f>"u"&&(f=c),f>c&&this.removeStyleFromTo(c,f);var l=t.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,c,o),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=t.util.toFixed,o=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var f=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,f){var l=[],h=[],u=c,p;this._setSVGBg(h);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(h,m,f+p,u),this._setSVGTextLineText(l,m,f+p,u),u+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:h}},_createTextCharSpan:function(c,f,l,h){var u=c!==c.trim()||c.match(o),p=this.getSvgSpanStyles(f,u),m=p?'style="'+p+'"':"",g=f.deltaY,v="",y=t.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,y)+'" '),['<tspan x="',a(l,y),'" y="',a(h,y),'" ',v,m,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,f,l,h){var u=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",y,b,x=0,C=this._textLines[f],_;h+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var S=0,T=C.length-1;S<=T;S++)_=S===T||this.charSpacing,v+=C[S],y=this.__charBounds[f][S],x===0?(l+=y.kernedWidth-y.width,x+=y.width):x+=y.kernedWidth,p&&!_&&this._reSpaceAndTab.test(C[S])&&(_=!0),_||(m=m||this.getCompleteStyleDeclaration(f,S),g=this.getCompleteStyleDeclaration(f,S+1),_=t.util.hasStyleChanged(m,g,!0)),_&&(b=this._getStyleDeclaration(f,S)||{},c.push(this._createTextCharSpan(v,b,l,h)),v="",m=g,l+=x,x=0)},_pushTextBgRect:function(c,f,l,h,u,p){var m=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(f),' x="',a(l,m),'" y="',a(h,m),'" width="',a(u,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,f,l,h){for(var u=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,y,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),x=0,C=u.length;x<C;x++)v=this.__charBounds[f][x],y=this.getValueOfPropertyAt(f,x,"textBackgroundColor"),y!==b?(b&&this._pushTextBgRect(c,b,l+g,h,m,p),g=v.left,m=v.width,b=y):m+=v.kernedWidth;y&&this._pushTextBgRect(c,y,l+g,h,m,p)},_getFillAttributes:function(c){var f=c&&typeof c=="string"?new t.Color(c):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+c+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var f=0,l=0,h=0;h<c;h++)f+=this.getHeightOfLine(h);return l=this.getHeightOfLine(h),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var f=t.Object.prototype.getSvgStyles.call(this,c);return f+" white-space: pre;"}})}(),function(a){var o=a.fabric||(a.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var f=0,l=0,h=0,u={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[h]===`
`&&p>0?(l=0,h++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[h])&&p>0&&(l++,h++),u[p]={line:f,offset:l},h+=c.graphemeLines[p].length,l+=c.graphemeLines[p].length;return u},styleHas:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[f];l&&(f=l.line)}return o.Text.prototype.styleHas.call(this,c,f)},isEmptyStyles:function(c){if(!this.styles)return!0;var f=0,l=c+1,h,u,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,f=m.offset),g&&(l=g.line,p=l===c,h=g.offset),u=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in u)for(var y in u[v])if(y>=f&&(!p||y<h))for(var b in u[v][y])return!1;return!0},_getStyleDeclaration:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,f=l.offset+f}return this.callSuper("_getStyleDeclaration",c,f)},_setStyleDeclaration:function(c,f,l){var h=this._styleMap[c];c=h.line,f=h.offset+f,this.styles[c][f]=l},_deleteStyleDeclaration:function(c,f){var l=this._styleMap[c];c=l.line,f=l.offset+f,delete this.styles[c][f]},_getLineStyle:function(c){var f=this._styleMap[c];return!!this.styles[f.line]},_setLineStyle:function(c){var f=this._styleMap[c];this.styles[f.line]={}},_wrapText:function(c,f){var l=[],h;for(this.isWrapping=!0,h=0;h<c.length;h++)l=l.concat(this._wrapLine(c[h],h,f));return this.isWrapping=!1,l},_measureWord:function(c,f,l){var h=0,u,p=!0;l=l||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],f,m+l,u,p);h+=v.kernedWidth,u=c[m]}return h},_wrapLine:function(c,f,l,F){var u=0,p=this.splitByGrapheme,m=[],g=[],v=p?o.util.string.graphemeSplit(c):c.split(this._wordJoiners),y="",b=0,x=p?"":" ",C=0,_=0,S=0,T=!0,I=this._getWidthOfCharSpacing(),F=F||0;v.length===0&&v.push([]),l-=F;for(var $=0;$<v.length;$++)y=p?v[$]:o.util.string.graphemeSplit(v[$]),C=this._measureWord(y,f,b),b+=y.length,u+=_+C-I,u>l&&!T?(m.push(g),g=[],u=C,T=!0):u+=I,!T&&!p&&g.push(x),g=g.concat(y),_=p?0:this._measureWord([x],f,b),b++,T=!1,C>S&&(S=C);return $&&m.push(g),S+F>this.dynamicMinWidth&&(this.dynamicMinWidth=S-I+F),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var f=o.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(f.lines,this.width),h=new Array(l.length),u=0;u<l.length;u++)h[u]=l[u].join("");return f.lines=h,f.graphemeLines=l,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var f in this._styleMap)this._textLines[f]&&(c[this._styleMap[f].line]=1);for(var f in this.styles)c[f]||delete this.styles[f]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),o.Textbox.fromObject=function(c,f){var l=o.util.stylesFromArray(c.styles,c.text),h=Object.assign({},c,{styles:l});return o.Object._fromObject("Textbox",h,f,"text")}}(e),function(){var a=t.controlsUtils,o=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,f=a.scalingEqually,l=a.scalingYOrSkewingX,h=a.scalingXOrSkewingY,u=a.scaleOrSkewActionName,p=t.Object.prototype.controls;if(p.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:h,getActionName:u}),p.mr=new t.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:h,getActionName:u}),p.mb=new t.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:l,getActionName:u}),p.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:l,getActionName:u}),p.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.mtr=new t.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var m=t.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new t.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),m.ml=new t.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()})(fe),fe.fabric.PathGroup={},fe.fabric.PathGroup.fromObject=function(e,t){const n=e.paths;delete e.paths,typeof n=="string"?fe.fabric.loadSVGFromURL(n,function(r){const i=n,s=fe.fabric.util.groupSVGElements(r,e,i);s.type="group",e.paths=n,t(s)}):fe.fabric.util.enlivenObjects(n,function(r){r.forEach(function(s){s._removeTransformMatrix()});const i=new fe.fabric.Group(r,e);i.type="group",e.paths=n,t(i)})},fe.fabric.Circle.prototype._render=function(e){e.beginPath(),!this.version&&this.endAngle!=360&&(this.startAngle=fe.fabric.util.radiansToDegrees(this.startAngle),this.endAngle=fe.fabric.util.radiansToDegrees(this.endAngle)),e.arc(0,0,this.radius,fe.fabric.util.degreesToRadians(this.startAngle),fe.fabric.util.degreesToRadians(this.endAngle),!1),this._renderPaintInOrder(e)},fe.fabric.Pattern.prototype.initialize=function(e,t){if(e||(e={}),this.id=fe.fabric.Object.__uid++,this.setOptions(e),!e.source||e.source&&typeof e.source!="string"){t&&t(this);return}if(e.source.startsWith("function")){const n=this;try{const r=/function anonymous\(\s*\)\s*\{\s*([\s\S]*?)\s*\}$/,s=e.source.replace("getBoundingRectWidth()","getBoundingRect().width").match(r);if(s&&s[1]){const d=s[1].trim(),o=new Function(d)(),c=o.toDataURL("image/png");n.source=o,n.type="pattern",t&&t(n)}}catch(r){console.warn("Failed to convert stroke function to PNG:",r)}}else{const n=this;this.source=fe.fabric.util.createImage(),fe.fabric.util.loadImage(e.source,function(r,i){n.source=r,t&&t(n,i)},null,this.crossOrigin)}};function HS(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}function Uu(e,t){return t===void 0&&(t=15),+parseFloat(Number(e).toPrecision(t))}function En(e){var t=e.toString().split(/[eE]/),n=(t[0].split(".")[1]||"").length-+(t[1]||0);return n>0?n:0}function es(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var t=En(e);return t>0?Uu(Number(e)*Math.pow(10,t)):Number(e)}function Yu(e){ym&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function Ua(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t.slice(1);return i.reduce(function(s,d){return e(s,d)},r)}}var hr=Ua(function(e,t){var n=es(e),r=es(t),i=En(e)+En(t),s=n*r;return Yu(s),s/Math.pow(10,i)}),WS=Ua(function(e,t){var n=Math.pow(10,Math.max(En(e),En(t)));return(hr(e,n)+hr(t,n))/n}),US=Ua(function(e,t){var n=Math.pow(10,Math.max(En(e),En(t)));return(hr(e,n)-hr(t,n))/n}),vm=Ua(function(e,t){var n=es(e),r=es(t);return Yu(n),Yu(r),hr(n/r,Uu(Math.pow(10,En(t)-En(e))))});function YS(e,t){var n=Math.pow(10,t),r=vm(Math.round(Math.abs(hr(e,n))),n);return e<0&&r!==0&&(r=hr(r,-1)),r}var ym=!0;function XS(e){e===void 0&&(e=!0),ym=e}var Xu={strip:Uu,plus:WS,minus:US,times:hr,divide:vm,round:YS,digitLength:En,float2Fixed:es,enableBoundaryChecking:XS};const bm=Object.prototype.toString;function xm(e){switch(bm.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return qr(e,Error)}}function Vi(e,t){return bm.call(e)===`[object ${t}]`}function Gu(e){return Vi(e,"ErrorEvent")}function wm(e){return Vi(e,"DOMError")}function GS(e){return Vi(e,"DOMException")}function Bn(e){return Vi(e,"String")}function Ku(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function qu(e){return e===null||Ku(e)||typeof e!="object"&&typeof e!="function"}function Hi(e){return Vi(e,"Object")}function Ya(e){return typeof Event<"u"&&qr(e,Event)}function KS(e){return typeof Element<"u"&&qr(e,Element)}function qS(e){return Vi(e,"RegExp")}function Xa(e){return!!(e&&e.then&&typeof e.then=="function")}function ZS(e){return Hi(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function QS(e){return typeof e=="number"&&e!==e}function qr(e,t){try{return e instanceof t}catch{return!1}}function Cm(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Wi(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function _m(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{Cm(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function JS(e,t,n=!1){return Bn(e)?qS(t)?t.test(e):Bn(t)?n?e===t:e.includes(t):!1:!1}function Ga(e,t=[],n=!1){return t.some(r=>JS(e,r,n))}function e4(e,t,n=250,r,i,s,d){if(!s.exception||!s.exception.values||!d||!qr(d.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=t4(Zu(e,t,i,d.originalException,r,s.exception.values,a,0),n))}function Zu(e,t,n,r,i,s,d,a){if(s.length>=n+1)return s;let o=[...s];if(qr(r[i],Error)){Sm(d,a);const c=e(t,r[i]),f=o.length;km(c,i,f,a),o=Zu(e,t,n,r[i],i,[c,...o],c,f)}return Array.isArray(r.errors)&&r.errors.forEach((c,f)=>{if(qr(c,Error)){Sm(d,a);const l=e(t,c),h=o.length;km(l,`errors[${f}]`,h,a),o=Zu(e,t,n,c,i,[l,...o],l,h)}}),o}function Sm(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function km(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function t4(e,t){return e.map(n=>(n.value&&(n.value=Wi(n.value,t)),n))}function Ka(e){return e&&e.Math==Math?e:void 0}const Oe=typeof globalThis=="object"&&Ka(globalThis)||typeof window=="object"&&Ka(window)||typeof self=="object"&&Ka(self)||typeof global=="object"&&Ka(global)||function(){return this}()||{};function Qu(){return Oe}function Em(e,t,n){const r=n||Oe,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const Ju=Qu(),n4=80;function Tm(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,d=0;const a=" > ",o=a.length;let c;const f=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||n4;for(;n&&s++<r&&(c=r4(n,f),!(c==="html"||s>1&&d+i.length*o+c.length>=l));)i.push(c),d+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function r4(e,t){const n=e,r=[];let i,s,d,a,o;if(!n||!n.tagName)return"";if(Ju.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(c&&c.length)c.forEach(l=>{r.push(`[${l[0]}="${l[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Bn(i))for(s=i.split(/\s+/),o=0;o<s.length;o++)r.push(`.${s[o]}`);const f=["aria-label","type","name","title","alt"];for(o=0;o<f.length;o++)d=f[o],a=n.getAttribute(d),a&&r.push(`[${d}="${a}"]`);return r.join("")}function i4(){try{return Ju.document.location.href}catch{return""}}function o4(e){if(!Ju.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const ts=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,s4="Sentry Logger ",eh=["debug","info","warn","error","log","assert","trace"],qa={};function Za(e){if(!("console"in Oe))return e();const t=Oe.console,n={},r=Object.keys(qa);r.forEach(i=>{const s=qa[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function a4(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return ts?eh.forEach(n=>{t[n]=(...r)=>{e&&Za(()=>{Oe.console[n](`${s4}[${n}]:`,...r)})}}):eh.forEach(n=>{t[n]=()=>{}}),t}const Ce=a4(),l4=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function c4(e){return e==="http"||e==="https"}function ns(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:d,protocol:a,publicKey:o}=e;return`${a}://${o}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${d}`}function u4(e){const t=l4.exec(e);if(!t){Za(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",s,d="",a]=t.slice(1);let o="",c=a;const f=c.split("/");if(f.length>1&&(o=f.slice(0,-1).join("/"),c=f.pop()),c){const l=c.match(/^\d+/);l&&(c=l[0])}return Om({host:s,pass:i,path:o,projectId:c,port:d,protocol:n,publicKey:r})}function Om(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function h4(e){if(!ts)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(d=>e[d]?!1:(Ce.error(`Invalid Sentry Dsn: ${d} missing`),!0))?!1:n.match(/^\d+$/)?c4(r)?t&&isNaN(parseInt(t,10))?(Ce.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Ce.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Ce.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function f4(e){const t=typeof e=="string"?u4(e):Om(e);if(!(!t||!h4(t)))return t}class Tn extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function at(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&Pm(i,r),e[t]=i}function rs(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{ts&&Ce.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Pm(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,rs(e,"__sentry_original__",t)}catch{}}function th(e){return e.__sentry_original__}function d4(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Dm(e){if(xm(e))return{message:e.message,name:e.name,stack:e.stack,...Mm(e)};if(Ya(e)){const t={type:e.type,target:Am(e.target),currentTarget:Am(e.currentTarget),...Mm(e)};return typeof CustomEvent<"u"&&qr(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Am(e){try{return KS(e)?Tm(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Mm(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function p4(e,t=40){const n=Object.keys(Dm(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Wi(n[0],t);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Wi(i,t)}return""}function Nn(e){return nh(e,new Map)}function nh(e,t){if(g4(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=nh(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(nh(i,t))}),r}return e}function g4(e){if(!Hi(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const jm=50,Im=/\(error: (.*)\)/,Fm=/captureMessage|captureException/;function Rm(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],s=n.split(`
`);for(let d=r;d<s.length;d++){const a=s[d];if(a.length>1024)continue;const o=Im.test(a)?a.replace(Im,"$1"):a;if(!o.match(/\S*Error: /)){for(const c of t){const f=c(o);if(f){i.push(f);break}}if(i.length>=jm)break}}return v4(i)}}function m4(e){return Array.isArray(e)?Rm(...e):e}function v4(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Fm.test(t[t.length-1].function||"")&&(t.pop(),Fm.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,jm).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const rh="<anonymous>";function fr(e){try{return!e||typeof e!="function"?rh:e.name||rh}catch{return rh}}const Qa={},Lm={};function Zr(e,t){Qa[e]=Qa[e]||[],Qa[e].push(t)}function Qr(e,t){Lm[e]||(t(),Lm[e]=!0)}function dn(e,t){const n=e&&Qa[e];if(n)for(const r of n)try{r(t)}catch(i){ts&&Ce.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${fr(r)}
Error:`,i)}}function y4(e){const t="console";Zr(t,e),Qr(t,b4)}function b4(){"console"in Oe&&eh.forEach(function(e){e in Oe.console&&at(Oe.console,e,function(t){return qa[e]=t,function(...n){dn("console",{args:n,level:e});const i=qa[e];i&&i.apply(Oe.console,n)}})})}function tn(){const e=Oe,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function zm(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function dr(e){const{message:t,event_id:n}=e;if(t)return t;const r=zm(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ih(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function is(e,t){const n=zm(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const s={...i&&i.data,...t.data};n.mechanism.data=s}}function Bm(e){if(e&&e.__sentry_captured__)return!0;try{rs(e,"__sentry_captured__",!0)}catch{}return!1}function Nm(e){return Array.isArray(e)?e:[e]}const Ui=Oe,x4=1e3;let $m,oh,sh;function w4(e){const t="dom";Zr(t,e),Qr(t,C4)}function C4(){if(!Ui.document)return;const e=dn.bind(null,"dom"),t=Vm(e,!0);Ui.document.addEventListener("click",t,!1),Ui.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Ui[n]&&Ui[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(at(r,"addEventListener",function(i){return function(s,d,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},f=c[s]=c[s]||{refCount:0};if(!f.handler){const l=Vm(e);f.handler=l,i.call(this,s,l,a)}f.refCount++}catch{}return i.call(this,s,d,a)}}),at(r,"removeEventListener",function(i){return function(s,d,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__||{},f=c[s];f&&(f.refCount--,f.refCount<=0&&(i.call(this,s,f.handler,a),f.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete o.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,d,a)}}))})}function _4(e){if(e.type!==oh)return!1;try{if(!e.target||e.target._sentryId!==sh)return!1}catch{}return!0}function S4(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Vm(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=k4(n);if(S4(n.type,r))return;rs(n,"_sentryCaptured",!0),r&&!r._sentryId&&rs(r,"_sentryId",tn());const i=n.type==="keypress"?"input":n.type;_4(n)||(e({event:n,name:i,global:t}),oh=n.type,sh=r?r._sentryId:void 0),clearTimeout($m),$m=Ui.setTimeout(()=>{sh=void 0,oh=void 0},x4)}}function k4(e){try{return e.target}catch{return null}}const ah=Qu();function Hm(){if(!("fetch"in ah))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function lh(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function E4(){if(typeof EdgeRuntime=="string")return!0;if(!Hm())return!1;if(lh(ah.fetch))return!0;let e=!1;const t=ah.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=lh(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){ts&&Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function T4(e){const t="fetch";Zr(t,e),Qr(t,O4)}function O4(){E4()&&at(Oe,"fetch",function(e){return function(...t){const{method:n,url:r}=P4(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return dn("fetch",{...i}),e.apply(Oe,t).then(s=>{const d={...i,endTimestamp:Date.now(),response:s};return dn("fetch",d),s},s=>{const d={...i,endTimestamp:Date.now(),error:s};throw dn("fetch",d),s})}})}function ch(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Wm(e){return typeof e=="string"?e:e?ch(e,"url")?e.url:e.toString?e.toString():"":""}function P4(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Wm(n),method:ch(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Wm(t),method:ch(t,"method")?String(t.method).toUpperCase():"GET"}}let Ja=null;function D4(e){const t="error";Zr(t,e),Qr(t,A4)}function A4(){Ja=Oe.onerror,Oe.onerror=function(e,t,n,r,i){return dn("error",{column:r,error:i,line:n,msg:e,url:t}),Ja&&!Ja.__SENTRY_LOADER__?Ja.apply(this,arguments):!1},Oe.onerror.__SENTRY_INSTRUMENTED__=!0}let el=null;function M4(e){const t="unhandledrejection";Zr(t,e),Qr(t,j4)}function j4(){el=Oe.onunhandledrejection,Oe.onunhandledrejection=function(e){return dn("unhandledrejection",e),el&&!el.__SENTRY_LOADER__?el.apply(this,arguments):!0},Oe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const tl=Qu();function I4(){const e=tl.chrome,t=e&&e.app&&e.app.runtime,n="history"in tl&&!!tl.history.pushState&&!!tl.history.replaceState;return!t&&n}const os=Oe;let nl;function Um(e){const t="history";Zr(t,e),Qr(t,F4)}function F4(){if(!I4())return;const e=os.onpopstate;os.onpopstate=function(...n){const r=os.location.href,i=nl;if(nl=r,dn("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=nl,d=String(i);nl=d,dn("history",{from:s,to:d})}return n.apply(this,r)}}at(os.history,"pushState",t),at(os.history,"replaceState",t)}const R4=Oe,ss="__sentry_xhr_v3__";function L4(e){const t="xhr";Zr(t,e),Qr(t,z4)}function z4(){if(!R4.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;at(e,"open",function(t){return function(...n){const r=Date.now(),i=Bn(n[0])?n[0].toUpperCase():void 0,s=B4(n[1]);if(!i||!s)return t.apply(this,n);this[ss]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const d=()=>{const a=this[ss];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const o={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};dn("xhr",o)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?at(this,"onreadystatechange",function(a){return function(...o){return d(),a.apply(this,o)}}):this.addEventListener("readystatechange",d),at(this,"setRequestHeader",function(a){return function(...o){const[c,f]=o,l=this[ss];return l&&Bn(c)&&Bn(f)&&(l.request_headers[c.toLowerCase()]=f),a.apply(this,o)}}),t.apply(this,n)}}),at(e,"send",function(t){return function(...n){const r=this[ss];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return dn("xhr",i),t.apply(this,n)}})}function B4(e){if(Bn(e))return e;try{return e.toString()}catch{}}function N4(){return"npm"}function $4(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}function pr(e,t=100,n=1/0){try{return uh("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ym(e,t=3,n=100*1024){const r=pr(e,t);return U4(r)>n?Ym(e,t-1,n):r}function uh(e,t,n=1/0,r=1/0,i=$4()){const[s,d]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!QS(t))return t;const a=V4(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const o=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(o===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const u=c.toJSON();return uh("",u,o-1,r,i)}catch{}const f=Array.isArray(t)?[]:{};let l=0;const h=Dm(t);for(const u in h){if(!Object.prototype.hasOwnProperty.call(h,u))continue;if(l>=r){f[u]="[MaxProperties ~]";break}const p=h[u];f[u]=uh(u,p,o-1,r,i),l++}return d(t),f}function V4(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Cm(t))return"[VueViewModel]";if(ZS(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${fr(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=H4(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function H4(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function W4(e){return~-encodeURI(e).split(/%..|./).length}function U4(e){return W4(JSON.stringify(e))}var $n;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})($n||($n={}));function Yi(e){return new zt(t=>{t(e)})}function hh(e){return new zt((t,n)=>{n(e)})}class zt{constructor(t){zt.prototype.__init.call(this),zt.prototype.__init2.call(this),zt.prototype.__init3.call(this),zt.prototype.__init4.call(this),this._state=$n.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new zt((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(d){i(d)}},s=>{if(!n)i(s);else try{r(n(s))}catch(d){i(d)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new zt((n,r)=>{let i,s;return this.then(d=>{s=!1,i=d,t&&t()},d=>{s=!0,i=d,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult($n.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult($n.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===$n.PENDING){if(Xa(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===$n.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===$n.RESOLVED&&n[1](this._value),this._state===$n.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Y4(e){const t=[];function n(){return e===void 0||t.length<e}function r(d){return t.splice(t.indexOf(d),1)[0]}function i(d){if(!n())return hh(new Tn("Not adding Promise because buffer limit was reached."));const a=d();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(d){return new zt((a,o)=>{let c=t.length;if(!c)return a(!0);const f=setTimeout(()=>{d&&d>0&&a(!1)},d);t.forEach(l=>{Yi(l).then(()=>{--c||(clearTimeout(f),a(!0))},o)})})}return{$:t,add:i,drain:s}}function fh(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const X4=["fatal","error","warning","log","info","debug"];function G4(e){return e==="warn"?"warning":X4.includes(e)?e:"log"}const Xm=1e3;function as(){return Date.now()/Xm}function K4(){const{performance:e}=Oe;if(!e||!e.now)return as;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/Xm}const Gm=K4();(()=>{const{performance:e}=Oe;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,d=e.timing&&e.timing.navigationStart,o=typeof d=="number"?Math.abs(d+n-r):t,c=o<t;return s||c?i<=o?e.timeOrigin:d:r})();function Xi(e,t=[]){return[e,t]}function q4(e,t){const[n,r]=e;return[n,[...r,t]]}function Km(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function dh(e,t){return(t||new TextEncoder).encode(e)}function Z4(e,t){const[n,r]=e;let i=JSON.stringify(n);function s(d){typeof i=="string"?i=typeof d=="string"?i+d:[dh(i,t),d]:i.push(typeof d=="string"?dh(d,t):d)}for(const d of r){const[a,o]=d;if(s(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)s(o);else{let c;try{c=JSON.stringify(o)}catch{c=JSON.stringify(pr(o))}s(c)}}return typeof i=="string"?i:Q4(i)}function Q4(e){const t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function J4(e,t){const n=typeof e.data=="string"?dh(e.data,t):e.data;return[Nn({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const e3={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function qm(e){return e3[e]}function Zm(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function t3(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:ns(r)},...i&&{trace:Nn({...i})}}}function n3(e,t,n){const r=[{type:"client_report"},{timestamp:n||as(),discarded_events:e}];return Xi(t?{dsn:t}:{},[r])}const r3=60*1e3;function i3(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?r3:r-t}function o3(e,t){return e[t]||e.all||0}function s3(e,t,n=Date.now()){return o3(e,t)>n}function a3(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],d=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[o,c,,,f]=a.split(":",5),l=parseInt(o,10),h=(isNaN(l)?60:l)*1e3;if(!c)i.all=r+h;else for(const u of c.split(";"))u==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(i[u]=r+h):i[u]=r+h}else d?i.all=r+i3(d,r):t===429&&(i.all=r+60*1e3);return i}const Ie=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,rl="production";function ph(){return Em("globalEventProcessors",()=>[])}function l3(e){ph().push(e)}function il(e,t,n,r=0){return new zt((i,s)=>{const d=e[r];if(t===null||typeof d!="function")i(t);else{const a=d({...t},n);Ie&&d.id&&a===null&&Ce.log(`Event processor "${d.id}" dropped event`),Xa(a)?a.then(o=>il(e,o,n,r+1).then(i)).then(null,s):il(e,a,n,r+1).then(i).then(null,s)}})}function Qm(e){const t=Gm(),n={sid:tn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>c3(n)};return e&&Jr(n,e),n}function Jr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Gm(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:tn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Jm(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Jr(e,n)}function c3(e){return Nn({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const u3=1;function h3(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:s,status:d,tags:a,origin:o}=ls(e);return Nn({data:r,op:i,parent_span_id:s,span_id:t,status:d,tags:a,trace_id:n,origin:o})}function ls(e){return f3(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function f3(e){return typeof e.getSpanJSON=="function"}function d3(e){const{traceFlags:t}=e.spanContext();return!!(t&u3)}function p3(e,t,n,r,i,s){const{normalizeDepth:d=3,normalizeMaxBreadth:a=1e3}=e,o={...t,event_id:t.event_id||n.event_id||tn(),timestamp:t.timestamp||as()},c=n.integrations||e.integrations.map(g=>g.name);g3(o,e),y3(o,c),t.type===void 0&&m3(o,e.stackParser);const f=x3(r,n.captureContext);n.mechanism&&is(o,n.mechanism);const l=i&&i.getEventProcessors?i.getEventProcessors():[],h=I3().getScopeData();if(s){const g=s.getScopeData();c0(h,g)}if(f){const g=f.getScopeData();c0(h,g)}const u=[...n.attachments||[],...h.attachments];u.length&&(n.attachments=u),l0(o,h);const p=[...l,...ph(),...h.eventProcessors];return il(p,o,n).then(g=>(g&&v3(g),typeof d=="number"&&d>0?b3(g,d,a):g))}function g3(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:rl),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Wi(e.message,s));const d=e.exception&&e.exception.values&&e.exception.values[0];d&&d.value&&(d.value=Wi(d.value,s));const a=e.request;a&&a.url&&(a.url=Wi(a.url,s))}const e0=new WeakMap;function m3(e,t){const n=Oe._sentryDebugIds;if(!n)return;let r;const i=e0.get(t);i?r=i:(r=new Map,e0.set(t,r));const s=Object.keys(n).reduce((d,a)=>{let o;const c=r.get(a);c?o=c:(o=t(a),r.set(a,o));for(let f=o.length-1;f>=0;f--){const l=o[f];if(l.filename){d[l.filename]=n[a];break}}return d},{});try{e.exception.values.forEach(d=>{d.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function v3(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function y3(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function b3(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:pr(i.data,t,n)}}))},...e.user&&{user:pr(e.user,t,n)},...e.contexts&&{contexts:pr(e.contexts,t,n)},...e.extra&&{extra:pr(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=pr(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>{const s=ls(i).data;return s&&(i.data=pr(s,t,n)),i})),r}function x3(e,t){if(!t)return e;const n=e?e.clone():new Vn;return n.update(t),n}function w3(e){if(e)return C3(e)?{captureContext:e}:S3(e)?{captureContext:e}:e}function C3(e){return e instanceof Vn||typeof e=="function"}const _3=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function S3(e){return Object.keys(e).some(t=>_3.includes(t))}function k3(e,t){return Hn().captureException(e,w3(t))}function t0(e,t){return Hn().captureEvent(e,t)}function ei(e,t){Hn().addBreadcrumb(e,t)}function E3(...e){const t=Hn();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function Dt(){return Hn().getClient()}function cs(){return Hn().getScope()}function n0(e){const t=Dt(),n=sl(),r=cs(),{release:i,environment:s=rl}=t&&t.getOptions()||{},{userAgent:d}=Oe.navigator||{},a=Qm({release:i,environment:s,user:r.getUser()||n.getUser(),...d&&{userAgent:d},...e}),o=n.getSession();return o&&o.status==="ok"&&Jr(o,{status:"exited"}),r0(),n.setSession(a),r.setSession(a),a}function r0(){const e=sl(),t=cs(),n=t.getSession()||e.getSession();n&&Jm(n),i0(),e.setSession(),t.setSession()}function i0(){const e=sl(),t=cs(),n=Dt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function o0(e=!1){if(e){r0();return}i0()}function s0(e){return e.transaction}function a0(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},d=Nn({environment:r.environment||rl,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",d),d}function T3(e){const t=Dt();if(!t)return{};const n=a0(ls(e).trace_id||"",t,cs()),r=s0(e);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:d}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const a=ls(r);return d&&d!=="url"&&(n.transaction=a.description),n.sampled=String(d3(r)),t.emit&&t.emit("createDsc",n),n}function l0(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;O3(e,t),r&&A3(e,r),M3(e,n),P3(e,i),D3(e,s)}function c0(e,t){const{extra:n,tags:r,user:i,contexts:s,level:d,sdkProcessingMetadata:a,breadcrumbs:o,fingerprint:c,eventProcessors:f,attachments:l,propagationContext:h,transactionName:u,span:p}=t;us(e,"extra",n),us(e,"tags",r),us(e,"user",i),us(e,"contexts",s),us(e,"sdkProcessingMetadata",a),d&&(e.level=d),u&&(e.transactionName=u),p&&(e.span=p),o.length&&(e.breadcrumbs=[...e.breadcrumbs,...o]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...h}}function us(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function O3(e,t){const{extra:n,tags:r,user:i,contexts:s,level:d,transactionName:a}=t,o=Nn(n);o&&Object.keys(o).length&&(e.extra={...o,...e.extra});const c=Nn(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const f=Nn(i);f&&Object.keys(f).length&&(e.user={...f,...e.user});const l=Nn(s);l&&Object.keys(l).length&&(e.contexts={...l,...e.contexts}),d&&(e.level=d),a&&(e.transaction=a)}function P3(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function D3(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function A3(e,t){e.contexts={trace:h3(t),...e.contexts};const n=s0(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:T3(t),...e.sdkProcessingMetadata};const r=ls(n).description;r&&(e.tags={transaction:r,...e.tags})}}function M3(e,t){e.fingerprint=e.fingerprint?Nm(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const j3=100;let gh;class Vn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=u0()}static clone(t){return t?t.clone():new Vn}clone(){const t=new Vn;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Jr(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof Vn){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Hi(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=u0(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:j3;if(r<=0)return this;const i={timestamp:as(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:d,_level:a,_fingerprint:o,_eventProcessors:c,_propagationContext:f,_sdkProcessingMetadata:l,_transactionName:h,_span:u}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:s,user:d,level:a,fingerprint:o||[],eventProcessors:c,propagationContext:f,sdkProcessingMetadata:l,transactionName:h,span:u}}applyToEvent(t,n={},r=[]){l0(t,this.getScopeData());const i=[...r,...ph(),...this._eventProcessors];return il(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:tn();if(!this._client)return Ce.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:tn();if(!this._client)return Ce.warn("No client configured on scope - will not capture message!"),i;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:tn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(Ce.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function I3(){return gh||(gh=new Vn),gh}function u0(){return{traceId:tn(),spanId:tn().substring(16)}}const mh="7.116.0",h0=parseFloat(mh),F3=100;class f0{constructor(t,n,r,i=h0){this._version=i;let s;n?s=n:(s=new Vn,s.setClient(t));let d;r?d=r:(d=new Vn,d.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=d}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(i){throw this.popScope(),i}return Xa(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:tn(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...n,event_id:r}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:tn(),s=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:tn();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:d=F3}=i.getOptions&&i.getOptions()||{};if(d<=0)return;const o={timestamp:as(),...t},c=s?Za(()=>s(o,n)):o;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,d))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=d0(this);try{t(this)}finally{d0(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return Ie&&Ce.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return Ie&&!r&&(this.getClient()?Ce.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Ce.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&Jm(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=rl}=r&&r.getOptions()||{},{userAgent:d}=Oe.navigator||{},a=Qm({release:i,environment:s,user:n.getUser(),...d&&{userAgent:d},...t}),o=n.getSession&&n.getSession();return o&&o.status==="ok"&&Jr(o,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const i=ol().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);Ie&&Ce.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function ol(){return Oe.__SENTRY__=Oe.__SENTRY__||{extensions:{},hub:void 0},Oe}function d0(e){const t=ol(),n=vh(t);return p0(t,e),n}function Hn(){const e=ol();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return R3(e)}function sl(){return Hn().getIsolationScope()}function R3(e=ol()){return(!L3(e)||vh(e).isOlderThan(h0))&&p0(e,new f0),vh(e)}function L3(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function vh(e){return Em("hub",()=>new f0,e)}function p0(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function z3(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function B3(e,t,n,r){const i=Zm(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:ns(t)}},d="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Xi(s,[d])}function N3(e,t,n,r){const i=Zm(n),s=e.type&&e.type!=="replay_event"?e.type:"event";z3(e,n&&n.sdk);const d=t3(e,i,r,t);return delete e.sdkProcessingMetadata,Xi(d,[[{type:s},e]])}const $3="7";function V3(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function H3(e){return`${V3(e)}${e.projectId}/envelope/`}function W3(e,t){return d4({sentry_key:e.publicKey,sentry_version:$3,...t&&{sentry_client:`${t.name}/${t.version}`}})}function U3(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${H3(e)}?${W3(e,r)}`}const g0=[];function Y3(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function X3(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(d=>{d.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Nm(n(t)):r=t;const i=Y3(r),s=K3(i,d=>d.name==="Debug");if(s!==-1){const[d]=i.splice(s,1);i.push(d)}return i}function G3(e,t){const n={};return t.forEach(r=>{r&&v0(e,r,n)}),n}function m0(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function v0(e,t,n){if(n[t.name]){Ie&&Ce.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,g0.indexOf(t.name)===-1&&(t.setupOnce(l3,Hn),g0.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,s)=>r(i,s,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((s,d)=>r(s,d,e),{id:t.name});e.addEventProcessor(i)}Ie&&Ce.log(`Integration installed: ${t.name}`)}function K3(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function gr(e,t){return Object.assign(function(...r){return t(...r)},{id:e})}function dB(e){return e}function q3(e){let t="";for(const n of e){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([s,d])=>`${s}:${d}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function Z3(e,t,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(i.dsn=ns(t));const s=Q3(e);return Xi(i,[s])}function Q3(e){const t=q3(e);return[{type:"statsd",length:t.length},t]}const y0="Not capturing exception because it's already been captured.";class J3{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=f4(t.dsn):Ie&&Ce.warn("No DSN provided, client will not send events."),this._dsn){const n=U3(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(Bm(t)){Ie&&Ce.log(y0);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(t,n,r,i){let s=r&&r.event_id;const d=Ku(t)?t:String(t),a=qu(t)?this.eventFromMessage(d,n,r):this.eventFromException(t,r);return this._process(a.then(o=>this._captureEvent(o,r,i)).then(o=>{s=o})),s}captureEvent(t,n,r){if(n&&n.originalException&&Bm(n.originalException)){Ie&&Ce.log(y0);return}let i=n&&n.event_id;const d=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,d||r).then(a=>{i=a})),i}captureSession(t){typeof t.release!="string"?Ie&&Ce.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Jr(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):Yi(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return Ie&&Ce.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];v0(this,t,this._integrations),n||m0(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=N3(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=q4(r,J4(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const n=B3(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=`${t}:${n}`;Ie&&Ce.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){Ie&&Ce.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=Z3(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=G3(this,t),m0(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const o of s){const c=o.mechanism;if(c&&c.handled===!1){r=!0;break}}}const d=t.status==="ok";(d&&t.errors===0||d&&r)&&(Jr(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new zt(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,t&&r>=t&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=sl()){const s=this.getOptions(),d=Object.keys(this._integrations);return!n.integrations&&d.length>0&&(n.integrations=d),this.emit("preprocessEvent",t,n),p3(s,t,n,r,this,i).then(a=>{if(a===null)return a;const o={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&o){const{traceId:f,spanId:l,parentSpanId:h,dsc:u}=o;a.contexts={trace:{trace_id:f,span_id:l,parent_span_id:h},...a.contexts};const p=u||a0(f,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(Ie){const s=i;s.logLevel==="log"?Ce.log(s.message):Ce.warn(s)}})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:s}=i,d=x0(t),a=b0(t),o=t.type||"error",c=`before send for type \`${o}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),hh(new Tn(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=o==="replay_event"?"replay":o,h=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,h).then(u=>{if(u===null)throw this.recordDroppedEvent("event_processor",f,t),new Tn("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return u;const m=t5(i,u,n);return e5(m,c)}).then(u=>{if(u===null)throw this.recordDroppedEvent("before_send",f,t),new Tn(`${c} returned \`null\`, will not send event.`,"log");const p=r&&r.getSession();!d&&p&&this._updateSessionFromEvent(p,u);const m=u.transaction_info;if(d&&m&&u.transaction!==t.transaction){const g="custom";u.transaction_info={...m,source:g}}return this.sendEvent(u,n),u}).then(null,u=>{throw u instanceof Tn?u:(this.captureException(u,{data:{__sentry__:!0},originalException:u}),new Tn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${u}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{Ie&&Ce.error("Error while sending event:",n)});Ie&&Ce.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}}function e5(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Xa(e))return e.then(r=>{if(!Hi(r)&&r!==null)throw new Tn(n);return r},r=>{throw new Tn(`${t} rejected with ${r}`)});if(!Hi(e)&&e!==null)throw new Tn(n);return e}function t5(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return b0(t)&&r?r(t,n):x0(t)&&i?i(t,n):t}function b0(e){return e.type===void 0}function x0(e){return e.type==="transaction"}function n5(e,t){t.debug===!0&&(Ie?Ce.enable():Za(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),cs().update(t.initialScope);const r=new e(t);r5(r),i5(r)}function r5(e){const n=Hn().getStackTop();n.client=e,n.scope.setClient(e)}function i5(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const o5=30;function w0(e,t,n=Y4(e.bufferSize||o5)){let r={};const i=d=>n.drain(d);function s(d){const a=[];if(Km(d,(l,h)=>{const u=qm(h);if(s3(r,u)){const p=C0(l,h);e.recordDroppedEvent("ratelimit_backoff",u,p)}else a.push(l)}),a.length===0)return Yi();const o=Xi(d[0],a),c=l=>{Km(o,(h,u)=>{const p=C0(h,u);e.recordDroppedEvent(l,qm(u),p)})},f=()=>t({body:Z4(o,e.textEncoder)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&Ie&&Ce.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=a3(r,l),l),l=>{throw c("network_error"),l});return n.add(f).then(l=>l,l=>{if(l instanceof Tn)return Ie&&Ce.error("Skipped sending event because buffer is full."),c("queue_overflow"),Yi();throw l})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function C0(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function _0(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:mh})),version:mh}),e._metadata=i}const s5=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],a5=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],S0="InboundFilters",k0=(e={})=>({name:S0,setupOnce(){},processEvent(t,n,r){const i=r.getOptions(),s=l5(e,i);return c5(t,s)?null:t}});gr(S0,k0);function l5(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:s5],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:a5],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function c5(e,t){return t.ignoreInternal&&g5(e)?(Ie&&Ce.warn(`Event dropped due to being internal Sentry Error.
Event: ${dr(e)}`),!0):u5(e,t.ignoreErrors)?(Ie&&Ce.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${dr(e)}`),!0):h5(e,t.ignoreTransactions)?(Ie&&Ce.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${dr(e)}`),!0):f5(e,t.denyUrls)?(Ie&&Ce.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${dr(e)}.
Url: ${al(e)}`),!0):d5(e,t.allowUrls)?!1:(Ie&&Ce.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${dr(e)}.
Url: ${al(e)}`),!0)}function u5(e,t){return e.type||!t||!t.length?!1:p5(e).some(n=>Ga(n,t))}function h5(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Ga(n,t):!1}function f5(e,t){if(!t||!t.length)return!1;const n=al(e);return n?Ga(n,t):!1}function d5(e,t){if(!t||!t.length)return!0;const n=al(e);return n?Ga(n,t):!0}function p5(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),Ie&&t.length===0&&Ce.error(`Could not extract message for event ${dr(e)}`),t}function g5(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function m5(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function al(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?m5(t):null}catch{return Ie&&Ce.error(`Cannot extract url for event ${dr(e)}`),null}}let E0;const T0="FunctionToString",O0=new WeakMap,P0=()=>({name:T0,setupOnce(){E0=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=th(this),n=O0.has(Dt())&&t!==void 0?t:this;return E0.apply(n,e)}}catch{}},setup(e){O0.set(e,!0)}});gr(T0,P0);const je=Oe;let yh=0;function D0(){return yh>0}function v5(){yh++,setTimeout(()=>{yh--})}function Gi(e,t={},n){if(typeof e!="function")return e;try{const i=e.__sentry_wrapped__;if(i)return i;if(th(e))return e}catch{return e}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(d=>Gi(d,t));return e.apply(this,s)}catch(s){throw v5(),E3(d=>{d.addEventProcessor(a=>(t.mechanism&&(ih(a,void 0,void 0),is(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),k3(s)}),s}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}Pm(r,e),rs(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Wn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function A0(e,t){const n=xh(e,t),r={type:t&&t.name,value:w5(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function y5(e,t,n,r){const i=Dt(),s=i&&i.getOptions().normalizeDepth,d={exception:{values:[{type:Ya(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:S5(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ym(t,s)}};if(n){const a=xh(e,n);a.length&&(d.exception.values[0].stacktrace={frames:a})}return d}function bh(e,t){return{exception:{values:[A0(e,t)]}}}function xh(e,t){const n=t.stacktrace||t.stack||"",r=x5(t);try{return e(n,r)}catch{}return[]}const b5=/Minified React error #\d+;/i;function x5(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(b5.test(e.message))return 1}return 0}function w5(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function C5(e,t,n,r){const i=n&&n.syntheticException||void 0,s=wh(e,t,i,r);return is(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Yi(s)}function _5(e,t,n="info",r,i){const s=r&&r.syntheticException||void 0,d=Ch(e,t,s,i);return d.level=n,r&&r.event_id&&(d.event_id=r.event_id),Yi(d)}function wh(e,t,n,r,i){let s;if(Gu(t)&&t.error)return bh(e,t.error);if(wm(t)||GS(t)){const d=t;if("stack"in t)s=bh(e,t);else{const a=d.name||(wm(d)?"DOMError":"DOMException"),o=d.message?`${a}: ${d.message}`:a;s=Ch(e,o,n,r),ih(s,o)}return"code"in d&&(s.tags={...s.tags,"DOMException.code":`${d.code}`}),s}return xm(t)?bh(e,t):Hi(t)||Ya(t)?(s=y5(e,t,n,i),is(s,{synthetic:!0}),s):(s=Ch(e,t,n,r),ih(s,`${t}`,void 0),is(s,{synthetic:!0}),s)}function Ch(e,t,n,r){const i={};if(r&&n){const s=xh(e,n);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(Ku(t)){const{__sentry_template_string__:s,__sentry_template_values__:d}=t;return i.logentry={message:s,params:d},i}return i.message=t,i}function S5(e,{isUnhandledRejection:t}){const n=p4(e),r=t?"promise rejection":"exception";return Gu(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Ya(e)?`Event \`${k5(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function k5(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function E5(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:ns(r)}},s=T5(e);return Xi(i,[s])}function T5(e){return[{type:"user_report"},e]}class O5 extends J3{constructor(t){const n=je.SENTRY_SDK_SOURCE||N4();_0(t,"browser",["browser"],n),super(t),t.sendClientReports&&je.document&&je.document.addEventListener("visibilitychange",()=>{je.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return C5(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return _5(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Wn&&Ce.warn("SDK not enabled, will not capture user feedback.");return}const n=E5(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){Wn&&Ce.log("No outcomes to send");return}if(!this._dsn){Wn&&Ce.log("No dsn provided, will not send outcomes");return}Wn&&Ce.log("Sending outcomes:",t);const n=n3(t,this._options.tunnel&&ns(this._dsn));this._sendEnvelope(n)}}let hs;function P5(){if(hs)return hs;if(lh(je.fetch))return hs=je.fetch.bind(je);const e=je.document;let t=je.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){Wn&&Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return hs=t.bind(je)}function D5(){hs=void 0}function A5(e,t=P5()){let n=0,r=0;function i(s){const d=s.body.length;n+=d,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(o=>(n-=d,r--,{statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return D5(),n-=d,r--,hh(o)}}return w0(e,i)}const M5=4;function j5(e){function t(n){return new zt((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===M5&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",e.url);for(const d in e.headers)Object.prototype.hasOwnProperty.call(e.headers,d)&&s.setRequestHeader(d,e.headers[d]);s.send(n.body)})}return w0(e,t)}const ll="?",I5=30,F5=40,R5=50;function _h(e,t,n,r){const i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const L5=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,z5=/\((\S*)(?::(\d+))(?::(\d+))\)/,B5=[I5,e=>{const t=L5.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const s=z5.exec(t[2]);s&&(t[2]=s[1],t[3]=s[2],t[4]=s[3])}const[r,i]=M0(t[1]||ll,t[2]);return _h(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],N5=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$5=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,V5=[R5,e=>{const t=N5.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=$5.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],i=t[1]||ll;return[i,r]=M0(i,r),_h(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],H5=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,W5=Rm(...[B5,V5,[F5,e=>{const t=H5.exec(e);return t?_h(t[2],t[1]||ll,+t[3],t[4]?+t[4]:void 0):void 0}]]),M0=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ll,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},cl=1024,j0="Breadcrumbs",I0=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:j0,setupOnce(){},setup(n){t.console&&y4(X5(n)),t.dom&&w4(Y5(n,t.dom)),t.xhr&&L4(G5(n)),t.fetch&&T4(K5(n)),t.history&&Um(q5(n)),t.sentry&&n.on&&n.on("beforeSendEvent",U5(n))}}};gr(j0,I0);function U5(e){return function(n){Dt()===e&&ei({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:dr(n)},{event:n})}}function Y5(e,t){return function(r){if(Dt()!==e)return;let i,s,d=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>cl&&(Wn&&Ce.warn(`\`dom.maxStringLength\` cannot exceed ${cl}, but a value of ${a} was configured. Sentry will use ${cl} instead.`),a=cl),typeof d=="string"&&(d=[d]);try{const c=r.event,f=Z5(c)?c.target:c;i=Tm(f,{keyAttrs:d,maxStringLength:a}),s=o4(f)}catch{i="<unknown>"}if(i.length===0)return;const o={category:`ui.${r.name}`,message:i};s&&(o.data={"ui.component_name":s}),ei(o,{event:r.event,name:r.name,global:r.global})}}function X5(e){return function(n){if(Dt()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:G4(n.level),message:_m(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${_m(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ei(r,{input:n.args,level:n.level})}}function G5(e){return function(n){if(Dt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[ss];if(!r||!i||!s)return;const{method:d,url:a,status_code:o,body:c}=s,f={method:d,url:a,status_code:o},l={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i};ei({category:"xhr",data:f,type:"http"},l)}}function K5(e){return function(n){if(Dt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,d={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};ei({category:"fetch",data:s,level:"error",type:"http"},d)}else{const s=n.response,d={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i};ei({category:"fetch",data:d,type:"http"},a)}}}function q5(e){return function(n){if(Dt()!==e)return;let r=n.from,i=n.to;const s=fh(je.location.href);let d=r?fh(r):void 0;const a=fh(i);(!d||!d.path)&&(d=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===d.protocol&&s.host===d.host&&(r=d.relative),ei({category:"navigation",data:{from:r,to:i}})}}function Z5(e){return!!e&&!!e.target}const F0="Dedupe",R0=()=>{let e;return{name:F0,setupOnce(){},processEvent(t){if(t.type)return t;try{if(Q5(t,e))return Wn&&Ce.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};gr(F0,R0);function Q5(e,t){return t?!!(J5(e,t)||ek(e,t)):!1}function J5(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!z0(e,t)||!L0(e,t))}function ek(e,t){const n=B0(t),r=B0(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!z0(e,t)||!L0(e,t))}function L0(e,t){let n=N0(e),r=N0(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],d=n[i];if(s.filename!==d.filename||s.lineno!==d.lineno||s.colno!==d.colno||s.function!==d.function)return!1}return!0}function z0(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function B0(e){return e.exception&&e.exception.values&&e.exception.values[0]}function N0(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const $0="GlobalHandlers",V0=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:$0,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(tk(n),W0("onerror")),t.onunhandledrejection&&(nk(n),W0("onunhandledrejection"))}}};gr($0,V0);function tk(e){D4(t=>{const{stackParser:n,attachStacktrace:r}=U0();if(Dt()!==e||D0())return;const{msg:i,url:s,line:d,column:a,error:o}=t,c=o===void 0&&Bn(i)?ok(i,s,d,a):H0(wh(n,o||i,void 0,r,!1),s,d,a);c.level="error",t0(c,{originalException:o,mechanism:{handled:!1,type:"onerror"}})})}function nk(e){M4(t=>{const{stackParser:n,attachStacktrace:r}=U0();if(Dt()!==e||D0())return;const i=rk(t),s=qu(i)?ik(i):wh(n,i,void 0,r,!0);s.level="error",t0(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function rk(e){if(qu(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function ik(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function ok(e,t,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=Gu(e)?e.message:e,d="Error";const a=s.match(i);return a&&(d=a[1],s=a[2]),H0({exception:{values:[{type:d,value:s}]}},t,n,r)}function H0(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],d=s[0]=s[0]||{},a=d.stacktrace=d.stacktrace||{},o=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,f=isNaN(parseInt(n,10))?void 0:n,l=Bn(t)&&t.length>0?t:i4();return o.length===0&&o.push({colno:c,filename:l,function:"?",in_app:!0,lineno:f}),e}function W0(e){Wn&&Ce.log(`Global Handler attached: ${e}`)}function U0(){const e=Dt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Y0="HttpContext",X0=()=>({name:Y0,setupOnce(){},preprocessEvent(e){if(!je.navigator&&!je.location&&!je.document)return;const t=e.request&&e.request.url||je.location&&je.location.href,{referrer:n}=je.document||{},{userAgent:r}=je.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:i};e.request=s}});gr(Y0,X0);const sk="cause",ak=5,G0="LinkedErrors",K0=(e={})=>{const t=e.limit||ak,n=e.key||sk;return{name:G0,setupOnce(){},preprocessEvent(r,i,s){const d=s.getOptions();e4(A0,d.stackParser,d.maxValueLength,n,t,r,i)}}};gr(G0,K0);const lk=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],q0="TryCatch",Z0=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:q0,setupOnce(){t.setTimeout&&at(je,"setTimeout",Q0),t.setInterval&&at(je,"setInterval",Q0),t.requestAnimationFrame&&at(je,"requestAnimationFrame",ck),t.XMLHttpRequest&&"XMLHttpRequest"in je&&at(XMLHttpRequest.prototype,"send",uk);const n=t.eventTarget;n&&(Array.isArray(n)?n:lk).forEach(hk)}}};gr(q0,Z0);function Q0(e){return function(...t){const n=t[0];return t[0]=Gi(n,{mechanism:{data:{function:fr(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function ck(e){return function(t){return e.apply(this,[Gi(t,{mechanism:{data:{function:"requestAnimationFrame",handler:fr(e)},handled:!1,type:"instrument"}})])}}function uk(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&at(n,i,function(s){const d={mechanism:{data:{function:i,handler:fr(s)},handled:!1,type:"instrument"}},a=th(s);return a&&(d.mechanism.data.handler=fr(a)),Gi(s,d)})}),e.apply(this,t)}}function hk(e){const t=je,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(at(n,"addEventListener",function(r){return function(i,s,d){try{typeof s.handleEvent=="function"&&(s.handleEvent=Gi(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:fr(s),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Gi(s,{mechanism:{data:{function:"addEventListener",handler:fr(s),target:e},handled:!1,type:"instrument"}}),d])}}),at(n,"removeEventListener",function(r){return function(i,s,d){const a=s;try{const o=a&&a.__sentry_wrapped__;o&&r.call(this,i,o,d)}catch{}return r.call(this,i,a,d)}}))}const fk=[k0(),P0(),Z0(),I0(),V0(),K0(),R0(),X0()];function dk(e){return[...fk]}function pk(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=dk()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),je.SENTRY_RELEASE&&je.SENTRY_RELEASE.id&&(e.release=je.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:m4(e.stackParser||W5),integrations:X3(e),transport:e.transport||(Hm()?A5:j5)};n5(O5,t),e.autoSessionTracking&&gk()}function gk(){if(typeof je.document>"u"){Wn&&Ce.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}n0({ignoreDuration:!0}),o0(),Um(({from:e,to:t})=>{e!==void 0&&e!==t&&(n0({ignoreDuration:!0}),o0())})}function mk(e){const t={...e};_0(t,"react"),pk(t)}var Sh=(e=>(e.INLINE="inline",e.OVERLAY="overlay",e))(Sh||{}),J0=(e=>(e.TOP="top",e.BOTTOM="bottom",e.HIDDEN="",e))(J0||{});const vk=[{name:"circle",type:"Circle"},{name:"square",type:"Rect",options:{lockUniScaling:!1}},{name:"triangle",type:"Triangle"},{name:"ellipse",type:"Ellipse",options:{lockUniScaling:!1}},{name:"Arrow #1",type:"Path",options:{path:"M 294.9 16.4 l 15.7 42.2 c -171.4 70.3 -294 242.3 -289.1 437.4 l 14.7 -1 c 9.1 -0.6 18.1 -1.2 27.1 -1.9 l 14.7 -1 c -4.3 -170.1 102.5 -320 252 -381.3 l 15.7 42.2 c 34.7 -40.5 83.1 -76.6 144.8 -99.8 c -58.1 -26.2 -124.9 -39.6 -195.6 -36.8 z"}},{name:"Arrow #2",type:"Path",options:{path:"M 16 248.4 v 14.9 h 447.5 l -93.2 82.5 l 11.9 10.5 l 113.8 -100.2 l -113.6 -100.4 l -11.8 10.5 l 92.9 82.2 z"}},{name:"Arrow #3",type:"Path",options:{path:"M 496 256 l -118.6 -66 v 40.8 h -361.4 v 50.4 h 361.4 v 40.8 l 118.6 -66 z"}},{name:"Line",type:"Path",options:{path:"M 16 256 h 480",strokeWidth:10,stroke:"#000",padding:10}},{name:"Star",type:"Path",options:{path:"M 256 406.3 l 148.3 78 l -28.3 -165.2 l 120 -117 l -165.8 -24.1 l -74.2 -150.3 l -74.2 150.3 l -165.8 24.1 l 120 117 l -28.3 165.2 z"}},{name:"Polygon",type:"Path",options:{path:"M 256 19.6 l 156.6 57.1 l 83.4 144.3 l -28.9 164.2 l -127.7 107.2 h -166.8 l -127.7 -107.2 l -28.9 -164.2 l 83.4 -144.3 z"}},{name:"Badge",type:"Path",options:{path:"M 257.3 16.2 s -148 58.2 -204.4 81.4 c 0 75.7 -16.8 303.5 204.4 398.2 c 218.7 -94.6 201.9 -322.4 201.9 -398.2 c -62.1 -23.6 -201.9 -81.4 -201.9 -81.4 z"}}],yk=["afro-1","afro","agent","alien-1","alien","angel","angry-1","angry-2","angry-3","angry-4","angry-5","angry","arguing","arrogant","asian-1","asian","avatar","baby-1","baby-2","baby","bully","burglar","businessman","cheeky-1","cheeky","clown","confused-1","confused-2","confused-3","confused","creepy","crying-1","crying-2","crying-3","crying","dazed-1","dazed-2","dazed-3","dazed","dead-1","dead-2","dead-3","dead-4","dead-5","dead-6","dead","desperate-1","desperate","detective","dissapointment","doctor","drunk","dumb","emo-1","emo-2","emo","emoticon","evil","faint-1","faint","flirt-1","flirt-2","flirt","flirty","gangster","geek-1","geek","gentleman-1","gentleman-2","gentleman-3","gentleman-4","gentleman","ginger","girl-1","girl","goofy-1","goofy-2","goofy-3","goofy-4","goofy","grubby-1","grubby","happy-1","happy-10","happy-11","happy-12","happy-13","happy-14","happy-15","happy-16","happy-2","happy-3","happy-4","happy-5","happy-6","happy-7","happy-8","happy-9","happy","harry-potter","heisenberg","hipster-1","hipster-2","hipster","in-love-1","in-love-2","in-love-3","in-love-4","in-love-5","in-love-6","in-love","japan","jew","joyful-1","joyful-2","joyful","kiss-1","kiss-2","kiss-3","kiss-4","kiss","laughing-1","laughing-2","laughing-3","laughing","listening","love","manly","miserly-1","miserly","nerd-1","nerd-2","nerd-3","nerd-4","nerd","ninja","pirate-1","pirate-2","pirate","punk-1","punk-2","punk","rapper","relieved","rich-1","rich-2","rich","rockstar","sad-1","sad-2","sad-3","sad-4","sad-5","sad-6","sad","scared-1","scared-2","scared-3","scared","sceptic-1","sceptic-2","sceptic-3","sceptic-4","sceptic-5","sceptic-6","sceptic-7","sceptic","secret","shocked-1","shocked-2","shocked-3","shocked","sick-1","sick-2","sick-3","sick-4","sick","silent","skeleton","smile","smiling-1","smiling","smoked","smug-1","smug-2","smug-3","smug-4","smug-5","smug-6","smug","sporty","stunned","superhero-1","superhero-2","superhero-3","superhero-4","superhero","surprised-1","surprised","thinking","tired-1","tired-2","tired-3","tired","tough-1","tough","trendy","vampire-1","vampire","wink-1","wink-2","wink","winking-1","winking","yawning-1","yawning-2","yawning-3","yawning","yelling","zombie"];function oe(e,t){return{...t,message:e}}const bk=[{name:"emoticons",list:yk,type:"svg",thumbnailUrl:"images/stickers/categories/emoticon.svg"},{name:"doodles",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/doodles.svg"},{name:"landmarks",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/landmark.svg",invertPreview:!0},{name:"bubbles",items:104,type:"png",thumbnailUrl:"images/stickers/categories/speech-bubble.svg"},{name:"transportation",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/transportation.svg",invertPreview:!0},{name:"beach",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/beach.svg",invertPreview:!0}],xk={emoticons:oe("Emoticons"),doodles:oe("Doodles"),landmarks:oe("Landmarks"),bubbles:oe("Bubbles"),transportation:oe("Transportation"),beach:oe("Beach")},kh={fill:"#1565C0",opacity:1,backgroundColor:null,strokeWidth:.05,stroke:"#000"},wk=["PencilBrush","EraserBrush","SprayBrush","CircleBrush","DiamondBrush","VLineBrush","HLineBrush","SquareBrush"],ev=[1,8,15,20,25];var ul=(e=>(e.DARK="dark",e.LIGHT="light",e))(ul||{});const Eh=[{name:ul.LIGHT,colors:{"--be-foreground-base":"0 0 0","--be-primary-light":"191 219 254","--be-primary":"59 130 246","--be-primary-dark":"37 99 235","--be-on-primary":"255 255 255","--be-danger":"179 38 30","--be-on-danger":"255 255 255","--be-background":"255 255 255","--be-background-alt":"250 250 250","--be-paper":"255 255 255","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"26%","--be-hover-opacity":"4%","--be-focus-opacity":"12%","--be-selected-opacity":"8%","--be-text-main-opacity":"87%","--be-text-muted-opacity":"60%","--be-divider-opacity":"12%"}},{name:ul.DARK,isDark:!0,colors:{"--be-foreground-base":"255 255 255","--be-primary-light":"239 246 255","--be-primary":"191 219 254","--be-primary-dark":"147 197 253","--be-on-primary":"56 30 114","--be-danger":"242 184 181","--be-on-danger":"96 20 16","--be-background":"20 21 23","--be-background-alt":"26 27 30","--be-paper":"44 46 51","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"30%","--be-hover-opacity":"8%","--be-focus-opacity":"12%","--be-selected-opacity":"16%","--be-text-main-opacity":"100%","--be-text-muted-opacity":"70%","--be-divider-opacity":"12%"}}];var Pe=(e=>(e.FILTER="filter",e.RESIZE="resize",e.CROP="crop",e.DRAW="draw",e.TEXT="text",e.SHAPES="shapes",e.STICKERS="stickers",e.FRAME="frame",e.CORNERS="corners",e.MERGE="merge",e))(Pe||{});function tv(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=tv(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ce(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=tv(e))&&(r&&(r+=" "),r+=t);return r}const Ck=E.forwardRef((e,t)=>{const{attr:n,size:r,title:i,className:s,color:d,style:a,children:o,viewBox:c,width:f,height:l,...h}=e;return w.jsxs("svg",{"aria-hidden":!i,focusable:!1,xmlns:"http://www.w3.org/2000/svg",viewBox:c||"0 0 24 24",...n,...h,className:ce("svg-icon",s,_k(r)),style:{color:d,...a},ref:t,height:l||"1.3em",width:f||"1.3em",children:[i&&w.jsx("title",{children:i}),o]})});function _k(e){switch(e){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-md";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return e}}function be(e,t="",n){const r=(i,s)=>w.jsx(Ck,{"data-testid":`${t}Icon`,ref:s,viewBox:n,...i,size:i.size||"md",children:e});return he.memo(he.forwardRef(r))}function Sk(e,t=""){const n=nv(e);return be(n,t)}function nv(e){return(e==null?void 0:e.map)&&e.map((t,n)=>he.createElement(t.tag,{key:n,...t.attr},nv(t.child)))}const rv=be(w.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),kk=be(w.jsx("path",{d:"M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z"}),"PhotoSizeSelectLargeOutlined"),Ek=be(w.jsx("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"}),"CropOutlined"),Tk=be(w.jsx("path",{d:"M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"}),"TextFieldsOutlined"),Ok=be(w.jsx("path",{d:"M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z"}),"ExtensionOutlined"),Pk=be(w.jsx("path",{d:"M10.25 13c0 .69-.56 1.25-1.25 1.25S7.75 13.69 7.75 13s.56-1.25 1.25-1.25 1.25.56 1.25 1.25zM15 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm7 .25c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zM10.66 4.12C12.06 6.44 14.6 8 17.5 8c.46 0 .91-.05 1.34-.12C17.44 5.56 14.9 4 12 4c-.46 0-.91.05-1.34.12zM4.42 9.47c1.71-.97 3.03-2.55 3.66-4.44C6.37 6 5.05 7.58 4.42 9.47zM20 12c0-.78-.12-1.53-.33-2.24-.7.15-1.42.24-2.17.24-3.13 0-5.92-1.44-7.76-3.69C8.69 8.87 6.6 10.88 4 11.86c.01.04 0 .09 0 .14 0 4.41 3.59 8 8 8s8-3.59 8-8z"}),"FaceOutlined"),Dk=be(w.jsx("path",{d:"M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM6 18h12V8H6v10zm2-8h8v6H8v-6z"}),"FilterFramesOutlined"),Ak=be(w.jsx("path",{d:"M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41 6.41 21z"}),"MergeOutlined"),Mk=be(w.jsx("path",{d:"M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"}),"RoundedCornerOutlined"),iv=be(w.jsx("path",{d:"M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"PhotoLibraryOutlined"),ov=be(w.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"}),"HistoryOutlined"),jk=be([w.jsx("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z"},"0"),w.jsx("circle",{cx:"11",cy:"9",r:"1"},"1"),w.jsx("path",{d:"M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"},"2")],"StyleOutlined"),Ik=be(w.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Fk=be(w.jsx("path",{d:"M18.85,10.39l1.06-1.06c0.78-0.78,0.78-2.05,0-2.83L18.5,5.09c-0.78-0.78-2.05-0.78-2.83,0l-1.06,1.06L18.85,10.39z M14.61,11.81L7.41,19H6v-1.41l7.19-7.19L14.61,11.81z M13.19,7.56L4,16.76V21h4.24l9.19-9.19L13.19,7.56L13.19,7.56z M19,17.5 c0,2.19-2.54,3.5-5,3.5c-0.55,0-1-0.45-1-1s0.45-1,1-1c1.54,0,3-0.73,3-1.5c0-0.47-0.48-0.87-1.23-1.2l1.48-1.48 C18.32,15.45,19,16.29,19,17.5z M4.58,13.35C3.61,12.79,3,12.06,3,11c0-1.8,1.89-2.63,3.56-3.36C7.59,7.18,9,6.56,9,6 c0-0.41-0.78-1-2-1C5.74,5,5.2,5.61,5.17,5.64C4.82,6.05,4.19,6.1,3.77,5.76C3.36,5.42,3.28,4.81,3.62,4.38C3.73,4.24,4.76,3,7,3 c2.24,0,4,1.32,4,3c0,1.87-1.93,2.72-3.64,3.47C6.42,9.88,5,10.5,5,11c0,0.31,0.43,0.6,1.07,0.86L4.58,13.35z"}),"Draw"),Rk=be(w.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3 2 12h3v8h6v-6h2v6h6v-8h3L12 3z"}),"HomeOutlined"),At={[Pe.FILTER]:{name:oe("Applied Filters"),icon:rv},[Pe.RESIZE]:{name:oe("Resized Image"),icon:kk},[Pe.CROP]:{name:oe("Cropped Image"),icon:Ek},[Pe.DRAW]:{name:oe("Added Drawing"),icon:Fk},[Pe.TEXT]:{name:oe("Added Text"),icon:Tk},[Pe.SHAPES]:{name:oe("Added Shape"),icon:Ok},[Pe.STICKERS]:{name:oe("Added Sticker"),icon:Pk},[Pe.FRAME]:{name:oe("Added Frame"),icon:Dk},[Pe.MERGE]:{name:oe("Merged Objects"),icon:Ak},[Pe.CORNERS]:{name:oe("Rounded Corner"),icon:Mk},bgImage:{name:oe("Replaced Background Image"),icon:iv},overlayImage:{name:oe("Added Image"),icon:iv},initial:{name:oe("Initial"),icon:Rk},loadedState:{name:oe("Loaded State"),icon:ov},objectStyle:{name:oe("Changed Style"),icon:jk},deletedObject:{name:oe("Deleted object"),icon:Ik}},Lk=Object.values(Pe).map(e=>({name:e,icon:At[e].icon,action:e===Pe.MERGE?t=>{t.tools.merge.apply()}:e})),zk={filter:oe("filter"),resize:oe("resize"),crop:oe("crop"),draw:oe("draw"),text:oe("text"),shapes:oe("shapes"),stickers:oe("stickers"),frame:oe("frame"),corners:oe("corners"),merge:oe("merge")},Bk=be(w.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),Nk={name:"pixie",version:"3.0.5",main:"dist/pixie.umd.js",module:"dist/pixie.es.js",types:"dist/types/src/pixie.d.ts",private:!0,exports:{".":{import:"./dist/pixie.es.js",require:"./dist/pixie.umd.js"}},files:["dist"],scripts:{dev:"vite --host",build:"vite build && npm run build-umd && npm run types && npm run build-cc",types:"tsc --skipLibCheck --emitDeclarationOnly --noEmit false --declarationMap false","build-umd":"vite build --config scripts/vite-umd.config.ts","build-cc":"./scripts/build-cc.sh",serve:"vite preview",extract:"node ./scripts/extract-translations.js"},dependencies:{"@floating-ui/react-dom":"^2.0.2","@internationalized/date":"^3.5.0","@internationalized/number":"^3.3.0","@paypal/paypal-js":"^7.0.3","@react-aria/focus":"^3.14.3","@react-aria/interactions":"^3.19.1","@react-aria/overlays":"^3.18.1","@react-aria/ssr":"^3.8.0","@react-aria/utils":"^3.21.1","@react-stately/color":"^3.4.4","@react-stately/utils":"^3.8.0","@sentry/react":"^7.76.0","@sentry/tracing":"^7.76.0","@stripe/react-stripe-js":"^2.3.1","@stripe/stripe-js":"^2.1.10","@tailwindcss/container-queries":"^0.1.0","@tanstack/react-query":"^5.0.5","@tanstack/react-query-devtools":"^5.4.2","@tanstack/react-virtual":"^3.0.0-beta.68","@tiptap/extension-code-block-lowlight":"^2.1.12","@tiptap/extension-color":"^2.1.12","@tiptap/extension-image":"^2.1.12","@tiptap/extension-link":"^2.1.12","@tiptap/extension-subscript":"^2.1.12","@tiptap/extension-superscript":"^2.1.12","@tiptap/extension-text-align":"^2.1.12","@tiptap/extension-text-style":"^2.1.12","@tiptap/extension-underline":"^2.1.12","@tiptap/react":"^2.1.12","@tiptap/starter-kit":"^2.1.12","@types/google.visualization":"^0.0.71","@use-gesture/react":"^10.2.20","@vitejs/plugin-react-swc":"^3.4.0","ace-builds":"^1.31.0",axios:"^1.6.0","axios-retry":"^3.8.1","chart.js":"^4.4.0",clsx:"^2.0.0",color:"^4.2.3",dashjs:"^4.7.2","deep-object-diff":"^1.1.7",deepmerge:"^4.2.2","dot-object":"^2.1.4",fabric:"^5.3.0","file-saver":"^2.0.5","framer-motion":"^10.16.4",fscreen:"^1.2.0","get-video-id":"^3.6.5","highlight.js":"^11.9.0","hls.js":"^1.4.12",immer:"^10.0.3","just-debounce-it":"^3.2.0","linkify-string":"^4.0.2",lowlight:"^3.1.0","media-icons":"^0.10.0","mime-match":"^1.0.2","nano-memoize":"^1.3.0",nanoid:"^5.0.2","number-precision":"^1.6.0","performant-array-to-tree":"^1.11.0","prosemirror-state":"^1.4.1",react:">=18.2.0","react-ace":"^10.1.0","react-colorful":"^5.5.1","react-dom":">=18.2.0","react-hook-form":"^7.47.0","react-merge-refs":"^2.1.1","react-router-dom":"^6.17.0","react-textarea-autosize":"^8.5.3","react-use-clipboard":"^1.0.7","react-use-cookie":"^1.4.0",slugify:"^1.6.5","style-inject":"^0.3.0","swagger-ui-react":"^4.15","tus-js-client":"^3.0.1","url-regex":"^5.0.0","use-debounce":"^9.0.4","use-immer":"^0.9.0",zustand:"^4.4.4"},peerDependencies:{react:">=18.2.0","react-dom":">=18.2.0"},devDependencies:{"@prettier/plugin-php":"^0.21.0","@rollup/plugin-replace":"^5.0","@tailwindcss/typography":"^0.5.10","@types/color":"^3.0.6","@types/dot-object":"^2.1.4","@types/fabric":"^4.5.12","@types/file-saver":"^2.0.7","@types/fscreen":"^1.0.3","@types/react":"^18","@types/react-dom":"^18","@types/react-recaptcha-v3":"^1.1.3","@types/swagger-ui-react":"^4.18.2","@typescript-eslint/eslint-plugin":"^6.9.0","@typescript-eslint/parser":"^6.9.0","@vitejs/plugin-react":"^4.3.0",autoprefixer:"^10.4.16","babel-loader":"^9.1.3",cssnano:"^7.0.2",eslint:"^8.52.0","eslint-config-prettier":"^9.0.0","eslint-plugin-import":"^2.29.0","eslint-plugin-jsx-a11y":"^6.6.1","eslint-plugin-react":"^7.33.2","eslint-plugin-react-hooks":"^4.6.0",express:"^4.18.2","laravel-vite-plugin":"^0.8.1",postcss:"^8.4.31",prettier:"^3.0.3","prettier-plugin-blade":"^1.6.14","prettier-plugin-tailwindcss":"^0.5.6",tailwindcss:"^3.3",typescript:"^5.2.2","utility-types":"^3.10.0",vite:"^4.5.0","vite-tsconfig-paths":"^4.2.1"}}.version,sv={selector:"pixie-editor",textureSize:4096,activeLanguage:"en",ui:{visible:!0,mode:Sh.INLINE,forceOverlayModeOnMobile:!0,activeTheme:ul.LIGHT,themes:Eh,allowEditorClose:!0,menubar:{items:[{type:"undoWidget",align:"left"},{type:"zoomWidget",align:"center",desktopOnly:!0},{type:"button",icon:ov,align:"right",desktopOnly:!0,action:e=>{e.togglePanel("history")}},{type:"button",icon:Bk,label:oe("Done"),align:"right",action:e=>{var t;(t=e.state.config.ui)!=null&&t.showExportPanel?e.state.togglePanel("export",!0):e.tools.export.save()}}]},nav:{position:J0.BOTTOM,items:[...Lk]},openImageDialog:{show:!0,sampleImages:[{url:"images/samples/sample1.jpg",thumbnail:"images/samples/sample1_thumbnail.jpg"},{url:"images/samples/sample2.jpg",thumbnail:"images/samples/sample2_thumbnail.jpg"},{url:"images/samples/sample3.jpg",thumbnail:"images/samples/sample3_thumbnail.jpg"}]},colorPresets:{items:["rgb(0,0,0)","rgb(255, 255, 255)","rgb(242, 38, 19)","rgb(249, 105, 14)","rgb(253, 227, 167)","rgb(4, 147, 114)","rgb(30, 139, 195)","rgb(142, 68, 173)"]}},objectDefaults:{global:{...kh},sticker:{fill:void 0},text:{textAlign:"initial",underline:!1,linethrough:!1,fontStyle:"normal",fontFamily:"Times New Roman",fontWeight:"normal",stroke:void 0,fontSize:40}},tools:{filter:{items:["grayscale","blackWhite","sharpen","invert","vintage","polaroid","kodachrome","technicolor","brownie","sepia","removeColor","brightness","gamma","noise","pixelate","blur","emboss","blendColor"]},zoom:{allowUserZoom:!0,fitImageToScreen:!0},crop:{allowCustomRatio:!0,defaultRatio:null,presets:[{ratio:null,name:"Custom"},{ratio:"1:1",name:"Square"},{ratio:"4:3"},{ratio:"16:9"},{ratio:"5:3"},{ratio:"5:4"},{ratio:"6:4"},{ratio:"7:5"},{ratio:"10:8"}]},text:{defaultText:"Double click to edit",controlsPadding:6,items:[{family:"Roboto",src:"fonts/open-sans-v27-latin-ext_latin-regular.woff2"},{family:"Fuzzy Bubbles",src:"fonts/fuzzy-bubbles-v3-latin-700.woff2",descriptors:{weight:"700"}},{family:"Aleo Bold",src:"fonts/aleo-v4-latin-ext_latin-700.woff2",descriptors:{weight:"700"}},{family:"Amatic SC",src:"fonts/amatic-sc-v16-latin-ext_latin-regular.woff2"},{family:"Corinthia Bold",src:"fonts/corinthia-v7-latin-ext_latin-700.woff2"},{family:"Bungee Inline",src:"fonts/bungee-inline-v6-latin-ext_latin-regular.woff2"},{family:"Robot Slab Bold",src:"fonts/roboto-slab-v16-latin-ext_latin-500.woff2"},{family:"Carter One",src:"fonts/carter-one-v12-latin-regular.woff2"},{family:"Cody Star",src:"fonts/codystar-v10-latin-ext_latin-regular.woff2"},{family:"Fira Sans",src:"fonts/fira-sans-v11-latin-ext_latin_cyrillic-regular.woff2"},{family:"Krona One",src:"fonts/krona-one-v9-latin-ext_latin-regular.woff2"},{family:"Kumar One Outline",src:"fonts/kumar-one-outline-v8-latin-ext_latin-regular.woff2"},{family:"Lobster Two",src:"fonts/lobster-two-v13-latin-regular.woff2"},{family:"Molle Italic",src:"fonts/molle-v11-latin-ext_latin-italic.woff2"},{family:"Monoton",src:"fonts/monoton-v10-latin-regular.woff2"},{family:"Nixie One",src:"fonts/nixie-one-v11-latin-regular.woff2"},{family:"Permanent Marker",src:"fonts/permanent-marker-v10-latin-regular.woff2"},{family:"Sancreek",src:"fonts/sancreek-v13-latin-ext_latin-regular.woff2"},{family:"Stint Ultra Expanded",src:"fonts/stint-ultra-expanded-v10-latin-regular.woff2"},{family:"VT323",src:"fonts/vt323-v12-latin-ext_latin-regular.woff2"},{family:"Trash Hand",src:"fonts/TrashHand.ttf"}]},draw:{brushSizes:ev,brushTypes:wk},shapes:{items:vk.slice()},stickers:{items:bk},import:{validImgExtensions:["png","jpg","jpeg","svg","gif"],fitOverlayToScreen:!0,openDroppedImageAsBackground:!1},export:{defaultFormat:"png",defaultQuality:.8,defaultName:"image"},frame:{items:[{name:"basic",mode:"basic",size:{min:1,max:35,default:10}},{name:"pine",mode:"stretch",size:{min:1,max:35,default:15}},{name:"oak",mode:"stretch",size:{min:1,max:35,default:15}},{name:"rainbow",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge1",display_name:"grunge #1",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge2",display_name:"grunge #2",mode:"stretch",size:{min:1,max:35,default:20}},{name:"ebony",mode:"stretch",size:{min:1,max:35,default:15}},{name:"art1",display_name:"Art #1",mode:"repeat",size:{min:10,max:70,default:55}},{name:"art2",display_name:"Art #2",mode:"repeat",size:{min:10,max:70,default:55}}]}}},av=e=>{let t;const n=new Set,r=(f,l)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const u=t;t=l??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(p=>p(t,u))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{n.clear()}},c=t=e(r,i,o);return o},$k=e=>e?av(e):av;var lv={exports:{}},cv={},uv={exports:{}},hv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=E;function Vk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hk=typeof Object.is=="function"?Object.is:Vk,Wk=Ki.useState,Uk=Ki.useEffect,Yk=Ki.useLayoutEffect,Xk=Ki.useDebugValue;function Gk(e,t){var n=t(),r=Wk({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Yk(function(){i.value=n,i.getSnapshot=t,Th(i)&&s({inst:i})},[e,n,t]),Uk(function(){return Th(i)&&s({inst:i}),e(function(){Th(i)&&s({inst:i})})},[e]),Xk(n),n}function Th(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hk(e,n)}catch{return!0}}function Kk(e,t){return t()}var qk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kk:Gk;hv.useSyncExternalStore=Ki.useSyncExternalStore!==void 0?Ki.useSyncExternalStore:qk,uv.exports=hv;var Zk=uv.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=E,Qk=Zk;function Jk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eE=typeof Object.is=="function"?Object.is:Jk,tE=Qk.useSyncExternalStore,nE=hl.useRef,rE=hl.useEffect,iE=hl.useMemo,oE=hl.useDebugValue;cv.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=nE(null);if(s.current===null){var d={hasValue:!1,value:null};s.current=d}else d=s.current;s=iE(function(){function o(u){if(!c){if(c=!0,f=u,u=r(u),i!==void 0&&d.hasValue){var p=d.value;if(i(p,u))return l=p}return l=u}if(p=l,eE(f,u))return p;var m=r(u);return i!==void 0&&i(p,m)?p:(f=u,l=m)}var c=!1,f,l,h=n===void 0?null:n;return[function(){return o(t())},h===null?void 0:function(){return o(h())}]},[t,n,r,i]);var a=tE(e,s[0],s[1]);return rE(function(){d.hasValue=!0,d.value=a},[a]),oE(a),a},lv.exports=cv;var sE=lv.exports;const aE=kn(sE),{useDebugValue:lE}=he,{useSyncExternalStoreWithSelector:cE}=aE;let BB=!1;const uE=e=>e;function hE(e,t=uE,n){const r=cE(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return lE(r),r}const fv=e=>{const t=typeof e=="function"?$k(e):e,n=(r,i)=>hE(t,r,i);return Object.assign(n,t),n},Oh=e=>e?fv(e):fv,fE=e=>(t,n,r)=>{const i=r.subscribe;return r.subscribe=(d,a,o)=>{let c=d;if(a){const f=(o==null?void 0:o.equalityFn)||Object.is;let l=d(r.getState());c=h=>{const u=d(h);if(!f(l,u)){const p=l;a(l=u,p)}},o!=null&&o.fireImmediately&&a(l,l)}return i(c)},e(t,n,r)};var dv=Symbol.for("immer-nothing"),pv=Symbol.for("immer-draftable"),Bt=Symbol.for("immer-state");function pn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qi=Object.getPrototypeOf;function Zi(e){return!!e&&!!e[Bt]}function ti(e){var t;return e?gv(e)||Array.isArray(e)||!!e[pv]||!!((t=e.constructor)!=null&&t[pv])||pl(e)||gl(e):!1}var dE=Object.prototype.constructor.toString();function gv(e){if(!e||typeof e!="object")return!1;const t=qi(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===dE}function fl(e,t){dl(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function dl(e){const t=e[Bt];return t?t.type_:Array.isArray(e)?1:pl(e)?2:gl(e)?3:0}function Ph(e,t){return dl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mv(e,t,n){const r=dl(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function pl(e){return e instanceof Map}function gl(e){return e instanceof Set}function ni(e){return e.copy_||e.base_}function Dh(e,t){if(pl(e))return new Map(e);if(gl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gv(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Bt];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const d=i[s],a=r[d];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[d]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[d]})}return Object.create(qi(e),r)}else{const r=qi(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Ah(e,t=!1){return ml(e)||Zi(e)||!ti(e)||(dl(e)>1&&(e.set=e.add=e.clear=e.delete=gE),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Ah(r,!0))),e}function gE(){pn(2)}function ml(e){return Object.isFrozen(e)}var mE={};function ri(e){const t=mE[e];return t||pn(0,e),t}var fs;function vv(){return fs}function vE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yv(e,t){t&&(ri("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Mh(e){jh(e),e.drafts_.forEach(yE),e.drafts_=null}function jh(e){e===fs&&(fs=e.parent_)}function bv(e){return fs=vE(fs,e)}function yE(e){const t=e[Bt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xv(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bt].modified_&&(Mh(t),pn(4)),ti(e)&&(e=vl(t,e),t.parent_||yl(t,e)),t.patches_&&ri("Patches").generateReplacementPatches_(n[Bt].base_,e,t.patches_,t.inversePatches_)):e=vl(t,n,[]),Mh(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dv?e:void 0}function vl(e,t,n){if(ml(t))return t;const r=t[Bt];if(!r)return fl(t,(i,s)=>wv(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return yl(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,d=!1;r.type_===3&&(s=new Set(i),i.clear(),d=!0),fl(s,(a,o)=>wv(e,r,i,a,o,n,d)),yl(e,i,!1),n&&e.patches_&&ri("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function wv(e,t,n,r,i,s,d){if(Zi(i)){const a=s&&t&&t.type_!==3&&!Ph(t.assigned_,r)?s.concat(r):void 0,o=vl(e,i,a);if(mv(n,r,o),Zi(o))e.canAutoFreeze_=!1;else return}else d&&n.add(i);if(ti(i)&&!ml(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;vl(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&yl(e,i)}}function yl(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ah(t,n)}function bE(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:vv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Ih;n&&(i=[r],s=ds);const{revoke:d,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=d,a}var Ih={get(e,t){if(t===Bt)return e;const n=ni(e);if(!Ph(n,t))return xE(e,n,t);const r=n[t];return e.finalized_||!ti(r)?r:r===Fh(e.base_,t)?(Lh(e),e.copy_[t]=zh(r,e)):r},has(e,t){return t in ni(e)},ownKeys(e){return Reflect.ownKeys(ni(e))},set(e,t,n){const r=Cv(ni(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Fh(ni(e),t),s=i==null?void 0:i[Bt];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(pE(n,i)&&(n!==void 0||Ph(e.base_,t)))return!0;Lh(e),Rh(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fh(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Lh(e),Rh(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ni(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){pn(11)},getPrototypeOf(e){return qi(e.base_)},setPrototypeOf(){pn(12)}},ds={};fl(Ih,(e,t)=>{ds[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ds.deleteProperty=function(e,t){return ds.set.call(this,e,t,void 0)},ds.set=function(e,t,n){return Ih.set.call(this,e[0],t,n,e[0])};function Fh(e,t){const n=e[Bt];return(n?ni(n):e)[t]}function xE(e,t,n){var i;const r=Cv(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Cv(e,t){if(!(t in e))return;let n=qi(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=qi(n)}}function Rh(e){e.modified_||(e.modified_=!0,e.parent_&&Rh(e.parent_))}function Lh(e){e.copy_||(e.copy_=Dh(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wE=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const d=this;return function(o=s,...c){return d.produce(o,f=>n.call(this,f,...c))}}typeof n!="function"&&pn(6),r!==void 0&&typeof r!="function"&&pn(7);let i;if(ti(t)){const s=bv(this),d=zh(t,void 0);let a=!0;try{i=n(d),a=!1}finally{a?Mh(s):jh(s)}return yv(s,r),xv(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===dv&&(i=void 0),this.autoFreeze_&&Ah(i,!0),r){const s=[],d=[];ri("Patches").generateReplacementPatches_(t,i,s,d),r(s,d)}return i}else pn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(d,...a)=>this.produceWithPatches(d,o=>t(o,...a));let r,i;return[this.produce(t,n,(d,a)=>{r=d,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ti(e)||pn(8),Zi(e)&&(e=CE(e));const t=bv(this),n=zh(e,void 0);return n[Bt].isManual_=!0,jh(t),n}finishDraft(e,t){const n=e&&e[Bt];(!n||!n.isManual_)&&pn(9);const{scope_:r}=n;return yv(r,t),xv(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ri("Patches").applyPatches_;return Zi(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zh(e,t){const n=pl(e)?ri("MapSet").proxyMap_(e,t):gl(e)?ri("MapSet").proxySet_(e,t):bE(e,t);return(t?t.scope_:vv()).drafts_.push(n),n}function CE(e){return Zi(e)||pn(10,e),_v(e)}function _v(e){if(!ti(e)||ml(e))return e;const t=e[Bt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Dh(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Dh(e,!0);return fl(n,(r,i)=>{mv(n,r,_v(i))}),t&&(t.finalized_=!1),n}var Nt=new wE,_E=Nt.produce;Nt.produceWithPatches.bind(Nt),Nt.setAutoFreeze.bind(Nt),Nt.setUseStrictShallowCopy.bind(Nt),Nt.applyPatches.bind(Nt),Nt.createDraft.bind(Nt),Nt.finishDraft.bind(Nt);function $B(e){return e}var SE=function(t){return kE(t)&&!EE(t)};function kE(e){return!!e&&typeof e=="object"}function EE(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||PE(e)}var TE=typeof Symbol=="function"&&Symbol.for,OE=TE?Symbol.for("react.element"):60103;function PE(e){return e.$$typeof===OE}function DE(e){return Array.isArray(e)?[]:{}}function ps(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Qi(DE(e),e,t):e}function AE(e,t,n){return e.concat(t).map(function(r){return ps(r,n)})}function ME(e,t){if(!t.customMerge)return Qi;var n=t.customMerge(e);return typeof n=="function"?n:Qi}function jE(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Sv(e){return Object.keys(e).concat(jE(e))}function kv(e,t){try{return t in e}catch{return!1}}function IE(e,t){return kv(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function FE(e,t,n){var r={};return n.isMergeableObject(e)&&Sv(e).forEach(function(i){r[i]=ps(e[i],n)}),Sv(t).forEach(function(i){IE(e,i)||(kv(e,i)&&n.isMergeableObject(t[i])?r[i]=ME(i,n)(e[i],t[i],n):r[i]=ps(t[i],n))}),r}function Qi(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||AE,n.isMergeableObject=n.isMergeableObject||SE,n.cloneUnlessOtherwiseSpecified=ps;var r=Array.isArray(t),i=Array.isArray(e),s=r===i;return s?r?n.arrayMerge(e,t,n):FE(e,t,n):ps(t,n)}Qi.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return Qi(r,i,n)},{})};var RE=Qi,LE=RE;const Ev=kn(LE);function zE(e){return e?e.charAt(0).toLowerCase()+e.slice(1):""}function BE(e,t){const n=Ev(t,e);return Tv(n,e)}function Tv(e,t){return Object.keys(e).forEach(n=>{if(n.startsWith("replaceDefault")&&e[n]){const r=zE(n.replace("replaceDefault","")||"items");e[r]=t?t[r]:[],delete e[n]}else typeof e[n]=="object"&&e[n]!==null&&Tv(e[n],t==null?void 0:t[n])}),e}const NE=(e,t)=>({history:{...Ov,updatePointerById:n=>{const r=t().history.items.findIndex(i=>i.id===n);t().history.update(r)},update:(n,r)=>{e(i=>{i.history.pointer=n,r&&(i.history.items=r),i.history.canUndo=i.history.pointer>0,i.history.canRedo=i.history.items.length>i.history.pointer+1})},reset:n=>{e({history:{...t().history,...n??Ov}})}}}),Ov={items:[],pointer:0,canUndo:!1,canRedo:!1};var nn=(e=>(e.Filter="filter",e.Frame="frame",e.ActiveObject="activeObj",e.Text="text",e))(nn||{});const $E=(e,t)=>({filter:{...Pv,select(n,r=!1){e(i=>{i.filter.selected=n,i.activeToolOverlay=r?nn.Filter:null,i.dirty=!0})},deselect(n){t().filter.selected===n?e(r=>{r.filter.selected=null,r.activeToolOverlay=null,r.dirty=!0}):t().filter.applied.includes(n)&&e(r=>{r.filter.applied=r.filter.applied.filter(i=>i!==n),r.activeToolOverlay=null,r.dirty=!0})},reset(){e({filter:{...t().filter,...Pv}})}}}),Pv={selected:null,applied:[]},VE=(e,t)=>({crop:{...Dv,setCropzoneRect:n=>{e(r=>{r.crop.zoneRect=n})},setAspectRatio:n=>{e(r=>{r.crop.selectedAspectRatio=n})},setTransformAngle:n=>{e(r=>{r.crop.straightenAngle=n})},apply:async()=>{const n=t().crop.zoneRect;if(n){const r={width:Math.ceil(n.width/t().zoom),height:Math.ceil(n.height/t().zoom),left:Math.ceil(n.left/t().zoom),top:Math.ceil(n.top/t().zoom)};await t().editor.tools.crop.apply(r)}},reset:()=>{e({crop:{...t().crop,...Dv}})}}}),Dv={zoneRect:null,selectedAspectRatio:null,straightenAngle:0};function mr(e){return(e==null?void 0:e.type)==="i-text"}var Fe=(e=>(e.Text="text",e.Shape="shape",e.Polygon="polygon",e.Ellipse="ellipse",e.Triangle="triangle",e.Circle="circle",e.Rect="rect",e.Sticker="sticker",e.Drawing="drawing",e.FreeDrawing="freeDrawing",e.Image="image",e.MainImage="mainImage",e.StraightenAnchor="straightenHelper",e))(Fe||{});const HE={text:{name:oe("Text"),icon:At.text.icon},shape:{name:oe("Shape"),icon:At.shapes.icon},polygon:{name:oe("Shape"),icon:At.shapes.icon},ellipse:{name:oe("Shape"),icon:At.shapes.icon},triangle:{name:oe("Shape"),icon:At.shapes.icon},circle:{name:oe("Shape"),icon:At.shapes.icon},rect:{name:oe("Shape"),icon:At.shapes.icon},sticker:{name:oe("Sticker"),icon:At.stickers.icon},drawing:{name:oe("Drawing"),icon:At.draw.icon},freeDrawing:{name:oe("Drawing"),icon:At.draw.icon},image:{name:oe("Image"),icon:At.overlayImage.icon},mainImage:{name:oe("Background Image"),icon:At.bgImage.icon}};function WE(e){return e.name===Fe.Image}const Av={isMoving:!1,editableProps:{},id:null,isText:!1,isImage:!1,name:null};function UE(e){if(!e)return{};const t={fill:e.fill,opacity:e.opacity,backgroundColor:e.backgroundColor,stroke:e.stroke,strokeWidth:e.strokeWidth},n=e.shadow;return n&&(t.shadow={color:n.color,blur:n.blur,offsetX:n.offsetX,offsetY:n.offsetY}),mr(e)&&(t.textAlign=e.textAlign,t.underline=e.underline,t.linethrough=e.linethrough,t.fontStyle=e.fontStyle,t.fontFamily=e.fontFamily,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize),t}const YE=(e,t)=>({objects:{...Mv,setActiveIsMoving:n=>{e(r=>{r.objects.active.isMoving=n})},setIsEditingText:n=>{e(r=>{r.objects.isEditingText=n})},setActive:n=>{e(n?r=>{r.objects.active.editableProps=UE(n),r.objects.active.id=n.data.id,r.objects.active.name=n.name??null,r.objects.active.isText=mr(n),r.objects.active.isImage=WE(n)}:r=>{var s,d,a,o,c;const i={...(s=t().config.objectDefaults)==null?void 0:s.global,fontFamily:(a=(d=t().config.objectDefaults)==null?void 0:d.text)==null?void 0:a.fontFamily,fontSize:(c=(o=t().config.objectDefaults)==null?void 0:o.text)==null?void 0:c.fontSize};r.objects.active={...Av,editableProps:i}})},reset(){e({objects:{...t().objects,...Mv}})}}}),Mv={all:[],isEditingText:!1,active:Av},XE=(e,t)=>({frame:{...jv,select:n=>{e(r=>{r.frame.active=n}),t().frame.showOptionsPanel()},deselect:()=>{e(n=>{n.frame.active=null,n.activeToolOverlay=null})},showOptionsPanel:()=>{t().activeTool===Pe.FRAME&&e(n=>{n.activeToolOverlay=nn.Frame})},reset(){e({frame:{...t().frame,...jv}})}}}),jv={active:null},GE=(e,t)=>({resize:{...Iv,setFormValue:n=>{e(r=>{Object.entries(n).forEach(([i,s])=>{r.resize.formValue[i]=s})})},apply(){const n=t().resize.formValue,r=t().original;if(n.width===r.width&&n.height===r.height)return!1;t().editor.tools.resize.apply(n)},reset(){e({resize:{...t().resize,...Iv}})}}}),Iv={formValue:{width:1,height:1,maintainAspect:!0,usePercentages:!1}},KE=(e,t)=>({corners:{...Fv,setRadius:n=>{e(r=>{r.corners.radius=n})},apply(){return t().editor.tools.corners.apply(t().corners.radius)},reset(){e({corners:{...t().corners,...Fv}})}}}),Fv={radius:50},Rv=e=>(t,n,r)=>(r.setState=(i,s,...d)=>{const a=typeof i=="function"?_E(i):i;return t(a,s,...d)},e(r.setState,n,r));var Lv={exports:{}},qE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},zv={exports:{}},ZE=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},QE=ZE,JE=Array.prototype.concat,eT=Array.prototype.slice,Bv=zv.exports=function(t){for(var n=[],r=0,i=t.length;r<i;r++){var s=t[r];QE(s)?n=JE.call(n,eT.call(s)):n.push(s)}return n};Bv.wrap=function(e){return function(){return e(Bv(arguments))}};var tT=zv.exports,gs=qE,ms=tT,Nv=Object.hasOwnProperty,$v=Object.create(null);for(var Bh in gs)Nv.call(gs,Bh)&&($v[gs[Bh]]=Bh);var $t=Lv.exports={to:{},get:{}};$t.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=$t.get.hsl(e),r="hsl";break;case"hwb":n=$t.get.hwb(e),r="hwb";break;default:n=$t.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null},$t.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,d=[0,0,0,1],a,o,c;if(a=e.match(n)){for(c=a[2],a=a[1],o=0;o<3;o++){var f=o*2;d[o]=parseInt(a.slice(f,f+2),16)}c&&(d[3]=parseInt(c,16)/255)}else if(a=e.match(t)){for(a=a[1],c=a[3],o=0;o<3;o++)d[o]=parseInt(a[o]+a[o],16);c&&(d[3]=parseInt(c+c,16)/255)}else if(a=e.match(r)){for(o=0;o<3;o++)d[o]=parseInt(a[o+1],0);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(o=0;o<3;o++)d[o]=Math.round(parseFloat(a[o+1])*2.55);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else return(a=e.match(s))?a[1]==="transparent"?[0,0,0,0]:Nv.call(gs,a[1])?(d=gs[a[1]],d[3]=1,d):null:null;for(o=0;o<3;o++)d[o]=vr(d[o],0,255);return d[3]=vr(d[3],0,1),d},$t.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=vr(parseFloat(n[2]),0,100),d=vr(parseFloat(n[3]),0,100),a=vr(isNaN(r)?1:r,0,1);return[i,s,d,a]}return null},$t.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=vr(parseFloat(n[2]),0,100),d=vr(parseFloat(n[3]),0,100),a=vr(isNaN(r)?1:r,0,1);return[i,s,d,a]}return null},$t.to.hex=function(){var e=ms(arguments);return"#"+bl(e[0])+bl(e[1])+bl(e[2])+(e[3]<1?bl(Math.round(e[3]*255)):"")},$t.to.rgb=function(){var e=ms(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},$t.to.rgb.percent=function(){var e=ms(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},$t.to.hsl=function(){var e=ms(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},$t.to.hwb=function(){var e=ms(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},$t.to.keyword=function(e){return $v[e.slice(0,3)]};function vr(e,t,n){return Math.min(Math.max(t,e),n)}function bl(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var nT=Lv.exports,rT={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const vs=rT,Vv={};for(const e of Object.keys(vs))Vv[vs[e]]=e;const ve={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Hv=ve;for(const e of Object.keys(ve)){if(!("channels"in ve[e]))throw new Error("missing channels property: "+e);if(!("labels"in ve[e]))throw new Error("missing channel labels property: "+e);if(ve[e].labels.length!==ve[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=ve[e];delete ve[e].channels,delete ve[e].labels,Object.defineProperty(ve[e],"channels",{value:t}),Object.defineProperty(ve[e],"labels",{value:n})}ve.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),d=s-i;let a,o;s===i?a=0:t===s?a=(n-r)/d:n===s?a=2+(r-t)/d:r===s&&(a=4+(t-n)/d),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+s)/2;return s===i?o=0:c<=.5?o=d/(s+i):o=d/(2-s-i),[a,o*100,c*100]},ve.rgb.hsv=function(e){let t,n,r,i,s;const d=e[0]/255,a=e[1]/255,o=e[2]/255,c=Math.max(d,a,o),f=c-Math.min(d,a,o),l=function(h){return(c-h)/6/f+1/2};return f===0?(i=0,s=0):(s=f/c,t=l(d),n=l(a),r=l(o),d===c?i=r-n:a===c?i=1/3+t-r:o===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]},ve.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=ve.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,s*100,r*100]},ve.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r),s=(1-t-i)/(1-i)||0,d=(1-n-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[s*100,d*100,a*100,i*100]};function iT(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}ve.rgb.keyword=function(e){const t=Vv[e];if(t)return t;let n=1/0,r;for(const i of Object.keys(vs)){const s=vs[i],d=iT(e,s);d<n&&(n=d,r=i)}return r},ve.keyword.rgb=function(e){return vs[e]},ve.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=t*.4124+n*.3576+r*.1805,s=t*.2126+n*.7152+r*.0722,d=t*.0193+n*.1192+r*.9505;return[i*100,s*100,d*100]},ve.rgb.lab=function(e){const t=ve.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*r-16,d=500*(n-r),a=200*(r-i);return[s,d,a]},ve.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,s,d;if(n===0)return d=r*255,[d,d,d];r<.5?i=r*(1+n):i=r+n-r*n;const a=2*r-i,o=[0,0,0];for(let c=0;c<3;c++)s=t+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?d=a+(i-a)*6*s:2*s<1?d=i:3*s<2?d=a+(i-a)*(2/3-s)*6:d=a,o[c]=d*255;return o},ve.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const s=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=s<=1?s:2-s;const d=(r+n)/2,a=r===0?2*i/(s+i):2*n/(r+n);return[t,a*100,d*100]},ve.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,s=t-Math.floor(t),d=255*r*(1-n),a=255*r*(1-n*s),o=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,o,d];case 1:return[a,r,d];case 2:return[d,r,o];case 3:return[d,a,r];case 4:return[o,d,r];case 5:return[r,d,a]}},ve.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let s,d;d=(2-n)*r;const a=(2-n)*i;return s=n*i,s/=a<=1?a:2-a,s=s||0,d/=2,[t,s*100,d*100]},ve.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let s;i>1&&(n/=i,r/=i);const d=Math.floor(6*t),a=1-r;s=6*t-d,d&1&&(s=1-s);const o=n+s*(a-n);let c,f,l;switch(d){default:case 6:case 0:c=a,f=o,l=n;break;case 1:c=o,f=a,l=n;break;case 2:c=n,f=a,l=o;break;case 3:c=n,f=o,l=a;break;case 4:c=o,f=n,l=a;break;case 5:c=a,f=n,l=o;break}return[c*255,f*255,l*255]},ve.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100,s=1-Math.min(1,t*(1-i)+i),d=1-Math.min(1,n*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[s*255,d*255,a*255]},ve.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,s,d;return i=t*3.2406+n*-1.5372+r*-.4986,s=t*-.9689+n*1.8758+r*.0415,d=t*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),d=Math.min(Math.max(0,d),1),[i*255,s*255,d*255]},ve.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,s=500*(t-n),d=200*(n-r);return[i,s,d]},ve.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let i,s,d;s=(t+16)/116,i=n/500+s,d=s-r/200;const a=s**3,o=i**3,c=d**3;return s=a>.008856?a:(s-16/116)/7.787,i=o>.008856?o:(i-16/116)/7.787,d=c>.008856?c:(d-16/116)/7.787,i*=95.047,s*=100,d*=108.883,[i,s,d]},ve.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const d=Math.sqrt(n*n+r*r);return[t,d,i]},ve.lch.lab=function(e){const t=e[0],n=e[1],i=e[2]/360*2*Math.PI,s=n*Math.cos(i),d=n*Math.sin(i);return[t,s,d]},ve.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let s=t===null?ve.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let d=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return s===2&&(d+=60),d},ve.hsv.ansi16=function(e){return ve.rgb.ansi16(ve.hsv.rgb(e),e[2])},ve.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},ve.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,r=(t&1)*n*255,i=(t>>1&1)*n*255,s=(t>>2&1)*n*255;return[r,i,s]},ve.ansi256.rgb=function(e){if(e>=232){const s=(e-232)*10+8;return[s,s,s]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[n,r,i]},ve.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n},ve.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16),i=r>>16&255,s=r>>8&255,d=r&255;return[i,s,d]},ve.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),s=Math.min(Math.min(t,n),r),d=i-s;let a,o;return d<1?a=s/(1-d):a=0,d<=0?o=0:i===t?o=(n-r)/d%6:i===n?o=2+(r-t)/d:o=4+(t-n)/d,o/=6,o%=1,[o*360,d*100,a*100]},ve.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],r*100,i*100]},ve.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],r*100,i*100]},ve.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],s=t%1*6,d=s%1,a=1-d;let o=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=d,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=d;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=d,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return o=(1-n)*r,[(n*i[0]+o)*255,(n*i[1]+o)*255,(n*i[2]+o)*255]},ve.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]},ve.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]},ve.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]},ve.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,i=r-t;let s=0;return i<1&&(s=(r-i)/(1-i)),[e[0],i*100,s*100]},ve.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},ve.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},ve.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},ve.gray.hsl=function(e){return[0,0,e[0]]},ve.gray.hsv=ve.gray.hsl,ve.gray.hwb=function(e){return[0,100,e[0]]},ve.gray.cmyk=function(e){return[0,0,0,e[0]]},ve.gray.lab=function(e){return[e[0],0,0]},ve.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},ve.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const xl=Hv;function oT(){const e={},t=Object.keys(xl);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function sT(e){const t=oT(),n=[e];for(t[e].distance=0;n.length;){const r=n.pop(),i=Object.keys(xl[r]);for(let s=i.length,d=0;d<s;d++){const a=i[d],o=t[a];o.distance===-1&&(o.distance=t[r].distance+1,o.parent=r,n.unshift(a))}}return t}function aT(e,t){return function(n){return t(e(n))}}function lT(e,t){const n=[t[e].parent,e];let r=xl[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)n.unshift(t[i].parent),r=aT(xl[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}var cT=function(e){const t=sT(e),n={},r=Object.keys(t);for(let i=r.length,s=0;s<i;s++){const d=r[s];t[d].parent!==null&&(n[d]=lT(d,t))}return n};const Nh=Hv,uT=cT,Ji={},hT=Object.keys(Nh);function fT(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function dT(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=e(n);if(typeof i=="object")for(let s=i.length,d=0;d<s;d++)i[d]=Math.round(i[d]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}hT.forEach(e=>{Ji[e]={},Object.defineProperty(Ji[e],"channels",{value:Nh[e].channels}),Object.defineProperty(Ji[e],"labels",{value:Nh[e].labels});const t=uT(e);Object.keys(t).forEach(r=>{const i=t[r];Ji[e][r]=dT(i),Ji[e][r].raw=fT(i)})});var pT=Ji;const eo=nT,Vt=pT,Wv=["keyword","gray","hex"],$h={};for(const e of Object.keys(Vt))$h[[...Vt[e].labels].sort().join("")]=e;const wl={};function it(e,t){if(!(this instanceof it))return new it(e,t);if(t&&t in Wv&&(t=null),t&&!(t in Vt))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof it)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=eo.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=Vt[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Vt[this.model].channels;const i=Array.prototype.slice.call(e,0,r);this.color=Vh(i,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const s=i.sort().join("");if(!(s in $h))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=$h[s];const{labels:d}=Vt[this.model],a=[];for(n=0;n<d.length;n++)a.push(e[d[n]]);this.color=Vh(a)}if(wl[this.model])for(r=Vt[this.model].channels,n=0;n<r;n++){const i=wl[this.model][n];i&&(this.color[n]=i(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}it.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in eo.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return eo.to[t.model](n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return eo.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Vt[this.model],{labels:n}=Vt[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new it([...this.color.map(mT(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new it([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Ye("rgb",0,et(255)),green:Ye("rgb",1,et(255)),blue:Ye("rgb",2,et(255)),hue:Ye(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Ye("hsl",1,et(100)),lightness:Ye("hsl",2,et(100)),saturationv:Ye("hsv",1,et(100)),value:Ye("hsv",2,et(100)),chroma:Ye("hcg",1,et(100)),gray:Ye("hcg",2,et(100)),white:Ye("hwb",1,et(100)),wblack:Ye("hwb",2,et(100)),cyan:Ye("cmyk",0,et(100)),magenta:Ye("cmyk",1,et(100)),yellow:Ye("cmyk",2,et(100)),black:Ye("cmyk",3,et(100)),x:Ye("xyz",0,et(95.047)),y:Ye("xyz",1,et(100)),z:Ye("xyz",2,et(108.833)),l:Ye("lab",0,et(100)),a:Ye("lab",1),b:Ye("lab",2),keyword(e){return e!==void 0?new it(e):Vt[this.model].keyword(this.color)},hex(e){return e!==void 0?new it(e):eo.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new it(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),eo.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const i=r/255;t[n]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return it.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),i=t===void 0?.5:t,s=2*i-1,d=n.alpha()-r.alpha(),a=((s*d===-1?s:(s+d)/(1+s*d))+1)/2,o=1-a;return it.rgb(a*n.red()+o*r.red(),a*n.green()+o*r.green(),a*n.blue()+o*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const e of Object.keys(Vt)){if(Wv.includes(e))continue;const{channels:t}=Vt[e];it.prototype[e]=function(...n){return this.model===e?new it(this):n.length>0?new it(n,e):new it([...vT(Vt[this.model][e].raw(this.color)),this.valpha],e)},it[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=Vh(n,t)),new it(r,e)}}function gT(e,t){return Number(e.toFixed(t))}function mT(e){return function(t){return gT(t,e)}}function Ye(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(wl[r]||(wl[r]=[]))[t]=n;return e=e[0],function(r){let i;return r!==void 0?(n&&(r=n(r)),i=this[e](),i.color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function et(e){return function(t){return Math.max(0,Math.min(e,t))}}function vT(e){return Array.isArray(e)?e:[e]}function Vh(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var yT=it;const bT=kn(yT);function xT(e){const t=e.isDark?Eh.find(i=>i.isDark):Eh.find(i=>!i.isDark),n={...t,...e,colors:{...t==null?void 0:t.colors,...e.colors}},r=Object.entries(n.colors).map(([i,s])=>[i,wT(s)]);return{id:n.name,name:n.name,values:Object.fromEntries(r),is_dark:n.isDark}}function wT(e){return e.endsWith("%")||e.split(" ").length===3?e:bT(e).rgb().array().slice(0,3).join(" ")}let ii=typeof document<"u"?document.getElementById("root")??document.body:void 0,to=typeof document<"u"?document.documentElement:void 0;function CT(e){ii=e,to=e}function _T(e,t){to==null||to.style.setProperty(e,t)}function ST(e){Object.entries(e.values).forEach(([t,n])=>{_T(t,n)}),e.is_dark?to.classList.add("dark"):to.classList.remove("dark")}const Cl=Oh()(e=>({data:typeof window<"u"&&window.bootstrapData?Uv(window.bootstrapData):null,setData:t=>{const n=typeof t=="string"?Uv(t):t;e({data:n})},mergeData:t=>{e(n=>({data:{...n.data,...t}}))}})),kT=()=>Cl.getState().data;Cl.getState().setData;const ET=Cl.getState().mergeData;function Uv(e){return typeof e=="string"?JSON.parse(e):e}const Yv={top:0,right:0,bottom:0,left:0,width:0,height:0},se=Oh()(fE(Rv((e,t)=>({editor:null,fabric:null,config:sv,zoom:1,dirty:!1,original:{width:1,height:1},stageSize:Yv,canvasSize:Yv,canvasRef:null,activeTool:null,activeToolOverlay:null,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1},...NE(e,t),...YE(e,t),...$E(e,t),...VE(e,t),...XE(e,t),...GE(e,t),...KE(e,t),setZoom:n=>e(r=>{r.zoom=n}),setOriginal:(n,r)=>e(i=>{i.original={width:n,height:r}}),setDirty:n=>e(r=>{r.dirty=n}),toggleLoading:n=>e(r=>{r.loading=n}),setStageSize:n=>e(r=>{r.stageSize=n}),setCanvasSize:n=>e(r=>{r.canvasSize=n}),setActiveTool:(n,r)=>{e(i=>{i.activeTool=n,i.activeToolOverlay=r})},setConfig:n=>e(r=>{var c,f;const i=BE(n,t().config);r.config=i;const s=i.activeLanguage||"en",d=(c=i.languages)==null?void 0:c[s],a=(((f=i.ui)==null?void 0:f.themes)||[]).map(l=>xT(l)),o=a.find(l=>{var h;return l.id===((h=i.ui)==null?void 0:h.activeTheme)});o&&ST(o),ET({i18n:{language:s,name:s,id:0,lines:d},themes:{all:a}})}),togglePanel:(n,r)=>e(i=>{i.openPanels[n]=r??!i.openPanels[n]}),applyChanges:async()=>{var s;const n=t().activeTool;if(!n)return;const r=t()[n],i=await((s=r==null?void 0:r.apply)==null?void 0:s.call(r));e(d=>{d.dirty=!1,d.activeTool=null,d.activeToolOverlay=null}),i!==!1&&t().editor.tools.history.addHistoryItem({name:n}),r==null||r.reset()},cancelChanges:async()=>{const n=t().activeTool;if(!n)return;const r=t().dirty;e(s=>{s.dirty=!1,s.activeTool=null,s.activeToolOverlay=null}),r&&await t().editor.tools.history.reload();const i=t()[n];i==null||i.reset()},reset:()=>{t().editor.tools.transform.resetStraightenAnchor(),e({activeTool:null,activeToolOverlay:null,zoom:1,dirty:!1,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1}}),t().history.reset(),t().objects.reset(),t().filter.reset(),t().crop.reset(),t().frame.reset(),t().resize.reset(),t().corners.reset()}}))));function D(){return se.getState()}function L(){return D().editor.tools}function de(){return D().fabric}function Hh(e){var n,r,i,s,d;L().canvas.clear(),L().frame.remove();const t=!((n=D().config.ui)!=null&&n.visible);return D().setConfig({image:void 0,blankCanvasSize:void 0,state:void 0,...e}),D().reset(),(r=D().config.ui)!=null&&r.defaultTool&&D().setActiveTool((i=D().config.ui)==null?void 0:i.defaultTool,null),t&&((d=(s=D().config).onOpen)==null||d.call(s)),new Promise(a=>setTimeout(a))}async function _l(e){return(await fetch(e)).json()}const oi={selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,hasRotatingPoint:!1,strokeWidth:0};function Sl(e=[]){var r;e=[...Object.keys(oi),"crossOrigin","name","displayName","data",...e];const t=de().toJSON(e);t.objects=t.objects.filter(i=>!i.data.pixieInternal).map(i=>(i.type==="image"&&D().config.crossOrigin&&(i.crossOrigin="anonymous"),mr(i)&&(i.selectable=!0,i.lockMovementX=!1,i.lockMovementY=!1,i.lockUniScaling=!1),{...i,data:i.data?{...i.data}:{}}));const n=L().frame.active.config?{name:L().frame.active.config.name,sizePercent:L().frame.active.currentSizeInPercent}:null;return{canvas:t,editor:{frame:n,zoom:D().zoom,activeObjectId:((r=D().objects.active)==null?void 0:r.id)||null},canvasWidth:D().original.width,canvasHeight:D().original.height}}function Wh(e=null){if(D().dirty)return;L().zoom.fitToScreen();const[t,n]=Xv(de().getActiveObject());e?D().setActiveTool(e,t===e?n:null):D().setActiveTool(t,n)}function Xv(e){switch(e==null?void 0:e.name){case Fe.Text:return[Pe.TEXT,nn.Text];case Fe.Sticker:return[Pe.STICKERS,nn.ActiveObject];case Fe.Image:return[null,nn.ActiveObject];case Fe.Shape:return[Pe.SHAPES,nn.ActiveObject];default:return[null,null]}}const TT=`/*! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com*/.pi *,.pi :after,.pi :before{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));border-style:solid;border-width:0;box-sizing:border-box}.pi :after,.pi :before{--tw-content:""}.pi hr{border-top-width:1px;color:inherit;height:0}.pi abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6{font-size:inherit;font-weight:inherit}.pi a{color:inherit;text-decoration:inherit}.pi b,.pi strong{font-weight:bolder}.pi code,.pi kbd,.pi pre,.pi samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}.pi small{font-size:80%}.pi sub,.pi sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.pi sub{bottom:-.25em}.pi sup{top:-.5em}.pi table{border-collapse:collapse;border-color:inherit;text-indent:0}.pi button,.pi input,.pi optgroup,.pi select,.pi textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}.pi button,.pi select{text-transform:none}.pi [type=button],.pi [type=reset],.pi [type=submit],.pi button{-webkit-appearance:button;background-color:transparent;background-image:none}.pi :-moz-focusring{outline:auto}.pi :-moz-ui-invalid{box-shadow:none}.pi progress{vertical-align:baseline}.pi ::-webkit-inner-spin-button,.pi ::-webkit-outer-spin-button{height:auto}.pi [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.pi ::-webkit-search-decoration{-webkit-appearance:none}.pi ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.pi summary{display:list-item}.pi blockquote,.pi dd,.pi dl,.pi figure,.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6,.pi hr,.pi p,.pi pre{margin:0}.pi fieldset{margin:0;padding:0}.pi legend{padding:0}.pi menu,.pi ol,.pi ul{list-style:none;margin:0;padding:0}.pi textarea{resize:vertical}.pi input::-moz-placeholder,.pi textarea::-moz-placeholder{color:#9ca3af;opacity:1}.pi input::placeholder,.pi textarea::placeholder{color:#9ca3af;opacity:1}.pi [role=button],.pi button{cursor:pointer}.pi :disabled{cursor:default}.pi audio,.pi canvas,.pi embed,.pi iframe,.pi img,.pi object,.pi svg,.pi video{display:block;vertical-align:middle}.pi img,.pi video{height:auto;max-width:100%}.pi [hidden]{display:none}.pi *,.pi :after,.pi :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi .\\!container{width:100%!important}.pi .container{width:100%}@media (min-width:640px){.pi .\\!container{max-width:640px!important}.pi .container{max-width:640px}}@media (min-width:768px){.pi .\\!container{max-width:768px!important}.pi .container{max-width:768px}}@media (min-width:1024px){.pi .\\!container{max-width:1024px!important}.pi .container{max-width:1024px}}@media (min-width:1280px){.pi .\\!container{max-width:1280px!important}.pi .container{max-width:1280px}}@media (min-width:1536px){.pi .\\!container{max-width:1536px!important}.pi .container{max-width:1536px}}.pi .sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.pi .pointer-events-none{pointer-events:none}.pi .pointer-events-auto{pointer-events:auto}.pi .\\!visible{visibility:visible!important}.pi .visible{visibility:visible}.pi .invisible{visibility:hidden}.pi .collapse{visibility:collapse}.pi .static{position:static}.pi .fixed{position:fixed}.pi .absolute{position:absolute}.pi .relative{position:relative}.pi .sticky{position:sticky}.pi .inset-0{top:0;right:0;bottom:0;left:0}.pi .inset-x-0{left:0;right:0}.pi .inset-y-\\[-50\\%\\]{bottom:-50%;top:-50%}.pi .-bottom-10{bottom:-10px}.pi .-bottom-14{bottom:-14px}.pi .-bottom-20{bottom:-20px}.pi .-bottom-5{bottom:-5px}.pi .-bottom-6{bottom:-6px}.pi .-left-4{left:-4px}.pi .-left-5{left:-5px}.pi .-left-8{left:-8px}.pi .-left-80{left:-80px}.pi .-right-5{right:-5px}.pi .-right-6{right:-6px}.pi .-top-40{top:-40px}.pi .-top-5{top:-5px}.pi .bottom-0{bottom:0}.pi .bottom-20{bottom:20px}.pi .left-0{left:0}.pi .left-1\\/2{left:50%}.pi .left-16{left:16px}.pi .left-20{left:20px}.pi .left-24{left:24px}.pi .left-30{left:30px}.pi .right-0{right:0}.pi .right-16{right:16px}.pi .right-2{right:2px}.pi .right-20{right:20px}.pi .right-24{right:24px}.pi .right-4{right:4px}.pi .right-8{right:8px}.pi .top-0{top:0}.pi .top-1\\/2{top:50%}.pi .top-10{top:10px}.pi .top-120{top:7.5rem}.pi .top-2{top:2px}.pi .top-24{top:24px}.pi .top-26{top:26px}.pi .top-64{top:64px}.pi .top-8{top:8px}.pi .isolate{isolation:isolate}.pi .z-10{z-index:10}.pi .z-20{z-index:20}.pi .z-30{z-index:30}.pi .z-40{z-index:40}.pi .z-50{z-index:50}.pi .z-cropzone{z-index:10}.pi .z-loading-indicator{z-index:50}.pi .z-modal{z-index:110}.pi .z-navbar{z-index:40}.pi .z-obj-box{z-index:20}.pi .z-popover{z-index:130}.pi .z-toast{z-index:160}.pi .z-tool-overlay{z-index:30}.pi .z-tooltip{z-index:150}.pi .z-tray{z-index:120}.pi .m-auto{margin:auto}.pi .-mx-8{margin-left:-8px;margin-right:-8px}.pi .mx-0{margin-left:0;margin-right:0}.pi .mx-14{margin-left:14px;margin-right:14px}.pi .mx-20{margin-left:20px;margin-right:20px}.pi .mx-4{margin-left:4px;margin-right:4px}.pi .mx-8{margin-left:8px;margin-right:8px}.pi .mx-auto{margin-left:auto;margin-right:auto}.pi .my-10{margin-bottom:10px;margin-top:10px}.pi .my-100{margin-bottom:6.25rem;margin-top:6.25rem}.pi .my-12{margin-bottom:12px;margin-top:12px}.pi .my-14{margin-bottom:14px;margin-top:14px}.pi .my-16{margin-bottom:16px;margin-top:16px}.pi .my-20{margin-bottom:20px;margin-top:20px}.pi .my-24{margin-bottom:24px;margin-top:24px}.pi .my-30{margin-bottom:30px;margin-top:30px}.pi .my-32{margin-bottom:32px;margin-top:32px}.pi .my-4{margin-bottom:4px;margin-top:4px}.pi .my-40{margin-bottom:40px;margin-top:40px}.pi .my-50{margin-bottom:50px;margin-top:50px}.pi .my-6{margin-bottom:6px;margin-top:6px}.pi .my-8{margin-bottom:8px;margin-top:8px}.pi .my-80{margin-bottom:80px;margin-top:80px}.pi .my-auto{margin-bottom:auto;margin-top:auto}.pi .-ml-1{margin-left:-1px}.pi .-ml-10{margin-left:-10px}.pi .-ml-12{margin-left:-12px}.pi .-ml-3{margin-left:-3px}.pi .-ml-4{margin-left:-4px}.pi .-ml-6{margin-left:-6px}.pi .-ml-8{margin-left:-8px}.pi .-mr-4{margin-right:-4px}.pi .-mr-8{margin-right:-8px}.pi .-mt-2{margin-top:-2px}.pi .mb-1{margin-bottom:1px}.pi .mb-10{margin-bottom:10px}.pi .mb-12{margin-bottom:12px}.pi .mb-14{margin-bottom:14px}.pi .mb-16{margin-bottom:16px}.pi .mb-18{margin-bottom:18px}.pi .mb-2{margin-bottom:2px}.pi .mb-20{margin-bottom:20px}.pi .mb-24{margin-bottom:24px}.pi .mb-28{margin-bottom:28px}.pi .mb-30{margin-bottom:30px}.pi .mb-32{margin-bottom:32px}.pi .mb-34{margin-bottom:2.125rem}.pi .mb-36{margin-bottom:36px}.pi .mb-4{margin-bottom:4px}.pi .mb-40{margin-bottom:40px}.pi .mb-44{margin-bottom:44px}.pi .mb-48{margin-bottom:48px}.pi .mb-54{margin-bottom:3.375rem}.pi .mb-6{margin-bottom:6px}.pi .mb-60{margin-bottom:60px}.pi .mb-64{margin-bottom:64px}.pi .mb-8{margin-bottom:8px}.pi .ml-10{margin-left:10px}.pi .ml-12{margin-left:12px}.pi .ml-4{margin-left:4px}.pi .ml-6{margin-left:6px}.pi .ml-8{margin-left:8px}.pi .ml-\\[-19rem\\]{margin-left:-19rem}.pi .ml-\\[-38rem\\]{margin-left:-38rem}.pi .ml-auto{margin-left:auto}.pi .mr-10{margin-right:10px}.pi .mr-12{margin-right:12px}.pi .mr-14{margin-right:14px}.pi .mr-16{margin-right:16px}.pi .mr-2{margin-right:2px}.pi .mr-20{margin-right:20px}.pi .mr-24{margin-right:24px}.pi .mr-4{margin-right:4px}.pi .mr-5{margin-right:5px}.pi .mr-6{margin-right:6px}.pi .mr-8{margin-right:8px}.pi .mr-auto{margin-right:auto}.pi .mt-0{margin-top:0}.pi .mt-10{margin-top:10px}.pi .mt-12{margin-top:12px}.pi .mt-14{margin-top:14px}.pi .mt-16{margin-top:16px}.pi .mt-18{margin-top:18px}.pi .mt-2{margin-top:2px}.pi .mt-20{margin-top:20px}.pi .mt-22{margin-top:22px}.pi .mt-24{margin-top:24px}.pi .mt-30{margin-top:30px}.pi .mt-32{margin-top:32px}.pi .mt-34{margin-top:2.125rem}.pi .mt-36{margin-top:36px}.pi .mt-4{margin-top:4px}.pi .mt-40{margin-top:40px}.pi .mt-48{margin-top:48px}.pi .mt-50{margin-top:50px}.pi .mt-6{margin-top:6px}.pi .mt-60{margin-top:60px}.pi .mt-8{margin-top:8px}.pi .mt-80{margin-top:80px}.pi .mt-auto{margin-top:auto}.pi .box-content{box-sizing:content-box}.pi .line-clamp-2{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2}.pi .block{display:block}.pi .inline-block{display:inline-block}.pi .inline{display:inline}.pi .flex{display:flex}.pi .inline-flex{display:inline-flex}.pi .table{display:table}.pi .table-row{display:table-row}.pi .\\!grid{display:grid!important}.pi .grid{display:grid}.pi .contents{display:contents}.pi .hidden{display:none}.pi .aspect-square{aspect-ratio:1/1}.pi .aspect-video{aspect-ratio:16/9}.pi .h-1{height:1px}.pi .h-10{height:10px}.pi .h-100{height:6.25rem}.pi .h-112{height:112px}.pi .h-12{height:12px}.pi .h-128{height:128px}.pi .h-14{height:14px}.pi .h-16{height:16px}.pi .h-18{height:18px}.pi .h-192{height:192px}.pi .h-2{height:2px}.pi .h-2\\/4{height:50%}.pi .h-20{height:20px}.pi .h-22{height:22px}.pi .h-24{height:24px}.pi .h-26{height:26px}.pi .h-28{height:28px}.pi .h-3{height:3px}.pi .h-30{height:30px}.pi .h-32{height:32px}.pi .h-34{height:2.125rem}.pi .h-36{height:36px}.pi .h-38{height:2.375rem}.pi .h-4{height:4px}.pi .h-40{height:40px}.pi .h-400{height:25rem}.pi .h-42{height:42px}.pi .h-46{height:2.875rem}.pi .h-48{height:48px}.pi .h-50{height:50px}.pi .h-52{height:3.25rem}.pi .h-54{height:3.375rem}.pi .h-56{height:56px}.pi .h-6{height:6px}.pi .h-60{height:60px}.pi .h-64{height:64px}.pi .h-68{height:68px}.pi .h-8{height:8px}.pi .h-80{height:80px}.pi .h-84{height:84px}.pi .h-90{height:5.625rem}.pi .h-92{height:92px}.pi .h-\\[186px\\]{height:186px}.pi .h-\\[200\\%\\]{height:200%}.pi .h-\\[25rem\\]{height:25rem}.pi .h-\\[54px\\]{height:54px}.pi .h-\\[97px\\]{height:97px}.pi .h-\\[calc\\(100\\%-12px\\)\\]{height:calc(100% - 12px)}.pi .h-\\[calc\\(100dvh-64px\\)\\]{height:calc(100dvh - 64px)}.pi .h-auto{height:auto}.pi .h-font{height:1em}.pi .h-full{height:100%}.pi .h-max{height:-moz-max-content;height:max-content}.pi .h-px{height:1px}.pi .h-screen{height:100dvh}.pi .max-h-100{max-height:6.25rem}.pi .max-h-160{max-height:160px}.pi .max-h-240{max-height:240px}.pi .max-h-26{max-height:26px}.pi .max-h-288{max-height:288px}.pi .max-h-400{max-height:25rem}.pi .max-h-8{max-height:8px}.pi .max-h-\\[340px\\]{max-height:340px}.pi .max-h-\\[36px\\]{max-height:36px}.pi .max-h-\\[600px\\]{max-height:600px}.pi .max-h-\\[calc\\(100\\%-30px\\)\\]{max-height:calc(100% - 30px)}.pi .max-h-\\[calc\\(100\\%-40px\\)\\]{max-height:calc(100% - 40px)}.pi .max-h-\\[calc\\(100vh-90px\\)\\]{max-height:calc(100vh - 90px)}.pi .max-h-dialog{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .max-h-full{max-height:100%}.pi .max-h-inherit{max-height:inherit}.pi .max-h-tray{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-200{min-height:12.5rem}.pi .min-h-24{min-height:24px}.pi .min-h-30{min-height:30px}.pi .min-h-320{min-height:320px}.pi .min-h-36{min-height:36px}.pi .min-h-42{min-height:42px}.pi .min-h-440{min-height:27.5rem}.pi .min-h-46{min-height:2.875rem}.pi .min-h-50{min-height:50px}.pi .min-h-60{min-height:60px}.pi .min-h-70{min-height:70px}.pi .min-h-850{min-height:53.125rem}.pi .min-h-90{min-height:5.625rem}.pi .min-h-\\[1000px\\]{min-height:1000px}.pi .min-h-\\[238px\\]{min-height:238px}.pi .min-h-\\[303px\\]{min-height:303px}.pi .min-h-\\[340px\\]{min-height:340px}.pi .min-h-dialog{min-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-full{min-height:100%}.pi .min-h-screen{min-height:100dvh}.pi .\\!w-auto{width:auto!important}.pi .w-1{width:1px}.pi .w-1\\/2{width:50%}.pi .w-1\\/3{width:33.333333%}.pi .w-10{width:10px}.pi .w-100{width:6.25rem}.pi .w-110{width:110px}.pi .w-112{width:112px}.pi .w-12{width:12px}.pi .w-128{width:128px}.pi .w-1280{width:80rem}.pi .w-14{width:14px}.pi .w-144{width:144px}.pi .w-16{width:16px}.pi .w-172{width:10.75rem}.pi .w-18{width:18px}.pi .w-192{width:192px}.pi .w-2{width:2px}.pi .w-20{width:20px}.pi .w-22{width:22px}.pi .w-224{width:224px}.pi .w-24{width:24px}.pi .w-240{width:240px}.pi .w-256{width:256px}.pi .w-26{width:26px}.pi .w-28{width:28px}.pi .w-280{width:17.5rem}.pi .w-288{width:288px}.pi .w-30{width:30px}.pi .w-32{width:32px}.pi .w-320{width:320px}.pi .w-350{width:21.875rem}.pi .w-36{width:36px}.pi .w-38{width:2.375rem}.pi .w-384{width:384px}.pi .w-40{width:40px}.pi .w-42{width:42px}.pi .w-440{width:27.5rem}.pi .w-46{width:2.875rem}.pi .w-50{width:50px}.pi .w-56{width:56px}.pi .w-60{width:60px}.pi .w-620{width:38.75rem}.pi .w-64{width:64px}.pi .w-68{width:68px}.pi .w-780{width:48.75rem}.pi .w-8{width:8px}.pi .w-80{width:80px}.pi .w-84{width:84px}.pi .w-850{width:53.125rem}.pi .w-90{width:5.625rem}.pi .w-96{width:96px}.pi .w-\\[168px\\]{width:168px}.pi .w-\\[170px\\]{width:170px}.pi .w-\\[233px\\]{width:233px}.pi .w-\\[480px\\]{width:480px}.pi .w-\\[4ch\\]{width:4ch}.pi .w-\\[69\\.5625rem\\]{width:69.5625rem}.pi .w-\\[81\\.25rem\\]{width:81.25rem}.pi .w-\\[calc\\(100\\%-40px\\)\\]{width:calc(100% - 40px)}.pi .w-auto{width:auto}.pi .w-font{width:1em}.pi .w-full{width:100%}.pi .w-max{width:-moz-max-content;width:max-content}.pi .w-min{width:-moz-min-content;width:min-content}.pi .w-px{width:1px}.pi .w-screen{width:100vw}.pi .min-w-0{min-width:0}.pi .min-w-110{min-width:110px}.pi .min-w-112{min-width:112px}.pi .min-w-128{min-width:128px}.pi .min-w-140{min-width:8.75rem}.pi .min-w-144{min-width:144px}.pi .min-w-160{min-width:160px}.pi .min-w-180{min-width:11.25rem}.pi .min-w-192{min-width:192px}.pi .min-w-200{min-width:12.5rem}.pi .min-w-24{min-width:24px}.pi .min-w-288{min-width:288px}.pi .min-w-30{min-width:30px}.pi .min-w-320{min-width:320px}.pi .min-w-4{min-width:4px}.pi .min-w-40{min-width:40px}.pi .min-w-42{min-width:42px}.pi .min-w-50{min-width:50px}.pi .min-w-500{min-width:31.25rem}.pi .min-w-80{min-width:80px}.pi .min-w-82{min-width:5.125rem}.pi .min-w-90{min-width:5.625rem}.pi .min-w-92{min-width:92px}.pi .min-w-96{min-width:96px}.pi .min-w-\\[210px\\]{min-width:210px}.pi .min-w-\\[300px\\]{min-width:300px}.pi .min-w-min{min-width:-moz-min-content;min-width:min-content}.pi .max-w-100{max-width:6.25rem}.pi .max-w-110{max-width:110px}.pi .max-w-112{max-width:112px}.pi .max-w-124{max-width:7.75rem}.pi .max-w-180{max-width:11.25rem}.pi .max-w-184{max-width:11.5rem}.pi .max-w-224{max-width:224px}.pi .max-w-240{max-width:240px}.pi .max-w-280{max-width:17.5rem}.pi .max-w-288{max-width:288px}.pi .max-w-320{max-width:320px}.pi .max-w-375{max-width:375px}.pi .max-w-4\\/5{max-width:80%}.pi .max-w-40{max-width:40px}.pi .max-w-400{max-width:25rem}.pi .max-w-440{max-width:27.5rem}.pi .max-w-450{max-width:28.125rem}.pi .max-w-500{max-width:31.25rem}.pi .max-w-580{max-width:36.25rem}.pi .max-w-60{max-width:60px}.pi .max-w-620{max-width:38.75rem}.pi .max-w-672{max-width:42rem}.pi .max-w-680{max-width:42.5rem}.pi .max-w-70{max-width:70px}.pi .max-w-84{max-width:84px}.pi .max-w-850{max-width:53.125rem}.pi .max-w-\\[210px\\]{max-width:210px}.pi .max-w-\\[30\\%\\]{max-width:30%}.pi .max-w-\\[464px\\]{max-width:464px}.pi .max-w-\\[70\\%\\]{max-width:70%}.pi .max-w-\\[80\\%\\]{max-width:80%}.pi .max-w-\\[90\\%\\]{max-width:90%}.pi .max-w-\\[95\\%\\]{max-width:95%}.pi .max-w-\\[calc\\(100\\%-40px\\)\\]{max-width:calc(100% - 40px)}.pi .max-w-\\[calc\\(100\\%-48px\\)\\]{max-width:calc(100% - 48px)}.pi .max-w-\\[calc\\(100vw-90px\\)\\]{max-width:calc(100vw - 90px)}.pi .max-w-dialog{max-width:calc(var(--be-viewport-width, 100vw)*.9)}.pi .max-w-full{max-width:100%}.pi .max-w-max{max-width:-moz-max-content;max-width:max-content}.pi .max-w-none{max-width:none}.pi .flex-1{flex:1 1 0%}.pi .flex-2{flex:2 1 0%}.pi .flex-3{flex:3 1 0%}.pi .flex-\\[1_1_60px\\]{flex:1 1 60px}.pi .flex-auto{flex:1 1 auto}.pi .flex-initial{flex:0 1 auto}.pi .flex-shrink-0,.pi .shrink-0{flex-shrink:0}.pi .flex-grow{flex-grow:1}.pi .origin-\\[0_55\\%\\]{transform-origin:0 55%}.pi .origin-\\[100\\%\\]{transform-origin:100%}.pi .-translate-x-1\\/2{--tw-translate-x:-50%}.pi .-translate-x-1\\/2,.pi .-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .-translate-y-1\\/2{--tw-translate-y:-50%}.pi .-rotate-45{--tw-rotate:-45deg}.pi .-rotate-45,.pi .rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-0{--tw-rotate:0deg}.pi .rotate-180{--tw-rotate:180deg}.pi .rotate-180,.pi .rotate-45{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-45{--tw-rotate:45deg}.pi .rotate-90{--tw-rotate:90deg}.pi .rotate-90,.pi .skew-y-\\[-18deg\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .skew-y-\\[-18deg\\]{--tw-skew-y:-18deg}.pi .scale-y-\\[0\\.6\\]{--tw-scale-y:.6}.pi .scale-y-\\[0\\.6\\],.pi .transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .cursor-default{cursor:default}.pi .cursor-move{cursor:move}.pi .cursor-nesw-resize{cursor:nesw-resize}.pi .cursor-none{cursor:none}.pi .cursor-not-allowed{cursor:not-allowed}.pi .cursor-nwse-resize{cursor:nwse-resize}.pi .cursor-pointer{cursor:pointer}.pi .cursor-se-resize{cursor:se-resize}.pi .cursor-sw-resize{cursor:sw-resize}.pi .cursor-zoom-in{cursor:zoom-in}.pi .touch-none{touch-action:none}.pi .select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .resize-none{resize:none}.pi .resize{resize:both}.pi .appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.pi .break-inside-avoid{-moz-column-break-inside:avoid;break-inside:avoid}.pi .grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.pi .grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.pi .grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.pi .grid-cols-5-min-content{grid-template-columns:repeat(5,min-content)}.pi .grid-cols-\\[repeat\\(auto-fill\\,minmax\\(90px\\,1fr\\)\\)\\]{grid-template-columns:repeat(auto-fill,minmax(90px,1fr))}.pi .flex-row{flex-direction:row}.pi .flex-col{flex-direction:column}.pi .flex-col-reverse{flex-direction:column-reverse}.pi .flex-wrap{flex-wrap:wrap}.pi .flex-nowrap{flex-wrap:nowrap}.pi .items-start{align-items:flex-start}.pi .items-end{align-items:flex-end}.pi .items-center{align-items:center}.pi .items-baseline{align-items:baseline}.pi .items-stretch{align-items:stretch}.pi .justify-start{justify-content:flex-start}.pi .justify-end{justify-content:flex-end}.pi .justify-center{justify-content:center}.pi .justify-between{justify-content:space-between}.pi .gap-10{gap:10px}.pi .gap-12{gap:12px}.pi .gap-14{gap:14px}.pi .gap-16{gap:16px}.pi .gap-18{gap:18px}.pi .gap-2{gap:2px}.pi .gap-20{gap:20px}.pi .gap-24{gap:24px}.pi .gap-30{gap:30px}.pi .gap-32{gap:32px}.pi .gap-36{gap:36px}.pi .gap-4{gap:4px}.pi .gap-40{gap:40px}.pi .gap-6{gap:6px}.pi .gap-60{gap:60px}.pi .gap-64{gap:64px}.pi .gap-8{gap:8px}.pi .gap-x-10{-moz-column-gap:10px;column-gap:10px}.pi .gap-x-16{-moz-column-gap:16px;column-gap:16px}.pi .space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(10px*var(--tw-space-y-reverse));margin-top:calc(10px*(1 - var(--tw-space-y-reverse)))}.pi .space-y-12>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(12px*var(--tw-space-y-reverse));margin-top:calc(12px*(1 - var(--tw-space-y-reverse)))}.pi .space-y-24>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(24px*var(--tw-space-y-reverse));margin-top:calc(24px*(1 - var(--tw-space-y-reverse)))}.pi .space-y-36>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(36px*var(--tw-space-y-reverse));margin-top:calc(36px*(1 - var(--tw-space-y-reverse)))}.pi .space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8px*var(--tw-space-y-reverse));margin-top:calc(8px*(1 - var(--tw-space-y-reverse)))}.pi .self-stretch{align-self:stretch}.pi .overflow-auto{overflow:auto}.pi .overflow-hidden{overflow:hidden}.pi .overflow-visible{overflow:visible}.pi .overflow-x-auto{overflow-x:auto}.pi .overflow-y-auto{overflow-y:auto}.pi .overflow-x-hidden{overflow-x:hidden}.pi .overflow-y-hidden{overflow-y:hidden}.pi .overflow-y-visible{overflow-y:visible}.pi .overscroll-contain{overscroll-behavior:contain}.pi .truncate{overflow:hidden;white-space:nowrap}.pi .overflow-ellipsis,.pi .text-ellipsis,.pi .truncate{text-overflow:ellipsis}.pi .whitespace-normal{white-space:normal}.pi .whitespace-nowrap{white-space:nowrap}.pi .whitespace-pre-line{white-space:pre-line}.pi .whitespace-pre-wrap{white-space:pre-wrap}.pi .break-words{overflow-wrap:break-word}.pi .rounded{border-radius:4px}.pi .rounded-2xl{border-radius:16px}.pi .rounded-3xl{border-radius:24px}.pi .rounded-button{border-radius:var(--be-button-radius,.25rem)}.pi .rounded-full{border-radius:9999px}.pi .rounded-input{border-radius:var(--be-input-radius,.25rem)}.pi .rounded-lg{border-radius:8px}.pi .rounded-md{border-radius:6px}.pi .rounded-none{border-radius:0}.pi .rounded-panel{border-radius:var(--be-panel-radius,.25rem)}.pi .rounded-xl{border-radius:12px}.pi .rounded-l{border-bottom-left-radius:4px;border-top-left-radius:4px}.pi .rounded-l-full{border-bottom-left-radius:9999px;border-top-left-radius:9999px}.pi .rounded-l-input{border-bottom-left-radius:var(--be-input-radius,.25rem);border-top-left-radius:var(--be-input-radius,.25rem)}.pi .rounded-l-md{border-bottom-left-radius:6px;border-top-left-radius:6px}.pi .rounded-l-none{border-bottom-left-radius:0;border-top-left-radius:0}.pi .rounded-r-full{border-bottom-right-radius:9999px;border-top-right-radius:9999px}.pi .rounded-r-input{border-bottom-right-radius:var(--be-input-radius,.25rem);border-top-right-radius:var(--be-input-radius,.25rem)}.pi .rounded-r-md{border-bottom-right-radius:6px;border-top-right-radius:6px}.pi .rounded-r-none{border-bottom-right-radius:0;border-top-right-radius:0}.pi .rounded-t{border-top-left-radius:4px;border-top-right-radius:4px}.pi .rounded-bl-none{border-bottom-left-radius:0}.pi .rounded-br-none{border-bottom-right-radius:0}.pi .rounded-tl-none{border-top-left-radius:0}.pi .rounded-tr-none{border-top-right-radius:0}.pi .border{border-width:1px}.pi .border-2{border-width:2px}.pi .border-4{border-width:4px}.pi .border-\\[3px\\]{border-width:3px}.pi .border-x{border-left-width:1px;border-right-width:1px}.pi .border-y{border-top-width:1px}.pi .border-b,.pi .border-y{border-bottom-width:1px}.pi .border-b-4{border-bottom-width:4px}.pi .border-l{border-left-width:1px}.pi .border-l-4{border-left-width:4px}.pi .border-r{border-right-width:1px}.pi .border-r-4{border-right-width:4px}.pi .border-t{border-top-width:1px}.pi .border-t-4{border-top-width:4px}.pi .border-dashed{border-style:dashed}.pi .border-dotted{border-style:dotted}.pi .border-none{border-style:none}.pi .border-\\[\\#c3cbdc\\]{--tw-border-opacity:1;border-color:rgb(195 203 220/var(--tw-border-opacity))}.pi .border-background{--tw-border-opacity:1;border-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-bg-alt{--tw-border-opacity:1;border-color:rgb(var(--be-background-alt)/var(--tw-border-opacity))}.pi .border-chip{--tw-border-opacity:1;border-color:rgb(var(--be-background-chip)/var(--tw-border-opacity))}.pi .border-current{border-color:currentColor}.pi .border-danger{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-danger\\/50{border-color:#ef444480}.pi .border-divider{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-envato{--tw-border-opacity:1;border-color:rgb(108 161 43/var(--tw-border-opacity))}.pi .border-paper{--tw-border-opacity:1;border-color:rgb(var(--be-paper)/var(--tw-border-opacity))}.pi .border-positive\\/50{border-color:#22c55e80}.pi .border-primary{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-primary\\/50{border-color:rgb(var(--be-primary)/.5)}.pi .border-text-muted{border-color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .border-transparent{border-color:transparent}.pi .border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .border-white\\/30{border-color:#ffffff4d}.pi .border-white\\/50{border-color:#ffffff80}.pi .border-b-bg{--tw-border-opacity:1;border-bottom-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-b-divider{border-bottom-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-b-primary{--tw-border-opacity:1;border-bottom-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-b-transparent{border-bottom-color:transparent}.pi .border-r-primary-light{--tw-border-opacity:1;border-right-color:rgb(var(--be-primary-light)/var(--tw-border-opacity))}.pi .border-r-transparent{border-right-color:transparent}.pi .border-t-divider{border-top-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-alt{--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi .bg-background{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-background\\/30{background-color:rgb(var(--be-background)/.3)}.pi .bg-background\\/50{background-color:rgb(var(--be-background)/.5)}.pi .bg-background\\/70{background-color:rgb(var(--be-background)/.7)}.pi .bg-background\\/80{background-color:rgb(var(--be-background)/.8)}.pi .bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.pi .bg-black\\/20{background-color:#0003}.pi .bg-black\\/50{background-color:#00000080}.pi .bg-black\\/80{background-color:#000c}.pi .bg-chip{--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi .bg-controls{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-danger{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .bg-danger-lighter{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.pi .bg-danger\\/20{background-color:#ef444433}.pi .bg-danger\\/30{background-color:#ef44444d}.pi .bg-danger\\/6{background-color:#ef44440f}.pi .bg-danger\\/focus{background-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .bg-divider{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg-envato{--tw-bg-opacity:1;background-color:rgb(108 161 43/var(--tw-bg-opacity))}.pi .bg-fg-base\\/4{background-color:rgb(var(--be-foreground-base)/4%)}.pi .bg-fg-base\\/8{background-color:rgb(var(--be-foreground-base)/8%)}.pi .bg-focus{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .bg-inherit{background-color:inherit}.pi .bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}.pi .bg-positive{--tw-bg-opacity:1;background-color:rgb(34 197 94/var(--tw-bg-opacity))}.pi .bg-positive-lighter{--tw-bg-opacity:1;background-color:rgb(187 247 208/var(--tw-bg-opacity))}.pi .bg-positive\\/focus{background-color:rgb(34 197 94/var(--be-focus-opacity))}.pi .bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .bg-primary-dark{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .bg-primary-light{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-light)/var(--tw-bg-opacity))}.pi .bg-primary-light\\/20{background-color:rgb(var(--be-primary-light)/.2)}.pi .bg-primary-light\\/40{background-color:rgb(var(--be-primary-light)/.4)}.pi .bg-primary\\/10{background-color:rgb(var(--be-primary)/.1)}.pi .bg-primary\\/5{background-color:rgb(var(--be-primary)/.05)}.pi .bg-primary\\/6{background-color:rgb(var(--be-primary)/6%)}.pi .bg-primary\\/focus{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .bg-primary\\/selected{background-color:rgb(var(--be-primary)/var(--be-selected-opacity))}.pi .bg-selected{background-color:rgb(var(--be-foreground-base)/var(--be-selected-opacity))}.pi .bg-slider-disabled{--tw-bg-opacity:1;background-color:rgb(189 189 189/var(--tw-bg-opacity))}.pi .bg-slider-disabled\\/60{background-color:#bdbdbd99}.pi .bg-toast{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-transparent{background-color:transparent}.pi .bg-warning{--tw-bg-opacity:1;background-color:rgb(243 164 50/var(--tw-bg-opacity))}.pi .bg-warning\\/15{background-color:#f3a43226}.pi .bg-warning\\/focus{background-color:rgb(243 164 50/var(--be-focus-opacity))}.pi .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .bg-white\\/20{background-color:#fff3}.pi .bg-white\\/40{background-color:#fff6}.pi .bg-white\\/50{background-color:#ffffff80}.pi .bg-opacity-95{--tw-bg-opacity:.95}.pi .bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.pi .from-primary{--tw-gradient-from:rgb(var(--be-primary)/1) var(--tw-gradient-from-position);--tw-gradient-to:rgb(var(--be-primary)/0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.pi .to-primary-light{--tw-gradient-to:rgb(var(--be-primary-light)/1) var(--tw-gradient-to-position)}.pi .bg-contain{background-size:contain}.pi .bg-cover{background-size:cover}.pi .bg-center{background-position:50%}.pi .bg-no-repeat{background-repeat:no-repeat}.pi .fill-black\\/40{fill:#0006}.pi .fill-current{fill:currentColor}.pi .fill-transparent{fill:transparent}.pi .fill-white{fill:#fff}.pi .stroke-black\\/50{stroke:#00000080}.pi .stroke-current{stroke:currentColor}.pi .object-contain{-o-object-fit:contain;object-fit:contain}.pi .object-cover{-o-object-fit:cover;object-fit:cover}.pi .p-0{padding:0}.pi .p-10{padding:10px}.pi .p-12{padding:12px}.pi .p-14{padding:14px}.pi .p-16{padding:16px}.pi .p-18{padding:18px}.pi .p-2{padding:2px}.pi .p-20{padding:20px}.pi .p-24{padding:24px}.pi .p-4{padding:4px}.pi .p-40{padding:40px}.pi .p-6{padding:6px}.pi .p-8{padding:8px}.pi .px-10{padding-left:10px;padding-right:10px}.pi .px-12{padding-left:12px;padding-right:12px}.pi .px-14{padding-left:14px;padding-right:14px}.pi .px-16{padding-left:16px;padding-right:16px}.pi .px-18{padding-left:18px;padding-right:18px}.pi .px-20{padding-left:20px;padding-right:20px}.pi .px-22{padding-left:22px;padding-right:22px}.pi .px-24{padding-left:24px;padding-right:24px}.pi .px-26{padding-left:26px;padding-right:26px}.pi .px-28{padding-left:28px;padding-right:28px}.pi .px-30{padding-left:30px;padding-right:30px}.pi .px-32{padding-left:32px;padding-right:32px}.pi .px-4{padding-left:4px;padding-right:4px}.pi .px-40{padding-left:40px;padding-right:40px}.pi .px-5vw{padding-left:5vw;padding-right:5vw}.pi .px-6{padding-left:6px;padding-right:6px}.pi .px-8{padding-left:8px;padding-right:8px}.pi .py-10{padding-bottom:10px;padding-top:10px}.pi .py-12{padding-bottom:12px;padding-top:12px}.pi .py-14{padding-bottom:14px;padding-top:14px}.pi .py-16{padding-bottom:16px;padding-top:16px}.pi .py-18{padding-bottom:18px;padding-top:18px}.pi .py-2{padding-bottom:2px;padding-top:2px}.pi .py-20{padding-bottom:20px;padding-top:20px}.pi .py-24{padding-bottom:24px;padding-top:24px}.pi .py-28{padding-bottom:28px;padding-top:28px}.pi .py-3{padding-bottom:3px;padding-top:3px}.pi .py-30{padding-bottom:30px;padding-top:30px}.pi .py-32{padding-bottom:32px;padding-top:32px}.pi .py-4{padding-bottom:4px;padding-top:4px}.pi .py-40{padding-bottom:40px;padding-top:40px}.pi .py-5{padding-bottom:5px;padding-top:5px}.pi .py-50{padding-bottom:50px;padding-top:50px}.pi .py-6{padding-bottom:6px;padding-top:6px}.pi .py-64{padding-bottom:64px;padding-top:64px}.pi .py-8{padding-bottom:8px;padding-top:8px}.pi .py-90{padding-bottom:5.625rem;padding-top:5.625rem}.pi .py-96{padding-bottom:96px;padding-top:96px}.pi .py-\\[9px\\]{padding-bottom:9px;padding-top:9px}.pi .pb-10{padding-bottom:10px}.pi .pb-12{padding-bottom:12px}.pi .pb-14{padding-bottom:14px}.pi .pb-16{padding-bottom:16px}.pi .pb-18{padding-bottom:18px}.pi .pb-20{padding-bottom:20px}.pi .pb-24{padding-bottom:24px}.pi .pb-28{padding-bottom:28px}.pi .pb-30{padding-bottom:30px}.pi .pb-32{padding-bottom:32px}.pi .pb-34{padding-bottom:2.125rem}.pi .pb-4{padding-bottom:4px}.pi .pb-48{padding-bottom:48px}.pi .pb-6{padding-bottom:6px}.pi .pb-8{padding-bottom:8px}.pi .pb-safe-area{padding-bottom:env(safe-area-inset-bottom)}.pi .pl-10{padding-left:10px}.pi .pl-12{padding-left:12px}.pi .pl-14{padding-left:14px}.pi .pl-16{padding-left:16px}.pi .pl-18{padding-left:18px}.pi .pl-20{padding-left:20px}.pi .pl-24{padding-left:24px}.pi .pl-28{padding-left:28px}.pi .pl-4{padding-left:4px}.pi .pl-46{padding-left:2.875rem}.pi .pl-54{padding-left:3.375rem}.pi .pl-8{padding-left:8px}.pi .pr-0{padding-right:0}.pi .pr-10{padding-right:10px}.pi .pr-12{padding-right:12px}.pi .pr-18{padding-right:18px}.pi .pr-24{padding-right:24px}.pi .pr-28{padding-right:28px}.pi .pr-30{padding-right:30px}.pi .pr-32{padding-right:32px}.pi .pr-46{padding-right:2.875rem}.pi .pr-54{padding-right:3.375rem}.pi .pr-6{padding-right:6px}.pi .pr-8{padding-right:8px}.pi .pt-10{padding-top:10px}.pi .pt-12{padding-top:12px}.pi .pt-14{padding-top:14px}.pi .pt-16{padding-top:16px}.pi .pt-20{padding-top:20px}.pi .pt-24{padding-top:24px}.pi .pt-26{padding-top:26px}.pi .pt-30{padding-top:30px}.pi .pt-4{padding-top:4px}.pi .pt-40{padding-top:40px}.pi .pt-42{padding-top:42px}.pi .pt-50{padding-top:50px}.pi .pt-54{padding-top:3.375rem}.pi .pt-6{padding-top:6px}.pi .pt-70{padding-top:70px}.pi .text-left{text-align:left}.pi .text-center{text-align:center}.pi .text-right{text-align:right}.pi .text-start{text-align:start}.pi .align-top{vertical-align:top}.pi .align-middle{vertical-align:middle}.pi .font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.pi .font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.pi .text-2xl{font-size:24px;line-height:32px}.pi .text-3xl{font-size:30px;line-height:36px}.pi .text-4xl{font-size:36px;line-height:40px}.pi .text-6xl{font-size:60px;line-height:1}.pi .text-\\[21px\\]{font-size:21px}.pi .text-base{font-size:16px;line-height:24px}.pi .text-lg{font-size:18px;line-height:28px}.pi .text-sm{font-size:14px;line-height:20px}.pi .text-xl{font-size:20px;line-height:28px}.pi .text-xs{font-size:12px;line-height:16px}.pi .font-bold{font-weight:700}.pi .font-light{font-weight:300}.pi .font-medium{font-weight:500}.pi .font-normal{font-weight:400}.pi .font-semibold{font-weight:600}.pi .uppercase{text-transform:uppercase}.pi .lowercase{text-transform:lowercase}.pi .capitalize{text-transform:capitalize}.pi .italic{font-style:italic}.pi .tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.pi .leading-3{line-height:.75rem}.pi .leading-4{line-height:1rem}.pi .leading-5{line-height:1.25rem}.pi .leading-loose{line-height:2}.pi .leading-none{line-height:1}.pi .leading-snug{line-height:1.375}.pi .leading-tight{line-height:1.25}.pi .tracking-tight{letter-spacing:-.025em}.pi .tracking-wide{letter-spacing:.025em}.pi .\\!text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))!important}.pi .text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-background{--tw-text-opacity:1;color:rgb(var(--be-background)/var(--tw-text-opacity))}.pi .text-background-alt{--tw-text-opacity:1;color:rgb(var(--be-background-alt)/var(--tw-text-opacity))}.pi .text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.pi .text-black\\/30{color:#0000004d}.pi .text-danger{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.pi .text-danger-darker{--tw-text-opacity:1;color:rgb(153 27 27/var(--tw-text-opacity))}.pi .text-disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .text-envato{--tw-text-opacity:1;color:rgb(108 161 43/var(--tw-text-opacity))}.pi .text-facebook{--tw-text-opacity:1;color:rgb(59 89 152/var(--tw-text-opacity))}.pi .text-inherit{color:inherit}.pi .text-link{--tw-text-opacity:1;color:rgb(var(--be-link-color,var(--be-primary))/var(--tw-text-opacity))}.pi .text-main{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-muted{color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .text-on-primary{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .text-positive{--tw-text-opacity:1;color:rgb(34 197 94/var(--tw-text-opacity))}.pi .text-positive-darker{--tw-text-opacity:1;color:rgb(22 101 52/var(--tw-text-opacity))}.pi .text-primary{--tw-text-opacity:1;color:rgb(var(--be-primary)/var(--tw-text-opacity))}.pi .text-primary-light{--tw-text-opacity:1;color:rgb(var(--be-primary-light)/var(--tw-text-opacity))}.pi .text-primary\\/40{color:rgb(var(--be-primary)/.4)}.pi .text-transparent{color:transparent}.pi .text-twitter{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.pi .text-warning{--tw-text-opacity:1;color:rgb(243 164 50/var(--tw-text-opacity))}.pi .text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.pi .text-white\\/87{color:#ffffffde}.pi .underline{text-decoration-line:underline}.pi .no-underline{text-decoration-line:none}.pi .caret-transparent{caret-color:transparent}.pi .opacity-0{opacity:0}.pi .opacity-100{opacity:1}.pi .opacity-30{opacity:.3}.pi .opacity-70{opacity:.7}.pi .opacity-80{opacity:.8}.pi .opacity-90{opacity:.9}.pi .mix-blend-overlay{mix-blend-mode:overlay}.pi .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .shadow,.pi .shadow-2xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\]{--tw-shadow:15px 0 30px 0 rgba(0,0,0,.18);--tw-shadow-colored:15px 0 30px 0 var(--tw-shadow-color)}.pi .shadow-\\[15px_0_30px_0_rgb\\(0_0_0_\\/_18\\%\\)\\],.pi .shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.pi .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .shadow-md,.pi .shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.pi .shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.pi .shadow-sm,.pi .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.pi .outline-none{outline:2px solid transparent;outline-offset:2px}.pi .outline{outline-color:rgb(var(--be-primary-lighter)/1);outline-style:solid;outline-width:2px}.pi .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring,.pi .ring-0{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-0{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-inset{--tw-ring-inset:inset}.pi .ring-primary{--tw-ring-opacity:1;--tw-ring-color:rgb(var(--be-primary)/var(--tw-ring-opacity))}.pi .ring-offset-2{--tw-ring-offset-width:2px}.pi .ring-offset-4{--tw-ring-offset-width:4px}.pi .blur{--tw-blur:blur(8px)}.pi .blur,.pi .blur-\\[26px\\]{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .blur-\\[26px\\]{--tw-blur:blur(26px)}.pi .grayscale{--tw-grayscale:grayscale(100%)}.pi .grayscale,.pi .invert{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .invert{--tw-invert:invert(100%)}.pi .sepia{--tw-sepia:sepia(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .\\!filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.pi .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.pi .transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-bg-color{transition-duration:.15s;transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-button{transition-duration:.15s;transition-property:background-color,box-shadow,border-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-shadow{transition-duration:.15s;transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-width{transition-duration:.15s;transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .duration-100{transition-duration:.1s}.pi .duration-200{transition-duration:.2s}.pi .duration-300{transition-duration:.3s}.pi .will-change-\\[width\\]{will-change:width}.pi .will-change-transform{will-change:transform}.pi .\\@container{container-type:inline-size}.pi .icon-2xs{font-size:.75rem}.pi .icon-xs{font-size:1rem}.pi .icon-sm{font-size:1.25rem}.pi .icon-md{font-size:1.5rem}.pi .icon-lg{font-size:2.1875rem}.pi .icon-xl{font-size:2.6875rem}.pi .no-tap-highlight{-webkit-tap-highlight-color:transparent}.pi .\\[mask-image\\:radial-gradient\\(farthest-side_at_top\\,white\\,transparent\\)\\]{-webkit-mask-image:radial-gradient(farthest-side at top,#fff,transparent);mask-image:radial-gradient(farthest-side at top,#fff,transparent)}@media only screen and (min-device-width:768px){.pi .tiny-scrollbar{scrollbar-color:rgba(0,0,0,.2) transparent;scrollbar-width:thin}.pi .tiny-scrollbar::-webkit-scrollbar{background-color:transparent;height:6px;width:6px}.pi .tiny-scrollbar::-webkit-scrollbar-thumb{background-color:rgb(var(--be-foreground-base)/.2);border-radius:10px}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:start{background:transparent}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:end{background:transparent}}.pi .hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.pi .hide-scrollbar::-webkit-scrollbar{background:transparent;display:none;height:0;width:0}.pi .svg-icon{display:inline-block;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;fill:currentColor;transition-duration:.15s;transition-property:transform,fill;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .cropzone:not(.moving) .cropzone-transition{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .first-letter\\:capitalize:first-letter{text-transform:capitalize}.pi .file\\:mr-10::file-selector-button{margin-right:10px}.pi .file\\:h-24::file-selector-button{height:24px}.pi .file\\:rounded::file-selector-button{border-radius:4px}.pi .file\\:border-none::file-selector-button{border-style:none}.pi .file\\:bg-primary::file-selector-button{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .file\\:px-10::file-selector-button{padding-left:10px;padding-right:10px}.pi .file\\:text-sm::file-selector-button{font-size:14px;line-height:20px}.pi .file\\:font-semibold::file-selector-button{font-weight:600}.pi .file\\:text-on-primary::file-selector-button{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .before\\:absolute:before{content:var(--tw-content);position:absolute}.pi .before\\:left-0:before{content:var(--tw-content);left:0}.pi .before\\:top-1\\/2:before{content:var(--tw-content);top:50%}.pi .before\\:z-10:before{content:var(--tw-content);z-index:10}.pi .before\\:block:before{content:var(--tw-content);display:block}.pi .before\\:h-1:before{content:var(--tw-content);height:1px}.pi .before\\:h-12:before{content:var(--tw-content);height:12px}.pi .before\\:h-14:before{content:var(--tw-content);height:14px}.pi .before\\:h-18:before{content:var(--tw-content);height:18px}.pi .before\\:h-22:before{content:var(--tw-content);height:22px}.pi .before\\:h-28:before{content:var(--tw-content);height:28px}.pi .before\\:h-full:before{content:var(--tw-content);height:100%}.pi .before\\:w-12:before{content:var(--tw-content);width:12px}.pi .before\\:w-14:before{content:var(--tw-content);width:14px}.pi .before\\:w-18:before{content:var(--tw-content);width:18px}.pi .before\\:w-22:before{content:var(--tw-content);width:22px}.pi .before\\:w-28:before{content:var(--tw-content);width:28px}.pi .before\\:w-full:before{content:var(--tw-content);width:100%}.pi .before\\:-translate-y-1\\/2:before{--tw-translate-y:-50%}.pi .before\\:-translate-y-1\\/2:before,.pi .before\\:translate-x-2:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:translate-x-2:before{--tw-translate-x:2px}.pi .before\\:scale-10:before{content:var(--tw-content);--tw-scale-x:.1;--tw-scale-y:.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:rounded-3xl:before{border-radius:24px;content:var(--tw-content)}.pi .before\\:rounded-full:before{border-radius:9999px;content:var(--tw-content)}.pi .before\\:border:before{border-width:1px;content:var(--tw-content)}.pi .before\\:bg-divider:before{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));content:var(--tw-content)}.pi .before\\:bg-primary:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .before\\:bg-white:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .before\\:opacity-0:before{content:var(--tw-content);opacity:0}.pi .before\\:transition:before{content:var(--tw-content);transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:transition-transform:before{content:var(--tw-content);transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:duration-200:before{content:var(--tw-content);transition-duration:.2s}.pi .after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.pi .after\\:absolute:after{content:var(--tw-content);position:absolute}.pi .after\\:inset-0:after{content:var(--tw-content);top:0;right:0;bottom:0;left:0}.pi .after\\:bottom-0:after{bottom:0;content:var(--tw-content)}.pi .after\\:left-0:after{content:var(--tw-content);left:0}.pi .after\\:h-20:after{content:var(--tw-content);height:20px}.pi .after\\:w-full:after{content:var(--tw-content);width:100%}.pi .after\\:bg-gradient-to-b:after{background-image:linear-gradient(to bottom,var(--tw-gradient-stops));content:var(--tw-content)}.pi .after\\:from-transparent:after{content:var(--tw-content);--tw-gradient-from:transparent var(--tw-gradient-from-position);--tw-gradient-to:transparent var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.pi .after\\:to-background:after{content:var(--tw-content);--tw-gradient-to:rgb(var(--be-background)/1) var(--tw-gradient-to-position)}.pi .first\\:capitalize:first-child{text-transform:capitalize}.pi .checked\\:border-danger:checked{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .checked\\:border-primary:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .checked\\:bg-danger:checked{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .checked\\:bg-primary:checked{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .checked\\:before\\:translate-x-14:checked:before{--tw-translate-x:14px}.pi .checked\\:before\\:translate-x-14:checked:before,.pi .checked\\:before\\:translate-x-20:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-20:checked:before{--tw-translate-x:20px}.pi .checked\\:before\\:translate-x-24:checked:before{--tw-translate-x:24px}.pi .checked\\:before\\:translate-x-24:checked:before,.pi .checked\\:before\\:translate-x-30:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-30:checked:before{--tw-translate-x:30px}.pi .checked\\:before\\:translate-x-36:checked:before{--tw-translate-x:36px}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before,.pi .checked\\:before\\:translate-x-36:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before{--tw-scale-x:.65;--tw-scale-y:.65}.pi .checked\\:before\\:border-white:checked:before{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .checked\\:before\\:opacity-100:checked:before{content:var(--tw-content);opacity:1}.pi .focus-within\\:border-primary\\/60:focus-within{border-color:rgb(var(--be-primary)/.6)}.pi .focus-within\\:ring:focus-within{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-within\\:ring-primary\\/focus:focus-within{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05}.pi .hover\\:scale-105:hover,.pi .hover\\:scale-110:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.pi .hover\\:cursor-move:hover{cursor:move}.pi .hover\\:border-chip\\/90:hover{border-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:border-danger:hover{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .hover\\:border-danger\\/90:hover{border-color:#ef4444e6}.pi .hover\\:border-paper\\/90:hover{border-color:rgb(var(--be-paper)/.9)}.pi .hover\\:border-positive:hover{--tw-border-opacity:1;border-color:rgb(34 197 94/var(--tw-border-opacity))}.pi .hover\\:border-primary:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .hover\\:border-primary-dark:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .hover\\:bg-chip\\/90:hover{background-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:bg-danger\\/10:hover{background-color:#ef44441a}.pi .hover\\:bg-danger\\/4:hover{background-color:#ef44440a}.pi .hover\\:bg-danger\\/90:hover{background-color:#ef4444e6}.pi .hover\\:bg-fg-base\\/15:hover{background-color:rgb(var(--be-foreground-base)/15%)}.pi .hover\\:bg-focus:hover{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .hover\\:bg-hover:hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .hover\\:bg-paper\\/90:hover{background-color:rgb(var(--be-paper)/.9)}.pi .hover\\:bg-positive\\/4:hover{background-color:#22c55e0a}.pi .hover\\:bg-primary-dark:hover{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:bg-primary\\/10:hover{background-color:rgb(var(--be-primary)/.1)}.pi .hover\\:bg-primary\\/4:hover{background-color:rgb(var(--be-primary)/4%)}.pi .hover\\:bg-primary\\/focus:hover{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:bg-primary\\/hover:hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .hover\\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .hover\\:bg-white\\/20:hover{background-color:#fff3}.pi .hover\\:bg-white\\/hover:hover{background-color:rgb(255 255 255/var(--be-hover-opacity))}.pi .hover\\:text:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-fg-base:hover{--tw-text-opacity:1;color:rgb(var(--be-foreground-base)/var(--tw-text-opacity))}.pi .hover\\:text-main:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-primary-dark:hover{--tw-text-opacity:1;color:rgb(var(--be-primary-dark)/var(--tw-text-opacity))}.pi .hover\\:underline:hover{text-decoration-line:underline}.pi .hover\\:opacity-100:hover{opacity:1}.pi .hover\\:shadow:hover{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .hover\\:shadow-md:hover,.pi .hover\\:shadow:hover{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .before\\:hover\\:bg-primary-dark:hover:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:after\\:bg-black\\/5:hover:after{background-color:#0000000d;content:var(--tw-content)}.pi .checked\\:hover\\:border-primary-dark:hover:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .focus\\:border-danger\\/60:focus{border-color:#ef444499}.pi .focus\\:border-primary\\/60:focus{border-color:rgb(var(--be-primary)/.6)}.pi .focus\\:bg-primary:focus{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .focus\\:text-on-primary:focus{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.pi .focus\\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus\\:ring-danger\\/focus:focus{--tw-ring-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .focus\\:ring-primary\\/focus:focus{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus\\:after\\:bg-black\\/10:focus:after{background-color:#0000001a;content:var(--tw-content)}.pi .focus-visible\\:bg-focus:focus-visible{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .focus-visible\\:bg-primary\\/focus:focus-visible{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus-visible\\:underline:focus-visible{text-decoration-line:underline}.pi .focus-visible\\:outline:focus-visible{outline-style:solid;outline-width:2px}.pi .focus-visible\\:outline-offset-2:focus-visible{outline-offset:2px}.pi .focus-visible\\:outline:focus-visible{outline-color:rgb(var(--be-primary-lighter)/1)}.pi .focus-visible\\:outline-primary-light:focus-visible{outline-color:rgb(var(--be-primary-light)/1)}.pi .focus-visible\\:ring:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.pi .disabled\\:pointer-events-none:disabled{pointer-events:none}.pi .disabled\\:cursor-default:disabled{cursor:default}.pi .disabled\\:border-disabled-bg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:border-disabled-fg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:border-transparent:disabled{border-color:transparent}.pi .disabled\\:border-white\\/70:disabled{border-color:#ffffffb3}.pi .disabled\\:border-r-transparent:disabled{border-right-color:transparent}.pi .disabled\\:bg-disabled:disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:bg-transparent:disabled{background-color:transparent}.pi .disabled\\:text-disabled:disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:text-white\\/70:disabled{color:#ffffffb3}.pi .disabled\\:shadow-none:disabled{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .disabled\\:before\\:bg-disabled-fg:disabled:before{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity));content:var(--tw-content)}.pi .group:hover .group-hover\\:visible{visibility:visible}@container (min-width: 20rem){.pi .\\@xs\\:mb-0{margin-bottom:0}.pi .\\@xs\\:flex{display:flex}}.pi :is(.dark .dark\\:hidden){display:none}.pi :is(.dark .dark\\:bg-alt){--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-chip){--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:bg-transparent){background-color:transparent}.pi :is(.dark .dark\\:bg-none){background-image:none}.pi :is(.dark .dark\\:from-primary\\/30){--tw-gradient-from:rgb(var(--be-primary)/.3) var(--tw-gradient-from-position);--tw-gradient-to:rgb(var(--be-primary)/0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.pi :is(.dark .dark\\:to-primary-light\\/30){--tw-gradient-to:rgb(var(--be-primary-light)/.3) var(--tw-gradient-to-position)}.pi :is(.dark .dark\\:fill-white\\/2){fill:#ffffff05}.pi :is(.dark .dark\\:stroke-white\\/5){stroke:#ffffff0d}.pi :is(.dark .dark\\:text-white\\/50){color:#ffffff80}.pi :is(.dark .dark\\:opacity-100){opacity:1}.pi :is(.dark .dark\\:opacity-5){opacity:.05}.pi :is(.dark .dark\\:opacity-80){opacity:.8}.pi :is(.dark .dark\\:\\[mask-image\\:linear-gradient\\(white\\,transparent\\)\\]){-webkit-mask-image:linear-gradient(#fff,transparent);mask-image:linear-gradient(#fff,transparent)}.pi :is(.dark .dark\\:checked\\:border-primary-dark:checked){--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi :is(.dark .dark\\:checked\\:bg-primary-dark:checked){--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}@media not all and (min-width:768px){.pi .max-md\\:mt-12{margin-top:12px}.pi .max-md\\:hidden{display:none}.pi .max-md\\:flex-col{flex-direction:column}}@media (min-width:640px){.pi .sm\\:justify-start{justify-content:flex-start}.pi .sm\\:text-sm{font-size:14px;line-height:20px}}@media (min-width:768px){.pi .md\\:invisible{visibility:hidden}.pi .md\\:mx-40{margin-left:40px;margin-right:40px}.pi .md\\:my-24{margin-bottom:24px;margin-top:24px}.pi .md\\:my-40{margin-bottom:40px;margin-top:40px}.pi .md\\:my-64{margin-bottom:64px;margin-top:64px}.pi .md\\:my-80{margin-bottom:80px;margin-top:80px}.pi .md\\:mb-0{margin-bottom:0}.pi .md\\:mb-16{margin-bottom:16px}.pi .md\\:mb-40{margin-bottom:40px}.pi .md\\:mb-60{margin-bottom:60px}.pi .md\\:mb-70{margin-bottom:70px}.pi .md\\:mr-0{margin-right:0}.pi .md\\:mr-10{margin-right:10px}.pi .md\\:mr-24{margin-right:24px}.pi .md\\:mr-64{margin-right:64px}.pi .md\\:mr-80{margin-right:80px}.pi .md\\:mt-0{margin-top:0}.pi .md\\:mt-50{margin-top:50px}.pi .md\\:mt-60{margin-top:60px}.pi .md\\:block{display:block}.pi .md\\:flex{display:flex}.pi .md\\:hidden{display:none}.pi .md\\:h-0{height:0}.pi .md\\:h-32{height:32px}.pi .md\\:h-\\[calc\\(100dvh-64px\\)\\]{height:calc(100dvh - 64px)}.pi .md\\:max-h-36{max-height:36px}.pi .md\\:w-1\\/3{width:33.333333%}.pi .md\\:w-32{width:32px}.pi .md\\:w-320{width:320px}.pi .md\\:w-400{width:25rem}.pi .md\\:min-w-240{min-width:240px}.pi .md\\:max-w-350{max-width:21.875rem}.pi .md\\:max-w-950{max-width:59.375rem}.pi .md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.pi .md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.pi .md\\:flex-row{flex-direction:row}.pi .md\\:items-start{align-items:flex-start}.pi .md\\:items-center{align-items:center}.pi .md\\:justify-center{justify-content:center}.pi .md\\:gap-112{gap:112px}.pi .md\\:gap-12{gap:12px}.pi .md\\:gap-14{gap:14px}.pi .md\\:gap-16{gap:16px}.pi .md\\:gap-18{gap:18px}.pi .md\\:gap-30{gap:30px}.pi .md\\:gap-80{gap:80px}.pi .md\\:overflow-hidden{overflow:hidden}.pi .md\\:p-18{padding:18px}.pi .md\\:p-24{padding:24px}.pi .md\\:p-40{padding:40px}.pi .md\\:px-0{padding-left:0;padding-right:0}.pi .md\\:px-10vw{padding-left:10vw;padding-right:10vw}.pi .md\\:px-176{padding-left:176px;padding-right:176px}.pi .md\\:px-20{padding-left:20px;padding-right:20px}.pi .md\\:px-24{padding-left:24px;padding-right:24px}.pi .md\\:px-30{padding-left:30px;padding-right:30px}.pi .md\\:px-50{padding-left:50px;padding-right:50px}.pi .md\\:py-64{padding-bottom:64px;padding-top:64px}.pi .md\\:py-80{padding-bottom:80px;padding-top:80px}.pi .md\\:pb-0{padding-bottom:0}.pi .md\\:pb-30{padding-bottom:30px}.pi .md\\:pb-54{padding-bottom:3.375rem}.pi .md\\:pb-64{padding-bottom:64px}.pi .md\\:pl-20{padding-left:20px}.pi .md\\:pr-20{padding-right:20px}.pi .md\\:pt-128{padding-top:128px}.pi .md\\:pt-24{padding-top:24px}.pi .md\\:pt-70{padding-top:70px}.pi .md\\:text-left{text-align:left}.pi .md\\:text-3xl{font-size:30px;line-height:36px}.pi .md\\:text-4xl{font-size:36px;line-height:40px}.pi .md\\:text-5xl{font-size:48px;line-height:1}.pi .md\\:text-base{font-size:16px;line-height:24px}.pi .md\\:text-lg{font-size:18px;line-height:28px}.pi .md\\:text-xl{font-size:20px;line-height:28px}.pi .md\\:font-medium{font-weight:500}.pi .md\\:font-normal{font-weight:400}.pi .md\\:shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media (min-width:1024px){.pi .lg\\:top-64{top:64px}.pi .lg\\:mt-16{margin-top:16px}.pi .lg\\:block{display:block}.pi .lg\\:flex{display:flex}.pi .lg\\:hidden{display:none}.pi .lg\\:max-w-850{max-width:53.125rem}.pi .lg\\:max-w-none{max-width:none}.pi .lg\\:flex-row{flex-direction:row}.pi .lg\\:space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(16px*var(--tw-space-y-reverse));margin-top:calc(16px*(1 - var(--tw-space-y-reverse)))}.pi .lg\\:px-32{padding-left:32px;padding-right:32px}.pi .lg\\:px-96{padding-left:96px;padding-right:96px}.pi .lg\\:py-64{padding-bottom:64px;padding-top:64px}.pi .lg\\:py-96{padding-bottom:96px;padding-top:96px}.pi .lg\\:pb-0{padding-bottom:0}.pi .lg\\:pl-32{padding-left:32px}.pi .lg\\:text-sm{font-size:14px;line-height:20px}}@media (min-width:1280px){.pi .xl\\:flex{display:flex}.pi .xl\\:w-1\\/2{width:50%}.pi .xl\\:w-288{width:288px}.pi .xl\\:w-400{width:25rem}.pi .xl\\:px-48{padding-left:48px;padding-right:48px}.pi .xl\\:px-64{padding-left:64px;padding-right:64px}.pi .xl\\:py-28{padding-bottom:28px;padding-top:28px}.pi .xl\\:pl-48{padding-left:48px}.pi .xl\\:pr-64{padding-right:64px}.pi .xl\\:pt-96{padding-top:96px}}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-2:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-inset:focus-visible>.tree-label{--tw-ring-inset:inset}
`,OT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Gv=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=OT[n[e]&63];return t};class PT{constructor(t,n){this.callback=t,this.remaining=n,this.createdAt=0,this.resume()}pause(){clearTimeout(this.timerId),this.remaining-=Date.now()-this.createdAt}resume(){this.createdAt=Date.now(),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}clear(){clearTimeout(this.timerId)}}const DT=1;function AT(e){switch(e){case"danger":return 8e3;case"loading":return 0;default:return 3e3}}const Kv=Oh()(Rv((e,t)=>({toasts:[],add:(n,r)=>{const i=t().toasts.length+1-DT;i>0&&e(f=>{f.toasts.splice(0,i)});const s=(r==null?void 0:r.id)||Gv(6),d=(r==null?void 0:r.type)||"positive",a=(r==null?void 0:r.duration)??AT(d),o={timer:a>0?new PT(()=>t().remove(s),a):null,message:n,...r,id:s,type:d,position:(r==null?void 0:r.position)||"bottom-center",duration:a,disableExitAnimation:r==null?void 0:r.disableExitAnimation,disableEnterAnimation:r==null?void 0:r.disableEnterAnimation},c=t().toasts.findIndex(f=>f.id===o.id);c>-1?e(f=>{f.toasts[c]=o}):e(f=>{f.toasts.push(o)})},remove:n=>{const r=t().toasts.filter(i=>{var s;return n===i.id?((s=i.timer)==null||s.clear(),!1):!0});e(i=>{i.toasts=r})}})));function no(){return Kv.getState()}function ro(e,t){no().add(e,t)}ro.danger=(e,t)=>{no().add(e,{...t,type:"danger"})},ro.positive=(e,t)=>{no().add(e,{...t,type:"positive"})},ro.loading=(e,t)=>{no().add(e,{...t,type:"loading"})};var qv={exports:{}},Ht={},Zv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,k){var P=V.length;V.push(k);e:for(;0<P;){var A=P-1>>>1,j=V[A];if(0<i(j,k))V[A]=k,V[P]=j,P=A;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var k=V[0],P=V.pop();if(P!==k){V[0]=P;e:for(var A=0,j=V.length,H=j>>>1;A<H;){var M=2*(A+1)-1,O=V[M],R=M+1,B=V[R];if(0>i(O,P))R<j&&0>i(B,O)?(V[A]=B,V[R]=P,A=R):(V[A]=O,V[M]=P,A=M);else if(R<j&&0>i(B,P))V[A]=B,V[R]=P,A=R;else break e}}return k}function i(V,k){var P=V.sortIndex-k.sortIndex;return P!==0?P:V.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var d=Date,a=d.now();e.unstable_now=function(){return d.now()-a}}var o=[],c=[],f=1,l=null,h=3,u=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var k=n(c);k!==null;){if(k.callback===null)r(c);else if(k.startTime<=V)r(c),k.sortIndex=k.expirationTime,t(o,k);else break;k=n(c)}}function x(V){if(m=!1,b(V),!p)if(n(o)!==null)p=!0,Z(C);else{var k=n(c);k!==null&&ie(x,k.startTime-V)}}function C(V,k){p=!1,m&&(m=!1,v(T),T=-1),u=!0;var P=h;try{for(b(k),l=n(o);l!==null&&(!(l.expirationTime>k)||V&&!$());){var A=l.callback;if(typeof A=="function"){l.callback=null,h=l.priorityLevel;var j=A(l.expirationTime<=k);k=e.unstable_now(),typeof j=="function"?l.callback=j:l===n(o)&&r(o),b(k)}else r(o);l=n(o)}if(l!==null)var H=!0;else{var M=n(c);M!==null&&ie(x,M.startTime-k),H=!1}return H}finally{l=null,h=P,u=!1}}var _=!1,S=null,T=-1,I=5,F=-1;function $(){return!(e.unstable_now()-F<I)}function G(){if(S!==null){var V=e.unstable_now();F=V;var k=!0;try{k=S(!0,V)}finally{k?ne():(_=!1,S=null)}}else _=!1}var ne;if(typeof y=="function")ne=function(){y(G)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Q=Y.port2;Y.port1.onmessage=G,ne=function(){Q.postMessage(null)}}else ne=function(){g(G,0)};function Z(V){S=V,_||(_=!0,ne())}function ie(V,k){T=g(function(){V(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||u||(p=!0,Z(C))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var P=h;h=k;try{return V()}finally{h=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,k){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var P=h;h=V;try{return k()}finally{h=P}},e.unstable_scheduleCallback=function(V,k,P){var A=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?A+P:A):P=A,V){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=P+j,V={id:f++,callback:k,priorityLevel:V,startTime:P,expirationTime:j,sortIndex:-1},P>A?(V.sortIndex=P,t(c,V),n(o)===null&&V===n(c)&&(m?(v(T),T=-1):m=!0,ie(x,P-A))):(V.sortIndex=j,t(o,V),p||u||(p=!0,Z(C))),V},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(V){var k=h;return function(){var P=h;h=k;try{return V.apply(this,arguments)}finally{h=P}}}})(Qv),Zv.exports=Qv;var MT=Zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=E,Wt=MT;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ey=new Set,ys={};function si(e,t){io(e,t),io(e+"Capture",t)}function io(e,t){for(ys[e]=t,e=0;e<t.length;e++)ey.add(t[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uh=Object.prototype.hasOwnProperty,jT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ty={},ny={};function IT(e){return Uh.call(ny,e)?!0:Uh.call(ty,e)?!1:jT.test(e)?ny[e]=!0:(ty[e]=!0,!1)}function FT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RT(e,t,n,r){if(t===null||typeof t>"u"||FT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,n,r,i,s,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=d}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new kt(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new kt(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new kt(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new kt(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){lt[e]=new kt(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){lt[e]=new kt(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){lt[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Xh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yh,Xh);lt[t]=new kt(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yh,Xh);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yh,Xh);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)}),lt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gh(e,t,n,r){var i=lt.hasOwnProperty(t)?lt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RT(t,n,i,r)&&(n=null),r||i===null?IT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yn=Jv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kl=Symbol.for("react.element"),oo=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Kh=Symbol.for("react.strict_mode"),qh=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),iy=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Jh=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),oy=Symbol.for("react.offscreen"),sy=Symbol.iterator;function bs(e){return e===null||typeof e!="object"?null:(e=sy&&e[sy]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,tf;function xs(e){if(tf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tf=t&&t[1]||""}return`
`+tf+e}var nf=!1;function rf(e,t){if(!e||nf)return"";nf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),d=i.length-1,a=s.length-1;1<=d&&0<=a&&i[d]!==s[a];)a--;for(;1<=d&&0<=a;d--,a--)if(i[d]!==s[a]){if(d!==1||a!==1)do if(d--,a--,0>a||i[d]!==s[a]){var o=`
`+i[d].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=d&&0<=a);break}}}finally{nf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xs(e):""}function LT(e){switch(e.tag){case 5:return xs(e.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return e=rf(e.type,!1),e;case 11:return e=rf(e.type.render,!1),e;case 1:return e=rf(e.type,!0),e;default:return""}}function of(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case so:return"Fragment";case oo:return"Portal";case qh:return"Profiler";case Kh:return"StrictMode";case Qh:return"Suspense";case Jh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iy:return(e.displayName||"Context")+".Consumer";case ry:return(e._context.displayName||"Context")+".Provider";case Zh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ef:return t=e.displayName||null,t!==null?t:of(e.type)||"Memo";case yr:t=e._payload,e=e._init;try{return of(e(t))}catch{}}return null}function zT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return of(t);case 8:return t===Kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ay(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BT(e){var t=ay(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){r=""+d,s.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function El(e){e._valueTracker||(e._valueTracker=BT(e))}function ly(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ay(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sf(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=br(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uy(e,t){t=t.checked,t!=null&&Gh(e,"checked",t,!1)}function af(e,t){uy(e,t);var n=br(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lf(e,t.type,n):t.hasOwnProperty("defaultValue")&&lf(e,t.type,br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function lf(e,t,n){(t!=="number"||Tl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ws=Array.isArray;function ao(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+br(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(ws(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:br(n)}}function dy(e,t){var n=br(t.value),r=br(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function py(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ol,my=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ol=Ol||document.createElement("div"),Ol.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ol.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NT=["Webkit","ms","Moz","O"];Object.keys(_s).forEach(function(e){NT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_s[t]=_s[e]})});function vy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_s.hasOwnProperty(e)&&_s[e]?(""+t).trim():t+"px"}function yy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var $T=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hf(e,t){if(t){if($T[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function ff(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=null;function pf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gf=null,lo=null,co=null;function by(e){if(e=Us(e)){if(typeof gf!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Zl(t),gf(e.stateNode,e.type,t))}}function xy(e){lo?co?co.push(e):co=[e]:lo=e}function wy(){if(lo){var e=lo,t=co;if(co=lo=null,by(e),t)for(e=0;e<t.length;e++)by(t[e])}}function Cy(e,t){return e(t)}function _y(){}var mf=!1;function Sy(e,t,n){if(mf)return e(t,n);mf=!0;try{return Cy(e,t,n)}finally{mf=!1,(lo!==null||co!==null)&&(_y(),wy())}}function Ss(e,t){var n=e.stateNode;if(n===null)return null;var r=Zl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var vf=!1;if(Un)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){vf=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{vf=!1}function VT(e,t,n,r,i,s,d,a,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Es=!1,Pl=null,Dl=!1,yf=null,HT={onError:function(e){Es=!0,Pl=e}};function WT(e,t,n,r,i,s,d,a,o){Es=!1,Pl=null,VT.apply(HT,arguments)}function UT(e,t,n,r,i,s,d,a,o){if(WT.apply(this,arguments),Es){if(Es){var c=Pl;Es=!1,Pl=null}else throw Error(ae(198));Dl||(Dl=!0,yf=c)}}function ai(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ky(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ey(e){if(ai(e)!==e)throw Error(ae(188))}function YT(e){var t=e.alternate;if(!t){if(t=ai(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ey(i),e;if(s===r)return Ey(i),t;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var d=!1,a=i.child;a;){if(a===n){d=!0,n=i,r=s;break}if(a===r){d=!0,r=i,n=s;break}a=a.sibling}if(!d){for(a=s.child;a;){if(a===n){d=!0,n=s,r=i;break}if(a===r){d=!0,r=s,n=i;break}a=a.sibling}if(!d)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function Ty(e){return e=YT(e),e!==null?Oy(e):null}function Oy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Oy(e);if(t!==null)return t;e=e.sibling}return null}var Py=Wt.unstable_scheduleCallback,Dy=Wt.unstable_cancelCallback,XT=Wt.unstable_shouldYield,GT=Wt.unstable_requestPaint,Ge=Wt.unstable_now,KT=Wt.unstable_getCurrentPriorityLevel,bf=Wt.unstable_ImmediatePriority,Ay=Wt.unstable_UserBlockingPriority,Al=Wt.unstable_NormalPriority,qT=Wt.unstable_LowPriority,My=Wt.unstable_IdlePriority,Ml=null,On=null;function ZT(e){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Ml,e,void 0,(e.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:eO,QT=Math.log,JT=Math.LN2;function eO(e){return e>>>=0,e===0?32:31-(QT(e)/JT|0)|0}var jl=64,Il=4194304;function Ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,d=n&268435455;if(d!==0){var a=d&~i;a!==0?r=Ts(a):(s&=d,s!==0&&(r=Ts(s)))}else d=n&~i,d!==0?r=Ts(d):s!==0&&(r=Ts(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gn(t),i=1<<n,r|=e[n],t&=~i;return r}function tO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nO(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var d=31-gn(s),a=1<<d,o=i[d];o===-1?(!(a&n)||a&r)&&(i[d]=tO(a,t)):o<=t&&(e.expiredLanes|=a),s&=~a}}function xf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jy(){var e=jl;return jl<<=1,!(jl&4194240)&&(jl=64),e}function wf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gn(t),e[t]=n}function rO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Cf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var De=0;function Iy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fy,_f,Ry,Ly,zy,Sf=!1,Rl=[],xr=null,wr=null,Cr=null,Ps=new Map,Ds=new Map,_r=[],iO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function By(e,t){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(t.pointerId)}}function As(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Us(t),t!==null&&_f(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function oO(e,t,n,r,i){switch(t){case"focusin":return xr=As(xr,e,t,n,r,i),!0;case"dragenter":return wr=As(wr,e,t,n,r,i),!0;case"mouseover":return Cr=As(Cr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ps.set(s,As(Ps.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ds.set(s,As(Ds.get(s)||null,e,t,n,r,i)),!0}return!1}function Ny(e){var t=li(e.target);if(t!==null){var n=ai(t);if(n!==null){if(t=n.tag,t===13){if(t=ky(n),t!==null){e.blockedOn=t,zy(e.priority,function(){Ry(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ll(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ef(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);df=r,n.target.dispatchEvent(r),df=null}else return t=Us(n),t!==null&&_f(t),e.blockedOn=n,!1;t.shift()}return!0}function $y(e,t,n){Ll(e)&&n.delete(t)}function sO(){Sf=!1,xr!==null&&Ll(xr)&&(xr=null),wr!==null&&Ll(wr)&&(wr=null),Cr!==null&&Ll(Cr)&&(Cr=null),Ps.forEach($y),Ds.forEach($y)}function Ms(e,t){e.blockedOn===t&&(e.blockedOn=null,Sf||(Sf=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,sO)))}function js(e){function t(i){return Ms(i,e)}if(0<Rl.length){Ms(Rl[0],e);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xr!==null&&Ms(xr,e),wr!==null&&Ms(wr,e),Cr!==null&&Ms(Cr,e),Ps.forEach(t),Ds.forEach(t),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)Ny(n),n.blockedOn===null&&_r.shift()}var uo=Yn.ReactCurrentBatchConfig,zl=!0;function aO(e,t,n,r){var i=De,s=uo.transition;uo.transition=null;try{De=1,kf(e,t,n,r)}finally{De=i,uo.transition=s}}function lO(e,t,n,r){var i=De,s=uo.transition;uo.transition=null;try{De=4,kf(e,t,n,r)}finally{De=i,uo.transition=s}}function kf(e,t,n,r){if(zl){var i=Ef(e,t,n,r);if(i===null)Hf(e,t,r,Bl,n),By(e,r);else if(oO(i,e,t,n,r))r.stopPropagation();else if(By(e,r),t&4&&-1<iO.indexOf(e)){for(;i!==null;){var s=Us(i);if(s!==null&&Fy(s),s=Ef(e,t,n,r),s===null&&Hf(e,t,r,Bl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hf(e,t,r,null,n)}}var Bl=null;function Ef(e,t,n,r){if(Bl=null,e=pf(r),e=li(e),e!==null)if(t=ai(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ky(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bl=e,null}function Vy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KT()){case bf:return 1;case Ay:return 4;case Al:case qT:return 16;case My:return 536870912;default:return 16}default:return 16}}var Sr=null,Tf=null,Nl=null;function Hy(){if(Nl)return Nl;var e,t=Tf,n=t.length,r,i="value"in Sr?Sr.value:Sr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===i[s-r];r++);return Nl=i.slice(e,1<r?1-r:void 0)}function $l(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function Wy(){return!1}function Ut(e){function t(n,r,i,s,d){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=d,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vl:Wy,this.isPropagationStopped=Wy,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Of=Ut(ho),Is=Ve({},ho,{view:0,detail:0}),cO=Ut(Is),Pf,Df,Fs,Hl=Ve({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?(Pf=e.screenX-Fs.screenX,Df=e.screenY-Fs.screenY):Df=Pf=0,Fs=e),Pf)},movementY:function(e){return"movementY"in e?e.movementY:Df}}),Uy=Ut(Hl),uO=Ve({},Hl,{dataTransfer:0}),hO=Ut(uO),fO=Ve({},Is,{relatedTarget:0}),Af=Ut(fO),dO=Ve({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),pO=Ut(dO),gO=Ve({},ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mO=Ut(gO),vO=Ve({},ho,{data:0}),Yy=Ut(vO),yO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xO[e])?!!t[e]:!1}function Mf(){return wO}var CO=Ve({},Is,{key:function(e){if(e.key){var t=yO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(e){return e.type==="keypress"?$l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_O=Ut(CO),SO=Ve({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xy=Ut(SO),kO=Ve({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),EO=Ut(kO),TO=Ve({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),OO=Ut(TO),PO=Ve({},Hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),DO=Ut(PO),AO=[9,13,27,32],jf=Un&&"CompositionEvent"in window,Rs=null;Un&&"documentMode"in document&&(Rs=document.documentMode);var MO=Un&&"TextEvent"in window&&!Rs,Gy=Un&&(!jf||Rs&&8<Rs&&11>=Rs),Ky=String.fromCharCode(32),qy=!1;function Zy(e,t){switch(e){case"keyup":return AO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fo=!1;function jO(e,t){switch(e){case"compositionend":return Qy(t);case"keypress":return t.which!==32?null:(qy=!0,Ky);case"textInput":return e=t.data,e===Ky&&qy?null:e;default:return null}}function IO(e,t){if(fo)return e==="compositionend"||!jf&&Zy(e,t)?(e=Hy(),Nl=Tf=Sr=null,fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gy&&t.locale!=="ko"?null:t.data;default:return null}}var FO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FO[e.type]:t==="textarea"}function e1(e,t,n,r){xy(r),t=Gl(t,"onChange"),0<t.length&&(n=new Of("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ls=null,zs=null;function RO(e){y1(e,0)}function Wl(e){var t=yo(e);if(ly(t))return e}function LO(e,t){if(e==="change")return t}var t1=!1;if(Un){var If;if(Un){var Ff="oninput"in document;if(!Ff){var n1=document.createElement("div");n1.setAttribute("oninput","return;"),Ff=typeof n1.oninput=="function"}If=Ff}else If=!1;t1=If&&(!document.documentMode||9<document.documentMode)}function r1(){Ls&&(Ls.detachEvent("onpropertychange",i1),zs=Ls=null)}function i1(e){if(e.propertyName==="value"&&Wl(zs)){var t=[];e1(t,zs,e,pf(e)),Sy(RO,t)}}function zO(e,t,n){e==="focusin"?(r1(),Ls=t,zs=n,Ls.attachEvent("onpropertychange",i1)):e==="focusout"&&r1()}function BO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wl(zs)}function NO(e,t){if(e==="click")return Wl(t)}function $O(e,t){if(e==="input"||e==="change")return Wl(t)}function VO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:VO;function Bs(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Uh.call(t,i)||!mn(e[i],t[i]))return!1}return!0}function o1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s1(e,t){var n=o1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o1(n)}}function a1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?a1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function l1(){for(var e=window,t=Tl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Tl(e.document)}return t}function Rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HO(e){var t=l1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&a1(n.ownerDocument.documentElement,n)){if(r!==null&&Rf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=s1(n,s);var d=s1(n,r);i&&d&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var WO=Un&&"documentMode"in document&&11>=document.documentMode,po=null,Lf=null,Ns=null,zf=!1;function c1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zf||po==null||po!==Tl(r)||(r=po,"selectionStart"in r&&Rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ns&&Bs(Ns,r)||(Ns=r,r=Gl(Lf,"onSelect"),0<r.length&&(t=new Of("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=po)))}function Ul(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var go={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Bf={},u1={};Un&&(u1=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Yl(e){if(Bf[e])return Bf[e];if(!go[e])return e;var t=go[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in u1)return Bf[e]=t[n];return e}var h1=Yl("animationend"),f1=Yl("animationiteration"),d1=Yl("animationstart"),p1=Yl("transitionend"),g1=new Map,m1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){g1.set(e,t),si(t,[e])}for(var Nf=0;Nf<m1.length;Nf++){var $f=m1[Nf],UO=$f.toLowerCase(),YO=$f[0].toUpperCase()+$f.slice(1);kr(UO,"on"+YO)}kr(h1,"onAnimationEnd"),kr(f1,"onAnimationIteration"),kr(d1,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(p1,"onTransitionEnd"),io("onMouseEnter",["mouseout","mouseover"]),io("onMouseLeave",["mouseout","mouseover"]),io("onPointerEnter",["pointerout","pointerover"]),io("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XO=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function v1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,UT(r,t,void 0,e),e.currentTarget=null}function y1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var d=r.length-1;0<=d;d--){var a=r[d],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&i.isPropagationStopped())break e;v1(i,a,c),s=o}else for(d=0;d<r.length;d++){if(a=r[d],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&i.isPropagationStopped())break e;v1(i,a,c),s=o}}}if(Dl)throw e=yf,Dl=!1,yf=null,e}function ze(e,t){var n=t[Kf];n===void 0&&(n=t[Kf]=new Set);var r=e+"__bubble";n.has(r)||(b1(t,e,2,!1),n.add(r))}function Vf(e,t,n){var r=0;t&&(r|=4),b1(n,e,r,t)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[Xl]){e[Xl]=!0,ey.forEach(function(n){n!=="selectionchange"&&(XO.has(n)||Vf(n,!1,e),Vf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xl]||(t[Xl]=!0,Vf("selectionchange",!1,t))}}function b1(e,t,n,r){switch(Vy(t)){case 1:var i=aO;break;case 4:i=lO;break;default:i=kf}n=i.bind(null,t,n,e),i=void 0,!vf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hf(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(d===4)for(d=r.return;d!==null;){var o=d.tag;if((o===3||o===4)&&(o=d.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;d=d.return}for(;a!==null;){if(d=li(a),d===null)return;if(o=d.tag,o===5||o===6){r=s=d;continue e}a=a.parentNode}}r=r.return}Sy(function(){var c=s,f=pf(n),l=[];e:{var h=g1.get(e);if(h!==void 0){var u=Of,p=e;switch(e){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":u=_O;break;case"focusin":p="focus",u=Af;break;case"focusout":p="blur",u=Af;break;case"beforeblur":case"afterblur":u=Af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=hO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=EO;break;case h1:case f1:case d1:u=pO;break;case p1:u=OO;break;case"scroll":u=cO;break;case"wheel":u=DO;break;case"copy":case"cut":case"paste":u=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Xy}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,b;y!==null;){b=y;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,v!==null&&(x=Ss(y,v),x!=null&&m.push(Hs(y,x,b)))),g)break;y=y.return}0<m.length&&(h=new u(h,p,null,n,f),l.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout",h&&n!==df&&(p=n.relatedTarget||n.fromElement)&&(li(p)||p[Xn]))break e;if((u||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,u?(p=n.relatedTarget||n.toElement,u=c,p=p?li(p):null,p!==null&&(g=ai(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(u=null,p=c),u!==p)){if(m=Uy,x="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=Xy,x="onPointerLeave",v="onPointerEnter",y="pointer"),g=u==null?h:yo(u),b=p==null?h:yo(p),h=new m(x,y+"leave",u,n,f),h.target=g,h.relatedTarget=b,x=null,li(f)===c&&(m=new m(v,y+"enter",p,n,f),m.target=b,m.relatedTarget=g,x=m),g=x,u&&p)t:{for(m=u,v=p,y=0,b=m;b;b=mo(b))y++;for(b=0,x=v;x;x=mo(x))b++;for(;0<y-b;)m=mo(m),y--;for(;0<b-y;)v=mo(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=mo(m),v=mo(v)}m=null}else m=null;u!==null&&x1(l,h,u,m,!1),p!==null&&g!==null&&x1(l,g,p,m,!0)}}e:{if(h=c?yo(c):window,u=h.nodeName&&h.nodeName.toLowerCase(),u==="select"||u==="input"&&h.type==="file")var C=LO;else if(Jy(h))if(t1)C=$O;else{C=BO;var _=zO}else(u=h.nodeName)&&u.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=NO);if(C&&(C=C(e,c))){e1(l,C,n,f);break e}_&&_(e,h,c),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&lf(h,"number",h.value)}switch(_=c?yo(c):window,e){case"focusin":(Jy(_)||_.contentEditable==="true")&&(po=_,Lf=c,Ns=null);break;case"focusout":Ns=Lf=po=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,c1(l,n,f);break;case"selectionchange":if(WO)break;case"keydown":case"keyup":c1(l,n,f)}var S;if(jf)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else fo?Zy(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Gy&&n.locale!=="ko"&&(fo||T!=="onCompositionStart"?T==="onCompositionEnd"&&fo&&(S=Hy()):(Sr=f,Tf="value"in Sr?Sr.value:Sr.textContent,fo=!0)),_=Gl(c,T),0<_.length&&(T=new Yy(T,e,null,n,f),l.push({event:T,listeners:_}),S?T.data=S:(S=Qy(n),S!==null&&(T.data=S)))),(S=MO?jO(e,n):IO(e,n))&&(c=Gl(c,"onBeforeInput"),0<c.length&&(f=new Yy("onBeforeInput","beforeinput",null,n,f),l.push({event:f,listeners:c}),f.data=S))}y1(l,t)})}function Hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ss(e,n),s!=null&&r.unshift(Hs(e,s,i)),s=Ss(e,t),s!=null&&r.push(Hs(e,s,i))),e=e.return}return r}function mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function x1(e,t,n,r,i){for(var s=t._reactName,d=[];n!==null&&n!==r;){var a=n,o=a.alternate,c=a.stateNode;if(o!==null&&o===r)break;a.tag===5&&c!==null&&(a=c,i?(o=Ss(n,s),o!=null&&d.unshift(Hs(n,o,a))):i||(o=Ss(n,s),o!=null&&d.push(Hs(n,o,a)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var GO=/\r\n?/g,KO=/\u0000|\uFFFD/g;function w1(e){return(typeof e=="string"?e:""+e).replace(GO,`
`).replace(KO,"")}function Kl(e,t,n){if(t=w1(t),w1(e)!==t&&n)throw Error(ae(425))}function ql(){}var Wf=null,Uf=null;function Yf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,qO=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,ZO=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(e){return C1.resolve(null).then(e).catch(QO)}:Xf;function QO(e){setTimeout(function(){throw e})}function Gf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),js(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);js(t)}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var vo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+vo,Ws="__reactProps$"+vo,Xn="__reactContainer$"+vo,Kf="__reactEvents$"+vo,JO="__reactListeners$"+vo,eP="__reactHandles$"+vo;function li(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xn]||n[Pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_1(e);e!==null;){if(n=e[Pn])return n;e=_1(e)}return t}e=n,n=e.parentNode}return null}function Us(e){return e=e[Pn]||e[Xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Zl(e){return e[Ws]||null}var qf=[],bo=-1;function Tr(e){return{current:e}}function Be(e){0>bo||(e.current=qf[bo],qf[bo]=null,bo--)}function Re(e,t){bo++,qf[bo]=e.current,e.current=t}var Or={},ft=Tr(Or),Mt=Tr(!1),ci=Or;function xo(e,t){var n=e.type.contextTypes;if(!n)return Or;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function jt(e){return e=e.childContextTypes,e!=null}function Ql(){Be(Mt),Be(ft)}function S1(e,t,n){if(ft.current!==Or)throw Error(ae(168));Re(ft,t),Re(Mt,n)}function k1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ae(108,zT(e)||"Unknown",i));return Ve({},n,r)}function Jl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,ci=ft.current,Re(ft,e),Re(Mt,Mt.current),!0}function E1(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=k1(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,Be(Mt),Be(ft),Re(ft,e)):Be(Mt),Re(Mt,n)}var Gn=null,ec=!1,Zf=!1;function T1(e){Gn===null?Gn=[e]:Gn.push(e)}function tP(e){ec=!0,T1(e)}function Pr(){if(!Zf&&Gn!==null){Zf=!0;var e=0,t=De;try{var n=Gn;for(De=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gn=null,ec=!1}catch(i){throw Gn!==null&&(Gn=Gn.slice(e+1)),Py(bf,Pr),i}finally{De=t,Zf=!1}}return null}var wo=[],Co=0,tc=null,nc=0,rn=[],on=0,ui=null,Kn=1,qn="";function hi(e,t){wo[Co++]=nc,wo[Co++]=tc,tc=e,nc=t}function O1(e,t,n){rn[on++]=Kn,rn[on++]=qn,rn[on++]=ui,ui=e;var r=Kn;e=qn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(t)+i;if(30<s){var d=i-i%5;s=(r&(1<<d)-1).toString(32),r>>=d,i-=d,Kn=1<<32-gn(t)+i|n<<i|r,qn=s+e}else Kn=1<<s|n<<i|r,qn=e}function Qf(e){e.return!==null&&(hi(e,1),O1(e,1,0))}function Jf(e){for(;e===tc;)tc=wo[--Co],wo[Co]=null,nc=wo[--Co],wo[Co]=null;for(;e===ui;)ui=rn[--on],rn[on]=null,qn=rn[--on],rn[on]=null,Kn=rn[--on],rn[on]=null}var Yt=null,Xt=null,$e=!1,vn=null;function P1(e,t){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function D1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=Er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ui!==null?{id:Kn,overflow:qn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yt=e,Xt=null,!0):!1;default:return!1}}function ed(e){return(e.mode&1)!==0&&(e.flags&128)===0}function td(e){if($e){var t=Xt;if(t){var n=t;if(!D1(e,t)){if(ed(e))throw Error(ae(418));t=Er(n.nextSibling);var r=Yt;t&&D1(e,t)?P1(r,n):(e.flags=e.flags&-4097|2,$e=!1,Yt=e)}}else{if(ed(e))throw Error(ae(418));e.flags=e.flags&-4097|2,$e=!1,Yt=e}}}function A1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function rc(e){if(e!==Yt)return!1;if(!$e)return A1(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yf(e.type,e.memoizedProps)),t&&(t=Xt)){if(ed(e))throw M1(),Error(ae(418));for(;t;)P1(e,t),t=Er(t.nextSibling)}if(A1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xt=Er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Yt?Er(e.stateNode.nextSibling):null;return!0}function M1(){for(var e=Xt;e;)e=Er(e.nextSibling)}function _o(){Xt=Yt=null,$e=!1}function nd(e){vn===null?vn=[e]:vn.push(e)}var nP=Yn.ReactCurrentBatchConfig;function yn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var ic=Tr(null),oc=null,So=null,rd=null;function id(){rd=So=oc=null}function od(e){var t=ic.current;Be(ic),e._currentValue=t}function sd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){oc=e,rd=So=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function sn(e){var t=e._currentValue;if(rd!==e)if(e={context:e,memoizedValue:t,next:null},So===null){if(oc===null)throw Error(ae(308));So=e,oc.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var fi=null;function ad(e){fi===null?fi=[e]:fi.push(e)}function j1(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ad(t)):(n.next=i.next,i.next=n),t.interleaved=n,Zn(e,r)}function Zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dr=!1;function ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ar(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Zn(e,n)}return i=r.interleaved,i===null?(t.next=t,ad(r)):(t.next=i.next,i.next=t),r.interleaved=t,Zn(e,n)}function sc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cf(e,n)}}function F1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=d:s=s.next=d,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ac(e,t,n,r){var i=e.updateQueue;Dr=!1;var s=i.firstBaseUpdate,d=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var o=a,c=o.next;o.next=null,d===null?s=c:d.next=c,d=o;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==d&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=o))}if(s!==null){var l=i.baseState;d=0,f=c=o=null,a=s;do{var h=a.lane,u=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:u,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,u=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){l=p.call(u,l,h);break e}l=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(u,l,h):p,h==null)break e;l=Ve({},l,h);break e;case 2:Dr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else u={eventTime:u,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=u,o=l):f=f.next=u,d|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(o=l),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do d|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);gi|=d,e.lanes=d,e.memoizedState=l}}function R1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var L1=new Jv.Component().refs;function cd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lc={isMounted:function(e){return(e=e._reactInternals)?ai(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Fr(e),s=Qn(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ar(e,s,i),t!==null&&(wn(t,e,i,r),sc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Fr(e),s=Qn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ar(e,s,i),t!==null&&(wn(t,e,i,r),sc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=Fr(e),i=Qn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ar(e,i,r),t!==null&&(wn(t,e,r,n),sc(t,e,r))}};function z1(e,t,n,r,i,s,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,d):t.prototype&&t.prototype.isPureReactComponent?!Bs(n,r)||!Bs(i,s):!0}function B1(e,t,n){var r=!1,i=Or,s=t.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=jt(t)?ci:ft.current,r=t.contextTypes,s=(r=r!=null)?xo(e,i):Or),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function N1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lc.enqueueReplaceState(t,t.state,null)}function ud(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=L1,ld(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=jt(t)?ci:ft.current,i.context=xo(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(cd(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&lc.enqueueReplaceState(i,i.state,null),ac(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(d){var a=i.refs;a===L1&&(a=i.refs={}),d===null?delete a[s]:a[s]=d},t._stringRef=s,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function cc(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $1(e){var t=e._init;return t(e._payload)}function V1(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Lr(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function d(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,x){return y===null||y.tag!==6?(y=Xd(b,v.mode,x),y.return=v,y):(y=i(y,b),y.return=v,y)}function o(v,y,b,x){var C=b.type;return C===so?f(v,y,b.props.children,x,b.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===yr&&$1(C)===y.type)?(x=i(y,b.props),x.ref=Ys(v,y,b),x.return=v,x):(x=Oc(b.type,b.key,b.props,null,v.mode,x),x.ref=Ys(v,y,b),x.return=v,x)}function c(v,y,b,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Gd(b,v.mode,x),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function f(v,y,b,x,C){return y===null||y.tag!==7?(y=bi(b,v.mode,x,C),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xd(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kl:return b=Oc(y.type,y.key,y.props,null,v.mode,b),b.ref=Ys(v,null,y),b.return=v,b;case oo:return y=Gd(y,v.mode,b),y.return=v,y;case yr:var x=y._init;return l(v,x(y._payload),b)}if(ws(y)||bs(y))return y=bi(y,v.mode,b,null),y.return=v,y;cc(v,y)}return null}function h(v,y,b,x){var C=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(v,y,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kl:return b.key===C?o(v,y,b,x):null;case oo:return b.key===C?c(v,y,b,x):null;case yr:return C=b._init,h(v,y,C(b._payload),x)}if(ws(b)||bs(b))return C!==null?null:f(v,y,b,x,null);cc(v,b)}return null}function u(v,y,b,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(b)||null,a(y,v,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case kl:return v=v.get(x.key===null?b:x.key)||null,o(y,v,x,C);case oo:return v=v.get(x.key===null?b:x.key)||null,c(y,v,x,C);case yr:var _=x._init;return u(v,y,b,_(x._payload),C)}if(ws(x)||bs(x))return v=v.get(b)||null,f(y,v,x,C,null);cc(y,x)}return null}function p(v,y,b,x){for(var C=null,_=null,S=y,T=y=0,I=null;S!==null&&T<b.length;T++){S.index>T?(I=S,S=null):I=S.sibling;var F=h(v,S,b[T],x);if(F===null){S===null&&(S=I);break}e&&S&&F.alternate===null&&t(v,S),y=s(F,y,T),_===null?C=F:_.sibling=F,_=F,S=I}if(T===b.length)return n(v,S),$e&&hi(v,T),C;if(S===null){for(;T<b.length;T++)S=l(v,b[T],x),S!==null&&(y=s(S,y,T),_===null?C=S:_.sibling=S,_=S);return $e&&hi(v,T),C}for(S=r(v,S);T<b.length;T++)I=u(S,v,T,b[T],x),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?T:I.key),y=s(I,y,T),_===null?C=I:_.sibling=I,_=I);return e&&S.forEach(function($){return t(v,$)}),$e&&hi(v,T),C}function m(v,y,b,x){var C=bs(b);if(typeof C!="function")throw Error(ae(150));if(b=C.call(b),b==null)throw Error(ae(151));for(var _=C=null,S=y,T=y=0,I=null,F=b.next();S!==null&&!F.done;T++,F=b.next()){S.index>T?(I=S,S=null):I=S.sibling;var $=h(v,S,F.value,x);if($===null){S===null&&(S=I);break}e&&S&&$.alternate===null&&t(v,S),y=s($,y,T),_===null?C=$:_.sibling=$,_=$,S=I}if(F.done)return n(v,S),$e&&hi(v,T),C;if(S===null){for(;!F.done;T++,F=b.next())F=l(v,F.value,x),F!==null&&(y=s(F,y,T),_===null?C=F:_.sibling=F,_=F);return $e&&hi(v,T),C}for(S=r(v,S);!F.done;T++,F=b.next())F=u(S,v,T,F.value,x),F!==null&&(e&&F.alternate!==null&&S.delete(F.key===null?T:F.key),y=s(F,y,T),_===null?C=F:_.sibling=F,_=F);return e&&S.forEach(function(G){return t(v,G)}),$e&&hi(v,T),C}function g(v,y,b,x){if(typeof b=="object"&&b!==null&&b.type===so&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case kl:e:{for(var C=b.key,_=y;_!==null;){if(_.key===C){if(C=b.type,C===so){if(_.tag===7){n(v,_.sibling),y=i(_,b.props.children),y.return=v,v=y;break e}}else if(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===yr&&$1(C)===_.type){n(v,_.sibling),y=i(_,b.props),y.ref=Ys(v,_,b),y.return=v,v=y;break e}n(v,_);break}else t(v,_);_=_.sibling}b.type===so?(y=bi(b.props.children,v.mode,x,b.key),y.return=v,v=y):(x=Oc(b.type,b.key,b.props,null,v.mode,x),x.ref=Ys(v,y,b),x.return=v,v=x)}return d(v);case oo:e:{for(_=b.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Gd(b,v.mode,x),y.return=v,v=y}return d(v);case yr:return _=b._init,g(v,y,_(b._payload),x)}if(ws(b))return p(v,y,b,x);if(bs(b))return m(v,y,b,x);cc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=Xd(b,v.mode,x),y.return=v,v=y),d(v)):n(v,y)}return g}var Eo=V1(!0),H1=V1(!1),Xs={},Dn=Tr(Xs),Gs=Tr(Xs),Ks=Tr(Xs);function di(e){if(e===Xs)throw Error(ae(174));return e}function hd(e,t){switch(Re(Ks,t),Re(Gs,e),Re(Dn,Xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uf(t,e)}Be(Dn),Re(Dn,t)}function To(){Be(Dn),Be(Gs),Be(Ks)}function W1(e){di(Ks.current);var t=di(Dn.current),n=uf(t,e.type);t!==n&&(Re(Gs,e),Re(Dn,n))}function fd(e){Gs.current===e&&(Be(Dn),Be(Gs))}var He=Tr(0);function uc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dd=[];function pd(){for(var e=0;e<dd.length;e++)dd[e]._workInProgressVersionPrimary=null;dd.length=0}var hc=Yn.ReactCurrentDispatcher,gd=Yn.ReactCurrentBatchConfig,pi=0,We=null,tt=null,ot=null,fc=!1,qs=!1,Zs=0,rP=0;function dt(){throw Error(ae(321))}function md(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mn(e[n],t[n]))return!1;return!0}function vd(e,t,n,r,i,s){if(pi=s,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hc.current=e===null||e.memoizedState===null?aP:lP,e=n(r,i),qs){s=0;do{if(qs=!1,Zs=0,25<=s)throw Error(ae(301));s+=1,ot=tt=null,t.updateQueue=null,hc.current=cP,e=n(r,i)}while(qs)}if(hc.current=gc,t=tt!==null&&tt.next!==null,pi=0,ot=tt=We=null,fc=!1,t)throw Error(ae(300));return e}function yd(){var e=Zs!==0;return Zs=0,e}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?We.memoizedState=ot=e:ot=ot.next=e,ot}function an(){if(tt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=ot===null?We.memoizedState:ot.next;if(t!==null)ot=t,tt=e;else{if(e===null)throw Error(ae(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?We.memoizedState=ot=e:ot=ot.next=e}return ot}function Qs(e,t){return typeof t=="function"?t(e):t}function bd(e){var t=an(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var d=i.next;i.next=s.next,s.next=d}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=d=null,o=null,c=s;do{var f=c.lane;if((pi&f)===f)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var l={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=l,d=r):o=o.next=l,We.lanes|=f,gi|=f}c=c.next}while(c!==null&&c!==s);o===null?d=r:o.next=a,mn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=o,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,We.lanes|=s,gi|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xd(e){var t=an(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var d=i=i.next;do s=e(s,d.action),d=d.next;while(d!==i);mn(s,t.memoizedState)||(It=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function U1(){}function Y1(e,t){var n=We,r=an(),i=t(),s=!mn(r.memoizedState,i);if(s&&(r.memoizedState=i,It=!0),r=r.queue,wd(K1.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Js(9,G1.bind(null,n,r,i,t),void 0,null),st===null)throw Error(ae(349));pi&30||X1(n,t,i)}return i}function X1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function G1(e,t,n,r){t.value=n,t.getSnapshot=r,q1(t)&&Z1(e)}function K1(e,t,n){return n(function(){q1(t)&&Z1(e)})}function q1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mn(e,n)}catch{return!0}}function Z1(e){var t=Zn(e,1);t!==null&&wn(t,e,1,-1)}function Q1(e){var t=An();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=sP.bind(null,We,e),[t.memoizedState,e]}function Js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function J1(){return an().memoizedState}function dc(e,t,n,r){var i=An();We.flags|=e,i.memoizedState=Js(1|t,n,void 0,r===void 0?null:r)}function pc(e,t,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(tt!==null){var d=tt.memoizedState;if(s=d.destroy,r!==null&&md(r,d.deps)){i.memoizedState=Js(t,n,s,r);return}}We.flags|=e,i.memoizedState=Js(1|t,n,s,r)}function eb(e,t){return dc(8390656,8,e,t)}function wd(e,t){return pc(2048,8,e,t)}function tb(e,t){return pc(4,2,e,t)}function nb(e,t){return pc(4,4,e,t)}function rb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ib(e,t,n){return n=n!=null?n.concat([e]):null,pc(4,4,rb.bind(null,t,e),n)}function Cd(){}function ob(e,t){var n=an();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&md(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sb(e,t){var n=an();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&md(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ab(e,t,n){return pi&21?(mn(n,t)||(n=jy(),We.lanes|=n,gi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function iP(e,t){var n=De;De=n!==0&&4>n?n:4,e(!0);var r=gd.transition;gd.transition={};try{e(!1),t()}finally{De=n,gd.transition=r}}function lb(){return an().memoizedState}function oP(e,t,n){var r=Fr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cb(e))ub(t,n);else if(n=j1(e,t,n,r),n!==null){var i=Tt();wn(n,e,r,i),hb(n,t,r)}}function sP(e,t,n){var r=Fr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cb(e))ub(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var d=t.lastRenderedState,a=s(d,n);if(i.hasEagerState=!0,i.eagerState=a,mn(a,d)){var o=t.interleaved;o===null?(i.next=i,ad(t)):(i.next=o.next,o.next=i),t.interleaved=i;return}}catch{}finally{}n=j1(e,t,i,r),n!==null&&(i=Tt(),wn(n,e,r,i),hb(n,t,r))}}function cb(e){var t=e.alternate;return e===We||t!==null&&t===We}function ub(e,t){qs=fc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cf(e,n)}}var gc={readContext:sn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},aP={readContext:sn,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:sn,useEffect:eb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,dc(4194308,4,rb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return dc(4194308,4,e,t)},useInsertionEffect:function(e,t){return dc(4,2,e,t)},useMemo:function(e,t){var n=An();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=An();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=oP.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:Q1,useDebugValue:Cd,useDeferredValue:function(e){return An().memoizedState=e},useTransition:function(){var e=Q1(!1),t=e[0];return e=iP.bind(null,e[1]),An().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,i=An();if($e){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),st===null)throw Error(ae(349));pi&30||X1(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,eb(K1.bind(null,r,s,e),[e]),r.flags|=2048,Js(9,G1.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=An(),t=st.identifierPrefix;if($e){var n=qn,r=Kn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lP={readContext:sn,useCallback:ob,useContext:sn,useEffect:wd,useImperativeHandle:ib,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:sb,useReducer:bd,useRef:J1,useState:function(){return bd(Qs)},useDebugValue:Cd,useDeferredValue:function(e){var t=an();return ab(t,tt.memoizedState,e)},useTransition:function(){var e=bd(Qs)[0],t=an().memoizedState;return[e,t]},useMutableSource:U1,useSyncExternalStore:Y1,useId:lb,unstable_isNewReconciler:!1},cP={readContext:sn,useCallback:ob,useContext:sn,useEffect:wd,useImperativeHandle:ib,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:sb,useReducer:xd,useRef:J1,useState:function(){return xd(Qs)},useDebugValue:Cd,useDeferredValue:function(e){var t=an();return tt===null?t.memoizedState=e:ab(t,tt.memoizedState,e)},useTransition:function(){var e=xd(Qs)[0],t=an().memoizedState;return[e,t]},useMutableSource:U1,useSyncExternalStore:Y1,useId:lb,unstable_isNewReconciler:!1};function Oo(e,t){try{var n="",r=t;do n+=LT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function _d(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uP=typeof WeakMap=="function"?WeakMap:Map;function fb(e,t,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cc||(Cc=!0,Bd=r),Sd(e,t)},n}function db(e,t,n){n=Qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Sd(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sd(e,t),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function pb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uP;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=SP.bind(null,e,t,n),t.then(e,e))}function gb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qn(-1,1),t.tag=2,Ar(n,t,1))),n.lanes|=1),e)}var hP=Yn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?H1(t,null,n,r):Eo(t,e.child,n,r)}function vb(e,t,n,r,i){n=n.render;var s=t.ref;return ko(t,i),r=vd(e,t,n,r,s,i),n=yd(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jn(e,t,i)):($e&&n&&Qf(t),t.flags|=1,Et(e,t,r,i),t.child)}function yb(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Yd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,bb(e,t,s,r,i)):(e=Oc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var d=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bs,n(d,r)&&e.ref===t.ref)return Jn(e,t,i)}return t.flags|=1,e=Lr(s,r),e.ref=t.ref,e.return=t,t.child=e}function bb(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Bs(s,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,Jn(e,t,i)}return kd(e,t,n,r,i)}function xb(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Do,Gt),Gt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Do,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(Do,Gt),Gt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Re(Do,Gt),Gt|=r;return Et(e,t,i,n),t.child}function wb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kd(e,t,n,r,i){var s=jt(n)?ci:ft.current;return s=xo(t,s),ko(t,i),n=vd(e,t,n,r,s,i),r=yd(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jn(e,t,i)):($e&&r&&Qf(t),t.flags|=1,Et(e,t,n,i),t.child)}function Cb(e,t,n,r,i){if(jt(n)){var s=!0;Jl(t)}else s=!1;if(ko(t,i),t.stateNode===null)vc(e,t),B1(t,n,r),ud(t,n,r,i),r=!0;else if(e===null){var d=t.stateNode,a=t.memoizedProps;d.props=a;var o=d.context,c=n.contextType;typeof c=="object"&&c!==null?c=sn(c):(c=jt(n)?ci:ft.current,c=xo(t,c));var f=n.getDerivedStateFromProps,l=typeof f=="function"||typeof d.getSnapshotBeforeUpdate=="function";l||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==r||o!==c)&&N1(t,d,r,c),Dr=!1;var h=t.memoizedState;d.state=h,ac(t,r,d,i),o=t.memoizedState,a!==r||h!==o||Mt.current||Dr?(typeof f=="function"&&(cd(t,n,f,r),o=t.memoizedState),(a=Dr||z1(t,n,a,r,h,o,c))?(l||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),d.props=r,d.state=o,d.context=c,r=a):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,I1(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yn(t.type,a),d.props=c,l=t.pendingProps,h=d.context,o=n.contextType,typeof o=="object"&&o!==null?o=sn(o):(o=jt(n)?ci:ft.current,o=xo(t,o));var u=n.getDerivedStateFromProps;(f=typeof u=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==l||h!==o)&&N1(t,d,r,o),Dr=!1,h=t.memoizedState,d.state=h,ac(t,r,d,i);var p=t.memoizedState;a!==l||h!==p||Mt.current||Dr?(typeof u=="function"&&(cd(t,n,u,r),p=t.memoizedState),(c=Dr||z1(t,n,c,r,h,p,o)||!1)?(f||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,p,o),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,p,o)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),d.props=r,d.state=p,d.context=o,r=c):(typeof d.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ed(e,t,n,r,s,i)}function Ed(e,t,n,r,i,s){wb(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return i&&E1(t,n,!1),Jn(e,t,s);r=t.stateNode,hP.current=t;var a=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=Eo(t,e.child,null,s),t.child=Eo(t,null,a,s)):Et(e,t,a,s),t.memoizedState=r.state,i&&E1(t,n,!0),t.child}function _b(e){var t=e.stateNode;t.pendingContext?S1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&S1(e,t.context,!1),hd(e,t.containerInfo)}function Sb(e,t,n,r,i){return _o(),nd(i),t.flags|=256,Et(e,t,n,r),t.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Od(e){return{baseLanes:e,cachePool:null,transitions:null}}function kb(e,t,n){var r=t.pendingProps,i=He.current,s=!1,d=(t.flags&128)!==0,a;if((a=d)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Re(He,i&1),e===null)return td(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=r.children,e=r.fallback,s?(r=t.mode,s=t.child,d={mode:"hidden",children:d},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=d):s=Pc(d,r,0,null),e=bi(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Od(n),t.memoizedState=Td,e):Pd(t,d));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fP(e,t,d,r,a,i,n);if(s){s=r.fallback,d=t.mode,i=e.child,a=i.sibling;var o={mode:"hidden",children:r.children};return!(d&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=Lr(i,o),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Lr(a,s):(s=bi(s,d,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,d=e.child.memoizedState,d=d===null?Od(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},s.memoizedState=d,s.childLanes=e.childLanes&~n,t.memoizedState=Td,r}return s=e.child,e=s.sibling,r=Lr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Pd(e,t){return t=Pc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mc(e,t,n,r){return r!==null&&nd(r),Eo(t,e.child,null,n),e=Pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fP(e,t,n,r,i,s,d){if(n)return t.flags&256?(t.flags&=-257,r=_d(Error(ae(422))),mc(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Pc({mode:"visible",children:r.children},i,0,null),s=bi(s,i,d,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Eo(t,e.child,null,d),t.child.memoizedState=Od(d),t.memoizedState=Td,s);if(!(t.mode&1))return mc(e,t,d,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=_d(s,r,void 0),mc(e,t,d,r)}if(a=(d&e.childLanes)!==0,It||a){if(r=st,r!==null){switch(d&-d){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|d)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(e,i),wn(r,e,i,-1))}return Ud(),r=_d(Error(ae(421))),mc(e,t,d,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=kP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Xt=Er(i.nextSibling),Yt=t,$e=!0,vn=null,e!==null&&(rn[on++]=Kn,rn[on++]=qn,rn[on++]=ui,Kn=e.id,qn=e.overflow,ui=t),t=Pd(t,r.children),t.flags|=4096,t)}function Eb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sd(e.return,t,n)}function Dd(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Tb(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Et(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eb(e,n,t);else if(e.tag===19)Eb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(He,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&uc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Dd(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&uc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Dd(t,!0,n,null,s);break;case"together":Dd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dP(e,t,n){switch(t.tag){case 3:_b(t),_o();break;case 5:W1(t);break;case 1:jt(t.type)&&Jl(t);break;case 4:hd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Re(ic,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?kb(e,t,n):(Re(He,He.current&1),e=Jn(e,t,n),e!==null?e.sibling:null);Re(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Tb(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,xb(e,t,n)}return Jn(e,t,n)}var Ob,Ad,Pb,Db;Ob=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ad=function(){},Pb=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,di(Dn.current);var s=null;switch(n){case"input":i=sf(e,i),r=sf(e,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=cf(e,i),r=cf(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ql)}hf(n,r);var d;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(d in a)a.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ys.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var o=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(d in a)!a.hasOwnProperty(d)||o&&o.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in o)o.hasOwnProperty(d)&&a[d]!==o[d]&&(n||(n={}),n[d]=o[d])}else n||(s||(s=[]),s.push(c,n)),n=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ys.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&ze("scroll",e),s||a===o||(s=[])):(s=s||[]).push(c,o))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Db=function(e,t,n,r){n!==r&&(t.flags|=4)};function ea(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pP(e,t,n){var r=t.pendingProps;switch(Jf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return jt(t.type)&&Ql(),pt(t),null;case 3:return r=t.stateNode,To(),Be(Mt),Be(ft),pd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vn!==null&&(Vd(vn),vn=null))),Ad(e,t),pt(t),null;case 5:fd(t);var i=di(Ks.current);if(n=t.type,e!==null&&t.stateNode!=null)Pb(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ae(166));return pt(t),null}if(e=di(Dn.current),rc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Pn]=t,r[Ws]=s,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<$s.length;i++)ze($s[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":cy(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":fy(r,s),ze("invalid",r)}hf(n,s),i=null;for(var d in s)if(s.hasOwnProperty(d)){var a=s[d];d==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Kl(r.textContent,a,e),i=["children",""+a]):ys.hasOwnProperty(d)&&a!=null&&d==="onScroll"&&ze("scroll",r)}switch(n){case"input":El(r),hy(r,s,!0);break;case"textarea":El(r),py(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ql)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[Pn]=t,e[Ws]=r,Ob(e,t,!1,!1),t.stateNode=e;e:{switch(d=ff(n,r),n){case"dialog":ze("cancel",e),ze("close",e),i=r;break;case"iframe":case"object":case"embed":ze("load",e),i=r;break;case"video":case"audio":for(i=0;i<$s.length;i++)ze($s[i],e);i=r;break;case"source":ze("error",e),i=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),i=r;break;case"details":ze("toggle",e),i=r;break;case"input":cy(e,r),i=sf(e,r),ze("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),ze("invalid",e);break;case"textarea":fy(e,r),i=cf(e,r),ze("invalid",e);break;default:i=r}hf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?yy(e,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&my(e,o)):s==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&Cs(e,o):typeof o=="number"&&Cs(e,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ys.hasOwnProperty(s)?o!=null&&s==="onScroll"&&ze("scroll",e):o!=null&&Gh(e,s,o,d))}switch(n){case"input":El(e),hy(e,r,!1);break;case"textarea":El(e),py(e);break;case"option":r.value!=null&&e.setAttribute("value",""+br(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ao(e,!!r.multiple,s,!1):r.defaultValue!=null&&ao(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)Db(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ae(166));if(n=di(Ks.current),di(Dn.current),rc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pn]=t,(s=r.nodeValue!==n)&&(e=Yt,e!==null))switch(e.tag){case 3:Kl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kl(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=t,t.stateNode=r}return pt(t),null;case 13:if(Be(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Xt!==null&&t.mode&1&&!(t.flags&128))M1(),_o(),t.flags|=98560,s=!1;else if(s=rc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ae(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Pn]=t}else _o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),s=!1}else vn!==null&&(Vd(vn),vn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?nt===0&&(nt=3):Ud())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return To(),Ad(e,t),e===null&&Vs(t.stateNode.containerInfo),pt(t),null;case 10:return od(t.type._context),pt(t),null;case 17:return jt(t.type)&&Ql(),pt(t),null;case 19:if(Be(He),s=t.memoizedState,s===null)return pt(t),null;if(r=(t.flags&128)!==0,d=s.rendering,d===null)if(r)ea(s,!1);else{if(nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=uc(e),d!==null){for(t.flags|=128,ea(s,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,d=s.alternate,d===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,e=d.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(He,He.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ge()>Ao&&(t.flags|=128,r=!0,ea(s,!1),t.lanes=4194304)}else{if(!r)if(e=uc(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!$e)return pt(t),null}else 2*Ge()-s.renderingStartTime>Ao&&n!==1073741824&&(t.flags|=128,r=!0,ea(s,!1),t.lanes=4194304);s.isBackwards?(d.sibling=t.child,t.child=d):(n=s.last,n!==null?n.sibling=d:t.child=d,s.last=d)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ge(),t.sibling=null,n=He.current,Re(He,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return Wd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gt&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function gP(e,t){switch(Jf(t),t.tag){case 1:return jt(t.type)&&Ql(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),Be(Mt),Be(ft),pd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fd(t),null;case 13:if(Be(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));_o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(He),null;case 4:return To(),null;case 10:return od(t.type._context),null;case 22:case 23:return Wd(),null;case 24:return null;default:return null}}var yc=!1,gt=!1,mP=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Po(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(e,t,r)}else n.current=null}function Md(e,t,n){try{n()}catch(r){Xe(e,t,r)}}var Ab=!1;function vP(e,t){if(Wf=zl,e=l1(),Rf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var d=0,a=-1,o=-1,c=0,f=0,l=e,h=null;t:for(;;){for(var u;l!==n||i!==0&&l.nodeType!==3||(a=d+i),l!==s||r!==0&&l.nodeType!==3||(o=d+r),l.nodeType===3&&(d+=l.nodeValue.length),(u=l.firstChild)!==null;)h=l,l=u;for(;;){if(l===e)break t;if(h===n&&++c===i&&(a=d),h===s&&++f===r&&(o=d),(u=l.nextSibling)!==null)break;l=h,h=l.parentNode}l=u}n=a===-1||o===-1?null:{start:a,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uf={focusedElem:e,selectionRange:n},zl=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:yn(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(x){Xe(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return p=Ab,Ab=!1,p}function ta(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Md(t,n,s)}i=i.next}while(i!==r)}}function bc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mb(e){var t=e.alternate;t!==null&&(e.alternate=null,Mb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pn],delete t[Ws],delete t[Kf],delete t[JO],delete t[eP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jb(e){return e.tag===5||e.tag===3||e.tag===4}function Ib(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Id(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ql));else if(r!==4&&(e=e.child,e!==null))for(Id(e,t,n),e=e.sibling;e!==null;)Id(e,t,n),e=e.sibling}function Fd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fd(e,t,n),e=e.sibling;e!==null;)Fd(e,t,n),e=e.sibling}var ct=null,bn=!1;function Mr(e,t,n){for(n=n.child;n!==null;)Fb(e,t,n),n=n.sibling}function Fb(e,t,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Ml,n)}catch{}switch(n.tag){case 5:gt||Po(n,t);case 6:var r=ct,i=bn;ct=null,Mr(e,t,n),ct=r,bn=i,ct!==null&&(bn?(e=ct,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(bn?(e=ct,n=n.stateNode,e.nodeType===8?Gf(e.parentNode,n):e.nodeType===1&&Gf(e,n),js(e)):Gf(ct,n.stateNode));break;case 4:r=ct,i=bn,ct=n.stateNode.containerInfo,bn=!0,Mr(e,t,n),ct=r,bn=i;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,d=s.destroy;s=s.tag,d!==void 0&&(s&2||s&4)&&Md(n,t,d),i=i.next}while(i!==r)}Mr(e,t,n);break;case 1:if(!gt&&(Po(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,t,a)}Mr(e,t,n);break;case 21:Mr(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Mr(e,t,n),gt=r):Mr(e,t,n);break;default:Mr(e,t,n)}}function Rb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mP),t.forEach(function(r){var i=EP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,d=t,a=d;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,bn=!1;break e;case 3:ct=a.stateNode.containerInfo,bn=!0;break e;case 4:ct=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(ct===null)throw Error(ae(160));Fb(s,d,i),ct=null,bn=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(c){Xe(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lb(t,e),t=t.sibling}function Lb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(t,e),Mn(e),r&4){try{ta(3,e,e.return),bc(3,e)}catch(m){Xe(e,e.return,m)}try{ta(5,e,e.return)}catch(m){Xe(e,e.return,m)}}break;case 1:xn(t,e),Mn(e),r&512&&n!==null&&Po(n,n.return);break;case 5:if(xn(t,e),Mn(e),r&512&&n!==null&&Po(n,n.return),e.flags&32){var i=e.stateNode;try{Cs(i,"")}catch(m){Xe(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,d=n!==null?n.memoizedProps:s,a=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&uy(i,s),ff(a,d);var c=ff(a,s);for(d=0;d<o.length;d+=2){var f=o[d],l=o[d+1];f==="style"?yy(i,l):f==="dangerouslySetInnerHTML"?my(i,l):f==="children"?Cs(i,l):Gh(i,f,l,c)}switch(a){case"input":af(i,s);break;case"textarea":dy(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var u=s.value;u!=null?ao(i,!!s.multiple,u,!1):h!==!!s.multiple&&(s.defaultValue!=null?ao(i,!!s.multiple,s.defaultValue,!0):ao(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ws]=s}catch(m){Xe(e,e.return,m)}}break;case 6:if(xn(t,e),Mn(e),r&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Xe(e,e.return,m)}}break;case 3:if(xn(t,e),Mn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(m){Xe(e,e.return,m)}break;case 4:xn(t,e),Mn(e);break;case 13:xn(t,e),Mn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zd=Ge())),r&4&&Rb(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(c=gt)||f,xn(t,e),gt=c):xn(t,e),Mn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(pe=e,f=e.child;f!==null;){for(l=pe=f;pe!==null;){switch(h=pe,u=h.child,h.tag){case 0:case 11:case 14:case 15:ta(4,h,h.return);break;case 1:Po(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Xe(r,n,m)}}break;case 5:Po(h,h.return);break;case 22:if(h.memoizedState!==null){Nb(l);continue}}u!==null?(u.return=h,pe=u):Nb(l)}f=f.sibling}e:for(f=null,l=e;;){if(l.tag===5){if(f===null){f=l;try{i=l.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=l.stateNode,o=l.memoizedProps.style,d=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=vy("display",d))}catch(m){Xe(e,e.return,m)}}}else if(l.tag===6){if(f===null)try{l.stateNode.nodeValue=c?"":l.memoizedProps}catch(m){Xe(e,e.return,m)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===e)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===e)break e;for(;l.sibling===null;){if(l.return===null||l.return===e)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:xn(t,e),Mn(e),r&4&&Rb(e);break;case 21:break;default:xn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jb(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cs(i,""),r.flags&=-33);var s=Ib(e);Fd(e,s,i);break;case 3:case 4:var d=r.stateNode.containerInfo,a=Ib(e);Id(e,a,d);break;default:throw Error(ae(161))}}catch(o){Xe(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yP(e,t,n){pe=e,zb(e)}function zb(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,s=i.child;if(i.tag===22&&r){var d=i.memoizedState!==null||yc;if(!d){var a=i.alternate,o=a!==null&&a.memoizedState!==null||gt;a=yc;var c=gt;if(yc=d,(gt=o)&&!c)for(pe=i;pe!==null;)d=pe,o=d.child,d.tag===22&&d.memoizedState!==null?$b(i):o!==null?(o.return=d,pe=o):$b(i);for(;s!==null;)pe=s,zb(s),s=s.sibling;pe=i,yc=a,gt=c}Bb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,pe=s):Bb(e)}}function Bb(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||bc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&R1(t,s,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}R1(t,d,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var l=f.dehydrated;l!==null&&js(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}gt||t.flags&512&&jd(t)}catch(h){Xe(t,t.return,h)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Nb(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function $b(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bc(4,t)}catch(o){Xe(t,n,o)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(o){Xe(t,i,o)}}var s=t.return;try{jd(t)}catch(o){Xe(t,s,o)}break;case 5:var d=t.return;try{jd(t)}catch(o){Xe(t,d,o)}}}catch(o){Xe(t,t.return,o)}if(t===e){pe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,pe=a;break}pe=t.return}}var bP=Math.ceil,xc=Yn.ReactCurrentDispatcher,Rd=Yn.ReactCurrentOwner,ln=Yn.ReactCurrentBatchConfig,Ee=0,st=null,qe=null,ut=0,Gt=0,Do=Tr(0),nt=0,na=null,gi=0,wc=0,Ld=0,ra=null,Ft=null,zd=0,Ao=1/0,er=null,Cc=!1,Bd=null,jr=null,_c=!1,Ir=null,Sc=0,ia=0,Nd=null,kc=-1,Ec=0;function Tt(){return Ee&6?Ge():kc!==-1?kc:kc=Ge()}function Fr(e){return e.mode&1?Ee&2&&ut!==0?ut&-ut:nP.transition!==null?(Ec===0&&(Ec=jy()),Ec):(e=De,e!==0||(e=window.event,e=e===void 0?16:Vy(e.type)),e):1}function wn(e,t,n,r){if(50<ia)throw ia=0,Nd=null,Error(ae(185));Os(e,n,r),(!(Ee&2)||e!==st)&&(e===st&&(!(Ee&2)&&(wc|=n),nt===4&&Rr(e,ut)),Rt(e,r),n===1&&Ee===0&&!(t.mode&1)&&(Ao=Ge()+500,ec&&Pr()))}function Rt(e,t){var n=e.callbackNode;nO(e,t);var r=Fl(e,e===st?ut:0);if(r===0)n!==null&&Dy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Dy(n),t===1)e.tag===0?tP(Hb.bind(null,e)):T1(Hb.bind(null,e)),ZO(function(){!(Ee&6)&&Pr()}),n=null;else{switch(Iy(r)){case 1:n=bf;break;case 4:n=Ay;break;case 16:n=Al;break;case 536870912:n=My;break;default:n=Al}n=Zb(n,Vb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Vb(e,t){if(kc=-1,Ec=0,Ee&6)throw Error(ae(327));var n=e.callbackNode;if(Mo()&&e.callbackNode!==n)return null;var r=Fl(e,e===st?ut:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Tc(e,r);else{t=r;var i=Ee;Ee|=2;var s=Ub();(st!==e||ut!==t)&&(er=null,Ao=Ge()+500,vi(e,t));do try{CP();break}catch(a){Wb(e,a)}while(1);id(),xc.current=s,Ee=i,qe!==null?t=0:(st=null,ut=0,t=nt)}if(t!==0){if(t===2&&(i=xf(e),i!==0&&(r=i,t=$d(e,i))),t===1)throw n=na,vi(e,0),Rr(e,r),Rt(e,Ge()),n;if(t===6)Rr(e,r);else{if(i=e.current.alternate,!(r&30)&&!xP(i)&&(t=Tc(e,r),t===2&&(s=xf(e),s!==0&&(r=s,t=$d(e,s))),t===1))throw n=na,vi(e,0),Rr(e,r),Rt(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:yi(e,Ft,er);break;case 3:if(Rr(e,r),(r&130023424)===r&&(t=zd+500-Ge(),10<t)){if(Fl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xf(yi.bind(null,e,Ft,er),t);break}yi(e,Ft,er);break;case 4:if(Rr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var d=31-gn(r);s=1<<d,d=t[d],d>i&&(i=d),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bP(r/1960))-r,10<r){e.timeoutHandle=Xf(yi.bind(null,e,Ft,er),r);break}yi(e,Ft,er);break;case 5:yi(e,Ft,er);break;default:throw Error(ae(329))}}}return Rt(e,Ge()),e.callbackNode===n?Vb.bind(null,e):null}function $d(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(vi(e,t).flags|=256),e=Tc(e,t),e!==2&&(t=Ft,Ft=n,t!==null&&Vd(t)),e}function Vd(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function xP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rr(e,t){for(t&=~Ld,t&=~wc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gn(t),r=1<<n;e[n]=-1,t&=~r}}function Hb(e){if(Ee&6)throw Error(ae(327));Mo();var t=Fl(e,0);if(!(t&1))return Rt(e,Ge()),null;var n=Tc(e,t);if(e.tag!==0&&n===2){var r=xf(e);r!==0&&(t=r,n=$d(e,r))}if(n===1)throw n=na,vi(e,0),Rr(e,t),Rt(e,Ge()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yi(e,Ft,er),Rt(e,Ge()),null}function Hd(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Ao=Ge()+500,ec&&Pr())}}function mi(e){Ir!==null&&Ir.tag===0&&!(Ee&6)&&Mo();var t=Ee;Ee|=1;var n=ln.transition,r=De;try{if(ln.transition=null,De=1,e)return e()}finally{De=r,ln.transition=n,Ee=t,!(Ee&6)&&Pr()}}function Wd(){Gt=Do.current,Be(Do)}function vi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qO(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Jf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ql();break;case 3:To(),Be(Mt),Be(ft),pd();break;case 5:fd(r);break;case 4:To();break;case 13:Be(He);break;case 19:Be(He);break;case 10:od(r.type._context);break;case 22:case 23:Wd()}n=n.return}if(st=e,qe=e=Lr(e.current,null),ut=Gt=t,nt=0,na=null,Ld=wc=gi=0,Ft=ra=null,fi!==null){for(t=0;t<fi.length;t++)if(n=fi[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var d=s.next;s.next=i,r.next=d}n.pending=r}fi=null}return e}function Wb(e,t){do{var n=qe;try{if(id(),hc.current=gc,fc){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fc=!1}if(pi=0,ot=tt=We=null,qs=!1,Zs=0,Rd.current=null,n===null||n.return===null){nt=1,na=t,qe=null;break}e:{var s=e,d=n.return,a=n,o=t;if(t=ut,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,f=a,l=f.tag;if(!(f.mode&1)&&(l===0||l===11||l===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var u=gb(d);if(u!==null){u.flags&=-257,mb(u,d,a,s,t),u.mode&1&&pb(s,c,t),t=u,o=c;var p=t.updateQueue;if(p===null){var m=new Set;m.add(o),t.updateQueue=m}else p.add(o);break e}else{if(!(t&1)){pb(s,c,t),Ud();break e}o=Error(ae(426))}}else if($e&&a.mode&1){var g=gb(d);if(g!==null){!(g.flags&65536)&&(g.flags|=256),mb(g,d,a,s,t),nd(Oo(o,a));break e}}s=o=Oo(o,a),nt!==4&&(nt=2),ra===null?ra=[s]:ra.push(s),s=d;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=fb(s,o,t);F1(s,v);break e;case 1:a=o;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jr===null||!jr.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=db(s,a,t);F1(s,x);break e}}s=s.return}while(s!==null)}Xb(n)}catch(C){t=C,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(1)}function Ub(){var e=xc.current;return xc.current=gc,e===null?gc:e}function Ud(){(nt===0||nt===3||nt===2)&&(nt=4),st===null||!(gi&268435455)&&!(wc&268435455)||Rr(st,ut)}function Tc(e,t){var n=Ee;Ee|=2;var r=Ub();(st!==e||ut!==t)&&(er=null,vi(e,t));do try{wP();break}catch(i){Wb(e,i)}while(1);if(id(),Ee=n,xc.current=r,qe!==null)throw Error(ae(261));return st=null,ut=0,nt}function wP(){for(;qe!==null;)Yb(qe)}function CP(){for(;qe!==null&&!XT();)Yb(qe)}function Yb(e){var t=qb(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?Xb(e):qe=t,Rd.current=null}function Xb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gP(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,qe=null;return}}else if(n=pP(n,t,Gt),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);nt===0&&(nt=5)}function yi(e,t,n){var r=De,i=ln.transition;try{ln.transition=null,De=1,_P(e,t,n,r)}finally{ln.transition=i,De=r}return null}function _P(e,t,n,r){do Mo();while(Ir!==null);if(Ee&6)throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(rO(e,s),e===st&&(qe=st=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_c||(_c=!0,Zb(Al,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ln.transition,ln.transition=null;var d=De;De=1;var a=Ee;Ee|=4,Rd.current=null,vP(e,n),Lb(n,e),HO(Uf),zl=!!Wf,Uf=Wf=null,e.current=n,yP(n),GT(),Ee=a,De=d,ln.transition=s}else e.current=n;if(_c&&(_c=!1,Ir=e,Sc=i),s=e.pendingLanes,s===0&&(jr=null),ZT(n.stateNode),Rt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cc)throw Cc=!1,e=Bd,Bd=null,e;return Sc&1&&e.tag!==0&&Mo(),s=e.pendingLanes,s&1?e===Nd?ia++:(ia=0,Nd=e):ia=0,Pr(),null}function Mo(){if(Ir!==null){var e=Iy(Sc),t=ln.transition,n=De;try{if(ln.transition=null,De=16>e?16:e,Ir===null)var r=!1;else{if(e=Ir,Ir=null,Sc=0,Ee&6)throw Error(ae(331));var i=Ee;for(Ee|=4,pe=e.current;pe!==null;){var s=pe,d=s.child;if(pe.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(pe=c;pe!==null;){var f=pe;switch(f.tag){case 0:case 11:case 15:ta(8,f,s)}var l=f.child;if(l!==null)l.return=f,pe=l;else for(;pe!==null;){f=pe;var h=f.sibling,u=f.return;if(Mb(f),f===c){pe=null;break}if(h!==null){h.return=u,pe=h;break}pe=u}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}pe=s}}if(s.subtreeFlags&2064&&d!==null)d.return=s,pe=d;else e:for(;pe!==null;){if(s=pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ta(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,pe=v;break e}pe=s.return}}var y=e.current;for(pe=y;pe!==null;){d=pe;var b=d.child;if(d.subtreeFlags&2064&&b!==null)b.return=d,pe=b;else e:for(d=y;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bc(9,a)}}catch(C){Xe(a,a.return,C)}if(a===d){pe=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,pe=x;break e}pe=a.return}}if(Ee=i,Pr(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Ml,e)}catch{}r=!0}return r}finally{De=n,ln.transition=t}}return!1}function Gb(e,t,n){t=Oo(n,t),t=fb(e,t,1),e=Ar(e,t,1),t=Tt(),e!==null&&(Os(e,1,t),Rt(e,t))}function Xe(e,t,n){if(e.tag===3)Gb(e,e,n);else for(;t!==null;){if(t.tag===3){Gb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){e=Oo(n,e),e=db(t,e,1),t=Ar(t,e,1),e=Tt(),t!==null&&(Os(t,1,e),Rt(t,e));break}}t=t.return}}function SP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(ut&n)===n&&(nt===4||nt===3&&(ut&130023424)===ut&&500>Ge()-zd?vi(e,0):Ld|=n),Rt(e,t)}function Kb(e,t){t===0&&(e.mode&1?(t=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):t=1);var n=Tt();e=Zn(e,t),e!==null&&(Os(e,t,n),Rt(e,n))}function kP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kb(e,n)}function EP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(t),Kb(e,n)}var qb;qb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,dP(e,t,n);It=!!(e.flags&131072)}else It=!1,$e&&t.flags&1048576&&O1(t,nc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;vc(e,t),e=t.pendingProps;var i=xo(t,ft.current);ko(t,n),i=vd(null,t,r,e,i,n);var s=yd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(r)?(s=!0,Jl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ld(t),i.updater=lc,t.stateNode=i,i._reactInternals=t,ud(t,r,e,n),t=Ed(null,t,r,!0,s,n)):(t.tag=0,$e&&s&&Qf(t),Et(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(vc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=OP(r),e=yn(r,e),i){case 0:t=kd(null,t,r,e,n);break e;case 1:t=Cb(null,t,r,e,n);break e;case 11:t=vb(null,t,r,e,n);break e;case 14:t=yb(null,t,r,yn(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yn(r,i),kd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yn(r,i),Cb(e,t,r,i,n);case 3:e:{if(_b(t),e===null)throw Error(ae(387));r=t.pendingProps,s=t.memoizedState,i=s.element,I1(e,t),ac(t,r,null,n);var d=t.memoizedState;if(r=d.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Oo(Error(ae(423)),t),t=Sb(e,t,r,n,i);break e}else if(r!==i){i=Oo(Error(ae(424)),t),t=Sb(e,t,r,n,i);break e}else for(Xt=Er(t.stateNode.containerInfo.firstChild),Yt=t,$e=!0,vn=null,n=H1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===i){t=Jn(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return W1(t),e===null&&td(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,d=i.children,Yf(r,i)?d=null:s!==null&&Yf(r,s)&&(t.flags|=32),wb(e,t),Et(e,t,d,n),t.child;case 6:return e===null&&td(t),null;case 13:return kb(e,t,n);case 4:return hd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Eo(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yn(r,i),vb(e,t,r,i,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,d=i.value,Re(ic,r._currentValue),r._currentValue=d,s!==null)if(mn(s.value,d)){if(s.children===i.children&&!Mt.current){t=Jn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){d=s.child;for(var o=a.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=Qn(-1,n&-n),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?o.next=o:(o.next=f.next,f.next=o),c.pending=o}}s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),sd(s.return,n,t),a.lanes|=n;break}o=o.next}}else if(s.tag===10)d=s.type===t.type?null:s.child;else if(s.tag===18){if(d=s.return,d===null)throw Error(ae(341));d.lanes|=n,a=d.alternate,a!==null&&(a.lanes|=n),sd(d,n,t),d=s.sibling}else d=s.child;if(d!==null)d.return=s;else for(d=s;d!==null;){if(d===t){d=null;break}if(s=d.sibling,s!==null){s.return=d.return,d=s;break}d=d.return}s=d}Et(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),i=sn(i),r=r(i),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,i=yn(r,t.pendingProps),i=yn(r.type,i),yb(e,t,r,i,n);case 15:return bb(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yn(r,i),vc(e,t),t.tag=1,jt(r)?(e=!0,Jl(t)):e=!1,ko(t,n),B1(t,r,i),ud(t,r,i,n),Ed(null,t,r,!0,e,n);case 19:return Tb(e,t,n);case 22:return xb(e,t,n)}throw Error(ae(156,t.tag))};function Zb(e,t){return Py(e,t)}function TP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,n,r){return new TP(e,t,n,r)}function Yd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function OP(e){if(typeof e=="function")return Yd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zh)return 11;if(e===ef)return 14}return 2}function Lr(e,t){var n=e.alternate;return n===null?(n=cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,s){var d=2;if(r=e,typeof e=="function")Yd(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case so:return bi(n.children,i,s,t);case Kh:d=8,i|=8;break;case qh:return e=cn(12,n,t,i|2),e.elementType=qh,e.lanes=s,e;case Qh:return e=cn(13,n,t,i),e.elementType=Qh,e.lanes=s,e;case Jh:return e=cn(19,n,t,i),e.elementType=Jh,e.lanes=s,e;case oy:return Pc(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ry:d=10;break e;case iy:d=9;break e;case Zh:d=11;break e;case ef:d=14;break e;case yr:d=16,r=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=cn(d,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function bi(e,t,n,r){return e=cn(7,e,r,t),e.lanes=n,e}function Pc(e,t,n,r){return e=cn(22,e,r,t),e.elementType=oy,e.lanes=n,e.stateNode={isHidden:!1},e}function Xd(e,t,n){return e=cn(6,e,null,t),e.lanes=n,e}function Gd(e,t,n){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wf(0),this.expirationTimes=wf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kd(e,t,n,r,i,s,d,a,o){return e=new PP(e,t,n,a,o),t===1?(t=1,s===!0&&(t|=8)):t=0,s=cn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ld(s),e}function DP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qb(e){if(!e)return Or;e=e._reactInternals;e:{if(ai(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(jt(n))return k1(e,n,t)}return t}function Jb(e,t,n,r,i,s,d,a,o){return e=Kd(n,r,!0,e,i,s,d,a,o),e.context=Qb(null),n=e.current,r=Tt(),i=Fr(n),s=Qn(r,i),s.callback=t??null,Ar(n,s,i),e.current.lanes=i,Os(e,i,r),Rt(e,r),e}function Dc(e,t,n,r){var i=t.current,s=Tt(),d=Fr(i);return n=Qb(n),t.context===null?t.context=n:t.pendingContext=n,t=Qn(s,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ar(i,t,d),e!==null&&(wn(e,i,d,s),sc(e,i,d)),d}function Ac(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ex(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qd(e,t){ex(e,t),(e=e.alternate)&&ex(e,t)}function AP(){return null}var tx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zd(e){this._internalRoot=e}Mc.prototype.render=Zd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));Dc(e,t,null,null)},Mc.prototype.unmount=Zd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mi(function(){Dc(null,e,null,null)}),t[Xn]=null}};function Mc(e){this._internalRoot=e}Mc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ly();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_r.length&&t!==0&&t<_r[n].priority;n++);_r.splice(n,0,e),n===0&&Ny(e)}};function Qd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nx(){}function MP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ac(d);s.call(c)}}var d=Jb(t,r,e,0,null,!1,!1,"",nx);return e._reactRootContainer=d,e[Xn]=d.current,Vs(e.nodeType===8?e.parentNode:e),mi(),d}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ac(o);a.call(c)}}var o=Kd(e,0,!1,null,null,!1,!1,"",nx);return e._reactRootContainer=o,e[Xn]=o.current,Vs(e.nodeType===8?e.parentNode:e),mi(function(){Dc(t,o,n,r)}),o}function Ic(e,t,n,r,i){var s=n._reactRootContainer;if(s){var d=s;if(typeof i=="function"){var a=i;i=function(){var o=Ac(d);a.call(o)}}Dc(t,d,e,i)}else d=MP(n,t,e,i,r);return Ac(d)}Fy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ts(t.pendingLanes);n!==0&&(Cf(t,n|1),Rt(t,Ge()),!(Ee&6)&&(Ao=Ge()+500,Pr()))}break;case 13:mi(function(){var r=Zn(e,1);if(r!==null){var i=Tt();wn(r,e,1,i)}}),qd(e,1)}},_f=function(e){if(e.tag===13){var t=Zn(e,134217728);if(t!==null){var n=Tt();wn(t,e,134217728,n)}qd(e,134217728)}},Ry=function(e){if(e.tag===13){var t=Fr(e),n=Zn(e,t);if(n!==null){var r=Tt();wn(n,e,t,r)}qd(e,t)}},Ly=function(){return De},zy=function(e,t){var n=De;try{return De=e,t()}finally{De=n}},gf=function(e,t,n){switch(t){case"input":if(af(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Zl(r);if(!i)throw Error(ae(90));ly(r),af(r,i)}}}break;case"textarea":dy(e,n);break;case"select":t=n.value,t!=null&&ao(e,!!n.multiple,t,!1)}},Cy=Hd,_y=mi;var jP={usingClientEntryPoint:!1,Events:[Us,yo,Zl,xy,wy,Hd]},oa={findFiberByHostInstance:li,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IP={bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ty(e),e===null?null:e.stateNode},findFiberByHostInstance:oa.findFiberByHostInstance||AP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Ml=Fc.inject(IP),On=Fc}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jP,Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(t))throw Error(ae(200));return DP(e,t,null,n)},Ht.createRoot=function(e,t){if(!Qd(e))throw Error(ae(299));var n=!1,r="",i=tx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Kd(e,1,!1,null,null,n,!1,r,i),e[Xn]=t.current,Vs(e.nodeType===8?e.parentNode:e),new Zd(t)},Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=Ty(t),e=e===null?null:e.stateNode,e},Ht.flushSync=function(e){return mi(e)},Ht.hydrate=function(e,t,n){if(!jc(t))throw Error(ae(200));return Ic(null,e,t,!0,n)},Ht.hydrateRoot=function(e,t,n){if(!Qd(e))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",d=tx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=Jb(t,null,e,1,n??null,i,!1,s,d),e[Xn]=t.current,Vs(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Mc(t)},Ht.render=function(e,t,n){if(!jc(t))throw Error(ae(200));return Ic(null,e,t,!1,n)},Ht.unmountComponentAtNode=function(e){if(!jc(e))throw Error(ae(40));return e._reactRootContainer?(mi(function(){Ic(null,null,e,!1,function(){e._reactRootContainer=null,e[Xn]=null})}),!0):!1},Ht.unstable_batchedUpdates=Hd,Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jc(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Ic(e,t,n,!1,r)},Ht.version="18.2.0-next-9e3b772b8-20220608";function rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rx)}catch(e){console.error(e)}}rx(),qv.exports=Ht;var jo=qv.exports,ix,ox=jo;ix=ox.createRoot,ox.hydrateRoot;const sx=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Rc=E.createContext({}),Jd=E.createContext(null),Lc=typeof document<"u",ep=Lc?E.useLayoutEffect:E.useEffect,tp=E.createContext({strict:!1}),np=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ax="data-"+np("framerAppearId");function FP(e,t,n,r){const{visualElement:i}=E.useContext(Rc),s=E.useContext(tp),d=E.useContext(Jd),a=E.useContext(sx).reducedMotion,o=E.useRef();r=r||s.renderer,!o.current&&r&&(o.current=r(e,{visualState:t,parent:i,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:a}));const c=o.current;E.useInsertionEffect(()=>{c&&c.update(n,d)});const f=E.useRef(!!(n[ax]&&!window.HandoffComplete));return ep(()=>{c&&(c.render(),f.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(c.updateFeatures(),!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),c}function lx(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function RP(e,t,n){return E.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):lx(n)&&(n.current=r))},[t])}function sa(e){return typeof e=="string"||Array.isArray(e)}function zc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const rp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ip=["initial",...rp];function Bc(e){return zc(e.animate)||ip.some(t=>sa(e[t]))}function cx(e){return!!(Bc(e)||e.variants)}function LP(e,t){if(Bc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||sa(n)?n:void 0,animate:sa(r)?r:void 0}}return e.inherit!==!1?t:{}}function zP(e){const{initial:t,animate:n}=LP(e,E.useContext(Rc));return E.useMemo(()=>({initial:t,animate:n}),[ux(t),ux(n)])}function ux(e){return Array.isArray(e)?e.join(" "):e}const hx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},aa={};for(const e in hx)aa[e]={isEnabled:t=>hx[e].some(n=>!!t[n])};function op(e){for(const t in e)aa[t]={...aa[t],...e[t]}}const fx=E.createContext({}),BP=E.createContext({}),NP=Symbol.for("motionComponentSymbol");function $P({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&op(e);function s(a,o){let c;const f={...E.useContext(sx),...a,layoutId:VP(a)},{isStatic:l}=f,h=zP(a),u=r(a,l);if(!l&&Lc){h.visualElement=FP(i,u,f,t);const p=E.useContext(BP),m=E.useContext(tp).strict;h.visualElement&&(c=h.visualElement.loadFeatures(f,m,e,p))}return E.createElement(Rc.Provider,{value:h},c&&h.visualElement?E.createElement(c,{visualElement:h.visualElement,...f}):null,n(i,a,RP(u,h.visualElement,o),u,l,h.visualElement))}const d=E.forwardRef(s);return d[NP]=i,d}function VP({layoutId:e}){const t=E.useContext(fx).id;return t&&e!==void 0?t+"-"+e:e}function HP(e){function t(r,i={}){return $P(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const WP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sp(e){return typeof e!="string"||e.includes("-")?!1:!!(WP.indexOf(e)>-1||/[A-Z]/.test(e))}const UP={},la=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xi=new Set(la);function dx(e,{layout:t,layoutId:n}){return xi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!UP[e]||e==="opacity")}const Kt=e=>!!(e&&e.getVelocity),YP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XP=la.length;function GP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let d=0;d<XP;d++){const a=la[d];if(e[a]!==void 0){const o=YP[a]||a;s+=`${o}(${e[a]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const px=e=>t=>typeof t=="string"&&t.startsWith(e),gx=px("--"),ap=px("var(--"),KP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Io=(e,t,n)=>Math.min(Math.max(n,e),t),wi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ca={...wi,transform:e=>Io(0,1,e)},Nc={...wi,default:1},ua=e=>Math.round(e*1e5)/1e5,$c=/(-)?([\d]*\.?[\d])+/g,mx=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ZP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ha(e){return typeof e=="string"}const fa=e=>({test:t=>ha(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zr=fa("deg"),Fo=fa("%"),_e=fa("px"),QP=fa("vh"),JP=fa("vw"),vx={...Fo,parse:e=>Fo.parse(e)/100,transform:e=>Fo.transform(e*100)},yx={...wi,transform:Math.round},bx={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,size:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,rotate:zr,rotateX:zr,rotateY:zr,rotateZ:zr,scale:Nc,scaleX:Nc,scaleY:Nc,scaleZ:Nc,skew:zr,skewX:zr,skewY:zr,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:ca,originX:vx,originY:vx,originZ:_e,zIndex:yx,fillOpacity:ca,strokeOpacity:ca,numOctaves:yx};function lp(e,t,n,r){const{style:i,vars:s,transform:d,transformOrigin:a}=e;let o=!1,c=!1,f=!0;for(const l in t){const h=t[l];if(gx(l)){s[l]=h;continue}const u=bx[l],p=qP(h,u);if(xi.has(l)){if(o=!0,d[l]=p,!f)continue;h!==(u.default||0)&&(f=!1)}else l.startsWith("origin")?(c=!0,a[l]=p):i[l]=p}if(t.transform||(o||r?i.transform=GP(e.transform,n,f,r):i.transform&&(i.transform="none")),c){const{originX:l="50%",originY:h="50%",originZ:u=0}=a;i.transformOrigin=`${l} ${h} ${u}`}}const cp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xx(e,t,n){for(const r in t)!Kt(t[r])&&!dx(r,n)&&(e[r]=t[r])}function eD({transformTemplate:e},t,n){return E.useMemo(()=>{const r=cp();return lp(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function tD(e,t,n){const r=e.style||{},i={};return xx(i,r,e),Object.assign(i,eD(e,t,n)),e.transformValues?e.transformValues(i):i}function nD(e,t,n){const r={},i=tD(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const rD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rD.has(e)}let wx=e=>!Vc(e);function iD(e){e&&(wx=t=>t.startsWith("on")?!Vc(t):e(t))}try{iD(require("@emotion/is-prop-valid").default)}catch{}function oD(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(wx(i)||n===!0&&Vc(i)||!t&&!Vc(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Cx(e,t,n){return typeof e=="string"?e:_e.transform(t+n*e)}function sD(e,t,n){const r=Cx(t,e.x,e.width),i=Cx(n,e.y,e.height);return`${r} ${i}`}const aD={offset:"stroke-dashoffset",array:"stroke-dasharray"},lD={offset:"strokeDashoffset",array:"strokeDasharray"};function cD(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?aD:lD;e[s.offset]=_e.transform(-r);const d=_e.transform(t),a=_e.transform(n);e[s.array]=`${d} ${a}`}function up(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:d,pathSpacing:a=1,pathOffset:o=0,...c},f,l,h){if(lp(e,c,f,h),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:u,style:p,dimensions:m}=e;u.transform&&(m&&(p.transform=u.transform),delete u.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=sD(m,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(u.x=t),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),d!==void 0&&cD(u,d,a,o,!1)}const _x=()=>({...cp(),attrs:{}}),hp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uD(e,t,n,r){const i=E.useMemo(()=>{const s=_x();return up(s,t,{enableHardwareAcceleration:!1},hp(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};xx(s,e.style,e),i.style={...s,...i.style}}return i}function hD(e=!1){return(n,r,i,{latestValues:s},d)=>{const o=(sp(n)?uD:nD)(r,s,d,n),f={...oD(r,typeof n=="string",e),...o,ref:i},{children:l}=r,h=E.useMemo(()=>Kt(l)?l.get():l,[l]);return E.createElement(n,{...f,children:h})}}function Sx(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const kx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ex(e,t,n,r){Sx(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(kx.has(i)?i:np(i),t.attrs[i])}function fp(e,t){const{style:n}=e,r={};for(const i in n)(Kt(n[i])||t.style&&Kt(t.style[i])||dx(i,e))&&(r[i]=n[i]);return r}function Tx(e,t){const n=fp(e,t);for(const r in e)if(Kt(e[r])||Kt(t[r])){const i=la.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function dp(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Ox(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const Hc=e=>Array.isArray(e),fD=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),dD=e=>Hc(e)?e[e.length-1]||0:e;function pD(e){const t=Kt(e)?e.get():e;return fD(t)?t.toValue():t}function gD({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const d={latestValues:mD(r,i,s,e),renderState:t()};return n&&(d.mount=a=>n(r,a,d)),d}const Px=e=>(t,n)=>{const r=E.useContext(Rc),i=E.useContext(Jd),s=()=>gD(e,t,r,i);return n?s():Ox(s)};function mD(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=pD(s[h]);let{initial:d,animate:a}=e;const o=Bc(e),c=cx(e);t&&c&&!o&&e.inherit!==!1&&(d===void 0&&(d=t.initial),a===void 0&&(a=t.animate));let f=n?n.initial===!1:!1;f=f||d===!1;const l=f?a:d;return l&&typeof l!="boolean"&&!zc(l)&&(Array.isArray(l)?l:[l]).forEach(u=>{const p=dp(e,u);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const y in v){let b=v[y];if(Array.isArray(b)){const x=f?b.length-1:0;b=b[x]}b!==null&&(i[y]=b)}for(const y in m)i[y]=m[y]}),i}const mt=e=>e;class Dx{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function vD(e){let t=new Dx,n=new Dx,r=0,i=!1,s=!1;const d=new WeakSet,a={schedule:(o,c=!1,f=!1)=>{const l=f&&i,h=l?t:n;return c&&d.add(o),h.add(o)&&l&&i&&(r=t.order.length),o},cancel:o=>{n.remove(o),d.delete(o)},process:o=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let c=0;c<r;c++){const f=t.order[c];f(o),d.has(f)&&(a.schedule(f),e())}i=!1,s&&(s=!1,a.process(o))}};return a}const Wc=["prepare","read","update","preRender","render","postRender"],yD=40;function bD(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Wc.reduce((l,h)=>(l[h]=vD(()=>n=!0),l),{}),d=l=>s[l].process(i),a=()=>{const l=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(l-i.timestamp,yD),1),i.timestamp=l,i.isProcessing=!0,Wc.forEach(d),i.isProcessing=!1,n&&t&&(r=!1,e(a))},o=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Wc.reduce((l,h)=>{const u=s[h];return l[h]=(p,m=!1,g=!1)=>(n||o(),u.schedule(p,m,g)),l},{}),cancel:l=>Wc.forEach(h=>s[h].cancel(l)),state:i,steps:s}}const{schedule:vt,cancel:Uc,state:pp,steps:WB}=bD(typeof requestAnimationFrame<"u"?requestAnimationFrame:mt,!0),xD={useVisualState:Px({scrapeMotionValuesFromProps:Tx,createRenderState:_x,onMount:(e,t,{renderState:n,latestValues:r})=>{vt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),vt.render(()=>{up(n,r,{enableHardwareAcceleration:!1},hp(t.tagName),e.transformTemplate),Ex(t,n)})}})},wD={useVisualState:Px({scrapeMotionValuesFromProps:fp,createRenderState:cp})};function CD(e,{forwardMotionProps:t=!1},n,r){return{...sp(e)?xD:wD,preloadedFeatures:n,useRender:hD(t),createVisualElement:r,Component:e}}function Ci(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const _D=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ax(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const SD=e=>t=>_D(t)&&e(t,Ax(t));function Yc(e,t,n,r){return Ci(e,t,SD(n),r)}const kD=(e,t)=>n=>t(e(n)),_i=(...e)=>e.reduce(kD);function Mx(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const jx=Mx("dragHorizontal"),Ix=Mx("dragVertical");function ED(e){let t=!1;if(e==="y")t=Ix();else if(e==="x")t=jx();else{const n=jx(),r=Ix();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function Fx(){const e=ED(!0);return e?(e(),!1):!0}class Ro{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Rx(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,d)=>{if(s.pointerType==="touch"||Fx())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&vt.update(()=>a[r](s,d))};return Yc(e.current,n,i,{passive:!e.getProps()[r]})}class TD extends Ro{mount(){this.unmount=_i(Rx(this.node,!0),Rx(this.node,!1))}unmount(){}}class OD extends Ro{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_i(Ci(this.node.current,"focus",()=>this.onFocus()),Ci(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Lx=(e,t)=>t?e===t?!0:Lx(e,t.parentElement):!1;function gp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ax(n))}class PD extends Ro{constructor(){super(...arguments),this.removeStartListeners=mt,this.removeEndListeners=mt,this.removeAccessibleListeners=mt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Yc(window,"pointerup",(a,o)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:l}=this.node.getProps();vt.update(()=>{!l&&!Lx(this.node.current,a.target)?f&&f(a,o):c&&c(a,o)})},{passive:!(r.onTap||r.onPointerUp)}),d=Yc(window,"pointercancel",(a,o)=>this.cancelPress(a,o),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=_i(s,d),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const d=a=>{a.key!=="Enter"||!this.checkPressEnd()||gp("up",(o,c)=>{const{onTap:f}=this.node.getProps();f&&vt.update(()=>f(o,c))})};this.removeEndListeners(),this.removeEndListeners=Ci(this.node.current,"keyup",d),gp("down",(a,o)=>{this.startPress(a,o)})},n=Ci(this.node.current,"keydown",t),r=()=>{this.isPressing&&gp("cancel",(s,d)=>this.cancelPress(s,d))},i=Ci(this.node.current,"blur",r);this.removeAccessibleListeners=_i(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&vt.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Fx()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&vt.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Yc(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Ci(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=_i(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const mp=new WeakMap,vp=new WeakMap,DD=e=>{const t=mp.get(e.target);t&&t(e)},AD=e=>{e.forEach(DD)};function MD({root:e,...t}){const n=e||document;vp.has(n)||vp.set(n,{});const r=vp.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(AD,{root:e,...t})),r[i]}function jD(e,t,n){const r=MD(t);return mp.set(e,n),r.observe(e),()=>{mp.delete(e),r.unobserve(e)}}const ID={some:0,all:1};class FD extends Ro{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,d={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ID[i]},a=o=>{const{isIntersecting:c}=o;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:l}=this.node.getProps(),h=c?f:l;h&&h(o)};return jD(this.node.current,d,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(RD(t,n))&&this.startObserver()}unmount(){}}function RD({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const LD={inView:{Feature:FD},tap:{Feature:PD},focus:{Feature:OD},hover:{Feature:TD}};function zx(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function zD(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function BD(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Xc(e,t,n){const r=e.getProps();return dp(r,t,n!==void 0?n:r.custom,zD(e),BD(e))}let ND=mt,yp=mt;const Si=e=>e*1e3,Br=e=>e/1e3,$D={current:!1},Bx=e=>Array.isArray(e)&&typeof e[0]=="number";function Nx(e){return!!(!e||typeof e=="string"&&$x[e]||Bx(e)||Array.isArray(e)&&e.every(Nx))}const da=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,$x={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:da([0,.65,.55,1]),circOut:da([.55,0,1,.45]),backIn:da([.31,.01,.66,-.59]),backOut:da([.33,1.53,.69,.99])};function Vx(e){if(e)return Bx(e)?da(e):Array.isArray(e)?e.map(Vx):$x[e]}function VD(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:d="loop",ease:a,times:o}={}){const c={[t]:n};o&&(c.offset=o);const f=Vx(a);return Array.isArray(f)&&(c.easing=f),e.animate(c,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:d==="reverse"?"alternate":"normal"})}function HD(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Hx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,WD=1e-7,UD=12;function YD(e,t,n,r,i){let s,d,a=0;do d=t+(n-t)/2,s=Hx(d,r,i)-e,s>0?n=d:t=d;while(Math.abs(s)>WD&&++a<UD);return d}function pa(e,t,n,r){if(e===t&&n===r)return mt;const i=s=>YD(s,0,1,e,n);return s=>s===0||s===1?s:Hx(i(s),t,r)}const XD=pa(.42,0,1,1),GD=pa(0,0,.58,1),Wx=pa(.42,0,.58,1),KD=e=>Array.isArray(e)&&typeof e[0]!="number",Ux=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Yx=e=>t=>1-e(1-t),bp=e=>1-Math.sin(Math.acos(e)),qD=Yx(bp),ZD=Ux(bp),Xx=pa(.33,1.53,.69,.99),xp=Yx(Xx),QD=Ux(xp),JD={linear:mt,easeIn:XD,easeInOut:Wx,easeOut:GD,circIn:bp,circInOut:ZD,circOut:qD,backIn:xp,backInOut:QD,backOut:Xx,anticipate:e=>(e*=2)<1?.5*xp(e):.5*(2-Math.pow(2,-10*(e-1)))},Gx=e=>{if(Array.isArray(e)){yp(e.length===4);const[t,n,r,i]=e;return pa(t,n,r,i)}else if(typeof e=="string")return JD[e];return e},wp=(e,t)=>n=>!!(ha(n)&&ZP.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Kx=(e,t,n)=>r=>{if(!ha(r))return r;const[i,s,d,a]=r.match($c);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(d),alpha:a!==void 0?parseFloat(a):1}},e6=e=>Io(0,255,e),Cp={...wi,transform:e=>Math.round(e6(e))},ki={test:wp("rgb","red"),parse:Kx("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Cp.transform(e)+", "+Cp.transform(t)+", "+Cp.transform(n)+", "+ua(ca.transform(r))+")"};function t6(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const _p={test:wp("#"),parse:t6,transform:ki.transform},Lo={test:wp("hsl","hue"),parse:Kx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Fo.transform(ua(t))+", "+Fo.transform(ua(n))+", "+ua(ca.transform(r))+")"},Ot={test:e=>ki.test(e)||_p.test(e)||Lo.test(e),parse:e=>ki.test(e)?ki.parse(e):Lo.test(e)?Lo.parse(e):_p.parse(e),transform:e=>ha(e)?e:e.hasOwnProperty("red")?ki.transform(e):Lo.transform(e)},Gc=(e,t,n)=>-n*e+n*t+e;function Sp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function n6({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,d=0;if(!t)i=s=d=n;else{const a=n<.5?n*(1+t):n+t-n*t,o=2*n-a;i=Sp(o,a,e+1/3),s=Sp(o,a,e),d=Sp(o,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(d*255),alpha:r}}const kp=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},r6=[_p,ki,Lo],i6=e=>r6.find(t=>t.test(e));function qx(e){const t=i6(e);let n=t.parse(e);return t===Lo&&(n=n6(n)),n}const Zx=(e,t)=>{const n=qx(e),r=qx(t),i={...n};return s=>(i.red=kp(n.red,r.red,s),i.green=kp(n.green,r.green,s),i.blue=kp(n.blue,r.blue,s),i.alpha=Gc(n.alpha,r.alpha,s),ki.transform(i))};function o6(e){var t,n;return isNaN(e)&&ha(e)&&(((t=e.match($c))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(mx))===null||n===void 0?void 0:n.length)||0)>0}const Qx={regex:KP,countKey:"Vars",token:"${v}",parse:mt},Jx={regex:mx,countKey:"Colors",token:"${c}",parse:Ot.parse},ew={regex:$c,countKey:"Numbers",token:"${n}",parse:wi.parse};function Ep(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function Kc(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ep(n,Qx),Ep(n,Jx),Ep(n,ew),n}function tw(e){return Kc(e).values}function nw(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Kc(e),s=t.length;return d=>{let a=i;for(let o=0;o<s;o++)o<r?a=a.replace(Qx.token,d[o]):o<r+n?a=a.replace(Jx.token,Ot.transform(d[o])):a=a.replace(ew.token,ua(d[o]));return a}}const s6=e=>typeof e=="number"?0:e;function a6(e){const t=tw(e);return nw(e)(t.map(s6))}const zo={test:o6,parse:tw,createTransformer:nw,getAnimatableNone:a6},rw=(e,t)=>n=>`${n>0?t:e}`;function iw(e,t){return typeof e=="number"?n=>Gc(e,t,n):Ot.test(e)?Zx(e,t):e.startsWith("var(")?rw(e,t):sw(e,t)}const ow=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,d)=>iw(s,t[d]));return s=>{for(let d=0;d<r;d++)n[d]=i[d](s);return n}},l6=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=iw(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},sw=(e,t)=>{const n=zo.createTransformer(t),r=Kc(e),i=Kc(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?_i(ow(r.values,i.values),n):rw(e,t)},aw=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},lw=(e,t)=>n=>Gc(e,t,n);function c6(e){return typeof e=="number"?lw:typeof e=="string"?Ot.test(e)?Zx:sw:Array.isArray(e)?ow:typeof e=="object"?l6:lw}function u6(e,t,n){const r=[],i=n||c6(e[0]),s=e.length-1;for(let d=0;d<s;d++){let a=i(e[d],e[d+1]);if(t){const o=Array.isArray(t)?t[d]||mt:t;a=_i(o,a)}r.push(a)}return r}function cw(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(yp(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=u6(t,r,i),a=d.length,o=c=>{let f=0;if(a>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const l=aw(e[f],e[f+1],c);return d[f](l)};return n?c=>o(Io(e[0],e[s-1],c)):o}function h6(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=aw(0,t,r);e.push(Gc(n,1,i))}}function f6(e){const t=[0];return h6(t,e.length-1),t}function d6(e,t){return e.map(n=>n*t)}function p6(e,t){return e.map(()=>t||Wx).splice(0,e.length-1)}function qc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=KD(r)?r.map(Gx):Gx(r),s={done:!1,value:t[0]},d=d6(n&&n.length===t.length?n:f6(t),e),a=cw(d,t,{ease:Array.isArray(i)?i:p6(t,i)});return{calculatedDuration:e,next:o=>(s.value=a(o),s.done=o>=e,s)}}function uw(e,t){return t?e*(1e3/t):0}const g6=5;function hw(e,t,n){const r=Math.max(t-g6,0);return uw(n-e(r),t-r)}const Tp=.001,m6=.01,fw=10,v6=.05,y6=1;function b6({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s;ND(e<=Si(fw));let d=1-t;d=Io(v6,y6,d),e=Io(m6,fw,Br(e)),d<1?(i=c=>{const f=c*d,l=f*e,h=f-n,u=Op(c,d),p=Math.exp(-l);return Tp-h/u*p},s=c=>{const l=c*d*e,h=l*n+n,u=Math.pow(d,2)*Math.pow(c,2)*e,p=Math.exp(-l),m=Op(Math.pow(c,2),d);return(-i(c)+Tp>0?-1:1)*((h-u)*p)/m}):(i=c=>{const f=Math.exp(-c*e),l=(c-n)*e+1;return-Tp+f*l},s=c=>{const f=Math.exp(-c*e),l=(n-c)*(e*e);return f*l});const a=5/e,o=w6(i,s,a);if(e=Si(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(o,2)*r;return{stiffness:c,damping:d*2*Math.sqrt(r*c),duration:e}}}const x6=12;function w6(e,t,n){let r=n;for(let i=1;i<x6;i++)r=r-e(r)/t(r);return r}function Op(e,t){return e*Math.sqrt(1-t*t)}const C6=["duration","bounce"],_6=["stiffness","damping","mass"];function dw(e,t){return t.some(n=>e[n]!==void 0)}function S6(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!dw(e,_6)&&dw(e,C6)){const n=b6(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function pw({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],d={done:!1,value:i},{stiffness:a,damping:o,mass:c,duration:f,velocity:l,isResolvedFromDuration:h}=S6({...r,velocity:-Br(r.velocity||0)}),u=l||0,p=o/(2*Math.sqrt(a*c)),m=s-i,g=Br(Math.sqrt(a/c)),v=Math.abs(m)<5;n||(n=v?.01:2),t||(t=v?.005:.5);let y;if(p<1){const b=Op(g,p);y=x=>{const C=Math.exp(-p*g*x);return s-C*((u+p*g*m)/b*Math.sin(b*x)+m*Math.cos(b*x))}}else if(p===1)y=b=>s-Math.exp(-g*b)*(m+(u+g*m)*b);else{const b=g*Math.sqrt(p*p-1);y=x=>{const C=Math.exp(-p*g*x),_=Math.min(b*x,300);return s-C*((u+p*g*m)*Math.sinh(_)+b*m*Math.cosh(_))/b}}return{calculatedDuration:h&&f||null,next:b=>{const x=y(b);if(h)d.done=b>=f;else{let C=u;b!==0&&(p<1?C=hw(y,b,x):C=0);const _=Math.abs(C)<=n,S=Math.abs(s-x)<=t;d.done=_&&S}return d.value=d.done?s:x,d}}}function gw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:d,min:a,max:o,restDelta:c=.5,restSpeed:f}){const l=e[0],h={done:!1,value:l},u=T=>a!==void 0&&T<a||o!==void 0&&T>o,p=T=>a===void 0?o:o===void 0||Math.abs(a-T)<Math.abs(o-T)?a:o;let m=n*t;const g=l+m,v=d===void 0?g:d(g);v!==g&&(m=v-l);const y=T=>-m*Math.exp(-T/r),b=T=>v+y(T),x=T=>{const I=y(T),F=b(T);h.done=Math.abs(I)<=c,h.value=h.done?v:F};let C,_;const S=T=>{u(h.value)&&(C=T,_=pw({keyframes:[h.value,p(h.value)],velocity:hw(b,T,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return S(0),{calculatedDuration:null,next:T=>{let I=!1;return!_&&C===void 0&&(I=!0,x(T),S(T)),C!==void 0&&T>C?_.next(T-C):(!I&&x(T),h)}}}const k6=e=>{const t=({timestamp:n})=>e(n);return{start:()=>vt.update(t,!0),stop:()=>Uc(t),now:()=>pp.isProcessing?pp.timestamp:performance.now()}},mw=2e4;function vw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<mw;)t+=n,r=e.next(t);return t>=mw?1/0:t}const E6={decay:gw,inertia:gw,tween:qc,keyframes:qc,spring:pw};function Zc({autoplay:e=!0,delay:t=0,driver:n=k6,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:d=0,repeatType:a="loop",onPlay:o,onStop:c,onComplete:f,onUpdate:l,...h}){let u=1,p=!1,m,g;const v=()=>{g=new Promise(A=>{m=A})};v();let y;const b=E6[i]||qc;let x;b!==qc&&typeof r[0]!="number"&&(x=cw([0,100],r,{clamp:!1}),r=[0,100]);const C=b({...h,keyframes:r});let _;a==="mirror"&&(_=b({...h,keyframes:[...r].reverse(),velocity:-(h.velocity||0)}));let S="idle",T=null,I=null,F=null;C.calculatedDuration===null&&s&&(C.calculatedDuration=vw(C));const{calculatedDuration:$}=C;let G=1/0,ne=1/0;$!==null&&(G=$+d,ne=G*(s+1)-d);let Y=0;const Q=A=>{if(I===null)return;u>0&&(I=Math.min(I,A)),u<0&&(I=Math.min(A-ne/u,I)),T!==null?Y=T:Y=Math.round(A-I)*u;const j=Y-t*(u>=0?1:-1),H=u>=0?j<0:j>ne;Y=Math.max(j,0),S==="finished"&&T===null&&(Y=ne);let M=Y,O=C;if(s){const W=Math.min(Y,ne)/G;let ee=Math.floor(W),re=W%1;!re&&W>=1&&(re=1),re===1&&ee--,ee=Math.min(ee,s+1),!!(ee%2)&&(a==="reverse"?(re=1-re,d&&(re-=d/G)):a==="mirror"&&(O=_)),M=Io(0,1,re)*G}const R=H?{done:!1,value:r[0]}:O.next(M);x&&(R.value=x(R.value));let{done:B}=R;!H&&$!==null&&(B=u>=0?Y>=ne:Y<=0);const U=T===null&&(S==="finished"||S==="running"&&B);return l&&l(R.value),U&&V(),R},Z=()=>{y&&y.stop(),y=void 0},ie=()=>{S="idle",Z(),m(),v(),I=F=null},V=()=>{S="finished",f&&f(),Z(),m()},k=()=>{if(p)return;y||(y=n(Q));const A=y.now();o&&o(),T!==null?I=A-T:(!I||S==="finished")&&(I=A),S==="finished"&&v(),F=I,T=null,S="running",y.start()};e&&k();const P={then(A,j){return g.then(A,j)},get time(){return Br(Y)},set time(A){A=Si(A),Y=A,T!==null||!y||u===0?T=A:I=y.now()-A/u},get duration(){const A=C.calculatedDuration===null?vw(C):C.calculatedDuration;return Br(A)},get speed(){return u},set speed(A){A===u||!y||(u=A,P.time=Br(Y))},get state(){return S},play:k,pause:()=>{S="paused",T=Y},stop:()=>{p=!0,S!=="idle"&&(S="idle",c&&c(),ie())},cancel:()=>{F!==null&&Q(F),ie()},complete:()=>{S="finished"},sample:A=>(I=0,Q(A))};return P}function T6(e){let t;return()=>(t===void 0&&(t=e()),t)}const O6=T6(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),P6=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Qc=10,D6=2e4,A6=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Nx(t.ease);function M6(e,t,{onUpdate:n,onComplete:r,...i}){if(!(O6()&&P6.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let d=!1,a,o,c=!1;const f=()=>{o=new Promise(b=>{a=b})};f();let{keyframes:l,duration:h=300,ease:u,times:p}=i;if(A6(t,i)){const b=Zc({...i,repeat:0,delay:0});let x={done:!1,value:l[0]};const C=[];let _=0;for(;!x.done&&_<D6;)x=b.sample(_),C.push(x.value),_+=Qc;p=void 0,l=C,h=_-Qc,u="linear"}const m=VD(e.owner.current,t,l,{...i,duration:h,ease:u,times:p}),g=()=>{c=!1,m.cancel()},v=()=>{c=!0,vt.update(g),a(),f()};return m.onfinish=()=>{c||(e.set(HD(l,i)),r&&r(),v())},{then(b,x){return o.then(b,x)},attachTimeline(b){return m.timeline=b,m.onfinish=null,mt},get time(){return Br(m.currentTime||0)},set time(b){m.currentTime=Si(b)},get speed(){return m.playbackRate},set speed(b){m.playbackRate=b},get duration(){return Br(h)},play:()=>{d||(m.play(),Uc(g))},pause:()=>m.pause(),stop:()=>{if(d=!0,m.playState==="idle")return;const{currentTime:b}=m;if(b){const x=Zc({...i,autoplay:!1});e.setWithVelocity(x.sample(b-Qc).value,x.sample(b).value,Qc)}v()},complete:()=>{c||m.finish()},cancel:v}}function j6({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:mt,pause:mt,stop:mt,then:s=>(s(),Promise.resolve()),cancel:mt,complete:mt});return t?Zc({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const I6={type:"spring",stiffness:500,damping:25,restSpeed:10},F6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),R6={type:"keyframes",duration:.8},L6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},z6=(e,{keyframes:t})=>t.length>2?R6:xi.has(e)?e.startsWith("scale")?F6(t[1]):I6:L6,Pp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(zo.test(t)||t==="0")&&!t.startsWith("url(")),B6=new Set(["brightness","contrast","saturate","opacity"]);function N6(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match($c)||[];if(!r)return e;const i=n.replace(r,"");let s=B6.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const $6=/([a-z-]*)\(.*?\)/g,Dp={...zo,getAnimatableNone:e=>{const t=e.match($6);return t?t.map(N6).join(" "):e}},V6={...bx,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:Dp,WebkitFilter:Dp},Ap=e=>V6[e];function yw(e,t){let n=Ap(e);return n!==Dp&&(n=zo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const bw=e=>/^0[^.\s]+$/.test(e);function H6(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||bw(e)}function W6(e,t,n,r){const i=Pp(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const d=r.from!==void 0?r.from:e.get();let a;const o=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?d:s[c-1]),H6(s[c])&&o.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&o.length&&a)for(let c=0;c<o.length;c++){const f=o[c];s[f]=yw(t,a)}return s}function U6({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:d,repeatDelay:a,from:o,elapsed:c,...f}){return!!Object.keys(f).length}function xw(e,t){return e[t]||e.default||e}const Y6={skipAnimations:!1},X6=(e,t,n,r={})=>i=>{const s=xw(r,e)||{},d=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Si(d);const o=W6(t,e,n,s),c=o[0],f=o[o.length-1],l=Pp(e,c),h=Pp(e,f);let u={keyframes:o,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{t.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(U6(s)||(u={...u,...z6(e,u)}),u.duration&&(u.duration=Si(u.duration)),u.repeatDelay&&(u.repeatDelay=Si(u.repeatDelay)),!l||!h||$D.current||s.type===!1||Y6.skipAnimations)return j6(u);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=M6(t,e,u);if(p)return p}return Zc(u)};function Jc(e){return!!(Kt(e)&&e.add)}const ww=e=>/^\-?\d*\.?\d+$/.test(e);function G6(e,t){e.indexOf(t)===-1&&e.push(t)}function K6(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Cw{constructor(){this.subscriptions=[]}add(t){return G6(this.subscriptions,t),()=>K6(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const d=this.subscriptions[s];d&&d(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const q6=e=>!isNaN(parseFloat(e));class Z6{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:d}=pp;this.lastUpdated!==d&&(this.timeDelta=s,this.lastUpdated=d,vt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>vt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=q6(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Cw);const r=this.events[t].add(n);return t==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?uw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ga(e,t){return new Z6(e,t)}const _w=e=>t=>t.test(e),Sw=[wi,_e,Fo,zr,JP,QP,{test:e=>e==="auto",parse:e=>e}],ma=e=>Sw.find(_w(e)),Q6=[...Sw,Ot,zo],J6=e=>Q6.find(_w(e));function eA(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ga(n))}function tA(e,t){const n=Xc(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const d in s){const a=dD(s[d]);eA(e,d,a)}}function nA(e,t,n){var r,i;const s=Object.keys(t).filter(a=>!e.hasValue(a)),d=s.length;if(d)for(let a=0;a<d;a++){const o=s[a],c=t[o];let f=null;Array.isArray(c)&&(f=c[0]),f===null&&(f=(i=(r=n[o])!==null&&r!==void 0?r:e.readValue(o))!==null&&i!==void 0?i:t[o]),f!=null&&(typeof f=="string"&&(ww(f)||bw(f))?f=parseFloat(f):!J6(f)&&zo.test(c)&&(f=yw(o,c)),e.addValue(o,ga(f,{owner:e})),n[o]===void 0&&(n[o]=f),f!==null&&e.setBaseTarget(o,f))}}function rA(e,t){return t?(t[e]||t.default||t).from:void 0}function iA(e,t,n){const r={};for(const i in e){const s=rA(i,t);if(s!==void 0)r[i]=s;else{const d=n.getValue(i);d&&(r[i]=d.get())}}return r}function oA({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function sA(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function kw(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:d,...a}=e.makeTargetAnimatable(t);const o=e.getValue("willChange");r&&(s=r);const c=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const l in a){const h=e.getValue(l),u=a[l];if(!h||u===void 0||f&&oA(f,l))continue;const p={delay:n,elapsed:0,...xw(s||{},l)};if(window.HandoffAppearAnimations){const v=e.getProps()[ax];if(v){const y=window.HandoffAppearAnimations(v,l,h,vt);y!==null&&(p.elapsed=y,p.isHandoff=!0)}}let m=!p.isHandoff&&!sA(h,u);if(p.type==="spring"&&(h.getVelocity()||p.velocity)&&(m=!1),h.animation&&(m=!1),m)continue;h.start(X6(l,h,u,e.shouldReduceMotion&&xi.has(l)?{type:!1}:p));const g=h.animation;Jc(o)&&(o.add(l),g.then(()=>o.remove(l))),c.push(g)}return d&&Promise.all(c).then(()=>{d&&tA(e,d)}),c}function Mp(e,t,n={}){const r=Xc(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(kw(e,r,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(o=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:l}=i;return aA(e,t,c+o,f,l,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[o,c]=a==="beforeChildren"?[s,d]:[d,s];return o().then(()=>c())}else return Promise.all([s(),d(n.delay)])}function aA(e,t,n=0,r=0,i=1,s){const d=[],a=(e.variantChildren.size-1)*r,o=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(lA).forEach((c,f)=>{c.notify("AnimationStart",t),d.push(Mp(c,t,{...s,delay:n+o(f)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(d)}function lA(e,t){return e.sortNodePosition(t)}function cA(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Mp(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Mp(e,t,n);else{const i=typeof t=="function"?Xc(e,t,n.custom):t;r=Promise.all(kw(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const uA=[...rp].reverse(),hA=rp.length;function fA(e){return t=>Promise.all(t.map(({animation:n,options:r})=>cA(e,n,r)))}function dA(e){let t=fA(e);const n=gA();let r=!0;const i=(o,c)=>{const f=Xc(e,c);if(f){const{transition:l,transitionEnd:h,...u}=f;o={...o,...u,...h}}return o};function s(o){t=o(e)}function d(o,c){const f=e.getProps(),l=e.getVariantContext(!0)||{},h=[],u=new Set;let p={},m=1/0;for(let v=0;v<hA;v++){const y=uA[v],b=n[y],x=f[y]!==void 0?f[y]:l[y],C=sa(x),_=y===c?b.isActive:null;_===!1&&(m=v);let S=x===l[y]&&x!==f[y]&&C;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&_===null||!x&&!b.prevProp||zc(x)||typeof x=="boolean")continue;let I=pA(b.prevProp,x)||y===c&&b.isActive&&!S&&C||v>m&&C,F=!1;const $=Array.isArray(x)?x:[x];let G=$.reduce(i,{});_===!1&&(G={});const{prevResolvedValues:ne={}}=b,Y={...ne,...G},Q=Z=>{I=!0,u.has(Z)&&(F=!0,u.delete(Z)),b.needsAnimating[Z]=!0};for(const Z in Y){const ie=G[Z],V=ne[Z];if(p.hasOwnProperty(Z))continue;let k=!1;Hc(ie)&&Hc(V)?k=!zx(ie,V):k=ie!==V,k?ie!==void 0?Q(Z):u.add(Z):ie!==void 0&&u.has(Z)?Q(Z):b.protectedKeys[Z]=!0}b.prevProp=x,b.prevResolvedValues=G,b.isActive&&(p={...p,...G}),r&&e.blockInitialAnimation&&(I=!1),I&&(!S||F)&&h.push(...$.map(Z=>({animation:Z,options:{type:y,...o}})))}if(u.size){const v={};u.forEach(y=>{const b=e.getBaseTarget(y);b!==void 0&&(v[y]=b)}),h.push({animation:v})}let g=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function a(o,c,f){var l;if(n[o].isActive===c)return Promise.resolve();(l=e.variantChildren)===null||l===void 0||l.forEach(u=>{var p;return(p=u.animationState)===null||p===void 0?void 0:p.setActive(o,c)}),n[o].isActive=c;const h=d(f,o);for(const u in n)n[u].protectedKeys={};return h}return{animateChanges:d,setActive:a,setAnimateFunction:s,getState:()=>n}}function pA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!zx(t,e):!1}function Ei(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gA(){return{animate:Ei(!0),whileInView:Ei(),whileHover:Ei(),whileTap:Ei(),whileDrag:Ei(),whileFocus:Ei(),exit:Ei()}}class mA extends Ro{constructor(t){super(t),t.animationState||(t.animationState=dA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),zc(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let vA=0;class yA extends Ro{constructor(){super(...arguments),this.id=vA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const bA={animation:{Feature:mA},exit:{Feature:yA}},Ew=()=>({min:0,max:0}),Tw=()=>({x:Ew(),y:Ew()});function xA({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function wA(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function CA(e,t){return xA(wA(e.getBoundingClientRect(),t))}const _A=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function SA(e){const t=_A.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function jp(e,t,n=1){const[r,i]=SA(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const d=s.trim();return ww(d)?parseFloat(d):d}else return ap(i)?jp(i,t,n+1):i}function kA(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!ap(s))return;const d=jp(s,r);d&&i.set(d)});for(const i in t){const s=t[i];if(!ap(s))continue;const d=jp(s,r);d&&(t[i]=d,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const EA=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ow=e=>EA.has(e),TA=e=>Object.keys(e).some(Ow),Pw=e=>e===wi||e===_e,Dw=(e,t)=>parseFloat(e.split(", ")[t]),Aw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Dw(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?Dw(s[1],e):0}},OA=new Set(["x","y","z"]),PA=la.filter(e=>!OA.has(e));function DA(e){const t=[];return PA.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Aw(4,13),y:Aw(5,14)};Bo.translateX=Bo.x,Bo.translateY=Bo.y;const AA=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:d}=s,a={};d==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{a[c]=Bo[c](r,s)}),t.render();const o=t.measureViewportBox();return n.forEach(c=>{const f=t.getValue(c);f&&f.jump(a[c]),e[c]=Bo[c](o,s)}),e},MA=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(Ow);let s=[],d=!1;const a=[];if(i.forEach(o=>{const c=e.getValue(o);if(!e.hasValue(o))return;let f=n[o],l=ma(f);const h=t[o];let u;if(Hc(h)){const p=h.length,m=h[0]===null?1:0;f=h[m],l=ma(f);for(let g=m;g<p&&h[g]!==null;g++)u?yp(ma(h[g])===u):u=ma(h[g])}else u=ma(h);if(l!==u)if(Pw(l)&&Pw(u)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof h=="string"?t[o]=parseFloat(h):Array.isArray(h)&&u===_e&&(t[o]=h.map(parseFloat))}else l!=null&&l.transform&&(u!=null&&u.transform)&&(f===0||h===0)?f===0?c.set(u.transform(f)):t[o]=l.transform(h):(d||(s=DA(e),d=!0),a.push(o),r[o]=r[o]!==void 0?r[o]:t[o],c.jump(h))}),a.length){const o=a.indexOf("height")>=0?window.pageYOffset:null,c=AA(t,e,a);return s.length&&s.forEach(([f,l])=>{e.getValue(f).set(l)}),e.render(),Lc&&o!==null&&window.scrollTo({top:o}),{target:c,transitionEnd:r}}else return{target:t,transitionEnd:r}};function jA(e,t,n,r){return TA(t)?MA(e,t,n,r):{target:t,transitionEnd:r}}const IA=(e,t,n,r)=>{const i=kA(e,t,r);return t=i.target,r=i.transitionEnd,jA(e,t,n,r)},Ip={current:null},Mw={current:!1};function FA(){if(Mw.current=!0,!!Lc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ip.current=e.matches;e.addListener(t),t()}else Ip.current=!1}function RA(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],d=n[i];if(Kt(s))e.addValue(i,s),Jc(r)&&r.add(i);else if(Kt(d))e.addValue(i,ga(s,{owner:e})),Jc(r)&&r.remove(i);else if(d!==s)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,ga(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const jw=new WeakMap,Iw=Object.keys(aa),LA=Iw.length,Fw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],zA=ip.length;class BA{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>vt.render(this.render,!1,!0);const{latestValues:a,renderState:o}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=o,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.isControllingVariants=Bc(n),this.isVariantNode=cx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{});for(const l in f){const h=f[l];a[l]!==void 0&&Kt(h)&&(h.set(a[l],!1),Jc(c)&&c.add(l))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,jw.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Mw.current||FA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ip.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jw.delete(this.current),this.projection&&this.projection.unmount(),Uc(this.notifyUpdate),Uc(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=xi.has(t),i=n.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&vt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let d,a;for(let o=0;o<LA;o++){const c=Iw[o],{isEnabled:f,Feature:l,ProjectionNode:h,MeasureLayout:u}=aa[c];h&&(d=h),f(n)&&(!this.features[c]&&l&&(this.features[c]=new l(this)),u&&(a=u))}if((this.type==="html"||this.type==="svg")&&!this.projection&&d){this.projection=new d(this.latestValues,this.parent&&this.parent.projection);const{layoutId:o,layout:c,drag:f,dragConstraints:l,layoutScroll:h,layoutRoot:u}=n;this.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:!!f||l&&lx(l),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:u})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tw()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Fw.length;r++){const i=Fw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=RA(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<zA;r++){const i=ip[r],s=this.props[i];(sa(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ga(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=dp(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Kt(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Cw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Rw extends BA{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let d=iA(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),d&&(d=i(d))),s){nA(this,r,d);const a=IA(this,r,d,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function NA(e){return window.getComputedStyle(e)}class $A extends Rw{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(xi.has(n)){const r=Ap(n);return r&&r.default||0}else{const r=NA(t),i=(gx(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return CA(t,n)}build(t,n,r,i){lp(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return fp(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){Sx(t,n,r,i)}}class VA extends Rw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(xi.has(n)){const r=Ap(n);return r&&r.default||0}return n=kx.has(n)?n:np(n),t.getAttribute(n)}measureInstanceViewportBox(){return Tw()}scrapeMotionValuesFromProps(t,n){return Tx(t,n)}build(t,n,r,i){up(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){Ex(t,n,r,i)}mount(t){this.isSVGTag=hp(t.tagName),super.mount(t)}}const HA=(e,t)=>sp(e)?new VA(t,{enableHardwareAcceleration:!1}):new $A(t,{enableHardwareAcceleration:!0}),yt=HP(CD);function Lw(){const e=E.useRef(!1);return ep(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function WA(){const e=Lw(),[t,n]=E.useState(0),r=E.useCallback(()=>{e.current&&n(t+1)},[t]);return[E.useCallback(()=>vt.postRender(r),[r]),t]}class UA extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function YA({children:e,isPresent:t}){const n=E.useId(),r=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:s,height:d,top:a,left:o}=i.current;if(t||!r.current||!s||!d)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${d}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),E.createElement(UA,{isPresent:t,childRef:r,sizeRef:i},E.cloneElement(e,{ref:r}))}const Fp=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:d})=>{const a=Ox(XA),o=E.useId(),c=E.useMemo(()=>({id:o,initial:t,isPresent:n,custom:i,onExitComplete:f=>{a.set(f,!0);for(const l of a.values())if(!l)return;r&&r()},register:f=>(a.set(f,!1),()=>a.delete(f))}),s?void 0:[n]);return E.useMemo(()=>{a.forEach((f,l)=>a.set(l,!1))},[n]),E.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),d==="popLayout"&&(e=E.createElement(YA,{isPresent:n},e)),E.createElement(Jd.Provider,{value:c},e)};function XA(){return new Map}function GA(e){return E.useEffect(()=>()=>e(),[])}const Ti=e=>e.key||"";function KA(e,t){e.forEach(n=>{const r=Ti(n);t.set(r,n)})}function qA(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const tr=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:d="sync"})=>{const a=E.useContext(fx).forceRender||WA()[0],o=Lw(),c=qA(e);let f=c;const l=E.useRef(new Map).current,h=E.useRef(f),u=E.useRef(new Map).current,p=E.useRef(!0);if(ep(()=>{p.current=!1,KA(c,u),h.current=f}),GA(()=>{p.current=!0,u.clear(),l.clear()}),p.current)return E.createElement(E.Fragment,null,f.map(y=>E.createElement(Fp,{key:Ti(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:d},y)));f=[...f];const m=h.current.map(Ti),g=c.map(Ti),v=m.length;for(let y=0;y<v;y++){const b=m[y];g.indexOf(b)===-1&&!l.has(b)&&l.set(b,void 0)}return d==="wait"&&l.size&&(f=[]),l.forEach((y,b)=>{if(g.indexOf(b)!==-1)return;const x=u.get(b);if(!x)return;const C=m.indexOf(b);let _=y;if(!_){const S=()=>{l.delete(b);const T=Array.from(u.keys()).filter(I=>!g.includes(I));if(T.forEach(I=>u.delete(I)),h.current=c.filter(I=>{const F=Ti(I);return F===b||T.includes(F)}),!l.size){if(o.current===!1)return;a(),r&&r()}};_=E.createElement(Fp,{key:Ti(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:s,mode:d},x),l.set(b,_)}f.splice(C,0,_)}),f=f.map(y=>{const b=y.key;return l.has(b)?y:E.createElement(Fp,{key:Ti(y),isPresent:!0,presenceAffectsLayout:s,mode:d},y)}),E.createElement(E.Fragment,null,l.size?f:f.map(y=>E.cloneElement(y)))};function ZA({children:e,features:t,strict:n=!1}){const[,r]=E.useState(!Rp(t)),i=E.useRef(void 0);if(!Rp(t)){const{renderer:s,...d}=t;i.current=s,op(d)}return E.useEffect(()=>{Rp(t)&&t().then(({renderer:s,...d})=>{op(d),i.current=s,r(!0)})},[]),E.createElement(tp.Provider,{value:{renderer:i.current,strict:n}},e)}function Rp(e){return typeof e=="function"}const QA={renderer:HA,...bA,...LD},qt=typeof document<"u"?he.useLayoutEffect:()=>{},eu={prefix:String(Math.round(Math.random()*1e10)),current:0},zw=he.createContext(eu),JA=he.createContext(!1);let eM=!!(typeof window<"u"&&window.document&&window.document.createElement),Lp=new WeakMap;function tM(e=!1){let t=E.useContext(zw),n=E.useRef(null);if(n.current===null&&!e){var r,i;let s=(i=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let d=Lp.get(s);d==null?Lp.set(s,{id:t.current,state:s.memoizedState}):s.memoizedState!==d.state&&(t.current=d.id,Lp.delete(s))}n.current=++t.current}return n.current}function nM(e){let t=E.useContext(zw);t===eu&&!eM&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=tM(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function rM(e){let t=he.useId(),[n]=E.useState(zp()),r=n?"react-aria":`react-aria${eu.prefix}`;return e||`${r}-${t}`}he.useId;function iM(){return!1}function oM(){return!0}function sM(e){return()=>{}}function zp(){return typeof he.useSyncExternalStore=="function"?he.useSyncExternalStore(sM,iM,oM):E.useContext(JA)}let Bw=new Map;function aM(e,t){if(e===t)return e;let n=Bw.get(e);if(n)return n(t),t;let r=Bw.get(t);return r?(r(e),e):t}function lM(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const bt=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},tu=e=>e&&"window"in e&&e.window===e?e:bt(e).defaultView||window;function nr(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let i in r){let s=t[i],d=r[i];typeof s=="function"&&typeof d=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=lM(s,d):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof d=="string"?t[i]=ce(s,d):i==="id"&&s&&d?t.id=aM(s,d):t[i]=d!==void 0?d:s}}return t}function Nw(e){if(cM())e.focus({preventScroll:!0});else{let t=uM(e);e.focus(),hM(t)}}let nu=null;function cM(){if(nu==null){nu=!1;try{document.createElement("div").focus({get preventScroll(){return nu=!0,!0}})}catch{}}return nu}function uM(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function hM(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function fM(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function dM(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function $w(){return dM(/^Mac/i)}function pM(){return fM(/Android/i)}let No=new Map,Bp=new Set;function Vw(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let i=No.get(r.target);i||(i=new Set,No.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let i=No.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),No.delete(r.target)),No.size===0)){for(let s of Bp)s();Bp.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Vw():document.addEventListener("DOMContentLoaded",Vw));function gM(e){requestAnimationFrame(()=>{No.size===0?e():Bp.add(e)})}function Np(){let e=E.useRef(new Map),t=E.useCallback((i,s,d,a)=>{let o=a!=null&&a.once?(...c)=>{e.current.delete(d),d(...c)}:d;e.current.set(d,{type:s,eventTarget:i,fn:o,options:a}),i.addEventListener(s,d,a)},[]),n=E.useCallback((i,s,d,a)=>{var o;let c=((o=e.current.get(d))===null||o===void 0?void 0:o.fn)||d;i.removeEventListener(s,c,a),e.current.delete(d)},[]),r=E.useCallback(()=>{e.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return E.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function Oi(e){const t=E.useRef(null);return E.useMemo(()=>({get current(){return t.current},set current(n){t.current=n,typeof e=="function"?e(n):e&&(e.current=n)}}),[e])}let un=typeof document<"u"&&window.visualViewport;function mM(){let e=zp(),[t,n]=E.useState(()=>e?{width:0,height:0}:Hw());return E.useEffect(()=>{let r=()=>{n(i=>{let s=Hw();return s.width===i.width&&s.height===i.height?i:s})};return un?un.addEventListener("resize",r):window.addEventListener("resize",r),()=>{un?un.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),t}function Hw(){return{width:un&&(un==null?void 0:un.width)||window.innerWidth,height:un&&(un==null?void 0:un.height)||window.innerHeight}}function vM(e){return e.mozInputSource===0&&e.isTrusted?!0:pM()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Nr(e,t,n){let[r,i]=E.useState(e||t),s=E.useRef(e!==void 0),d=e!==void 0;E.useEffect(()=>{let c=s.current;c!==d&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}.`),s.current=d},[d]);let a=d?e:r,o=E.useCallback((c,...f)=>{let l=(h,...u)=>{n&&(Object.is(a,h)||n(h,...u)),d||(a=h)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((u,...p)=>{let m=c(d?a:u,...p);return l(m,...f),d?u:m})):(d||i(c),l(c,...f))},[d,a,n]);return[a,o]}function Pi(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}function ru(e,t){let n=e,r=t.toString(),i=r.indexOf("."),s=i>=0?r.length-i:0;if(s>0){let d=Math.pow(10,s);n=Math.round(n*d)/d}return n}function yM(e,t,n,r){t=Number(t),n=Number(n);let i=(e-(isNaN(t)?0:t))%r,s=ru(Math.abs(i)*2>=r?e+Math.sign(i)*(r-Math.abs(i)):e-i,r);return isNaN(t)?!isNaN(n)&&s>n&&(s=Math.floor(ru(n/r,r))*r):s<t?s=t:!isNaN(n)&&s>n&&(s=t+Math.floor(ru((n-t)/r,r))*r),s=ru(s,r),s}function Ze(e,t,n=10){const r=Math.pow(n,t);return Math.round(e*r)/r}const Ww={lockScalingFlip:!0,originY:"center",originX:"center",lockMovementX:!0,lockMovementY:!0,borderColor:"transparent"};function $p(e=36){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function bM(e){var d;const t=new fe.fabric.Canvas(e,{width:1,height:1});t.preserveObjectStacking=!0,t.selection=!1,t.renderOnAddRemove=!1;const n=D().config.textureSize;n&&(fe.fabric.textureSize=n);const i={...(d=D().config.objectDefaults)==null?void 0:d.global,...Ww};Object.keys(i).forEach(a=>{fe.fabric.Object.prototype[a]=i[a]}),t.on("object:added",a=>{var o,c;a.target&&!((c=(o=a.target)==null?void 0:o.data)!=null&&c.id)&&(a.target.data||(a.target.data={}),a.target.data.id=$p(10))});const s=fe.fabric.Object.prototype.controls;return Object.keys(s).forEach(a=>{delete s[a]}),t}let va=null;function $o(e){va=e}class xM{constructor(){this.maxZoom=2,this.minZoom=1,this.step=.05,this.allowUserZoom&&this.bindMouseWheel(),se.subscribe(t=>t.stageSize,()=>{setTimeout(()=>{this.fitToScreen()},1)})}get allowUserZoom(){var t,n,r;return((r=(n=(t=D().config)==null?void 0:t.tools)==null?void 0:n.zoom)==null?void 0:r.allowUserZoom)??!0}get currentZoom(){return D().zoom}zoomIn(t=this.step){this.set(this.currentZoom+t)}canZoomIn(t=this.step){return this.currentZoom+t<=this.maxZoom}canZoomOut(t=this.step){return this.currentZoom-t>=this.minZoom}zoomOut(t=this.step){this.set(this.currentZoom-t)}set(t,n=!0){if(t<this.minZoom||t>this.maxZoom)return;const r=Xu.round(D().original.width*t,0),i=Xu.round(D().original.height*t,0);de().setZoom(t),n&&de().setDimensions({width:r,height:i}),D().setZoom(t)}fitToScreen(){var s,d;if(!((d=(s=D().config.tools)==null?void 0:s.zoom)!=null&&d.fitImageToScreen))return;const{width:t,height:n}=D().stageSize,r=Math.max(n,1),i=Math.max(t,1);if(D().original.height>r||D().original.width>i){const a=Math.min(r/D().original.height,i/D().original.width);this.minZoom=Math.min(a,1)}else this.minZoom=1;this.set(this.minZoom)}bindMouseWheel(){de().on("mouse:wheel",t=>{t.e.preventDefault(),t.e.stopPropagation(),va==null&&(t.e.deltaY<0?this.zoomIn():this.zoomOut())})}}function Uw(e){return new Promise(t=>{fe.fabric.util.loadImage(e,n=>t(new fe.fabric.Image(n)),null,D().config.crossOrigin?"anonymous":void 0)})}function Yw(){return!D().config.image&&!D().config.blankCanvasSize&&(!de()||de().getObjects().length===0)}class wM{constructor(){this.minWidth=50,this.minHeight=50}resize(t,n,{applyZoom:r=!1,resizeHelper:i=!0}={}){const s=D().zoom;de().setWidth(t*(r?s:1)),de().setHeight(n*(r?s:1)),D().setOriginal(t,n),i&&L().transform.resetStraightenAnchor()}async addMainImage(t,n="mainImage"){var i,s;D().toggleLoading(n);const r=await Uw(t);if(r)return this.clear(),r.set(oi),r.name=Fe.MainImage,de().add(r),this.resize(r.width,r.height),r.center(),r.setCoords(),L().zoom.fitToScreen(),D().toggleLoading(!1),(s=(i=D().config).onMainImageLoaded)==null||s.call(i,r),r}openNew(t,n,r){return t=Math.max(this.minWidth,t),n=Math.max(this.minHeight,n),this.clear(),this.resize(t,n),de().backgroundColor=r,L().zoom.fitToScreen(),D().toggleLoading("newCanvas"),requestAnimationFrame(()=>{D().toggleLoading(!1)}),Promise.resolve({width:t,height:n})}getMainImage(){return de().getObjects().find(t=>t.name===Fe.MainImage)}render(){de().requestRenderAll()}async loadInitialContent(){var i,s;const t=D().config.image,n=D().config.blankCanvasSize,r=D().config.state;if(t&&t.endsWith("json")){const d=await _l(t);await L().import.loadState(d)}else t&&t.startsWith('{"canvas')?await L().import.loadState(t):t?await this.addMainImage(t):r?await L().import.loadState(r):n&&await this.openNew(n.width,n.height);return Yw()&&((s=(i=D().config.ui)==null?void 0:i.openImageDialog)!=null&&s.show)&&D().togglePanel("newImage",!0),new Promise(d=>{setTimeout(()=>{L().history.addInitial(),d()},10)})}clear(){de().clear(),L().frame.remove(),L().transform.resetStraightenAnchor()}}function CM(e){return e.name===Fe.Sticker&&"forEachObject"in e}const _M=["fontSize","fontFamily","left","top","width","height","scaleX","scaleY","flipX","flipY","angle","src","strokeWidth"];function Xw(e={}){de().fire("object:modified",SM(e))}function SM(e){return{values:e,sizeOrPositionChanged:kM(e)}}function kM(e){return Object.keys(e).some(t=>_M.includes(t))}function EM(){D().fabric.on("selection:created",e=>{var t;(t=e.selected)!=null&&t[0]&&!Gw(e)&&Vp(e.selected[0])}),D().fabric.on("selection:updated",e=>{var t;Gw(e)||Vp((t=e.selected)==null?void 0:t[0])}),D().fabric.on("selection:cleared",()=>{Vp()})}function Gw(e){var r,i;const[t]=Xv((r=e.selected)==null?void 0:r[0]),n=t===D().activeTool;return D().dirty&&(!((i=e.selected)!=null&&i[0])||!n)?(e.deselected&&L().objects.select(e.deselected[0]),!0):!1}function Vp(e){(e==null?void 0:e.data.id)!==D().objects.active.id&&(D().objects.setActive(e??null),D().activeTool!==Pe.DRAW&&Wh())}class TM{constructor(){this.syncObjects(),EM(),D().fabric.on("text:editing:entered",()=>{D().objects.setIsEditingText(!0)}),D().fabric.on("text:editing:exited",()=>{D().objects.setIsEditingText(!1)}),D().fabric.on("object:added",()=>{this.syncObjects()}),D().fabric.on("object:removed",()=>{this.syncObjects()})}getAll(){return de().getObjects().filter(t=>{var n;return!((n=t==null?void 0:t.data)!=null&&n.pixieInternal)})}get(t){return this.getAll().find(n=>n.name===t)}getById(t){return this.getAll().find(n=>n.data.id===t)}isActive(t){var r;const n=typeof t=="string"?t:t.data.id;return((r=D().objects.active)==null?void 0:r.id)===n}getActive(){return de().getActiveObject()}has(t){return this.getAll().findIndex(n=>n.name===t)>-1}select(t){const n=typeof t=="string"?this.getById(t):t;n&&(de().setActiveObject(n),de().requestRenderAll())}deselectActive(){de().discardActiveObject(),de().requestRenderAll()}setValues(t,n){if(n=n||this.getActive(),!n)return;let r=!1;CM(n)&&t.fill&&t.fill!==n.fill&&n.forEachObject(i=>i.set("fill",t.fill)),mr(n)?((t.fontFamily&&t.fontFamily!==n.fontFamily||t.fontSize&&t.fontSize!==n.fontSize)&&(r=!0),n.selectionStart!==n.selectionEnd&&r?n.setSelectionStyles(t):n.set(t)):n.set(t),r?setTimeout(()=>{de().requestRenderAll()},50):de().requestRenderAll(),D().objects.setActive(n),Xw(t)}move(t,n=1,r){r=r||this.getActive(),r&&(t==="up"?this.setValues({top:r.top-n}):t==="down"?this.setValues({top:r.top+n}):t==="left"?this.setValues({left:r.left-n}):t==="right"&&this.setValues({left:r.left+n}),L().canvas.render())}bringToFront(t){t=t||this.getActive(),t&&(t.bringToFront(),L().canvas.render())}sendToBack(t){t=t||this.getActive(),t&&(t.sendToBack(),L().canvas.render())}flipHorizontally(t){t=t||this.getActive(),t&&(this.setValues({flipX:!t.flipX}),L().canvas.render())}duplicate(t){const n=t||this.getActive();n&&(this.deselectActive(),n.clone(r=>{r.set({left:n.left+40,top:n.top+40,data:{...n.data,id:$p(10)},name:n.name}),de().add(r),this.select(r),L().canvas.render()}))}delete(t){t=t||this.getActive(),t&&(this.deselectActive(),de().remove(t),de().requestRenderAll(),L().history.addHistoryItem({name:"deletedObject"}),D().applyChanges())}syncObjects(){const t=this.getAll().map(n=>({name:n.name,selectable:n.selectable??!1,id:n.data.id}));se.setState({objects:{...D().objects,all:t}})}}const OM={frame:null,fonts:[]};function Kw(e){return e.state||(e.state=Sl()),{...e.state||Sl(),name:e.name,id:$p(15)}}function qw(e){return e?/^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(e):!1}function Zt(e){return e?qw(e)?e:`${D().config.baseUrl?`${D().config.baseUrl}/`:""}${e}`:""}class PM{constructor(){this.loadedAssets={}}loadAsset(t,n={type:"js"}){var s;t=t.startsWith("//")?`${window.location.protocol}${t}`:t;const r=(s=this.loadedAssets[t])==null?void 0:s.state;return r==="loaded"&&!n.force?new Promise(d=>d()):!r||this.loadedAssets[t].doc!==n.document||n.force&&r==="loaded"?(this.loadedAssets[t]={state:new Promise(d=>{const a=qw(t)?t:`assets/${t}`,o=Hp(t,n.id),c={url:a,id:o,resolve:d,parentEl:n.parentEl,document:n.document};n.type==="css"?this.loadStyleAsset(c):this.loadScriptAsset(c)}),doc:n.document},this.loadedAssets[t].state):this.loadedAssets[t].state}isLoadingOrLoaded(t){return this.loadedAssets[t]!=null}loadStyleAsset(t){var d;const n=t.document||document,r=t.parentEl||n.head,i=n.createElement("link"),s=Hp(t.url,t.id);i.rel="stylesheet",i.id=s,i.href=t.url;try{r.querySelector(`#${s}`)&&((d=r.querySelector(`#${s}`))==null||d.remove())}catch{}i.onload=()=>{this.loadedAssets[t.url].state="loaded",t.resolve()},r.appendChild(i)}loadScriptAsset(t){var d;const n=t.document||document,r=t.parentEl||n.body,i=n.createElement("script"),s=Hp(t.url,t.id);i.async=!0,i.id=s,i.src=t.url;try{r.querySelector(`#${s}`)&&((d=r.querySelector(`#${s}`))==null||d.remove())}catch{}i.onload=()=>{this.loadedAssets[t.url].state="loaded",t.resolve()},(r||r).appendChild(i)}}function Hp(e,t){return t||btoa(e.split("/").pop())}const DM=new PM;function AM(e){return`be-fonts-${e}`}function Zw(e,t){const n=t.document||document,r=[],i=[];let s=[];if(e.forEach(d=>{"google"in d&&d.google?r.push(d):"src"in d&&i.push(d)}),r!=null&&r.length){const d=t.weights||[400],a=e.map(c=>`${c.family}:${d.join(",")}`).join("|"),o=DM.loadAsset(`https://fonts.googleapis.com/css?family=${a}&display=swap`,{type:"css",id:AM(t.id),force:t.forceAssetLoad,document:n});s.push(o)}if(i!=null&&i.length){const d=i.map(async a=>{try{const o=new FontFace(a.family,`url(${t!=null&&t.prefixSrc?t.prefixSrc(a.src):a.src})`,a.descriptors);return n.fonts.add(o),o.load()}catch(o){return console.error(`Error loading font ${a.family}:`,o),Promise.reject(o)}});s=s.concat(d)}return Promise.all(s)}class MM{async undo(){if(this.canUndo()){const t=D().history.items[D().history.pointer-1];await this.load(t)}}async redo(){if(this.canRedo()){const t=D().history.items[D().history.pointer+1];await this.load(t)}}canUndo(){return D().history.canUndo}canRedo(){return D().history.canRedo}reload(){return this.load(D().history.items[D().history.pointer])}replaceCurrent(){const t=D().history.items[D().history.pointer],n=[...D().history.items];n[D().history.pointer]=Kw({name:t.name,state:t})}addHistoryItem(t){const n=Kw(t),i=[...D().history.items.slice(0,D().history.pointer+1),n];D().history.update(i.length-1,i)}load(t){return t={...t,editor:t.editor||OM},new Promise(n=>{Zw(jM(t.canvas.objects),{prefixSrc:Zt,id:"pixie-fonts"}).finally(()=>{de().loadFromJSON(t.canvas,()=>{L().zoom.set(1),t.canvasWidth&&t.canvasHeight&&L().canvas.resize(t.canvasWidth,t.canvasHeight,{resizeHelper:!1,applyZoom:!1}),L().frame.remove(),t.editor.frame&&L().frame.add(t.editor.frame.name,t.editor.frame.sizePercent),L().objects.syncObjects();const r=["freedrawing","drawing","text","i-text","triangle","polygon","ellipse","rect","circle"];L().objects.getAll().forEach(i=>{var s,d,a;if(!i.data.pixieInternal&&i.originX==="left"&&i.originY==="top"){const o=i.getPointByOrigin("center","center");i.set("left",o.x),i.set("top",o.y)}i.set({...Ww}),r.includes(((s=i.name)==null?void 0:s.toLowerCase())||"")&&i.set({selectable:!0,evented:!0}),i.type==="i-text"&&(i.padding=(a=(d=D().config.tools)==null?void 0:d.text)==null?void 0:a.controlsPadding)}),L().canvas.render(),de().calcOffset(),L().zoom.fitToScreen(),D().history.updatePointerById(t.id),L().transform.resetStraightenAnchor(),n()})})})}addInitial(t){!D().history.items.find(r=>r.name==="initial")&&(t||!Yw())&&this.addHistoryItem({name:"initial",state:t})}}function jM(e){const t=[];return e.forEach(n=>{var i,s,d;if(!mr(n))return;const r=(d=(s=(i=D().config.tools)==null?void 0:i.text)==null?void 0:s.items)==null?void 0:d.find(a=>a.family===n.fontFamily);r&&t.push(r)}),t}class IM{canMerge(){return L().objects.getAll().filter(t=>t.name!==Fe.MainImage).length>0}async apply(){D().toggleLoading("merge");const t=L().export.getDataUrl();t&&await L().canvas.addMainImage(t,"merge")}}const iu=[{name:"grayscale"},{name:"blackWhite",fabricType:"blackwhite"},{name:"sharpen",uses:"Convolute",matrix:[0,-1,0,-1,5,-1,0,-1,0]},{name:"invert"},{name:"vintage"},{name:"polaroid"},{name:"kodachrome"},{name:"technicolor"},{name:"brownie"},{name:"sepia"},{name:"removeColor",fabricType:"removecolor",options:{distance:{type:"slider",current:.1,min:0,max:1,step:.01},color:{current:"#fff",type:"colorPicker"}}},{name:"brightness",options:{brightness:{type:"slider",current:.1,min:-1,max:1,step:.1}}},{name:"gamma",options:{red:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},green:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},blue:{type:"slider",current:.1,min:.2,max:2.2,step:.003921}},apply:e=>{e.gamma=[e.red,e.green,e.blue]}},{name:"noise",options:{noise:{type:"slider",current:40,min:1,max:600}}},{name:"pixelate",options:{blocksize:{type:"slider",min:1,max:40,current:6}}},{name:"blur",uses:"Convolute",matrix:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]},{name:"emboss",uses:"Convolute",matrix:[1,1,1,1,.7,-1,-1,-1,-1]},{name:"blendColor",fabricType:"blendcolor",options:{alpha:{type:"slider",current:.5,min:.1,max:1,step:.1},mode:{current:"add",type:"select",available:[{key:"add"},{key:"multiply"},{key:"subtract"},{key:"diff"},{key:"screen"},{key:"lighten"},{key:"darken"}]},color:{type:"colorPicker",current:"#FF4081"}}}],FM={grayscale:oe("grayscale"),blackWhite:oe("Black & White"),sharpen:oe("Sharpen"),invert:oe("Invert"),vintage:oe("Vintage"),polaroid:oe("Polaroid"),kodachrome:oe("Kodachrome"),technicolor:oe("Technicolor"),brownie:oe("Brownie"),sepia:oe("Sepia"),removeColor:oe("Remove Color"),brightness:oe("Brightness"),gamma:oe("Gamma"),noise:oe("Noise"),pixelate:oe("Pixelate"),blur:oe("Blur"),emboss:oe("Emboss"),blendColor:oe("Blend Color")},Wp={distance:oe("distance"),color:oe("color"),brightness:oe("brightness"),red:oe("red"),green:oe("green"),blue:oe("blue"),noise:oe("noise"),blocksize:oe("blocksize"),mode:oe("mode"),alpha:oe("alpha")};function ou(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}class RM{constructor(){se.subscribe(t=>t.history.pointer,()=>{this.syncState()})}apply(t){D().filter.select(t,this.hasOptions(t));const n=this.getByName(t);if(this.isApplied(n.name)){this.remove(n.name);return}const r=this.create(n);this.getImages().forEach(i=>{var s;(s=i.filters)==null||s.push(r),i.applyFilters()}),this.syncState(),L().canvas.render()}remove(t){D().filter.deselect(t);const n=this.getByName(t);this.getImages().forEach(r=>{var s;const i=this.findFilterIndex(n.name,r.filters);(s=r.filters)==null||s.splice(i,1),r.applyFilters()}),this.syncState(),L().canvas.render()}getAll(){return iu}getByName(t){return iu.find(n=>n.name===t)}isApplied(t){const n=L().canvas.getMainImage();return n?this.findFilterIndex(t,n.filters)>-1:!1}applyValue(t,n,r){const i=this.getByName(t);this.getImages().forEach(s=>{const d=(s.filters||[]).find(a=>a.type.toLowerCase()===i.name.toLowerCase());d&&(d[n]=r,i.apply&&i.apply(d,n,r),s.applyFilters())}),L().canvas.render()}addCustom(t,n,r,i){const s=fe.fabric.Image.filters;s[ou(t)]=fe.fabric.util.createClass(s.BaseFilter,n),s[ou(t)].fromObject=s.BaseFilter.fromObject,iu.push({name:t,options:r,initialConfig:i})}create(t){const n=t.initialConfig||{};let r;return t.uses?(n.matrix=t.matrix,r=new fe.fabric.Image.filters[ou(t.uses)](n)):(Object.entries(t.options||{}).forEach(([i,s])=>{n[i]=s.current}),r=new fe.fabric.Image.filters[ou(t.name)](n)),r.name=t.name,r}hasOptions(t){return!!this.getByName(t).options}findFilterIndex(t,n){if(!(n!=null&&n.length))return-1;const r=this.getByName(t);return n.findIndex(i=>this.configMatchesFabricFilter(r,i))}syncState(){var r;const t=[];(((r=this.getImages()[0])==null?void 0:r.filters)||[]).forEach(i=>{const s=this.getByFabricFilter(i);s&&t.push(s.name)}),se.setState({filter:{...D().filter,applied:t}})}getByFabricFilter(t){return iu.find(n=>this.configMatchesFabricFilter(n,t))}configMatchesFabricFilter(t,n){const r=n.type.toLowerCase().replace(" ","");return r===t.fabricType||r===t.name?!0:r==="convolute"&&this.matrixAreEqual(t.matrix,n.matrix)}matrixAreEqual(t,n){if(!t||!n||t.length!==n.length)return!1;for(let r=t.length;r--;)if(t[r]!==n[r])return!1;return!0}getImages(){return L().objects.getAll().filter(t=>t.name===Fe.Image||t.name===Fe.MainImage)}}function LM(e){return e.width<Qw(e.usePercentages)&&(e.width=Qw(e.usePercentages),e.maintainAspect&&(e.height=su(e.width,e.usePercentages))),e.width>Jw(e.usePercentages)&&(e.width=Jw(e.usePercentages),e.maintainAspect&&(e.height=su(e.width,e.usePercentages))),e.height<e2(e.usePercentages)&&(e.height=e2(e.usePercentages),e.maintainAspect&&(e.width=Up(e.height,e.usePercentages))),e.height>t2(e.usePercentages)&&(e.height=t2(e.usePercentages),e.maintainAspect&&(e.width=Up(e.height,e.usePercentages))),e}function Qw(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.minWidth)||50;return e?Math.ceil(t*100/D().original.width):t}function Jw(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.maxWidth)||5e3;return e?Math.ceil(t*100/D().original.width):t}function e2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.minHeight)||50;return e?Math.ceil(t*100/D().original.height):t}function t2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.maxHeight)||5e3;return e?Math.ceil(t*100/D().original.height):t}function Up(e,t){if(t)return e;const n=D().original.height/e;return Math.floor(D().original.width/n)}function su(e,t){if(t)return e;const n=D().original.width/e;return Math.floor(D().original.height/n)}class zM{apply(t){const{width:n,height:r,usePercentages:i}=LM(t),s=Math.ceil(D().original.width),d=Math.ceil(D().original.height),a=Math.ceil(n),o=Math.ceil(r);let c,f;i?(c=n/100,f=r/100):(c=n/D().original.width,f=r/D().original.height),!(s===a&&d===o)&&this.resize(c,f)}resize(t,n){L().zoom.set(1,!1);const r=Math.round(D().original.height*n),i=Math.round(D().original.width*t);L().canvas.resize(i,r,{applyZoom:!1,resizeHelper:!0}),L().objects.getAll().forEach(s=>{const d=s.scaleX||1,a=s.scaleY||1,o=s.left||0,c=s.top||0,f=d*t,l=a*n,h=o*t,u=c*n;s.scaleX=f,s.scaleY=l,s.left=h,s.top=u,s.setCoords()}),L().zoom.fitToScreen(),de().requestRenderAll()}}function BM(e,t){t.innerZone!==null&&(t=t,NM(e,t),$M(e,t),VM(e,t))}function NM(e,t){t.innerZone.style.width=`${e.width}px`,t.innerZone.style.height=`${e.height}px`,t.innerZone.style.transform=`translate(${e.left}px, ${e.top}px)`}function $M(e,t){const n=D().canvasSize.width,r=D().canvasSize.height;t.maskTop.style.height=`${e.top}px`,t.maskTop.style.width=`${n}px`,t.maskLeft.style.top=`${e.top}px`,t.maskLeft.style.height=`${e.height}px`,t.maskLeft.style.width=`${e.left}px`;const i=e.left+e.width;t.maskRight.style.left=`${i}px`,t.maskRight.style.top=`${e.top}px`,t.maskRight.style.height=`${e.height}px`,t.maskRight.style.width=`${n-i}px`,t.maskBottom.style.height=`${r-(e.top+e.height)}px`,t.maskBottom.style.width=`${n}px`}function VM(e,t){const n=(e.width-2)/3;t.lineVer1.style.height=`${e.height}px`,t.lineVer1.style.transform=`translate(${n}px, 0)`,t.lineVer2.style.height=`${e.height}px`,t.lineVer2.style.transform=`translate(${n*2}px, 0)`;const r=(e.height-2)/3;t.lineHor1.style.width=`${e.width}px`,t.lineHor1.style.transform=`translate(0, ${r}px)`,t.lineHor2.style.width=`${e.width}px`,t.lineHor2.style.transform=`translate(0, ${r*2}px)`}function Yp(e,t,n){let r=t,i=n;return e&&(n*e>t?i=t/e:r=n*e),{width:Math.floor(r),height:Math.floor(i)}}function Xp(e){if(!e)return null;const t=e.split(":");return parseInt(t[0])/parseInt(t[1])}function HM(e,t=null){const n={width:e.width,height:e.height,top:0,left:0,angle:0};if(t){const r=Yp(t,n.width,n.height);n.width=r.width,n.height=r.height}return n.left=(e.width-n.width)/2,n.top=(e.height-n.height)/2,n}class WM{constructor(){this.refs=null}apply(t){var i;const n=(i=L().frame.active.config)==null?void 0:i.name,r=L().frame.active.currentSizeInPercent;return L().frame.active.hide(),L().merge.apply().then(()=>{L().canvas.resize(Math.round(t.width),Math.round(t.height),{applyZoom:!0,resizeHelper:!0});const s=L().canvas.getMainImage();s.cropX=Math.round(t.left),s.cropY=Math.round(t.top),s.width=Math.round(t.width),s.height=Math.round(t.height),s.viewportCenter(),n&&L().frame.add(n,r),L().zoom.fitToScreen(),L().canvas.render()})}drawZone(t){var n;(n=this.refs)!=null&&n.current&&(D().crop.setCropzoneRect(t),BM(t,this.refs.current))}resetCropzone(t){const n=D().canvasSize,r=Xp(t);if(!n)return;D().crop.setAspectRatio(t);const i=HM(n,r);this.drawZone(i)}registerRefs(t){this.refs=t}}class UM{getShapeByName(t){var r,i;const n=(i=(r=D().config.tools)==null?void 0:r.shapes)==null?void 0:i.items;return(n==null?void 0:n.find(s=>s.name===t))||null}addBasicShape(t){var o;const n=this.getShapeByName(t);if(!n)return null;const{width:r,height:i,...s}=((o=D().config.objectDefaults)==null?void 0:o.shape)||{},d={...s,...n.options};let a;if(n.name==="circle")a=new fe.fabric.Circle({...d,radius:100});else if(n.name==="ellipse")a=new fe.fabric.Ellipse({...d,rx:100,ry:50});else if(n.type==="Path")a=new fe.fabric.Path(d.path,{displayName:n.name,...d});else{const c=n.type;a=new fe.fabric[c]({...d,width:150,height:150})}return this.addAndPositionShape(a,Fe.Shape,{width:r,height:i}),a}addSticker(t,n){var i,s,d;const r=(d=(s=(i=D().config.tools)==null?void 0:i.stickers)==null?void 0:s.items)==null?void 0:d.find(a=>a.name===t);if(!r)return Promise.resolve();if(r.type==="svg"){const a=Gp(r,n);return this.addSvgSticker(a)}return this.addRegularSticker(r,n)}addRegularSticker(t,n){return new Promise(r=>{fe.fabric.util.loadImage(Gp(t,n),i=>{var c;const{width:s,height:d,...a}=((c=D().config.objectDefaults)==null?void 0:c.sticker)||{},o=new fe.fabric.Image(i,a);this.addAndPositionShape(o,Fe.Sticker,{width:s,height:d}),r()})})}addSvgSticker(t,n=Fe.Sticker){return new Promise(r=>{fe.fabric.loadSVGFromURL(t,(i,s)=>{var f;const{width:d,height:a,...o}=((f=D().config.objectDefaults)==null?void 0:f.sticker)||{},c=fe.fabric.util.groupSVGElements(i,s);c.set(o),this.addAndPositionShape(c,n,{width:d,height:a}),r()})})}addAndPositionShape(t,n,{width:r}){t.name=n,t.scaleX=1,t.scaleY=1,de().add(t);const i=r||D().original.width*D().zoom/4;t.scaleToWidth(Math.min(150,i)),t.viewportCenter(),t.setCoords(),L().canvas.render(),de().setActiveObject(t)}}function Gp(e,t){return Zt(`images/stickers/${e.name}/${t}.${e.type}`)}class YM{constructor(t){this.activeFrame=t,this.patternCache=[]}fillParts(t){this.patternCache.forEach(n=>{this.fillPartWithPattern(n,t)})}fillPartWithPattern(t,n){if(!this.activeFrame.parts)return;t.canvas=new fe.fabric.StaticCanvas(null),t.canvas.add(t.img);const r=new fe.fabric.Pattern({source:t.canvas.getElement(),repeat:n==="repeat"?"repeat":"no-repeat"});this.activeFrame.parts[t.name]&&this.activeFrame.parts[t.name].set("fill",r)}scale(t){if(!this.activeFrame.config||!this.patternCache)return;const n=this.activeFrame.config.mode;t/=de().getRetinaScaling(),this.patternCache.forEach(r=>{this.activeFrame.parts&&(r.name==="top"||r.name==="bottom"?n==="stretch"?(this.scalePatternToWidth(r.img,this.activeFrame.parts.top.getScaledWidth()),this.scalePatternToHeight(r.img,t)):r.img.scaleToHeight(t):r.name==="left"||r.name==="right"?n==="stretch"?(this.scalePatternToWidth(r.img,t),this.scalePatternToHeight(r.img,this.activeFrame.parts.left.getScaledHeight())):r.img.scaleToWidth(t):n==="stretch"?(this.scalePatternToWidth(r.img,t),this.scalePatternToHeight(r.img,t)):r.img.scaleToWidth(t),r.canvas.setDimensions({width:r.img.getScaledWidth(),height:r.img.getScaledHeight()}))}),L().canvas.render()}scalePatternToWidth(t,n){if(!t.width)return;const r=t.getBoundingRect().width/t.getScaledWidth();t.set("scaleX",n/t.width/r),t.setCoords()}scalePatternToHeight(t,n){if(!t.height)return;const r=t.getBoundingRect().height/t.getScaledHeight();t.set("scaleY",n/t.height/r),t.setCoords()}load(t){const n=this.activeFrame.getPartNames().map(r=>new Promise(i=>{const s={...oi,originX:"left",originY:"top"};D().config.crossOrigin&&(s.crossOrigin="anonymous"),fe.fabric.Image.fromURL(this.getPartUrl(t,r),d=>{i({name:r,img:d})},s)}));return Promise.all(n).then(r=>{this.patternCache=r,this.fillParts(t.mode)})}getPartUrl(t,n){return Zt(`images/frames/${t.name}/${n}.png`)}}class XM{constructor(t,n){this.activeFrame=t,this.patterns=n}get defaultColor(){var t,n;return(n=(t=D().config.objectDefaults)==null?void 0:t.global)==null?void 0:n.fill}build(t,n){if(this.createParts(t),this.resize(n),this.activeFrame.config=t,t.mode==="basic"){L().canvas.render();return}this.patterns.load(t).then(()=>{this.patterns.scale(n),L().canvas.render()})}createParts(t){const n={};this.activeFrame.getPartNames().forEach(r=>{const i=t.mode==="basic"?this.defaultColor:void 0;n[r]=new fe.fabric.Rect({...oi,fill:i,originX:"left",originY:"top",name:`frame.rect.${r}`,objectCaching:!1,data:{pixieInternal:!0}}),de().add(n[r])}),this.activeFrame.parts=n}resize(t){const n=D().original.width,r=D().original.height,i=this.activeFrame,s=t;i.parts&&(i.parts.topLeft.set({width:s,height:s}),i.parts.topRight.set({left:n-i.parts.topLeft.getScaledWidth(),width:s,height:s}),i.parts.top.set({left:i.parts.topLeft.getScaledWidth()-1,width:n-i.parts.topLeft.getScaledWidth()-i.parts.topRight.getScaledWidth()+3,height:s}),i.parts.bottomLeft.set({top:r-i.parts.topLeft.getScaledHeight(),width:s,height:s}),i.parts.left.set({top:i.parts.topLeft.getScaledHeight()-1,width:s,height:r-i.parts.topLeft.getScaledHeight()-i.parts.bottomLeft.getScaledHeight()+3}),i.parts.bottomRight.set({left:n-i.parts.bottomLeft.getScaledWidth(),top:r-i.parts.topRight.getScaledWidth(),width:s,height:s}),i.parts.bottom.set({left:i.parts.top.left,top:r-i.parts.top.getScaledHeight(),width:i.parts.top.getScaledWidth(),height:s}),i.parts.right.set({left:n-i.parts.left.getScaledWidth(),top:i.parts.left.top,width:i.parts.left.width,height:i.parts.left.getScaledHeight()}))}}class GM{constructor(){this.corners=["topLeft","topRight","bottomLeft","bottomRight"],this.sides=["top","right","bottom","left"],this.parts=null,this.config=null,this.currentSizeInPercent=100}getPartNames(){return[...this.corners,...this.sides]}hide(){this.parts&&(Object.values(this.parts).forEach(t=>t.set({visible:!1})),L().canvas.render())}show(){this.parts&&(Object.values(this.parts).forEach(t=>t.set({visible:!0})),L().canvas.render())}remove(){this.parts&&(this.config=null,Object.values(this.parts).forEach(t=>{de().remove(t)}),this.parts=null,L().canvas.render())}is(t){return this.config?this.config.name===t.name:!1}changeColor(t){var n;((n=this.config)==null?void 0:n.mode)!=="basic"||!this.parts||(Object.values(this.parts).forEach(r=>{r.set("fill",t)}),L().canvas.render())}getMinSize(){var t;return((t=this.config)==null?void 0:t.size.min)??1}getMaxSize(){var t;return((t=this.config)==null?void 0:t.size.max)??35}}class KM{constructor(){this.active=new GM,this.patterns=new YM(this.active),this.builder=new XM(this.active,this.patterns),de().on("object:added",()=>{Object.values(this.active.parts||[]).forEach(t=>t.moveTo(98))})}add(t,n){const r=this.getByName(t);if(!r||this.active.is(r))return;this.active.remove(),this.active.currentSizeInPercent=n??r.size.default;const i=this.calcFrameSizeInPixels(this.active.currentSizeInPercent);this.builder.build(r,i),D().frame.select(r)}resize(t){if(!this.active.parts||!this.active.config)return;t?this.active.currentSizeInPercent=t:t=this.active.currentSizeInPercent;const n=this.calcFrameSizeInPixels(t);this.builder.resize(n),this.patterns.scale(n),L().canvas.render()}changeColor(t){this.active.changeColor(t)}remove(){this.active.remove(),D().frame.deselect()}getByName(t){var r,i;const n=(i=(r=D().config.tools)==null?void 0:r.frame)==null?void 0:i.items;if(n)return n.find(s=>s.name===t)}getActiveFrameConfig(){return this.active.config}calcFrameSizeInPixels(t){const n=Math.min(D().original.width,D().original.height);return Math.ceil(t/100*n)}}class qM{constructor(){this.minWidth=250}add(t,n={}){var s,d,a,o,c;if(t=t||((d=(s=D().config.tools)==null?void 0:s.text)==null?void 0:d.defaultText),!t)return;const r={...(a=D().config.objectDefaults)==null?void 0:a.text,...n,name:Fe.Text,padding:(c=(o=D().config.tools)==null?void 0:o.text)==null?void 0:c.controlsPadding,editingBorderColor:kh.fill},i=new fe.fabric.IText(t,r);de().add(i),n.left==null&&n.top==null&&this.autoPositionText(i),L().objects.select(i)}autoPositionText(t){const n=de().getWidth(),r=de().getHeight(),i=Math.min(de().getWidth(),this.minWidth);t.scaleToWidth(Math.max(n/3,i)),t.getScaledHeight()>r&&t.scaleToHeight(r-t.getScaledHeight()-20),t.viewportCenter(),de().getObjects("i-text").forEach(s=>{if(s!==t&&s.intersectsWithObject(t)){const d=s.top-t.top+s.getScaledHeight();let a=t.top+d;a>D().original.height-s.getScaledHeight()&&(a=0),t.set("top",a),t.setCoords()}})}selectOrAddText(t,n={}){if(D().objects.active.isText)return!1;const r=L().objects.getAll().find(i=>mr(i));return r?(L().objects.select(r),!1):(this.add(t,n),!0)}}const ZM=e=>{const t=new fe.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=fe.fabric.document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(0,5),i.lineTo(10,5),i.closePath(),i.stroke(),r},t},QM=e=>{const t=new fe.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(5,0),i.lineTo(5,10),i.closePath(),i.stroke(),r},t},JM=e=>{const t=new fe.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=this.width/2,i=5,s=document.createElement("canvas"),d=new fe.fabric.Rect({width:r,height:r,angle:45,fill:this.color}),a=d.getBoundingRect().width;s.width=a+i,s.height=a+i,d.set({left:a/2,top:a/2});const o=s.getContext("2d");return d.render(o),s},t},e8=e=>{const t=new fe.fabric.PatternBrush(e);return t.getPatternSrc=function(){const s=document.createElement("canvas");s.width=10+2,s.height=10+2;const d=s.getContext("2d");return d.fillStyle=this.color,d.fillRect(0,0,10,10),s},t};class t8{constructor(){var t,n;this.customBrushes={VLineBrush:ZM,HLineBrush:QM,DiamondBrush:JM,SquareBrush:e8},this.currentBrush={type:"PencilBrush",color:(n=(t=D().config.objectDefaults)==null?void 0:t.global)==null?void 0:n.fill,width:ev[1]},this.onPathCreated=r=>{r.path.name=Fe.Drawing,r.path.set(n8()),D().setDirty(!0)}}enable(){de().on("path:created",this.onPathCreated),de().isDrawingMode=!0,this.setBrushType(this.currentBrush.type),this.setBrushSize(this.currentBrush.width)}disable(){de().off("path:created",this.onPathCreated),de().isDrawingMode=!1}getBrushType(){return this.currentBrush.type}setBrushType(t){this.currentBrush.type=t,de().freeDrawingBrush=t in fe.fabric?new fe.fabric[t](de()):this.customBrushes[t](de()),this.applyBrushStyles()}applyBrushStyles(){Object.keys(this.currentBrush).forEach(n=>{de().freeDrawingBrush[n]=this.currentBrush[n]});const t=de().freeDrawingBrush;t.getPatternSrc&&(t.source=t.getPatternSrc.call(t))}setBrushSize(t){this.currentBrush.width=t,this.applyBrushStyles()}getBrushSize(){return this.currentBrush.width}setBrushColor(t){this.currentBrush.color=t,this.applyBrushStyles()}getBrushColor(){return this.currentBrush.color}}function n8(){const e={...oi,selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,lockRotation:!1,hoverCursor:"move",moveCursor:"move"};return delete e.strokeWidth,e}async function n2(e,t=!0,n=!0){const r=await Uw(e);if(r)return new Promise(i=>{r.name=Fe.Image,r.opacity=0;const s=D().original.width,d=D().original.height;if(t&&(r.width>=s||r.height>=d)){const a=s-.1*s,o=d-.1*d,c=1/Math.min(o/r.getScaledHeight(),a/r.getScaledWidth());r.scaleX*=1/c,r.scaleY*=1/c}D().fabric.add(r),n&&D().fabric.setActiveObject(r),r.viewportCenter(),r.setCoords(),D().fabric.requestRenderAll(),L().zoom.fitToScreen(),r.animate("opacity","1",{duration:425,onChange:()=>{D().fabric.requestRenderAll()},onComplete:()=>{i(r)}})})}function r2(e){var n;return((n=/(?:\.([^.]+))?$/.exec(e))==null?void 0:n[1])||""}function r8(e){const t={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml",log:"text/plain"},n=e.name?r2(e.name):null;return e.type?e.type:n&&n in t?t[n]:"application/octet-stream"}class au{constructor(t,n){this.relativePath="",this.mime="",this.extension="",this.id=Gv(),this.name=t.name,this.size=t.size,this.mime=r8(t),this.lastModified=t.lastModified,this.extension=r2(t.name)||"bin",this.native=t,n=n||t.webkitRelativePath||"",n=n.replace(/^\/+/g,""),n&&n.split("/").length>1&&(this.relativePath=n),this.fingerprint=i8({name:this.name,size:this.size,mime:this.mime,lastModified:this.lastModified})}get data(){return new Promise(t=>{this.cachedData&&t(this.cachedData);const n=new FileReader;n.addEventListener("load",()=>{this.cachedData=n.result,t(this.cachedData)}),this.extension==="json"?n.readAsText(this.native):n.readAsDataURL(this.native)})}}function i8({name:e,mime:t,size:n,relativePath:r,lastModified:i}){let s="be";return typeof e=="string"&&(s+=`-${i2(e.toLowerCase())}`),t&&(s+=`-${t}`),typeof r=="string"&&(s+=`-${i2(r.toLowerCase())}`),n!==void 0&&(s+=`-${n}`),i!==void 0&&(s+=`-${i}`),s}function o8(e){return e.charCodeAt(0).toString(32)}function i2(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${o8(n)}`,"/"))+t}function s8(e={}){const t=document.querySelector("#hidden-file-upload-input");t&&t.remove();const n=document.createElement("input");return n.type="file",n.multiple=e.multiple??!1,n.classList.add("hidden"),n.style.display="none",n.style.visibility="hidden",n.id="hidden-file-upload-input",n.accept=a8(e),e.directory&&(n.webkitdirectory=!0),document.body.appendChild(n),n}function a8({extensions:e=[],types:t=[]}){const n=[];return e!=null&&e.length&&(e=e.map(r=>r.startsWith(".")?r:`.${r}`),n.push(e.join(","))),t!=null&&t.length&&n.push(t.join(",")),n.join(",")}function l8(e={}){return new Promise(t=>{const n=s8(e);n.onchange=r=>{const i=r.target.files;if(!i)return t([]);const s=Array.from(i).filter(d=>d.name!==".DS_Store").map(d=>new au(d));t(s),n.remove()},document.body.appendChild(n),n.click()})}function c8(e,t){if(e==null)return 0;switch(t){case"KB":return e*1024;case"MB":return e*1024**2;case"GB":return e*1024**3;case"TB":return e*1024**4;case"PB":return e*1024**5;default:return e}}var Kp=(e=>(e.image="image/*",e.audio="audio/*",e.text="text/*",e.json="application/json",e.video="video/mp4,video/mpeg,video/x-m4v,video/*",e))(Kp||{});function u8(e,t=1){if(e==null||Number.isNaN(e))return"";const n=e<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(n&&(e=-e),e<1)return`${(n?"-":"")+e} B`;const i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),r.length-1);e=Number(e/Math.pow(1024,i));const s=r[i];return e>=10||e%1===0?`${(n?"-":"")+e.toFixed(0)} ${s}`:`${(n?"-":"")+e.toFixed(t)} ${s}`}function o2(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}o2.prototype.match=function(e){var t=!0,n=this.parts,r,i=n.length,s;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(s=(e||"").split(this.separator),r=0;t&&r<i;r++)n[r]!=="*"&&(r<s.length?t=n[r]===s[r]:t=!1);t=t&&s}else if(typeof e.splice=="function")for(t=[],r=e.length;r--;)this.match(e[r])&&(t[t.length]=e[r]);else if(typeof e=="object"){t={};for(var d in e)this.match(d)&&(t[d]=e[d])}return t};var h8=function(e,t,n){var r=new o2(e,n||/[\/\.]/);return typeof t<"u"?r.match(t):r},f8=h8,d8=/[\/\+\.]/,p8=function(e,t){function n(r){var i=f8(r,e,d8);return i&&i.length>=2}return t?n(t.split(";")[0]):n};const g8=kn(p8);function m8(e,t){if(!t)return;const{maxFileSize:n,allowedFileTypes:r,blockedFileTypes:i}=t;if(n&&e.size!=null&&e.size>n)return oe("`:file` exceeds maximum allowed size of :size",{values:{file:e.name,size:u8(n)}});if(r!=null&&r.length&&!s2(e,r)||i!=null&&i.length&&s2(e,i))return oe("This file type is not allowed")}function s2(e,t){return t.map(n=>n.split(",")).flat().some(n=>{if(n.includes("/"))return e.mime?g8(e.mime.replace(/;.*?$/,""),n):!1;const r=n.replace(".","").toLowerCase();return r&&e.extension?e.extension.toLowerCase()===r:!1})}class v8{async uploadAndAddImage(t=!0){const n=await this.openUploadWindow();await this.openUploadedFile(n,t)}async uploadAndReplaceMainImage(){const t=await this.openUploadWindow();t&&await this.openBackgroundImage(t)}async uploadAndOpenStateFile(){const t=await this.openUploadWindow(b8);t&&await this.loadState(await t.data)}async addImageFromUrl(t,n=!0){var r,i;await n2(t,((i=(r=D().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)??!0,n),L().history.addHistoryItem({name:"overlayImage"})}async addImageFromData(t,n=!0){var r,i;await n2(t,((i=(r=D().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)??!0,n),L().history.addHistoryItem({name:"overlayImage"})}async openUploadedFile(t,n=!0){if(!t)return;const r=await t.data;switch(t.extension){case"json":await this.loadState(r);break;case"svg":await L().shape.addSvgSticker(r,Fe.Image),L().history.addHistoryItem({name:"overlayImage"});break;default:await this.addImageFromData(r,n)}}async loadState(t){D().toggleLoading("state"),await Hh();let n;typeof t=="string"?t.endsWith(".json")?n=await _l(t):n=JSON.parse(t):n=t,n!=null&&n.history?D().history.reset(n.history):await L().history.addInitial(n),await L().history.reload(),D().toggleLoading(!1)}async openUploadWindow(t){var r,i;t=t||y8();const n=(await l8(t))[0];return this.fileIsValid(n)?((i=(r=D().config).onFileOpen)==null||i.call(r,n),n):null}async openBackgroundImage(t){await Hh();let n;t instanceof HTMLImageElement?n=t.src:t instanceof au?n=await t.data:n=t;const r=await L().canvas.addMainImage(n);return await L().history.addInitial(),r}fileIsValid(t){var s,d,a,o;const n=((d=(s=D().config.tools)==null?void 0:s.import)==null?void 0:d.maxFileSize)??c8(10,"MB"),r=[...((o=(a=D().config.tools)==null?void 0:a.import)==null?void 0:o.validImgExtensions)??[],"json"],i=m8(t,{maxFileSize:n,allowedFileTypes:r});return i?(ro.danger(i),!1):!0}}function y8(){var t,n;const e=(n=(t=D().config.tools)==null?void 0:t.import)==null?void 0:n.validImgExtensions;return e?{extensions:e}:{types:[Kp.image]}}const b8={types:[".json",Kp.json]};class x8{constructor(){this.watermark=null,this.lineStyle={stroke:"rgba(255,255,255,0.3)",strokeWidth:5,strokeLineCap:"round",strokeLineJoin:"round"}}add(t){this.createGroup(),this.addText(t),this.addLines(),de().add(this.watermark),L().canvas.render()}remove(){this.watermark&&(de().remove(this.watermark),this.watermark=null,L().canvas.render())}createGroup(){this.watermark=new fe.fabric.Group(void 0,{...oi,width:D().original.width,height:D().original.height,excludeFromExport:!0,top:0,left:0,originX:"left",originY:"top"})}addText(t){var r;const n=new fe.fabric.Text(t,{fill:"rgba(255,255,255,0.3)",strokeWidth:2,stroke:"rgba(255,255,255,0.4)",originX:"center",originY:"center",fontWeight:600,fontSize:150,fontFamily:"Courier New"});n.scaleToWidth(D().original.width/2),(r=this.watermark)==null||r.add(n)}addLines(){var f;if(!this.watermark)return;const t=(f=this.watermark)==null?void 0:f.getObjects("text")[0],n=D().original.width/2,r=D().original.height/2,i=100,s=t.width/4,d=new fe.fabric.Line(void 0,this.lineStyle),a=new fe.fabric.Line(void 0,this.lineStyle),o=new fe.fabric.Line(void 0,this.lineStyle),c=new fe.fabric.Line(void 0,this.lineStyle);this.watermark.add(d,a,o,c),d.set({x1:s,y1:-i,x2:n,y2:-r}),a.set({x1:s,y1:i,x2:n,y2:r}),o.set({x1:-s,y1:-i,x2:-n,y2:-r}),c.set({x1:-s,y1:i,x2:-n,y2:r})}}var a2={exports:{}};(function(e,t){(function(n,r){r()})(Sn,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,l){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){o(h.response,f,l)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Sn=="object"&&Sn.global===Sn?Sn:void 0,a=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,f,l){var h=d.URL||d.webkitURL,u=document.createElement("a");f=f||c.name||"download",u.download=f,u.rel="noopener",typeof c=="string"?(u.href=c,u.origin===location.origin?s(u):i(u.href)?r(c,f,l):s(u,u.target="_blank")):(u.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(u.href)},4e4),setTimeout(function(){s(u)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,l){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,l),f);else if(i(c))r(c,f,l);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){s(h)})}}:function(c,f,l,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,l);var u=c.type==="application/octet-stream",p=/constructor/i.test(d.HTMLElement)||d.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||u&&p||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var b=g.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=b:location=b,h=null},g.readAsDataURL(c)}else{var v=d.URL||d.webkitURL,y=v.createObjectURL(c);h?h.location=y:location.href=y,h=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});d.saveAs=o.saveAs=o,e.exports=o})})(a2);var w8=a2.exports;function C8(e,t,n){t=t||"",n=n||512;const r=atob(e),i=[];for(let s=0;s<r.length;s+=n){const d=r.slice(s,s+n),a=new Array(d.length);for(let c=0;c<d.length;c++)a[c]=d.charCodeAt(c);const o=new Uint8Array(a);i.push(o)}return new Blob(i,{type:t})}class _8{save(t,n,r){var a,o,c;const i=(a=D().config.tools)==null?void 0:a.export;t=t||(i==null?void 0:i.defaultName),n=this.getFormat(n),r=this.getQuality(r);const s=`${t}.${n}`;this.applyWaterMark();const d=n==="json"?this.getJsonState():this.getDataUrl(n,r);if(L().watermark.remove(),!!d)if(D().config.saveUrl)fetch(D().config.saveUrl,{method:"POST",body:JSON.stringify({data:d,filename:s,format:n})});else if(D().config.onSave)(c=(o=D().config).onSave)==null||c.call(o,d,s,n);else{const f=this.getCanvasBlob(n,d);w8.saveAs(f,s)}}getDataUrl(t,n){try{return t==="svg"?de().toSVG():de().toDataURL({format:this.getFormat(t),quality:this.getQuality(n),multiplier:Math.max(D().original.width/de().width,D().original.height/de().height)})}catch(r){r.message.toLowerCase().includes("tainted")&&ro.danger(oe("Could not export canvas with external image."))}return null}getCanvasBlob(t,n){if(t==="json")return new Blob([n],{type:"application/json"});if(t==="svg")return new Blob([n],{type:"image/svg+xml"});const r=`image/${t}`;return n=n.replace(/data:image\/([a-z]*)?;base64,/,""),C8(n,r)}getJsonState(){return JSON.stringify({...Sl(),history:D().history})}applyWaterMark(){const t=D().config.watermarkText;t&&L().watermark.add(t)}getFormat(t){var r;const n=(r=D().config.tools)==null?void 0:r.export;return t=t||(n==null?void 0:n.defaultFormat)||"png",t==="jpg"&&(t="jpeg"),t}getQuality(t){var r;const n=(r=D().config.tools)==null?void 0:r.export;return t=t||(n==null?void 0:n.defaultQuality)||.8,t}}class S8{constructor(){this.previewRect=null}async apply(t){this.previewRect||this.showPreview(),this.updatePreview(t),de().remove(this.previewRect),de().clipPath=this.previewRect;const n=L().export.getDataUrl();n&&L().canvas.clear(),this.hidePreview(),n&&await L().canvas.addMainImage(n),de().clipPath=void 0}getPreviewRadius(){var t;return((t=this.previewRect)==null?void 0:t.rx)||0}updatePreview(t){this.previewRect&&(this.previewRect.set({rx:t,ry:t}),L().canvas.render())}showPreview(){const t=D().original.width*.04;this.previewRect=new fe.fabric.Rect({width:D().original.width,height:D().original.height,rx:t,ry:t,objectCaching:!1,fill:"transparent",name:"round.rect",data:{pixieInternal:!0},stroke:"rgba(255,255,255,0.8)",strokeWidth:3,strokeDashArray:[4,4],selectable:!1,evented:!1}),de().add(this.previewRect),this.previewRect.moveTo(99),this.previewRect.viewportCenter(),L().canvas.render()}hidePreview(){this.previewRect&&(de().remove(this.previewRect),L().canvas.render(),this.previewRect=null)}}class k8{get straightenAnchor(){return de().getObjects().find(t=>t.name===Fe.StraightenAnchor)}rotateLeft(){this.rotateFixed(-90)}rotateRight(){this.rotateFixed(90)}straighten(t){this.storeObjectsRelationToHelper(),L().objects.deselectActive();const n=(this.straightenAnchor.data.rotateAngle||0)+t,r=this.getImageScale(n,this.straightenAnchor);this.straightenAnchor.angle=n,this.straightenAnchor.scaleX=r,this.straightenAnchor.scaleY=r,this.straightenAnchor.data.straightenAngle=t,this.transformObjectsBasedOnHelper()}flip(t){const n=t==="horizontal"?"flipY":"flipX";L().objects.getAll().forEach(r=>{r[n]=!r[n]}),L().canvas.render()}rotateFixed(t){L().zoom.set(1,!1),L().objects.deselectActive();const n=this.straightenAnchor.data.rotateAngle||0;t=Math.round(t/90)*90;const r=n+(this.straightenAnchor.data.straightenAngle||0)+t;L().canvas.resize(D().original.height,D().original.width,{applyZoom:!1,resizeHelper:!1}),this.storeObjectsRelationToHelper(),this.straightenAnchor.rotate(r),this.straightenAnchor.data.rotateAngle=n+t,this.straightenAnchor.center(),this.transformObjectsBasedOnHelper(),L().frame.resize(L().frame.active.currentSizeInPercent),requestAnimationFrame(()=>{L().zoom.fitToScreen()})}getImageScale(t,n){t=fe.fabric.util.degreesToRadians(t);const r=D().original.width,i=D().original.height,s=r/2,d=i/2,a=n.width/2,o=n.height/2,c=Math.sqrt(s**2+d**2),f=Math.asin(d/c);let l=(t%(Math.PI*2)+Math.PI*4)%(Math.PI*2);l>Math.PI&&(l-=Math.PI),l>Math.PI/2&&l<=Math.PI&&(l=Math.PI/2-(l-Math.PI/2));const h=Math.PI/2-f-Math.abs(l),u=Math.abs(f-Math.abs(l)),p=Math.cos(h)*c,m=Math.cos(u)*c;return Math.max(m/a,p/o)}storeObjectsRelationToHelper(){L().objects.getAll().forEach(t=>{if(t!==this.straightenAnchor){const n=fe.fabric.util.multiplyTransformMatrices(fe.fabric.util.invertTransform(this.straightenAnchor.calcTransformMatrix()),t.calcTransformMatrix());t.data={...t.data,relationToCanvas:n}}})}transformObjectsBasedOnHelper(){L().objects.getAll().forEach(t=>{if(t.data.relationToCanvas){const n=fe.fabric.util.multiplyTransformMatrices(this.straightenAnchor.calcTransformMatrix(),t.data.relationToCanvas),r=fe.fabric.util.qrDecompose(n);t.set({flipX:!1,flipY:!1}),t.setPositionByOrigin({x:r.translateX,y:r.translateY},"center","center"),t.set(r),t.setCoords(),t.data.relationToCanvas=null}})}resetStraightenAnchor(){const t=this.straightenAnchor;t&&de().remove(t);const n=new fe.fabric.Rect({...oi,name:Fe.StraightenAnchor,visible:!1,width:D().original.width,height:D().original.height,data:{pixieInternal:!0,straightenAngle:0,rotateAngle:0}});de().add(n),n.viewportCenter()}}function E8(e){const t=bM(e);D().editor.fabric=t,se.setState({fabric:t}),D().editor.tools={canvas:new wM,objects:new TM,zoom:new xM,history:new MM,filter:new RM,resize:new zM,crop:new WM,merge:new IM,shape:new UM,frame:new KM,text:new qM,draw:new t8,transform:new k8,import:new v8,watermark:new x8,export:new _8,corners:new S8}}function l2(e,t){const n=new ResizeObserver(r=>{const i=r[0].contentRect;t({width:i.width,height:i.height})});return e.current&&n.observe(e.current),()=>{e.current&&n.unobserve(e.current)}}function c2(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}const u2="flex flex-shrink-0 items-center justify-between px-12 py-[9px] w-full h-[54px]",h2={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,position:"absolute"},transition:{type:"tween",duration:.15}};function qp(e,{padding:t,equalWidth:n,variant:r}={}){switch(e){case"2xs":return r==="link"?"text-xs":`text-xs h-24 ${n?"w-24":t||"px-10"}`;case"xs":return r==="link"?"text-xs":`text-xs h-30 ${n?"w-30":t||"px-14"}`;case"sm":return r==="link"?"text-sm":`text-sm h-36 ${n?"w-36":t||"px-18"}`;case"md":return r==="link"?"text-base":`text-base h-42 ${n?"w-42":t||"px-22"}`;case"lg":return r==="link"?"text-lg":`text-base h-50 ${n?"w-50":t||"px-26"}`;case"xl":return r==="link"?"text-xl":`text-lg h-60 ${n?"w-60":t||"px-32"}`;default:return e||""}}function T8(e){const{variant:t,shadow:n,whitespace:r="whitespace-nowrap",display:i="inline-flex"}=e,s={...e,border:e.border||"border"};let d=[];return t==="outline"?d=O8(s):t==="text"?d=P8(s):t==="flat"||t==="raised"?d=A8(s):t==="link"&&(d=D8(s)),[...d,n||t==="raised"&&"shadow-md",r,i,t&&"align-middle flex-shrink-0 items-center transition-button duration-200","select-none appearance-none no-underline outline-none disabled:pointer-events-none disabled:cursor-default"]}function O8({color:e,border:t}){const n="disabled:text-disabled disabled:bg-transparent disabled:border-disabled-bg";switch(e){case"primary":return[`text-primary bg-transparent ${t} border-primary/50`,"hover:bg-primary/hover hover:border-primary",n];case"danger":return[`text-danger bg-transparent ${t} border-danger/50`,"hover:bg-danger/4 hover:border-danger",n];case"positive":return[`text-positive bg-transparent ${t} border-positive/50`,"hover:bg-positive/4 hover:border-positive",n];case"paper":return[`text bg-paper ${t}`,"hover:bg-hover",n];case"white":return["text-white bg-transparent border border-white","hover:bg-white/20","disabled:text-white/70 disabled:border-white/70 disabled:bg-transparent"];default:return[`bg-transparent ${t}`,"hover:bg-hover",n]}}function P8({color:e}){const t="disabled:text-disabled disabled:bg-transparent";switch(e){case"primary":return["text-primary bg-transparent border-transparent","hover:bg-primary/4",t];case"danger":return["text-danger bg-transparent border-transparent","hover:bg-danger/4",t];case"positive":return["text-positive bg-transparent border-transparent","hover:bg-positive/4",t];case"white":return["text-white bg-transparent border-transparent","hover:bg-white/20","disabled:text-white/70 disabled:bg-transparent"];default:return["bg-transparent border-transparent","hover:bg-hover",t]}}function D8({color:e}){switch(e){case"primary":return["text-primary","hover:underline","disabled:text-disabled"];case"danger":return["text-danger","hover:underline","disabled:text-disabled"];default:return["text-main","hover:underline","disabled:text-disabled"]}}function A8({color:e,border:t}){const n="disabled:text-disabled disabled:bg-disabled disabled:border-transparent disabled:shadow-none";switch(e){case"primary":return[`text-on-primary bg-primary ${t} border-primary`,"hover:bg-primary-dark hover:border-primary-dark",n];case"danger":return[`text-white bg-danger ${t} border-danger`,"hover:bg-danger/90 hover:border-danger/90",n];case"chip":return[`text-main bg-chip ${t} border-chip`,"hover:bg-chip/90 hover:border-chip/90",n];case"paper":return[`text-main bg-paper ${t} border-paper`,"hover:bg-paper/90 hover:border-paper/90",n];case"white":return[`text-black bg-white ${t} border-white`,"hover:bg-white",n];default:return[`bg ${t} border-background`,"hover:bg-hover",n]}}function Lt(e){return e&&(t=>{t.currentTarget.contains(t.target)&&e(t)})}const rr=E.forwardRef((e,t)=>{const{children:n,color:r=null,variant:i,radius:s,shadow:d,whitespace:a,justify:o="justify-center",className:c,href:f,form:l,border:h,elementType:u,to:p,relative:m,replace:g,end:v,display:y,type:b="button",onClick:x,onPointerDown:C,onPointerUp:_,onKeyDown:S,...T}=e,I=u||(f?"a":"button"),F=I==="a";return w.jsx(I,{ref:t,form:F?void 0:l,href:f,to:p,relative:m,type:F?void 0:b,replace:g,end:v,onPointerDown:Lt(C),onPointerUp:Lt(_),onClick:Lt(x),onKeyDown:Lt(S),className:ce("focus-visible:ring",T8({variant:i,color:r,border:h,whitespace:a,display:y}),s,o,c),...T,children:n})}),xt=he.forwardRef(({children:e,startIcon:t,endIcon:n,size:r="sm",sizeClassName:i,className:s,equalWidth:d=!1,radius:a="rounded-button",variant:o="text",disabled:c,elementType:f,to:l,replace:h,href:u,download:p,...m},g)=>{const v=ce("font-semibold",i||qp(r,{equalWidth:d,variant:o}),s);return w.jsxs(rr,{className:v,ref:g,radius:a,variant:o,disabled:c,to:c?void 0:l,href:c?void 0:u,download:c?void 0:p,elementType:c?void 0:f,replace:c?void 0:h,...m,children:[t&&w.jsx(f2,{position:"start",icon:t,size:r}),e,n&&w.jsx(f2,{position:"end",icon:n,size:r})]})});function f2({icon:e,position:t,size:n}){const r=ce("m-auto",{"-ml-4 mr-8":t==="start","-mr-4 ml-8":t==="end"},e.props.className);return he.cloneElement(e,{className:r,size:n})}const d2=E.createContext(null);function Zp(){return E.useContext(d2)}const Qp=be(w.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckOutlined"),M8=he.forwardRef((e,t)=>{let{startIcon:n,capitalizeFirst:r,children:i,description:s,endIcon:d,endSection:a,isDisabled:o,isActive:c,isSelected:f,showCheckmark:l,elementType:h="div",radius:u,padding:p,...m}=e;!n&&l&&(n=w.jsx(Qp,{size:"sm",className:ce("text-primary",!f&&"invisible")}));const g=ce("icon-sm rounded overflow-hidden flex-shrink-0",!o&&"text-muted"),v=ce(!o&&"text-muted"),y=h;return w.jsxs(y,{...m,"aria-disabled":o,className:j8(e),ref:t,children:[n&&w.jsx("div",{className:g,children:n}),w.jsxs("div",{className:ce("min-w-auto mr-auto w-full overflow-hidden overflow-ellipsis",r&&"first-letter:capitalize"),children:[i,s&&w.jsx("div",{className:ce("mt-4 whitespace-normal text-xs",o?"text-disabled":"text-muted"),children:s})]}),(d||a)&&w.jsx("div",{className:d?g:v,children:d||a})]})});function j8({className:e,isSelected:t,isActive:n,isDisabled:r,showCheckmark:i,endIcon:s,endSection:d,radius:a,padding:o}){let c="";r?c="text-disabled pointer-events-none":t?n?c="bg-primary/focus":c="bg-primary/selected hover:bg-primary/focus":n?c="hover:bg-fg-base/15 bg-focus":c="hover:bg-hover";let f;return o?f=o:i?s||d?f="pl-8 pr-8 py-8":f="pl-8 pr-24 py-8":f="px-20 py-8",ce("w-full select-none outline-none cursor-pointer","text-sm truncate flex items-center gap-10",!r&&"text-main",f,c,e,a)}function lu({children:e,value:t,startIcon:n,endIcon:r,endSection:i,description:s,capitalizeFirst:d,textLabel:a,isDisabled:o,onSelected:c,onClick:f,...l}){var F;const{collection:h,showCheckmark:u,virtualFocus:p,listboxId:m,role:g,listItemsRef:v,handleItemSelection:y,state:{selectedValues:b,activeIndex:x,setActiveIndex:C}}=Zp(),_=b.includes(t),S=(F=h.get(t))==null?void 0:F.index,T=x===S;if(S==null)return null;const I=T&&!o?-1:0;return w.jsx(M8,{...l,onFocus:()=>{p||C(S)},onPointerEnter:$=>{C(S),p||$.currentTarget.focus()},onPointerDown:$=>{p&&$.preventDefault()},onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),y(t),c==null||c())},onClick:$=>{y(t),c==null||c(),f==null||f($)},ref:$=>v.current[S]=$,id:`${m}-${S}`,role:g==="menu"?"menuitem":"option",tabIndex:p?void 0:I,"aria-selected":T&&_,showCheckmark:u,isDisabled:o,isActive:T,isSelected:_,startIcon:n,description:s,endIcon:r,endSection:i,capitalizeFirst:d,"data-value":t,children:e})}var p2={exports:{}};(function(e){(function(){var t=Object.assign;typeof t!="function"&&(t=function(){var i=arguments,s=arguments[0];if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var d=1;d<i.length;d++)if(i[d]&&typeof i[d]=="object")for(var a in i[d])s[a]=i[d][a];return s});function n(i){var s=i+"",d=s.indexOf("...");return d>=0&&(d<s.indexOf(")")||s.indexOf("arguments")>=0)}function r(i,s){s||(s={});var d=s.vargs||n(i),a=Object.create(null),o=[],c=[],f,l=new WeakMap,h=function(b,x,C){return setTimeout(function(){if(C){x.splice(b,1),C.splice(b,1);return}x instanceof WeakMap?x.delete(b):delete x[b]},s.maxAge)},u=s.maxAge>0&&s.maxAge<1/0?h:0,p=s.equals?s.equals:function(b,x){return b===x},m=s.maxArgs,g=s.serializer,v,y;return i.length===1&&!s.equals&&!d?(v=(function(b){var x=typeof b;if(!g&&(x==="object"&&b||x==="function")){var C;return l.get(b)||(!u||u(b,l),l.set(b,C=i.call(this,b)),C)}var _=x==="number"||x==="boolean"||b==null?b:x==="string"?JSON.stringify(b):g(b);return a[_]||(!u||u(_,a),a[_]=i.call(this,b))}).bind(this),y=1):v=(function(){var b=arguments.length;if(!b&&f!=null)return c[f];var x=m||b,C;for(C=o.length-1;C>=0;C--)if(!(!m&&o[C].length!==x)){for(var _=x-1;_>=0&&p(o[C][_],arguments[_]);_--)if(_===0)return c[C]}return C=o.length-(C+1),!b&&f==null&&(f=C),!u||u(C,c,o),c[C]=i.apply(this,o[C]=arguments)}).bind(this),v.clear=function(){l=new WeakMap,a=Object.create(null),o=[],c=[],f=void 0},v.keys=function(){return y?null:o.slice()},v.values=function(){return y?null:c.slice()},v.keyValues=function(){return y?{primitives:t({},a),objects:l}:null},v}e.exports=r,typeof window<"u"&&(window.nanomemoize=r)}).call(Sn)})(p2);var I8=p2.exports;const ya=kn(I8);function F8({children:e,label:t,index:n}){const r=E.useId();return w.jsxs("div",{role:"group",className:ce(n!==0&&"border-t my-4"),"aria-labelledby":t?`be-select-${r}`:void 0,children:[t&&w.jsx("div",{className:"block uppercase text-muted text-xs px-16 py-10",role:"presentation",id:`be-select-${r}`,"aria-hidden":"true",children:t}),e]})}const R8=ya(({maxItems:e,children:t,items:n,inputValue:r})=>{let i=z8({children:t,items:n}),s=L8({collection:i,inputValue:r});return e&&(i=new Map([...i.entries()].slice(0,e)),s=new Map([...s.entries()].slice(0,e))),{collection:i,filteredCollection:s}}),L8=ya(({collection:e,inputValue:t})=>{let n=new Map;const r=t?`${t}`.toLowerCase().trim():"";if(!r)n=e;else{let i=0;e.forEach((s,d)=>{(s.item?JSON.stringify(s.item):s.textLabel).toLowerCase().trim().includes(r)&&n.set(d,{...s,index:i++})})}return n}),z8=ya(({children:e,items:t})=>{let n;t&&typeof e=="function"?n=t.map(d=>e(d)):n=e;const r=new Map;let i=0;const s=(d,a,o,c)=>{const f=i++,l=a?t==null?void 0:t[o].items[c]:t==null?void 0:t[f];r.set(d.props.value,{index:f,element:d,textLabel:B8(d),item:l,section:a,isDisabled:d.props.isDisabled,value:d.props.value})};return E.Children.forEach(n,(d,a)=>{E.isValidElement(d)&&(d.type===F8?E.Children.forEach(d.props.children,(o,c)=>{s(o,d,a,c)}):s(d))}),r});function B8(e){var n;const t=e.props.children;return e.props.textLabel?e.props.textLabel:(n=t==null?void 0:t.props)!=null&&n.message?t.props.message:`${t}`||""}const jn=Math.min,Qt=Math.max,cu=Math.round,uu=Math.floor,$r=e=>({x:e,y:e}),N8={left:"right",right:"left",bottom:"top",top:"bottom"},$8={start:"end",end:"start"};function Jp(e,t,n){return Qt(e,jn(t,n))}function Vo(e,t){return typeof e=="function"?e(t):e}function Vr(e){return e.split("-")[0]}function Ho(e){return e.split("-")[1]}function g2(e){return e==="x"?"y":"x"}function eg(e){return e==="y"?"height":"width"}function ba(e){return["top","bottom"].includes(Vr(e))?"y":"x"}function tg(e){return g2(ba(e))}function V8(e,t,n){n===void 0&&(n=!1);const r=Ho(e),i=tg(e),s=eg(i);let d=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(d=hu(d)),[d,hu(d)]}function H8(e){const t=hu(e);return[ng(e),t,ng(t)]}function ng(e){return e.replace(/start|end/g,t=>$8[t])}function W8(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:d;default:return[]}}function U8(e,t,n,r){const i=Ho(e);let s=W8(Vr(e),n==="start",r);return i&&(s=s.map(d=>d+"-"+i),t&&(s=s.concat(s.map(ng)))),s}function hu(e){return e.replace(/left|right|bottom|top/g,t=>N8[t])}function Y8(e){return{top:0,right:0,bottom:0,left:0,...e}}function m2(e){return typeof e!="number"?Y8(e):{top:e,right:e,bottom:e,left:e}}function fu(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function v2(e,t,n){let{reference:r,floating:i}=e;const s=ba(t),d=tg(t),a=eg(d),o=Vr(t),c=s==="y",f=r.x+r.width/2-i.width/2,l=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let u;switch(o){case"top":u={x:f,y:r.y-i.height};break;case"bottom":u={x:f,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:l};break;case"left":u={x:r.x-i.width,y:l};break;default:u={x:r.x,y:r.y}}switch(Ho(t)){case"start":u[d]-=h*(n&&c?-1:1);break;case"end":u[d]+=h*(n&&c?-1:1);break}return u}const X8=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:d}=n,a=s.filter(Boolean),o=await(d.isRTL==null?void 0:d.isRTL(t));let c=await d.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:l}=v2(c,r,o),h=r,u={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:b,data:x,reset:C}=await v({x:f,y:l,initialPlacement:r,placement:h,strategy:i,middlewareData:u,rects:c,platform:d,elements:{reference:e,floating:t}});f=y??f,l=b??l,u={...u,[g]:{...u[g],...x}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:f,y:l}=v2(c,h,o)),m=-1)}return{x:f,y:l,placement:h,strategy:i,middlewareData:u}};async function rg(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:d,elements:a,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:l="floating",altBoundary:h=!1,padding:u=0}=Vo(t,e),p=m2(u),g=a[h?l==="floating"?"reference":"floating":l],v=fu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:o})),y=l==="floating"?{x:r,y:i,width:d.floating.width,height:d.floating.height}:d.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},C=fu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:o}):y);return{top:(v.top-C.top+p.top)/x.y,bottom:(C.bottom-v.bottom+p.bottom)/x.y,left:(v.left-C.left+p.left)/x.x,right:(C.right-v.right+p.right)/x.x}}const G8=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:d,elements:a,middlewareData:o}=t,{element:c,padding:f=0}=Vo(e,t)||{};if(c==null)return{};const l=m2(f),h={x:n,y:r},u=tg(i),p=eg(u),m=await d.getDimensions(c),g=u==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[u]-h[u]-s.floating[p],C=h[u]-s.reference[u],_=await(d.getOffsetParent==null?void 0:d.getOffsetParent(c));let S=_?_[b]:0;(!S||!await(d.isElement==null?void 0:d.isElement(_)))&&(S=a.floating[b]||s.floating[p]);const T=x/2-C/2,I=S/2-m[p]/2-1,F=jn(l[v],I),$=jn(l[y],I),G=F,ne=S-m[p]-$,Y=S/2-m[p]/2+T,Q=Jp(G,Y,ne),Z=!o.arrow&&Ho(i)!=null&&Y!==Q&&s.reference[p]/2-(Y<G?F:$)-m[p]/2<0,ie=Z?Y<G?Y-G:Y-ne:0;return{[u]:h[u]+ie,data:{[u]:Q,centerOffset:Y-Q-ie,...Z&&{alignmentOffset:ie}},reset:Z}}}),K8=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:d,initialPlacement:a,platform:o,elements:c}=t,{mainAxis:f=!0,crossAxis:l=!0,fallbackPlacements:h,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Vo(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Vr(i),y=Vr(a)===a,b=await(o.isRTL==null?void 0:o.isRTL(c.floating)),x=h||(y||!m?[hu(a)]:H8(a));!h&&p!=="none"&&x.push(...U8(a,m,p,b));const C=[a,...x],_=await rg(t,g),S=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&S.push(_[v]),l){const G=V8(i,d,b);S.push(_[G[0]],_[G[1]])}if(T=[...T,{placement:i,overflows:S}],!S.every(G=>G<=0)){var I,F;const G=(((I=s.flip)==null?void 0:I.index)||0)+1,ne=C[G];if(ne)return{data:{index:G,overflows:T},reset:{placement:ne}};let Y=(F=T.filter(Q=>Q.overflows[0]<=0).sort((Q,Z)=>Q.overflows[1]-Z.overflows[1])[0])==null?void 0:F.placement;if(!Y)switch(u){case"bestFit":{var $;const Q=($=T.map(Z=>[Z.placement,Z.overflows.filter(ie=>ie>0).reduce((ie,V)=>ie+V,0)]).sort((Z,ie)=>Z[1]-ie[1])[0])==null?void 0:$[0];Q&&(Y=Q);break}case"initialPlacement":Y=a;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};async function q8(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),d=Vr(n),a=Ho(n),o=ba(n)==="y",c=["left","top"].includes(d)?-1:1,f=s&&o?-1:1,l=Vo(t,e);let{mainAxis:h,crossAxis:u,alignmentAxis:p}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return a&&typeof p=="number"&&(u=a==="end"?p*-1:p),o?{x:u*f,y:h*c}:{x:h*c,y:u*f}}const Z8=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:d,middlewareData:a}=t,o=await q8(t,e);return d===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+o.x,y:s+o.y,data:{...o,placement:d}}}}},Q8=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:d=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...o}=Vo(e,t),c={x:n,y:r},f=await rg(t,o),l=ba(Vr(i)),h=g2(l);let u=c[h],p=c[l];if(s){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=u+f[g],b=u-f[v];u=Jp(y,u,b)}if(d){const g=l==="y"?"top":"left",v=l==="y"?"bottom":"right",y=p+f[g],b=p-f[v];p=Jp(y,p,b)}const m=a.fn({...t,[h]:u,[l]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},J8=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:d=()=>{},...a}=Vo(e,t),o=await rg(t,a),c=Vr(n),f=Ho(n),l=ba(n)==="y",{width:h,height:u}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=f===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=f==="end"?"top":"bottom");const g=u-o.top-o.bottom,v=h-o.left-o.right,y=jn(u-o[p],g),b=jn(h-o[m],v),x=!t.middlewareData.shift;let C=y,_=b;if(l?_=f||x?jn(b,v):v:C=f||x?jn(y,g):g,x&&!f){const T=Qt(o.left,0),I=Qt(o.right,0),F=Qt(o.top,0),$=Qt(o.bottom,0);l?_=h-2*(T!==0||I!==0?T+I:Qt(o.left,o.right)):C=u-2*(F!==0||$!==0?F+$:Qt(o.top,o.bottom))}await d({...t,availableWidth:_,availableHeight:C});const S=await i.getDimensions(s.floating);return h!==S.width||u!==S.height?{reset:{rects:!0}}:{}}}};function Wo(e){return y2(e)?(e.nodeName||"").toLowerCase():"#document"}function Jt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ir(e){var t;return(t=(y2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function y2(e){return e instanceof Node||e instanceof Jt(e).Node}function In(e){return e instanceof Element||e instanceof Jt(e).Element}function Fn(e){return e instanceof HTMLElement||e instanceof Jt(e).HTMLElement}function b2(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jt(e).ShadowRoot}function xa(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Cn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function ej(e){return["table","td","th"].includes(Wo(e))}function ig(e){const t=og(),n=Cn(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tj(e){let t=Hr(e);for(;Fn(t)&&!Uo(t);){if(ig(t))return t;t=Hr(t)}return null}function og(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uo(e){return["html","body","#document"].includes(Wo(e))}function Cn(e){return Jt(e).getComputedStyle(e)}function du(e){return In(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Hr(e){if(Wo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||b2(e)&&e.host||ir(e);return b2(t)?t.host:t}function x2(e){const t=Hr(e);return Uo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fn(t)&&xa(t)?t:x2(t)}function wa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=x2(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),d=Jt(i);return s?t.concat(d,d.visualViewport||[],xa(i)?i:[],d.frameElement&&n?wa(d.frameElement):[]):t.concat(i,wa(i,[],n))}function w2(e){const t=Cn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fn(e),s=i?e.offsetWidth:n,d=i?e.offsetHeight:r,a=cu(n)!==s||cu(r)!==d;return a&&(n=s,r=d),{width:n,height:r,$:a}}function sg(e){return In(e)?e:e.contextElement}function Yo(e){const t=sg(e);if(!Fn(t))return $r(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=w2(t);let d=(s?cu(n.width):n.width)/r,a=(s?cu(n.height):n.height)/i;return(!d||!Number.isFinite(d))&&(d=1),(!a||!Number.isFinite(a))&&(a=1),{x:d,y:a}}const nj=$r(0);function C2(e){const t=Jt(e);return!og()||!t.visualViewport?nj:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rj(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jt(e)?!1:t}function Di(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=sg(e);let d=$r(1);t&&(r?In(r)&&(d=Yo(r)):d=Yo(e));const a=rj(s,n,r)?C2(s):$r(0);let o=(i.left+a.x)/d.x,c=(i.top+a.y)/d.y,f=i.width/d.x,l=i.height/d.y;if(s){const h=Jt(s),u=r&&In(r)?Jt(r):r;let p=h,m=p.frameElement;for(;m&&r&&u!==p;){const g=Yo(m),v=m.getBoundingClientRect(),y=Cn(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,x=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;o*=g.x,c*=g.y,f*=g.x,l*=g.y,o+=b,c+=x,p=Jt(m),m=p.frameElement}}return fu({width:f,height:l,x:o,y:c})}const ij=[":popover-open",":modal"];function ag(e){return ij.some(t=>{try{return e.matches(t)}catch{return!1}})}function oj(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",d=ir(r),a=t?ag(t.floating):!1;if(r===d||a&&s)return n;let o={scrollLeft:0,scrollTop:0},c=$r(1);const f=$r(0),l=Fn(r);if((l||!l&&!s)&&((Wo(r)!=="body"||xa(d))&&(o=du(r)),Fn(r))){const h=Di(r);c=Yo(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-o.scrollLeft*c.x+f.x,y:n.y*c.y-o.scrollTop*c.y+f.y}}function sj(e){return Array.from(e.getClientRects())}function _2(e){return Di(ir(e)).left+du(e).scrollLeft}function aj(e){const t=ir(e),n=du(e),r=e.ownerDocument.body,i=Qt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Qt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+_2(e);const a=-n.scrollTop;return Cn(r).direction==="rtl"&&(d+=Qt(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:d,y:a}}function lj(e,t){const n=Jt(e),r=ir(e),i=n.visualViewport;let s=r.clientWidth,d=r.clientHeight,a=0,o=0;if(i){s=i.width,d=i.height;const c=og();(!c||c&&t==="fixed")&&(a=i.offsetLeft,o=i.offsetTop)}return{width:s,height:d,x:a,y:o}}function cj(e,t){const n=Di(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Fn(e)?Yo(e):$r(1),d=e.clientWidth*s.x,a=e.clientHeight*s.y,o=i*s.x,c=r*s.y;return{width:d,height:a,x:o,y:c}}function S2(e,t,n){let r;if(t==="viewport")r=lj(e,n);else if(t==="document")r=aj(ir(e));else if(In(t))r=cj(t,n);else{const i=C2(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return fu(r)}function k2(e,t){const n=Hr(e);return n===t||!In(n)||Uo(n)?!1:Cn(n).position==="fixed"||k2(n,t)}function uj(e,t){const n=t.get(e);if(n)return n;let r=wa(e,[],!1).filter(a=>In(a)&&Wo(a)!=="body"),i=null;const s=Cn(e).position==="fixed";let d=s?Hr(e):e;for(;In(d)&&!Uo(d);){const a=Cn(d),o=ig(d);!o&&a.position==="fixed"&&(i=null),(s?!o&&!i:!o&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||xa(d)&&!o&&k2(e,d))?r=r.filter(f=>f!==d):i=a,d=Hr(d)}return t.set(e,r),r}function hj(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const d=[...n==="clippingAncestors"?ag(t)?[]:uj(t,this._c):[].concat(n),r],a=d[0],o=d.reduce((c,f)=>{const l=S2(t,f,i);return c.top=Qt(l.top,c.top),c.right=jn(l.right,c.right),c.bottom=jn(l.bottom,c.bottom),c.left=Qt(l.left,c.left),c},S2(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function fj(e){const{width:t,height:n}=w2(e);return{width:t,height:n}}function dj(e,t,n){const r=Fn(t),i=ir(t),s=n==="fixed",d=Di(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const o=$r(0);if(r||!r&&!s)if((Wo(t)!=="body"||xa(i))&&(a=du(t)),r){const l=Di(t,!0,s,t);o.x=l.x+t.clientLeft,o.y=l.y+t.clientTop}else i&&(o.x=_2(i));const c=d.left+a.scrollLeft-o.x,f=d.top+a.scrollTop-o.y;return{x:c,y:f,width:d.width,height:d.height}}function lg(e){return Cn(e).position==="static"}function E2(e,t){return!Fn(e)||Cn(e).position==="fixed"?null:t?t(e):e.offsetParent}function T2(e,t){const n=Jt(e);if(ag(e))return n;if(!Fn(e)){let i=Hr(e);for(;i&&!Uo(i);){if(In(i)&&!lg(i))return i;i=Hr(i)}return n}let r=E2(e,t);for(;r&&ej(r)&&lg(r);)r=E2(r,t);return r&&Uo(r)&&lg(r)&&!ig(r)?n:r||tj(e)||n}const pj=async function(e){const t=this.getOffsetParent||T2,n=this.getDimensions,r=await n(e.floating);return{reference:dj(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gj(e){return Cn(e).direction==="rtl"}const mj={convertOffsetParentRelativeRectToViewportRelativeRect:oj,getDocumentElement:ir,getClippingRect:hj,getOffsetParent:T2,getElementRects:pj,getClientRects:sj,getDimensions:fj,getScale:Yo,isElement:In,isRTL:gj};function vj(e,t){let n=null,r;const i=ir(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function d(a,o){a===void 0&&(a=!1),o===void 0&&(o=1),s();const{left:c,top:f,width:l,height:h}=e.getBoundingClientRect();if(a||t(),!l||!h)return;const u=uu(f),p=uu(i.clientWidth-(c+l)),m=uu(i.clientHeight-(f+h)),g=uu(c),y={rootMargin:-u+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Qt(0,jn(1,o))||1};let b=!0;function x(C){const _=C[0].intersectionRatio;if(_!==o){if(!b)return d();_?d(!1,_):r=setTimeout(()=>{d(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(x,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,y)}n.observe(e)}return d(!0),s}function yj(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:o=!1}=r,c=sg(e),f=i||s?[...c?wa(c):[],...wa(t)]:[];f.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const l=c&&a?vj(c,n):null;let h=-1,u=null;d&&(u=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&u&&(u.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=u)==null||b.observe(t)})),n()}),c&&!o&&u.observe(c),u.observe(t));let p,m=o?Di(e):null;o&&g();function g(){const v=Di(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;f.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),l==null||l(),(v=u)==null||v.disconnect(),u=null,o&&cancelAnimationFrame(p)}}const bj=Z8,xj=Q8,wj=K8,Cj=J8,O2=G8,_j=(e,t,n)=>{const r=new Map,i={platform:mj,...n},s={...i.platform,_c:r};return X8(e,t,{...i,platform:s})},Sj=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?O2({element:r.current,padding:i}).fn(n):{}:r?O2({element:r,padding:i}).fn(n):{}}}};var pu=typeof document<"u"?E.useLayoutEffect:E.useEffect;function gu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!gu(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!gu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function P2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function D2(e,t){const n=P2(e);return Math.round(t*n)/n}function A2(e){const t=E.useRef(e);return pu(()=>{t.current=e}),t}function kj(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:d}={},transform:a=!0,whileElementsMounted:o,open:c}=e,[f,l]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,u]=E.useState(r);gu(h,r)||u(r);const[p,m]=E.useState(null),[g,v]=E.useState(null),y=E.useCallback(Z=>{Z!=_.current&&(_.current=Z,m(Z))},[m]),b=E.useCallback(Z=>{Z!==S.current&&(S.current=Z,v(Z))},[v]),x=s||p,C=d||g,_=E.useRef(null),S=E.useRef(null),T=E.useRef(f),I=A2(o),F=A2(i),$=E.useCallback(()=>{if(!_.current||!S.current)return;const Z={placement:t,strategy:n,middleware:h};F.current&&(Z.platform=F.current),_j(_.current,S.current,Z).then(ie=>{const V={...ie,isPositioned:!0};G.current&&!gu(T.current,V)&&(T.current=V,jo.flushSync(()=>{l(V)}))})},[h,t,n,F]);pu(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,l(Z=>({...Z,isPositioned:!1})))},[c]);const G=E.useRef(!1);pu(()=>(G.current=!0,()=>{G.current=!1}),[]),pu(()=>{if(x&&(_.current=x),C&&(S.current=C),x&&C){if(I.current)return I.current(x,C,$);$()}},[x,C,$,I]);const ne=E.useMemo(()=>({reference:_,floating:S,setReference:y,setFloating:b}),[y,b]),Y=E.useMemo(()=>({reference:x,floating:C}),[x,C]),Q=E.useMemo(()=>{const Z={position:n,left:0,top:0};if(!Y.floating)return Z;const ie=D2(Y.floating,f.x),V=D2(Y.floating,f.y);return a?{...Z,transform:"translate("+ie+"px, "+V+"px)",...P2(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:V}},[n,a,Y.floating,f.x,f.y]);return E.useMemo(()=>({...f,update:$,refs:ne,elements:Y,floatingStyles:Q}),[f,$,ne,Y,Q])}function Ej(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function cg({floatingWidth:e,ref:t,disablePositioning:n=!1,placement:r="bottom",offset:i=2,showArrow:s=!1,maxHeight:d,shiftCrossAxis:a=!0,fallbackPlacements:o}){const c=E.useRef(null),f={placement:r,strategy:"fixed"};n||(f.whileElementsMounted=yj,f.middleware=[bj(i),xj({padding:16,crossAxis:a,mainAxis:!0}),wj({padding:16,fallbackPlacements:o}),Cj({apply({rects:v,availableHeight:y,availableWidth:b,elements:x}){e==="matchTrigger"&&d!=null?Object.assign(x.floating.style,{width:`${v.reference.width}px`,maxWidth:`${b}`,maxHeight:`${Math.min(y,d)}px`}):d!=null&&Object.assign(x.floating.style,{maxHeight:`${Math.min(y,d)}px`})},padding:16})],s&&f.middleware.push(Sj({element:c})));const l=kj(f),h=E.useMemo(()=>Ej([t,l.refs.setReference]),[l.refs.setReference,t]),{x:u,y:p}=l.middlewareData.arrow||{},m={top:"bottom",right:"left",bottom:"top",left:"right"}[l.placement.split("-")[0]],g={left:u,top:p,right:"",bottom:"",[m]:"-4px"};return{...l,reference:h,arrowRef:c,arrowStyle:g}}function M2(e,t){const{children:n,items:r,role:i="listbox",virtualFocus:s,focusLoopingMode:d="stay",autoFocusFirstItem:a=!0,onItemSelected:o,clearInputOnItemSelection:c,blurReferenceOnItemSelection:f,floatingWidth:l="matchTrigger",floatingMinWidth:h,floatingMaxHeight:u,offset:p,placement:m,showCheckmark:g,showEmptyMessage:v,maxItems:y,isAsync:b,allowCustomValue:x,clearSelectionOnInputClear:C}=e,_=e.selectionMode||"none",T=`${E.useId()}-listbox`,[I,F]=Nr(e.inputValue,e.defaultInputValue||"",e.onInputValueChange),[$,G]=E.useState("all"),ne=R8({children:n,items:r,inputValue:b?void 0:I,maxItems:y}),Y=$==="all"?ne.collection:ne.filteredCollection,Q=E.useRef([]),Z=E.useMemo(()=>[...Y.values()].map(z=>z.isDisabled?null:z.textLabel),[Y]),{selectedValues:ie,selectValues:V}=Oj(e),[k,P]=Nr(e.isOpen,e.defaultIsOpen,e.onOpenChange),[A,j]=E.useState(null),H=cg({floatingWidth:l,ref:t,placement:m,offset:p,maxHeight:u??420,shiftCrossAxis:!s}),{refs:M,strategy:O,x:R,y:B}=H,U=_==="none"?void 0:Y.get(ie[0]),W=_==="none"||U==null?void 0:U.index,ee=z=>{if(_!=="none"){const K=[...Y.values()][z];K&&V(K.value)}},re=E.useCallback((z,K)=>{var le,xe;const te=[...Y.values()],N=!te.find(me=>!me.isDisabled),q=Y.size-1;if(K==null||!Y.size||K>q||K<0||N){j(null);return}K=Tj(te,K,d,z),j(K),K!=null&&(s?(le=Q.current[K])==null||le.scrollIntoView({block:"nearest"}):(xe=Q.current[K])==null||xe.focus())},[Y,s,d]),ue=E.useCallback(z=>{F(z.target.value),G(z.target.value.trim()?"filtered":"all"),z.target.value?P(!0):C&&V(""),a&&A==null?re("increment",0):j(null)},[F,P,G,V,C,re,a,A]);return{handleItemSelection:z=>{const K=M.reference.current;_!=="none"?V(z):K&&"focus"in K&&K.focus(),s&&(F(c?"":`${z}`),f&&K&&"blur"in K&&K.blur()),G("all"),P(!1),o==null||o(z),j(null)},onInputChange:ue,focusLoopingMode:d,floatingWidth:l,floatingMinWidth:h,floatingMaxHeight:u,showCheckmark:g,collection:Y,collections:ne,virtualFocus:s,focusItem:re,showEmptyMessage:v&&!!I,allowCustomValue:x,refs:M,reference:H.reference,floating:M.setFloating,positionStyle:{position:O,top:B??"",left:R??""},listContent:Z,listItemsRef:Q,listboxId:T,role:i,state:{activeIndex:A,setActiveIndex:j,selectedIndex:W,setSelectedIndex:ee,selectionMode:_,selectedValues:ie,selectValues:V,inputValue:I,setInputValue:F,isOpen:k,setIsOpen:P,setActiveCollection:G}}}function Tj(e,t,n,r){var s;const i=e.length-1;for(;(s=e[t])!=null&&s.isDisabled;)if(r==="increment"){if(t++,t>=i)if(n==="loop")t=0;else return n==="stay"?t-1:null}else if(t--,t<0)if(n==="loop")t=i;else return n==="stay"?t+1:null;return t}function Oj(e){const{selectionMode:t,allowEmptySelection:n}=e,r=t==="single"||t==="multiple",[i,s]=Nr(r?e.selectedValue:void 0,r?e.defaultSelectedValue:void 0,r?e.onSelectionChange:void 0),d=E.useMemo(()=>typeof i>"u"?[]:Array.isArray(i)?i:[i],[i]),a=E.useCallback(o=>{const c=Array.isArray(o)?o:[o];t==="single"?s(c[0]):c.forEach(f=>{const l=d.indexOf(f);l===-1?(d.push(f),s([...d])):(d.length>1||n)&&(d.splice(l,1),s([...d]))})},[n,d,t,s]);return{selectedValues:d,selectValues:a}}const Pj=768;function Dj(){return zp()||typeof window>"u"?kT().is_mobile_device??!1:window.screen.width<=Pj}let Ca=null,Aj=new Set,_a=new Map,Ai=!1,ug=!1;function hg(e,t){for(let n of Aj)n(e,t)}function Mj(e){return!(e.metaKey||!$w()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function mu(e){Ai=!0,Mj(e)&&(Ca="keyboard",hg("keyboard",e))}function hn(e){Ca="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(Ai=!0,hg("pointer",e))}function j2(e){vM(e)&&(Ai=!0,Ca="virtual")}function I2(e){e.target===window||e.target===document||(!Ai&&!ug&&(Ca="virtual",hg("virtual",e)),Ai=!1,ug=!1)}function F2(){Ai=!1,ug=!0}function R2(e){if(typeof window>"u"||_a.get(tu(e)))return;const t=tu(e),n=bt(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Ai=!0,r.apply(this,arguments)},n.addEventListener("keydown",mu,!0),n.addEventListener("keyup",mu,!0),n.addEventListener("click",j2,!0),t.addEventListener("focus",I2,!0),t.addEventListener("blur",F2,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",hn,!0),n.addEventListener("pointermove",hn,!0),n.addEventListener("pointerup",hn,!0)):(n.addEventListener("mousedown",hn,!0),n.addEventListener("mousemove",hn,!0),n.addEventListener("mouseup",hn,!0)),t.addEventListener("beforeunload",()=>{L2(e)},{once:!0}),_a.set(t,{focus:r})}const L2=(e,t)=>{const n=tu(e),r=bt(e);t&&r.removeEventListener("DOMContentLoaded",t),_a.has(n)&&(n.HTMLElement.prototype.focus=_a.get(n).focus,r.removeEventListener("keydown",mu,!0),r.removeEventListener("keyup",mu,!0),r.removeEventListener("click",j2,!0),n.removeEventListener("focus",I2,!0),n.removeEventListener("blur",F2,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",hn,!0),r.removeEventListener("pointermove",hn,!0),r.removeEventListener("pointerup",hn,!0)):(r.removeEventListener("mousedown",hn,!0),r.removeEventListener("mousemove",hn,!0),r.removeEventListener("mouseup",hn,!0)),_a.delete(n))};function jj(e){const t=bt(e);let n;return t.readyState!=="loading"?R2(e):(n=()=>{R2(e)},t.addEventListener("DOMContentLoaded",n)),()=>L2(e,n)}typeof document<"u"&&jj();function Ij(){return Ca}function Fj(e){const t=bt(e);if(Ij()==="virtual"){let n=t.activeElement;gM(()=>{t.activeElement===n&&e.isConnected&&Nw(e)})}else Nw(e)}function Rj(e){const t=tu(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i=n!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:s}=e.ownerDocument.defaultView;let{display:d,visibility:a}=s(e);i=d!=="none"&&a!=="hidden"&&a!=="collapse"}return i}function Lj(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function z2(e,t){return e.nodeName!=="#comment"&&Rj(e)&&Lj(e,t)&&(!e.parentElement||z2(e.parentElement,e))}const fg=he.createContext(null);let Ne=null;function vu(e){let{children:t,contain:n,restoreFocus:r,autoFocus:i}=e,s=E.useRef(null),d=E.useRef(null),a=E.useRef([]),{parentNode:o}=E.useContext(fg)||{},c=E.useMemo(()=>new mg({scopeRef:a}),[a]);qt(()=>{let h=o||Qe.root;if(Qe.getTreeNode(h.scopeRef)&&Ne&&!yu(Ne,h.scopeRef)){let u=Qe.getTreeNode(Ne);u&&(h=u)}h.addChild(c),Qe.addNode(c)},[c,o]),qt(()=>{let h=Qe.getTreeNode(a);h&&(h.contain=!!n)},[n]),qt(()=>{var h;let u=(h=s.current)===null||h===void 0?void 0:h.nextSibling,p=[];for(;u&&u!==d.current;)p.push(u),u=u.nextSibling;a.current=p},[t]),Wj(a,r,n),Vj(a,n),Yj(a,r,n),Hj(a,i),E.useEffect(()=>{const h=bt(a.current?a.current[0]:void 0).activeElement;let u=null;if(wt(h,a.current)){for(let p of Qe.traverse())p.scopeRef&&wt(h,p.scopeRef.current)&&(u=p);u===Qe.getTreeNode(a)&&(Ne=u.scopeRef)}},[a]),qt(()=>()=>{var h,u,p;let m=(p=(u=Qe.getTreeNode(a))===null||u===void 0||(h=u.parent)===null||h===void 0?void 0:h.scopeRef)!==null&&p!==void 0?p:null;(a===Ne||yu(a,Ne))&&(!m||Qe.getTreeNode(m))&&(Ne=m),Qe.removeTreeNode(a)},[a]);let f=E.useMemo(()=>Bj(a),[]),l=E.useMemo(()=>({focusManager:f,parentNode:c}),[c,f]);return he.createElement(fg.Provider,{value:l},he.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),t,he.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:d}))}function zj(){var e;return(e=E.useContext(fg))===null||e===void 0?void 0:e.focusManager}function Bj(e){return{focusNext(t={}){let n=e.current,{from:r,tabbable:i,wrap:s,accept:d}=t,a=r||bt(n[0]).activeElement,o=n[0].previousElementSibling,c=Mi(n),f=sr(c,{tabbable:i,accept:d},n);f.currentNode=wt(a,n)?a:o;let l=f.nextNode();return!l&&s&&(f.currentNode=o,l=f.nextNode()),l&&or(l,!0),l},focusPrevious(t={}){let n=e.current,{from:r,tabbable:i,wrap:s,accept:d}=t,a=r||bt(n[0]).activeElement,o=n[n.length-1].nextElementSibling,c=Mi(n),f=sr(c,{tabbable:i,accept:d},n);f.currentNode=wt(a,n)?a:o;let l=f.previousNode();return!l&&s&&(f.currentNode=o,l=f.previousNode()),l&&or(l,!0),l},focusFirst(t={}){let n=e.current,{tabbable:r,accept:i}=t,s=Mi(n),d=sr(s,{tabbable:r,accept:i},n);d.currentNode=n[0].previousElementSibling;let a=d.nextNode();return a&&or(a,!0),a},focusLast(t={}){let n=e.current,{tabbable:r,accept:i}=t,s=Mi(n),d=sr(s,{tabbable:r,accept:i},n);d.currentNode=n[n.length-1].nextElementSibling;let a=d.previousNode();return a&&or(a,!0),a}}}const dg=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],Nj=dg.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";dg.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const $j=dg.join(':not([hidden]):not([tabindex="-1"]),');function Mi(e){return e[0].parentElement}function Sa(e){let t=Qe.getTreeNode(Ne);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function Vj(e,t){let n=E.useRef(),r=E.useRef();qt(()=>{let i=e.current;if(!t){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const s=bt(i?i[0]:void 0);let d=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!Sa(e)||c.isComposing)return;let f=s.activeElement,l=e.current;if(!l||!wt(f,l))return;let h=Mi(l),u=sr(h,{tabbable:!0},l);if(!f)return;u.currentNode=f;let p=c.shiftKey?u.previousNode():u.nextNode();p||(u.currentNode=c.shiftKey?l[l.length-1].nextElementSibling:l[0].previousElementSibling,p=c.shiftKey?u.previousNode():u.nextNode()),c.preventDefault(),p&&or(p,!0)},a=c=>{(!Ne||yu(Ne,e))&&wt(c.target,e.current)?(Ne=e,n.current=c.target):Sa(e)&&!pg(c.target,e)?n.current?n.current.focus():Ne&&Ne.current&&bu(Ne.current):Sa(e)&&(n.current=c.target)},o=c=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{if(s.activeElement&&Sa(e)&&!pg(s.activeElement,e))if(Ne=e,s.body.contains(c.target)){var f;n.current=c.target,(f=n.current)===null||f===void 0||f.focus()}else Ne.current&&bu(Ne.current)})};return s.addEventListener("keydown",d,!1),s.addEventListener("focusin",a,!1),i==null||i.forEach(c=>c.addEventListener("focusin",a,!1)),i==null||i.forEach(c=>c.addEventListener("focusout",o,!1)),()=>{s.removeEventListener("keydown",d,!1),s.removeEventListener("focusin",a,!1),i==null||i.forEach(c=>c.removeEventListener("focusin",a,!1)),i==null||i.forEach(c=>c.removeEventListener("focusout",o,!1))}},[e,t]),qt(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function B2(e){return pg(e)}function wt(e,t){return!e||!t?!1:t.some(n=>n.contains(e))}function pg(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of Qe.traverse(Qe.getTreeNode(t)))if(n&&wt(e,n.current))return!0;return!1}function yu(e,t){var n;let r=(n=Qe.getTreeNode(t))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function or(e,t=!1){if(e!=null&&!t)try{Fj(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function bu(e,t=!0){let n=e[0].previousElementSibling,r=Mi(e),i=sr(r,{tabbable:t},e);i.currentNode=n;let s=i.nextNode();t&&!s&&(r=Mi(e),i=sr(r,{tabbable:!1},e),i.currentNode=n,s=i.nextNode()),or(s)}function Hj(e,t){const n=he.useRef(t);E.useEffect(()=>{if(n.current){Ne=e;const r=bt(e.current?e.current[0]:void 0);!wt(r.activeElement,Ne.current)&&e.current&&bu(e.current)}n.current=!1},[e])}function Wj(e,t,n){qt(()=>{if(t||n)return;let r=e.current;const i=bt(r?r[0]:void 0);let s=d=>{let a=d.target;wt(a,e.current)?Ne=e:B2(a)||(Ne=null)};return i.addEventListener("focusin",s,!1),r==null||r.forEach(d=>d.addEventListener("focusin",s,!1)),()=>{i.removeEventListener("focusin",s,!1),r==null||r.forEach(d=>d.removeEventListener("focusin",s,!1))}},[e,t,n])}function Uj(e){let t=Qe.getTreeNode(Ne);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function Yj(e,t,n){const r=E.useRef(typeof document<"u"?bt(e.current?e.current[0]:void 0).activeElement:null);qt(()=>{let i=e.current;const s=bt(i?i[0]:void 0);if(!t||n)return;let d=()=>{(!Ne||yu(Ne,e))&&wt(s.activeElement,e.current)&&(Ne=e)};return s.addEventListener("focusin",d,!1),i==null||i.forEach(a=>a.addEventListener("focusin",d,!1)),()=>{s.removeEventListener("focusin",d,!1),i==null||i.forEach(a=>a.removeEventListener("focusin",d,!1))}},[e,n]),qt(()=>{const i=bt(e.current?e.current[0]:void 0);if(!t)return;let s=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!Sa(e)||d.isComposing)return;let a=i.activeElement;if(!wt(a,e.current))return;let o=Qe.getTreeNode(e);if(!o)return;let c=o.nodeToRestore,f=sr(i.body,{tabbable:!0});f.currentNode=a;let l=d.shiftKey?f.previousNode():f.nextNode();if((!c||!i.body.contains(c)||c===i.body)&&(c=void 0,o.nodeToRestore=void 0),(!l||!wt(l,e.current))&&c){f.currentNode=c;do l=d.shiftKey?f.previousNode():f.nextNode();while(wt(l,e.current));d.preventDefault(),d.stopPropagation(),l?or(l,!0):B2(c)?or(c,!0):a.blur()}};return n||i.addEventListener("keydown",s,!0),()=>{n||i.removeEventListener("keydown",s,!0)}},[e,t,n]),qt(()=>{const i=bt(e.current?e.current[0]:void 0);if(!t)return;let s=Qe.getTreeNode(e);if(s){var d;return s.nodeToRestore=(d=r.current)!==null&&d!==void 0?d:void 0,()=>{let a=Qe.getTreeNode(e);if(!a)return;let o=a.nodeToRestore;if(t&&o&&(wt(i.activeElement,e.current)||i.activeElement===i.body&&Uj(e))){let c=Qe.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let f=c.getTreeNode(e);for(;f;){if(f.nodeToRestore&&f.nodeToRestore.isConnected){or(f.nodeToRestore);return}f=f.parent}for(f=c.getTreeNode(e);f;){if(f.scopeRef&&f.scopeRef.current&&Qe.getTreeNode(f.scopeRef)){bu(f.scopeRef.current,!0);return}f=f.parent}}})}}}},[e,t])}function sr(e,t,n){let r=t!=null&&t.tabbable?$j:Nj,i=bt(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var d;return!(t==null||(d=t.from)===null||d===void 0)&&d.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&z2(s)&&(!n||wt(s,n))&&(!(t!=null&&t.accept)||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(i.currentNode=t.from),i}class gg{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,n,r){let i=this.fastMap.get(n??null);if(!i)return;let s=new mg({scopeRef:t});i.addChild(s),s.parent=i,this.fastMap.set(t,s),r&&(s.nodeToRestore=r)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let n=this.fastMap.get(t);if(!n)return;let r=n.parent;for(let s of this.traverse())s!==n&&n.nodeToRestore&&s.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&wt(s.nodeToRestore,n.scopeRef.current)&&(s.nodeToRestore=n.nodeToRestore);let i=n.children;r&&(r.removeChild(n),i.size>0&&i.forEach(s=>r&&r.addChild(s))),this.fastMap.delete(n.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let n of t.children)yield*this.traverse(n)}clone(){var t;let n=new gg;var r;for(let i of this.traverse())n.addTreeNode(i.scopeRef,(r=(t=i.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&r!==void 0?r:null,i.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new mg({scopeRef:null}),this.fastMap.set(null,this.root)}}class mg{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let Qe=new gg;function vg(){const{width:e,height:t}=mM();return{"--be-viewport-height":`${t}px`,"--be-viewport-width":`${e}px`}}const xu={initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{type:"tween",duration:.125}},wu=E.forwardRef(({children:e,style:t,autoFocus:n=!1,restoreFocus:r=!0,isDismissable:i,isContextMenu:s,isOpen:d,onClose:a,triggerRef:o,arrowRef:c,arrowStyle:f,onPointerLeave:l,onPointerEnter:h},u)=>{const p=vg(),m=Oi(u),{domProps:g}=Xj({isDismissable:i,isOpen:d,onClose:a,triggerRef:o,isContextMenu:s},m);return w.jsx(yt.div,{className:"isolate z-popover",role:"presentation",ref:m,style:{...p,...t,position:"fixed"},...xu,...nr(g,{onPointerLeave:l,onPointerEnter:h}),children:w.jsx(vu,{restoreFocus:r,autoFocus:n,contain:!1,children:e})})}),ka=[];function Xj({onClose:e,isDismissable:t=!0,triggerRef:n,isContextMenu:r=!1},i){const s=E.useRef({isPointerDown:!1,isContextMenu:r,onClose:e}),d=s.current;d.isContextMenu=r,d.onClose=e;const a=E.useCallback(p=>{const m=p.target;if(m){const g=m.ownerDocument;if(!g||!g.documentElement.contains(m))return!1}return i.current&&!i.current.contains(m)},[i]),o=E.useCallback(()=>ka[ka.length-1]===i,[i]),c=E.useCallback(()=>{o()&&d.onClose()},[o,d]),f=E.useCallback(p=>{var m,g;return n.current&&"contains"in n.current?(g=(m=n.current).contains)==null?void 0:g.call(m,p):!1},[n]),l=E.useCallback(p=>{f(p.target)||o()&&(p.stopPropagation(),p.preventDefault())},[f,o]),h=E.useCallback(p=>{f(p.target)||(o()&&(p.stopPropagation(),p.preventDefault()),(!d.isContextMenu||p.button!==2)&&c())},[f,c,d,o]);return E.useEffect(()=>{ka.push(i);const p=y=>{a(y)&&(l(y),s.current.isPointerDown=!0)},m=y=>{s.current.isPointerDown&&a(y)&&(s.current.isPointerDown=!1,h(y))},g=y=>{y.preventDefault(),a(y)&&c()},v=y=>{if(!n.current)return;const b=y.target;let x;n.current instanceof Node?x=n.current:"contextElement"in n.current&&(x=n.current.contextElement),(!(b instanceof Node)||!x||b.contains(x))&&d.onClose()};return document.addEventListener("pointerdown",p,!0),document.addEventListener("pointerup",m,!0),document.addEventListener("contextmenu",g,!0),document.addEventListener("scroll",v,!0),()=>{const y=ka.indexOf(i);y>=0&&ka.splice(y,1),document.removeEventListener("pointerdown",p,!0),document.removeEventListener("pointerup",m,!0),document.removeEventListener("contextmenu",g,!0),document.removeEventListener("scroll",v,!0)}},[i,a,d,h,l,n,f,c]),{domProps:{onKeyDown:p=>{p.key==="Escape"&&(p.stopPropagation(),p.preventDefault(),c())}}}}const Gj={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}};function yg({position:e="absolute",className:t,isTransparent:n=!1,disableInitialTransition:r,...i}){return w.jsx(yt.div,{...i,className:ce(t,!n&&"bg-background/80","inset-0 z-10 h-full w-full",e,"backdrop-blur-sm"),"aria-hidden":!0,initial:r?void 0:{opacity:0},animate:{opacity:1},exit:{opacity:0},...Gj,transition:{duration:.15}})}const N2=E.forwardRef(({children:e,autoFocus:t=!1,restoreFocus:n=!0,isDismissable:r,isOpen:i,onClose:s},d)=>{const a=vg(),o=Oi(d);return w.jsxs("div",{className:"fixed inset-0 isolate z-tray",style:a,children:[w.jsx(yg,{onClick:()=>{r&&s()}},"tray-underlay"),w.jsx(yt.div,{ref:o,className:"absolute bottom-0 left-0 right-0 z-20 mx-auto max-h-tray w-full max-w-375 overflow-hidden rounded-t pb-safe-area",role:"presentation",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"tween",duration:.2},children:w.jsx(vu,{restoreFocus:n,autoFocus:t,contain:!0,children:e})})]})});function bg(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let s=0;s<i;s++){const d=n[s];if(e[d]!==t[d]||!Object.prototype.hasOwnProperty.call(t,d))return!1}return!0}function Cu(){const{i18n:e}=Cl(t=>t.data);return{locale:e,localeCode:(e==null?void 0:e.language)||"en",lines:e==null?void 0:e.lines}}function $2(e,{message:t,values:n}){const r=t.match(/\[(.+?)]/),i=n==null?void 0:n.count;if(r&&r[1]&&!Number.isNaN(i)){const[s,d]=r,a=d.split("|");if(!a.length)return t;const c=Kj(e).select(i);let f=a.find(h=>h.startsWith(c));f||(f=a[0]);const l=f.substring(f.indexOf(" ")+1);return t.replace(s,l)}return t}const Kj=ya(e=>new Intl.PluralRules(e));function V2(e,t){return e==null?!1:Object.hasOwn!==void 0?Object.hasOwn(e,t):Object.hasOwnProperty(t)}const ye=E.memo(e=>{const{message:t,values:n}=e,{lines:r,localeCode:i}=Cu();let s;if(V2(r,t)?s=r==null?void 0:r[t]:V2(r,t==null?void 0:t.toLowerCase())?s=r==null?void 0:r[t==null?void 0:t.toLowerCase()]:s=t,!n||!s)return w.jsx(E.Fragment,{children:s});s=$2(i,{message:s,values:n});const d=[],a=[];if(Object.entries(n).forEach(([o,c])=>{typeof c=="function"?a.push(o):E.isValidElement(c)?d.push(o):c!=null&&(s=s==null?void 0:s.replace(`:${o}`,`${c}`))}),a.length||d.length){const o=[];if(a.length){const h=a.join("");o.push(`(<[${h}]>.+?<\\/[${h}]>)`)}if(d.length){const h=d.join("|");o.push(`(:(?:${h}))`)}const c=new RegExp(o.join("|"),"gm"),l=s.split(c).filter(Boolean).map((h,u)=>{if(h.startsWith("<")&&h.endsWith(">")){const p=h.match(/<([a-z]+)>(.+?)<\/([a-z]+)>/);if(p){const[,m,g]=p,v=n==null?void 0:n[m];if(typeof v=="function"){const y=v(g);return E.cloneElement(y,{key:u})}}}if(h.startsWith(":")){const p=h.replace(":",""),m=n==null?void 0:n[p];if(E.isValidElement(m))return E.cloneElement(m,{key:u})}return h});return w.jsx(E.Fragment,{children:l})}return w.jsx(E.Fragment,{children:s})},qj);function qj(e,t){const{values:n,...r}=e,{values:i,...s}=t;return bg(i,n)&&bg(r,s)}function H2({listbox:e,children:t,isLoading:n,mobileOverlay:r=N2,searchField:i,onClose:s,prepend:d,className:a,...o}){const c=Dj(),{floatingWidth:f,floatingMinWidth:l="min-w-180",collection:h,showEmptyMessage:u,state:{isOpen:p,setIsOpen:m},positionStyle:g,floating:v,refs:y}=e,b=!d&&c?r:wu,x=ce("text-base sm:text-sm outline-none bg max-h-inherit flex flex-col",!d&&"shadow-xl border py-4",a,b===wu&&"rounded-panel",b===wu&&f==="auto"?`max-w-288 ${l}`:""),C=E.useMemo(()=>{let T=0;const I=[];return[...h.values()].reduce((F,$)=>{if(!$.section)F.push(E.cloneElement($.element,{key:$.element.key||$.element.props.value}));else if(!I.includes($.section)){const G=E.cloneElement($.section,{key:$.section.key||T,index:T});F.push(G),I.push($.section),T++}return F},[])},[h]),_=C.length>0||u&&!n,S=_?w.jsxs("div",{className:x,role:"presentation",children:[i,w.jsx(Zj,{isLoading:n,...o,children:C})]}):null;return w.jsxs(d2.Provider,{value:e,children:[t,d?S:ii&&jo.createPortal(w.jsx(tr,{children:p&&_&&w.jsx(b,{triggerRef:y.reference,restoreFocus:!0,isOpen:p,onClose:()=>{s==null||s(),m(!1)},isDismissable:!0,style:g,ref:v,children:S})}),ii)]})}function Zj({className:e,children:t,isLoading:n,...r}){const{role:i,listboxId:s,virtualFocus:d,focusItem:a,state:{activeIndex:o,setActiveIndex:c,selectedIndex:f}}=Zp(),l=E.useRef(!0),h=E.useRef(null);return E.useEffect(()=>()=>c(null),[c]),E.useEffect(()=>{if(l.current){const u=o??f;u==null&&!d?requestAnimationFrame(()=>{var p;(p=h.current)==null||p.focus({preventScroll:!0})}):u!=null&&requestAnimationFrame(()=>{a("increment",u)})}l.current=!1},[o,f,a,d]),w.jsx("div",{tabIndex:d?void 0:-1,role:i,id:s,className:"flex-auto overflow-y-auto overscroll-contain outline-none",ref:h,...r,children:t.length?t:w.jsx(Qj,{})})}function Qj(){return w.jsx("div",{className:"px-8 py-4 text-sm italic text-muted",children:w.jsx(ye,{message:"There are no items matching your query"})})}function W2({state:{isOpen:e,setIsOpen:t,selectedIndex:n,activeIndex:r,setInputValue:i,setActiveIndex:s},focusLoopingMode:d,collection:a,focusItem:o,handleItemSelection:c,allowCustomValue:f}){const l=p=>{if(!(e||!p.currentTarget.contains(p.target))){if(p.key==="ArrowDown")return p.preventDefault(),t(!0),o("increment",n??0),!0;if(p.key==="ArrowUp")return p.preventDefault(),t(!0),o("decrement",n??a.size-1),!0;if(p.key==="Enter"||p.key==="Space")return p.preventDefault(),t(!0),o("increment",n??0),!0}},h=p=>{const m=Math.max(0,a.size-1);if(!(!e||!p.currentTarget.contains(p.target)))switch(p.key){case"ArrowDown":return p.preventDefault(),r==null?o("increment",0):r>=m?d==="loop"?o("increment",0):d==="deselect"&&s(null):o("increment",r+1),!0;case"ArrowUp":return p.preventDefault(),r==null?o("decrement",m):r<=0?d==="loop"?o("decrement",m):d==="deselect"&&s(null):o("decrement",r-1),!0;case"Home":return p.preventDefault(),o("increment",0),!0;case"End":return p.preventDefault(),o("decrement",m),!0;case"Tab":return t(!1),!0}};return{handleTriggerKeyDown:l,handleListboxKeyboardNavigation:h,handleListboxSearchFieldKeydown:p=>{var g,v;if(p.key==="Enter"&&r!=null&&a.size){p.preventDefault();const[y,b]=[...a.entries()][r];y&&(c(y),(v=(g=b.element.props).onSelected)==null||v.call(g));return}p.key==="Escape"&&e&&(t(!1),f||i("")),l(p)||h(p)}}}const xg=new Map;function Jj(e){const{localeCode:t}=Cu(),n=t+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(xg.has(n))return xg.get(n);const r=new Intl.Collator(t,e);return xg.set(n,r),r}function U2(){const e=Jj({usage:"search",sensitivity:"base"}),t=E.useRef({search:"",timeout:void 0}).current,n=(i,s)=>{let d=s??0;for(;d!=null;){const a=i[d],o=a==null?void 0:a.slice(0,t.search.length);if(o&&e.compare(o,t.search)===0)return d;if(d<i.length-1)d++;else return null}return null};return{findMatchingItem:(i,s,d=0)=>{const a=eI(i.key);if(!a||i.ctrlKey||i.metaKey)return null;a===" "&&t.search.trim().length>0&&(i.preventDefault(),i.stopPropagation()),t.search+=a;let o=n(s,d);return o==null&&(o=n(s,0)),clearTimeout(t.timeout),t.timeout=setTimeout(()=>{t.search=""},500),o??null}}}function eI(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function tI(e,{noSSR:t}={noSSR:!0}){const n=typeof window<"u"&&typeof window.matchMedia=="function",[r,i]=E.useState(t?()=>n?window.matchMedia(e).matches:!1:null);return E.useEffect(()=>{if(!n)return;const s=window.matchMedia(e),d=()=>{i(s.matches)};return s.addEventListener("change",d),t||d(),()=>{s.removeEventListener("change",d)}},[n,e,t]),typeof window>"u"?null:r}function _u(e){return tI("(max-width: 768px)",e)}const Y2=be(w.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");var nI=e=>e.type==="checkbox",rI=e=>e instanceof Date,X2=e=>e==null;const iI=e=>typeof e=="object";var Xo=e=>!X2(e)&&!Array.isArray(e)&&iI(e)&&!rI(e),oI=e=>Xo(e)&&e.target?nI(e.target)?e.target.checked:e.target.value:e,sI=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,aI=(e,t)=>e.has(sI(t)),lI=e=>{const t=e.constructor&&e.constructor.prototype;return Xo(t)&&t.hasOwnProperty("isPrototypeOf")},cI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wg(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(cI&&(e instanceof Blob||e instanceof FileList))&&(n||Xo(e)))if(t=n?[]:{},!n&&!lI(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=wg(e[r]));else return e;return t}var G2=e=>Array.isArray(e)?e.filter(Boolean):[],Cg=e=>e===void 0,Ct=(e,t,n)=>{if(!t||!Xo(e))return n;const r=G2(t.split(/[,[\].]+?/)).reduce((i,s)=>X2(i)?i:i[s],e);return Cg(r)||r===e?Cg(e[t])?n:e[t]:r},K2=e=>typeof e=="boolean",uI=e=>/^\w*$/.test(e),hI=e=>G2(e.replace(/["|']|\]/g,"").split(/\.|\[/)),q2=(e,t,n)=>{let r=-1;const i=uI(t)?[t]:hI(t),s=i.length,d=s-1;for(;++r<s;){const a=i[r];let o=n;if(r!==d){const c=e[a];o=Xo(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;e[a]=o,e=e[a]}return e};const Z2={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_g={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fI=he.createContext(null),Sg=()=>he.useContext(fI);var dI=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const d=s;return t._proxyFormState[d]!==_g.all&&(t._proxyFormState[d]=!r||_g.all),n&&(n[d]=!0),e[d]}});return i},pI=e=>Xo(e)&&!Object.keys(e).length,gI=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return pI(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(d=>t[d]===(!r||_g.all))},mI=e=>Array.isArray(e)?e:[e],Q2=(e,t,n)=>!e||!t||e===t||mI(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function J2(e){const t=he.useRef(e);t.current=e,he.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}function vI(e){const t=Sg(),{control:n=t.control,disabled:r,name:i,exact:s}=e||{},[d,a]=he.useState(n._formState),o=he.useRef(!0),c=he.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=he.useRef(i);return f.current=i,J2({disabled:r,next:l=>o.current&&Q2(f.current,l.name,s)&&gI(l,c.current,n._updateFormState)&&a({...n._formState,...l}),subject:n._subjects.state}),he.useEffect(()=>(o.current=!0,c.current.isValid&&n._updateValid(!0),()=>{o.current=!1}),[n]),dI(d,n,c.current,!1)}var yI=e=>typeof e=="string",bI=(e,t,n,r,i)=>yI(e)?(r&&t.watch.add(e),Ct(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),Ct(n,s))):(r&&(t.watchAll=!0),n);function xI(e){const t=Sg(),{control:n=t.control,name:r,defaultValue:i,disabled:s,exact:d}=e||{},a=he.useRef(r);a.current=r,J2({disabled:s,subject:n._subjects.values,next:f=>{Q2(a.current,f.name,d)&&c(wg(bI(a.current,n._names,f.values||n._formValues,!1,i)))}});const[o,c]=he.useState(n._getWatch(r,i));return he.useEffect(()=>n._removeUnmounted()),o}function wI(e){const t=Sg(),{name:n,disabled:r,control:i=t.control,shouldUnregister:s}=e,d=aI(i._names.array,n),a=xI({control:i,name:n,defaultValue:Ct(i._formValues,n,Ct(i._defaultValues,n,e.defaultValue)),exact:!0}),o=vI({control:i,name:n}),c=he.useRef(i.register(n,{...e.rules,value:a,...K2(e.disabled)?{disabled:e.disabled}:{}}));return he.useEffect(()=>{const f=i._options.shouldUnregister||s,l=(h,u)=>{const p=Ct(i._fields,h);p&&(p._f.mount=u)};if(l(n,!0),f){const h=wg(Ct(i._options.defaultValues,n));q2(i._defaultValues,n,h),Cg(Ct(i._formValues,n))&&q2(i._formValues,n,h)}return()=>{(d?f&&!i._state.action:f)?i.unregister(n):l(n,!1)}},[n,i,d,s]),he.useEffect(()=>{Ct(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:Ct(i._fields,n)._f.value})},[r,n,i]),{field:{name:n,value:a,...K2(r)||o.disabled?{disabled:o.disabled||r}:{},onChange:he.useCallback(f=>c.current.onChange({target:{value:oI(f),name:n},type:Z2.CHANGE}),[n]),onBlur:he.useCallback(()=>c.current.onBlur({target:{value:Ct(i._formValues,n),name:n},type:Z2.BLUR}),[n,i]),ref:f=>{const l=Ct(i._fields,n);l&&f&&(l._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:h=>f.setCustomValidity(h),reportValidity:()=>f.reportValidity()})}},formState:o,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ct(o.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ct(o.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ct(o.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ct(o.validatingFields,n)},error:{enumerable:!0,get:()=>Ct(o.errors,n)}})}}function ji(e={}){const{size:t="md",startAppend:n,endAppend:r,className:i,labelPosition:s,labelDisplay:d="block",inputClassName:a,inputWrapperClassName:o,unstyled:c,invalid:f,disabled:l,background:h="bg-transparent",flexibleHeight:u,inputShadow:p="shadow-sm",descriptionPosition:m="bottom",inputRing:g,inputFontSize:v,labelSuffix:y}={...e};if(c)return{label:"",input:a||"",wrapper:i||"",inputWrapper:o||"",adornment:"",append:{size:"",radius:""},size:{font:"",height:""},description:"",error:""};const b=kI({size:e.size,flexibleHeight:u});v&&(b.font=v);const x=n||r,_=g||`focus:ring ${f?"focus:ring-danger/focus focus:border-danger/60":"focus:ring-primary/focus focus:border-primary/60"}`,S=SI(e);return{label:ce(d,"first-letter:capitalize text-left whitespace-nowrap",l&&"text-disabled",b.font,y?"":s==="side"?"mr-16":"mb-4"),input:ce("block text-left relative w-full appearance-none transition-shadow text",h,S.input,CI(e),!l&&`${_} focus:outline-none ${p}`,l&&"text-disabled cursor-not-allowed",a,b.font,b.height,_I(e)),adornment:EI(t),append:{size:qp(t),radius:S.append},wrapper:ce(i,b.font,{"flex items-center":s==="side"}),inputWrapper:ce("isolate relative",o,x&&"flex items-stretch"),size:b,description:`text-muted ${m==="bottom"?"pt-10":"pb-10"} text-xs`,error:"text-danger pt-10 text-xs"}}function CI({startAppend:e,endAppend:t,inputBorder:n,invalid:r}){if(n)return n;const i=e||t,s=r?"border-danger":"border-divider";return i?e?`${s} border-y border-r`:`${s} border-y border-l`:`${s} border`}function _I({startAdornment:e,endAdornment:t,inputRadius:n}){return n==="rounded-full"?ce(e?"pl-54":"pl-28",t?"pr-54":"pr-28"):ce(e?"pl-46":"pl-12",t?"pr-46":"pr-12")}function SI(e){const{startAppend:t,endAppend:n,inputRadius:r}=e,i=t||n;return r==="rounded-full"?{input:ce(!i&&"rounded-full",t&&"rounded-r-full rounded-l-none",n&&"rounded-l-full rounded-r-none"),append:t?"rounded-l-full":"rounded-r-full"}:r==="rounded-none"?{input:"",append:""}:r?{input:r,append:r}:{input:ce(!i&&"rounded-input",t&&"rounded-r-input rounded-l-none",n&&"rounded-l-input rounded-r-none"),append:t?"rounded-l-input":"rounded-r-input"}}function kI({size:e,flexibleHeight:t}){switch(e){case"2xs":return{font:"text-xs",height:t?"min-h-24":"h-24"};case"xs":return{font:"text-xs",height:t?"min-h-30":"h-30"};case"sm":return{font:"text-sm",height:t?"min-h-36":"h-36"};case"lg":return{font:"text-md md:text-lg",height:t?"min-h-50":"h-50"};case"xl":return{font:"text-xl",height:t?"min-h-60":"h-60"};default:return{font:"text-sm",height:t?"min-h-42":"h-42"}}}function EI(e){switch(e){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-sm";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return""}}function eC({children:e,direction:t,className:n,position:r=t==="start"?"left-0":"right-0"}){return e?w.jsx("div",{className:ce("pointer-events-none absolute top-0 z-10 flex h-full min-w-42 items-center justify-center text-muted",r,n),children:e}):null}function tC(e,t){const n=(t==null?void 0:t.copy)??!0,r=n?{...e}:e;return Object.keys(r).forEach(i=>{const s=i;t!=null&&t.arrays&&Array.isArray(r[s])&&r[s].length===0?delete r[s]:t!=null&&t.deep&&r[s]&&typeof r[s]=="object"?(r[s]=tC(r[s],t),Object.keys(r[s]).length===0&&delete r[s]):(r[s]==null||r[s]==="")&&delete r[s]}),n?r:e}const nC=he.forwardRef((e,t)=>{const{children:n,description:r,errorMessage:i,descriptionProps:s={},errorMessageProps:d={},startAdornment:a,endAdornment:o,adornmentPosition:c,startAppend:f,endAppend:l,fieldClassNames:h,disabled:u,wrapperProps:p}=e;return w.jsxs("div",{className:h.wrapper,ref:t,...p,children:[w.jsx(TI,{...e}),w.jsxs("div",{className:h.inputWrapper,children:[w.jsx(eC,{direction:"start",className:h.adornment,position:c,children:a}),f&&w.jsx(rC,{style:h.append,disabled:u,children:f}),n,l&&w.jsx(rC,{style:h.append,disabled:u,children:l}),w.jsx(eC,{direction:"end",className:h.adornment,position:c,children:o})]}),r&&!i&&w.jsx("div",{className:h.description,...s,children:r}),i&&w.jsx("div",{className:h.error,...d,children:i})]})});function TI({labelElementType:e,fieldClassNames:t,labelProps:n,label:r,labelSuffix:i,labelSuffixPosition:s="spaced",required:d}){if(!r)return null;const a=e||"label",o=w.jsxs(a,{className:t.label,...n,children:[r,d&&w.jsx("span",{className:"text-danger",children:" *"})]});return i?w.jsxs("div",{className:ce("mb-4 flex w-full gap-4",s==="spaced"?"items-end":"items-center"),children:[o,w.jsx("div",{className:ce("text-xs text-muted",s==="spaced"?"ml-auto":""),children:i})]}):o}function rC({children:e,style:t,disabled:n}){return he.cloneElement(e,{...e.props,disabled:e.props.disabled||n,...tC(t)})}function kg({autoFocus:e,autoSelectText:t},n){const r=E.useRef(e);E.useEffect(()=>{r.current&&n.current&&requestAnimationFrame(()=>{var i,s;(i=n.current)==null||i.focus(),t&&((s=n.current)==null?void 0:s.nodeName.toLowerCase())==="input"&&n.current.select()}),r.current=!1},[n,t])}function iC(e){const{focusRef:t,labelElementType:n="label",label:r,labelSuffix:i,labelSuffixPosition:s,autoFocus:d,autoSelectText:a,labelPosition:o,descriptionPosition:c,size:f,errorMessage:l,description:h,flexibleHeight:u,startAdornment:p,endAdornment:m,startAppend:g,adornmentPosition:v,endAppend:y,className:b,inputClassName:x,inputWrapperClassName:C,unstyled:_,background:S,invalid:T,disabled:I,id:F,inputRadius:$,inputBorder:G,inputShadow:ne,inputRing:Y,inputFontSize:Q,...Z}=e;kg(e,t);const ie=E.useId(),V=F||ie,k=`${V}-label`,P=`${V}-description`,A=`${V}-error`,j={id:k,htmlFor:n==="label"?V:void 0},H={id:P},M={id:A},R={"aria-label":!e.label&&!e["aria-label"]&&e.placeholder?e.placeholder:e["aria-label"],"aria-invalid":T||void 0,id:V,disabled:I,...Z},B=[];r&&B.push(j.id),R["aria-labelledby"]&&B.push(R["aria-labelledby"]),R["aria-labelledby"]=B.length?B.join(" "):void 0;const U=[];return h&&U.push(H.id),l&&U.push(M.id),R["aria-describedby"]&&U.push(R["aria-describedby"]),R["aria-describedby"]=U.length?U.join(" "):void 0,{fieldProps:{errorMessageProps:M,descriptionProps:H,labelProps:j,disabled:I,label:r,labelSuffix:i,labelSuffixPosition:s,autoFocus:d,autoSelectText:a,labelPosition:o,descriptionPosition:c,size:f,errorMessage:l,description:h,flexibleHeight:u,startAdornment:p,endAdornment:m,startAppend:g,adornmentPosition:v,endAppend:y,className:b,inputClassName:x,inputWrapperClassName:C,unstyled:_,background:S,invalid:T},inputProps:R}}const _n=E.forwardRef(({inputElementType:e="input",flexibleHeight:t,inputRef:n,inputTestId:r,...i},s)=>{const d=Oi(n),{fieldProps:a,inputProps:o}=iC({...i,focusRef:d}),c=e==="textarea",f=c?"textarea":"input",l=ji({...i,flexibleHeight:t||e==="textarea"});return e==="textarea"&&!i.unstyled&&(l.input=`${l.input} py-12`),w.jsx(nC,{ref:s,fieldClassNames:l,...a,children:w.jsx(f,{"data-testid":r,ref:d,...o,rows:c?o.rows||4:void 0,className:l.input})})});he.forwardRef(({name:e,...t},n)=>{const{field:{onChange:r,onBlur:i,value:s="",ref:d},fieldState:{invalid:a,error:o}}=wI({name:e}),c={onChange:r,onBlur:i,value:s??"",invalid:a,errorMessage:o==null?void 0:o.message,inputRef:d,name:e};return w.jsx(_n,{ref:n,...nr(c,t)})});const OI=E.forwardRef((e,t)=>{const{searchPlaceholder:n,showSearchField:r,children:[i,s],floatingWidth:d="auto",isLoading:a}=e,o=E.useId(),c=_u(),f=M2({...e,clearInputOnItemSelection:!0,showEmptyMessage:r,floatingWidth:c?"auto":d,virtualFocus:r,role:r?"listbox":"menu",focusLoopingMode:r?"stay":"loop",children:s.props.children},t),{state:{isOpen:l,setIsOpen:h,activeIndex:u,inputValue:p,setInputValue:m},listboxId:g,focusItem:v,listContent:y,reference:b,onInputChange:x}=f,{handleTriggerKeyDown:C,handleListboxKeyboardNavigation:_,handleListboxSearchFieldKeydown:S}=W2(f),{findMatchingItem:T}=U2(),I=F=>{if(!l)return;const $=T(F,y,u);$!=null&&v("increment",$)};return w.jsx(H2,{onClick:F=>F.stopPropagation(),listbox:f,onKeyDownCapture:r?void 0:I,onKeyDown:_,onClose:r?()=>m(""):void 0,"aria-labelledby":o,isLoading:a,searchField:r?w.jsx(_n,{size:"sm",placeholder:n,startAdornment:w.jsx(Y2,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":l?"true":"false","aria-haspopup":"listbox","aria-controls":l?g:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:p,onChange:x,onKeyDown:F=>{S(F)}}):null,children:E.cloneElement(i,{id:o,"aria-expanded":l?"true":"false","aria-haspopup":"menu","aria-controls":l?g:void 0,ref:b,onKeyDown:C,onClick:Lt(F=>{var $,G;(G=($=i.props)==null?void 0:$.onClick)==null||G.call($,F),h(!l)})})})});function PI({children:e}){return e}function DI({item:e,button:t}){return w.jsxs(OI,{children:[t,w.jsx(PI,{children:(e.menuItems||[]).map(n=>w.jsx(lu,{value:n.label,onSelected:()=>{n.action(D().editor)},children:n.label},n.label))})]})}const Me=E.forwardRef(({children:e,size:t="md",iconSize:n=t&&t.length<=3?t:"md",variant:r="text",radius:i="rounded-button",className:s,padding:d,equalWidth:a=!0,badge:o,...c},f)=>{const l=ce(qp(t,{padding:d,equalWidth:a,variant:r}),s,o&&"relative");return w.jsxs(rr,{...c,ref:f,radius:i,variant:r,className:l,children:[E.cloneElement(e,{size:n}),o]})});function AI({icon:e,className:t,size:n}){let r;return he.isValidElement(e)?r=he.cloneElement(e,{className:"svg-iconEl"}):typeof e=="string"?r=w.jsx("img",{className:"w-font h-font",src:e,alt:""}):Array.isArray(e)?r=he.createElement(Sk(e),{size:n}):r=he.createElement(e,{size:n}),w.jsx("span",{className:ce(t,"leading-none"),children:r})}const Eg=he.memo(AI);function Tg({value:e}){return e?typeof e=="string"?w.jsx(ye,{message:e}):w.jsx(ye,{...e}):null}function MI({item:e}){const t=e.label?w.jsx(II,{item:e}):w.jsx(jI,{item:e});return e.menuItems?w.jsx(DI,{item:e,button:t}):he.cloneElement(t,{onClick:()=>{var n;(n=e.action)==null||n.call(e,D().editor)}})}const jI=E.forwardRef(({item:e,...t},n)=>w.jsx(Me,{ref:n,radius:"rounded-full",size:"sm",...t,children:w.jsx(Eg,{icon:e.icon})})),II=E.forwardRef(({item:e,...t},n)=>w.jsx(xt,{ref:n,radius:"rounded-full",size:"xs",color:e.buttonColor||"primary",variant:e.buttonVariant||"flat",startIcon:e.icon&&w.jsx(Eg,{icon:e.icon}),...t,children:w.jsx(Tg,{value:e.label})}));function Su({children:e,color:t,variant:n,radius:r="rounded-button",size:i,className:s,value:d,onChange:a,multiple:o,disabled:c}){const f=u=>d===void 0?!1:o?d.includes(u):u===d,l=u=>{const p=[...d],m=d.indexOf(u);return m>-1?p.splice(m,1):p.push(u),p},h=he.Children.map(e,(u,p)=>{if(he.isValidElement(u)){const m=f(u.props.value),g=m?"primary":t;return he.cloneElement(u,{color:m?"primary":t,variant:n,size:i,radius:null,disabled:u.props.disabled||c,...u.props,onClick:v=>{u.props.onClick&&u.props.onClick(v),a&&(o?a==null||a(l(u.props.value)):a==null||a(u.props.value))},className:ce(u.props.className,m?"z-20":"z-10",FI(p,e,r,g))})}});return w.jsx("div",{className:ce(r,"isolate inline-flex",s),children:h})}function FI(e,t,n,r){return e===0?ce(n,"rounded-tr-none rounded-br-none",!r&&"border-r-transparent disabled:border-r-transparent"):e===t.length-1?ce(n,"rounded-tl-none rounded-bl-none -ml-1"):ce("rounded-none -ml-1",!r&&"border-r-transparent disabled:border-r-transparent")}const RI=be(w.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),LI=be(w.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function zI(){const e=se(n=>n.history.canUndo),t=se(n=>n.history.canRedo);return w.jsxs(Su,{variant:"outline",children:[w.jsx(Me,{equalWidth:!1,size:"xs",padding:"pl-12 pr-10",radius:"rounded-full",disabled:!e,onClick:()=>{L().history.undo()},children:w.jsx(RI,{})},"undo"),w.jsx(Me,{equalWidth:!1,padding:"pl-10 pr-12",size:"xs",radius:"rounded-full",disabled:!t,onClick:()=>{L().history.redo()},children:w.jsx(LI,{})},"redo")]})}const BI=be(w.jsx("path",{d:"M19 13H5v-2h14v2z"}),"RemoveOutlined"),NI=be(w.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function $I(){var n,r;const e=se(i=>i.zoom)||1;return se(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.zoom)==null?void 0:d.allowUserZoom})??!0?w.jsxs("div",{className:"flex items-center select-none",children:[w.jsx(Me,{size:"sm",disabled:!((n=L().zoom)!=null&&n.canZoomOut()),onClick:()=>{L().zoom.zoomOut(L().zoom.step)},children:w.jsx(BI,{})}),w.jsxs("div",{className:"w-[4ch] text-sm text-center",children:[Math.round(e*100),"%"]}),w.jsx(Me,{size:"sm",disabled:!((r=L().zoom)!=null&&r.canZoomIn()),onClick:()=>{L().zoom.zoomIn(L().zoom.step)},children:w.jsx(NI,{})})]}):null}function Og({item:e}){switch(e.type){case"undoWidget":return w.jsx(zI,{});case"zoomWidget":return w.jsx($I,{});case"button":return w.jsx(MI,{item:e});case"image":return w.jsx("img",{className:"h-30 object-cover",src:Zt(e.src),alt:""});default:return null}}const Wr=be(w.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined");function ku(){var r;let e=se(i=>{var s;return((s=i.config.ui)==null?void 0:s.mode)===Sh.OVERLAY});const{width:t}=se(i=>i.stageSize),n=t<=700;return n&&((r=D().config.ui)!=null&&r.forceOverlayModeOnMobile)&&(e=!0),{isModal:e,isMobile:n}}function VI(){const{isModal:e,isMobile:t}=ku(),n=se(o=>{var c;return(c=o.config.ui)==null?void 0:c.allowEditorClose})??!0,r=se(o=>{var c,f;return(f=(c=o.config.ui)==null?void 0:c.menubar)==null?void 0:f.items}),{left:i,center:s,right:d}=E.useMemo(()=>HI(r||[],t),[r,t]),a=e&&t&&n&&w.jsx(Me,{size:"sm",className:"ml-10",onClick:()=>{D().editor.close()},children:w.jsx(Wr,{})});return w.jsxs(yt.div,{className:u2,...h2,children:[w.jsx("div",{className:"mr-auto flex items-center gap-8",children:i.map((o,c)=>w.jsx(Og,{item:o},c))}),w.jsx("div",{className:"flex items-center gap-10",children:s.map((o,c)=>w.jsx(Og,{item:o},c))}),w.jsx("div",{className:"ml-auto flex items-center gap-8",children:d.map((o,c)=>w.jsx(Og,{item:o},c))}),a]})}function HI(e,t){const n={left:[],center:[],right:[]};(e||[]).filter(i=>!t&&!i.mobileOnly||t&&!i.desktopOnly).forEach(i=>{i.align==="left"?n.left.push({...i,position:i.position??1}):i.align==="right"?n.right.push({...i,position:i.position??1}):n.center.push({...i,position:i.position??1})});const r=Object.entries(n).map(([i,s])=>[i,s.sort((d,a)=>(d.position??0)-(a.position??0))]);return Object.fromEntries(r)}function WI(){const e=se(o=>o.crop.zoneRect),t=se(o=>o.zoom),n=Math.round(((e==null?void 0:e.width)||t)/t),r=Math.round(((e==null?void 0:e.height)||t)/t),i=se(o=>o.canvasSize.width),s=se(o=>o.canvasSize.height),d=o=>{se.getState().editor.tools.crop.drawZone({...se.getState().crop.zoneRect,height:Math.min(o,s/se.getState().zoom)*se.getState().zoom})},a=o=>{se.getState().editor.tools.crop.drawZone({...se.getState().crop.zoneRect,width:Math.min(o,i/se.getState().zoom)*se.getState().zoom})};return se.getState().crop.selectedAspectRatio?w.jsx("div",{className:"text-sm",children:`${n}x${r}`}):w.jsxs("div",{className:"flex items-center justify-center gap-16 w-full pt-20",children:[w.jsx(_n,{type:"number",max:Math.ceil(i/t),size:"sm",className:"w-full max-w-112",label:w.jsx(ye,{message:"Width"}),value:n,onChange:o=>{a(o.target.valueAsNumber)}}),w.jsx(_n,{type:"number",max:s/t,size:"sm",className:"w-full max-w-112",label:w.jsx(ye,{message:"Height"}),value:r,onChange:o=>{d(o.target.valueAsNumber)}})]})}function UI(){const e=se(t=>t.activeTool);return w.jsxs(yt.div,{className:u2,...h2,children:[w.jsx(YI,{}),XI(e),w.jsx(GI,{})]})}function YI(){const{isMobile:e}=ku(),t=se(n=>n.dirty);return e?w.jsx(Me,{size:"sm",onClick:()=>{D().cancelChanges()},children:w.jsx(Wr,{})}):w.jsx(xt,{variant:"outline",size:"xs",startIcon:w.jsx(Wr,{}),radius:"rounded-full",className:"min-w-92",onClick:()=>{D().cancelChanges()},children:t?w.jsx(ye,{message:"Cancel"}):w.jsx(ye,{message:"Close"})})}function XI(e){var n,r;if(!e)return null;const t=w.jsx("div",{className:"capitalize text-sm",children:w.jsx(ye,{message:e})});switch(e){case Pe.CROP:return((r=(n=D().config.tools)==null?void 0:n.crop)==null?void 0:r.allowCustomRatio)??!0?w.jsx(WI,{}):t;default:return t}}function GI(){const{isMobile:e}=ku(),t=se(n=>n.dirty);return e?w.jsx(Me,{size:"sm",disabled:!t,onClick:()=>{D().applyChanges()},children:w.jsx(Qp,{})}):w.jsx(xt,{variant:"flat",color:"primary",size:"xs",disabled:!t,startIcon:w.jsx(Qp,{}),radius:"rounded-full",onClick:()=>{D().applyChanges()},children:w.jsx(ye,{message:"Apply"})})}function oC(){const e=se(t=>t.activeTool);return w.jsx(tr,{initial:!1,children:e?w.jsx(UI,{},"activeToolbar"):w.jsx(VI,{},"mainToolbar")})}const KI={newCanvas:oe("Loading Canvas"),mainImage:oe("Loading Image"),state:oe("Loading State"),merge:oe("Processing Image")};function qI(){const[e,t]=E.useState(!1);return E.useEffect(()=>{se.subscribe(n=>n.loading,n=>{n&&t(n)})},[]),w.jsx(tr,{children:e&&w.jsx(yt.div,{initial:{y:"60%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-60%",opacity:0},transition:{type:"tween",duration:.3},onAnimationComplete:()=>{setTimeout(()=>{t(!1)},400)},className:"absolute z-loading-indicator inset-0 m-auto p-6 w-144 h-32 text-center text-sm bg-paper rounded-full shadow-lg",children:w.jsx(ye,{...KI[e]})})})}function ZI(e,t,n){return Math.max(t,Math.min(e,n))}const rt={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function sC(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function aC(e,t,n,r=.15){return r===0?ZI(e,t,n):e<t?-sC(t-e,n-t,r)+t:e>n?+sC(e-n,n-t,r)+n:e}function QI(e,[t,n],[r,i]){const[[s,d],[a,o]]=e;return[aC(t,s,d,r),aC(n,a,o,i)]}function JI(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eF(e){var t=JI(e,"string");return typeof t=="symbol"?t:String(t)}function _t(e,t,n){return t=eF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){_t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const cC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uC(e){return e?e[0].toUpperCase()+e.slice(1):""}const tF=["enter","leave"];function nF(e=!1,t){return e&&!tF.includes(t)}function rF(e,t="",n=!1){const r=cC[e],i=r&&r[t]||t;return"on"+uC(e)+uC(i)+(nF(n,i)?"Capture":"")}const iF=["gotpointercapture","lostpointercapture"];function oF(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=iF.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function sF(e,t=""){const n=cC[e],r=n&&n[t]||t;return e+r}function Eu(e){return"touches"in e}function hC(e){return Eu(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function aF(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function lF(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function fC(e){return Eu(e)?lF(e)[0]:e}function Pg(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,s=(t.clientY+e.clientY)/2,d=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:d,origin:[i,s]}}catch{}return null}function cF(e){return aF(e).map(t=>t.identifier)}function dC(e,t){const[n,r]=Array.from(e.touches).filter(i=>t.includes(i.identifier));return Pg(n,r)}function Dg(e){const t=fC(e);return Eu(e)?t.identifier:t.pointerId}function pC(e){const t=fC(e);return[t.clientX,t.clientY]}const gC=40,mC=800;function uF(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return r===1?(t*=gC,n*=gC):r===2&&(t*=mC,n*=mC),[t,n]}function hF(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return t}function Tu(e,...t){return typeof e=="function"?e(...t):e}function fF(){}function dF(...e){return e.length===0?fF:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function vC(e,t){return Object.assign({},t,e||{})}const pF=32;class yC{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:i}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Tu(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,hF(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const _=n._delta.map(Math.abs);rt.addTo(n._distance,_)}this.axisIntent&&this.axisIntent(t);const[d,a]=n._movement,[o,c]=r.threshold,{_step:f,values:l}=n;if(r.hasCustomTransform?(f[0]===!1&&(f[0]=Math.abs(d)>=o&&l[0]),f[1]===!1&&(f[1]=Math.abs(a)>=c&&l[1])):(f[0]===!1&&(f[0]=Math.abs(d)>=o&&Math.sign(d)*o),f[1]===!1&&(f[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=f[0]!==!1||f[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[_,S]=l;h[0]=f[0]!==!1?_-f[0]:0,h[1]=f[1]!==!1?S-f[1]:0}else h[0]=f[0]!==!1?d-f[0]:0,h[1]=f[1]!==!1?a-f[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const u=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Tu(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[m,g]=n.offset,[[v,y],[b,x]]=n._bounds;n.overflow=[m<v?-1:m>y?1:0,g<b?-1:g>x?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=QI(n._bounds,n.offset,C),n.delta=rt.sub(n.offset,u),this.computeMovement(),p&&(!n.last||s>pF)){n.delta=rt.sub(n.offset,u);const _=n.delta.map(Math.abs);rt.addTo(n.distance,_),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[_[0]/s,_[1]/s],n.timeDelta=s)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const i=this.handler(Ue(Ue(Ue({},n),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gF([e,t],n){const r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class mF extends yC{constructor(...t){super(...t),_t(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=rt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=rt.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const i=typeof r.axisThreshold=="object"?r.axisThreshold[hC(t)]:r.axisThreshold;n.axis=gF(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const vF=e=>e,bC=.15,xC={enabled(e=!0){return e},eventOptions(e,t,n){return Ue(Ue({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[bC,bC];case!1:return[0,0];default:return rt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return rt.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||vF},threshold(e){return rt.toVector(e,0)}},yF=0,Ea=Ue(Ue({},xC),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=yF){return e},bounds(e={}){if(typeof e=="function")return s=>Ea.bounds(e(s));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),wC={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class bF extends mF{constructor(...t){super(...t),_t(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Ea.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=Dg(t),r._pointerActive=!0,this.computeValues(pC(t)),this.computeInitial(),n.preventScrollAxis&&hC(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=Dg(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=pC(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=rt.sub(s,n._values),this.computeValues(s)),rt.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=Dg(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[s,d]=n._distance;if(n.tap=s<=r.tapsThreshold&&d<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,o]=n._delta,[c,f]=n._movement,[l,h]=r.swipe.velocity,[u,p]=r.swipe.distance,m=r.swipe.duration;if(n.elapsedTime<m){const g=Math.abs(a/n.timeDelta),v=Math.abs(o/n.timeDelta);g>l&&Math.abs(c)>u&&(n.swipe[0]=Math.sign(a)),v>h&&Math.abs(f)>p&&(n.swipe[1]=Math.sign(o))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,xF(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=wC[t.key];if(n){const r=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,rt.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in wC&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function xF(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Ta=typeof window<"u"&&window.document&&window.document.createElement;function CC(){return Ta&&"ontouchstart"in window}function wF(){return CC()||Ta&&window.navigator.maxTouchPoints>1}function CF(){return Ta&&"onpointerdown"in window}function _F(){return Ta&&"exitPointerLock"in window.document}function SF(){try{return"constructor"in GestureEvent}catch{return!1}}const fn={isBrowser:Ta,gesture:SF(),touch:CC(),touchscreen:wF(),pointer:CF(),pointerLock:_F()},kF=250,EF=180,TF=.5,OF=50,PF=250,DF=10,_C={mouse:0,touch:0,pen:8},AF=Ue(Ue({},Ea),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fn.pointerLock,fn.touch&&n?"touch":this.pointerLock?"mouse":fn.pointer&&!i?"pointer":fn.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?kF:void 0,!(!fn.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=rt.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:e=TF,distance:t=OF,duration:n=PF}={}){return{velocity:this.transform(rt.toVector(e)),distance:this.transform(rt.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return EF;case!1:return 0;default:return e}},axisThreshold(e){return e?Ue(Ue({},_C),e):_C},keyboardDisplacement(e=DF){return e}});function MF(e){const[t,n]=e.overflow,[r,i]=e._delta,[s,d]=e._direction;(t<0&&r>0&&s<0||t>0&&r<0&&s>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&d<0||n>0&&i<0&&d>0)&&(e._movement[1]=e._movementBound[1])}const jF=30,IF=100;class FF extends yC{constructor(...t){super(...t),_t(this,"ingKey","pinching"),_t(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:n,lastOffset:r}=this.state;t==="wheel"?this.state.offset=rt.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:n}=this.state;this.state.movement=[t[0]/n[0],t[1]-n[1]]}axisIntent(){const t=this.state,[n,r]=t._movement;if(!t.axis){const i=Math.abs(n)*jF-Math.abs(r);i<0?t.axis="angle":i>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(t),n._touchIds=Array.from(r).slice(0,2);const i=dC(t,n._touchIds);i&&this.pinchStart(t,i)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const n=this.state,r=n._pointerEvents,i=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(d=>i.has(d))||(r.size<2&&r.set(t.pointerId,t),n._pointerEvents.size<2))return;this.start(t);const s=Pg(...Array.from(r.values()));s&&this.pinchStart(t,s)}pinchStart(t,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const n=dC(t,this.state._touchIds);n&&this.pinchMove(t,n)}pointerMove(t){const n=this.state._pointerEvents;if(n.has(t.pointerId)&&n.set(t.pointerId,t),!this.state._active)return;const r=Pg(...Array.from(n.values()));r&&this.pinchMove(t,r)}pinchMove(t,n){const r=this.state,i=r._values[1],s=n.angle-i;let d=0;Math.abs(s)>270&&(d+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*d]),r.origin=n.origin,r.turns=d,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const n=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}n._pointerEvents.has(t.pointerId)&&n._pointerEvents.delete(t.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const n=this.state;n._active||(this.start(t),this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY];const r=n._movement;n._movement=[t.scale-1,t.rotation],n._delta=rt.sub(n._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>t[r]):!t[n])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-uF(t)[1]/IF*r.offset[0],0],rt.addTo(r._movement,r._delta),MF(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const n=this.config.device;n&&(t(n,"start",this[n+"Start"].bind(this)),t(n,"change",this[n+"Move"].bind(this)),t(n,"end",this[n+"End"].bind(this)),t(n,"cancel",this[n+"End"].bind(this)),t("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const RF=Ue(Ue({},xC),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!fn.touch&&fn.gesture)return"gesture";if(fn.touch&&r)return"touch";if(fn.touchscreen){if(fn.pointer)return"pointer";if(fn.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=d=>{const a=vC(Tu(n,d),{min:-1/0,max:1/0});return[a.min,a.max]},s=d=>{const a=vC(Tu(r,d),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:d=>[i(d),s(d)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",rt.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Ue(Ue({},Ea),{},{mouseOnly:(e=!0)=>e}),Ue(Ue({},Ea),{},{mouseOnly:(e=!0)=>e});const Ag=new Map,Mg=new Map;function LF(e){Ag.set(e.key,e.engine),Mg.set(e.key,e.resolver)}const zF={key:"drag",engine:bF,resolver:AF},BF={key:"pinch",engine:FF,resolver:RF};function NF(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function $F(e,t){if(e==null)return{};var n=NF(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const VF={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=fn.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},HF=["target","eventOptions","window","enabled","transform"];function Ou(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=Ou(e[r],i);break;case"boolean":i&&(n[r]=e[r]);break}return n}function WF(e,t,n={}){const r=e,{target:i,eventOptions:s,window:d,enabled:a,transform:o}=r,c=$F(r,HF);if(n.shared=Ou({target:i,eventOptions:s,window:d,enabled:a,transform:o},VF),t){const f=Mg.get(t);n[t]=Ou(Ue({shared:n.shared},c),f)}else for(const f in c){const l=Mg.get(f);l&&(n[f]=Ou(Ue({shared:n.shared},c[f]),l))}return n}class SC{constructor(t,n){_t(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,i,s){const d=this._listeners,a=sF(n,r),o=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Ue(Ue({},o),s);t.addEventListener(a,i,c);const f=()=>{t.removeEventListener(a,i,c),d.delete(f)};return d.add(f),f}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class UF{constructor(){_t(this,"_timeouts",new Map)}add(t,n,r=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...i))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class YF{constructor(t){_t(this,"gestures",new Set),_t(this,"_targetEventStore",new SC(this)),_t(this,"gestureEventStores",{}),_t(this,"gestureTimeoutStores",{}),_t(this,"handlers",{}),_t(this,"config",{}),_t(this,"pointerIds",new Set),_t(this,"touchIds",new Set),_t(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),XF(this,t)}setEventIds(t){if(Eu(t))return this.touchIds=new Set(cF(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=WF(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const d of this.gestures){const a=this.config[d],o=kC(r,a.eventOptions,!!i);if(a.enabled){const c=Ag.get(d);new c(this,t,d).bind(o)}}const s=kC(r,n.eventOptions,!!i);for(const d in this.nativeHandlers)s(d,"",a=>this.nativeHandlers[d](Ue(Ue({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const s in r)r[s]=dF(...r[s]);if(!i)return r;for(const s in r){const{device:d,capture:a,passive:o}=oF(s);this._targetEventStore.add(i,d,"",r[s],{capture:a,passive:o})}}}}function Go(e,t){e.gestures.add(t),e.gestureEventStores[t]=new SC(e,t),e.gestureTimeoutStores[t]=new UF}function XF(e,t){t.drag&&Go(e,"drag"),t.wheel&&Go(e,"wheel"),t.scroll&&Go(e,"scroll"),t.move&&Go(e,"move"),t.pinch&&Go(e,"pinch"),t.hover&&Go(e,"hover")}const kC=(e,t,n)=>(r,i,s,d={},a=!1)=>{var o,c;const f=(o=d.capture)!==null&&o!==void 0?o:t.capture,l=(c=d.passive)!==null&&c!==void 0?c:t.passive;let h=a?r:rF(r,i,f);n&&l&&(h+="Passive"),e[h]=e[h]||[],e[h].push(s)},GF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function KF(e){const t={},n={},r=new Set;for(let i in e)GF.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}function Ko(e,t,n,r,i,s){if(!e.has(n)||!Ag.has(r))return;const d=n+"Start",a=n+"End",o=c=>{let f;return c.first&&d in t&&t[d](c),n in t&&(f=t[n](c)),c.last&&a in t&&t[a](c),f};i[r]=o,s[r]=s[r]||{}}function qF(e,t){const[n,r,i]=KF(e),s={};return Ko(i,n,"onDrag","drag",s,t),Ko(i,n,"onWheel","wheel",s,t),Ko(i,n,"onScroll","scroll",s,t),Ko(i,n,"onPinch","pinch",s,t),Ko(i,n,"onMove","move",s,t),Ko(i,n,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:r}}function ZF(e,t={},n,r){const i=he.useMemo(()=>new YF(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),he.useEffect(i.effect.bind(i)),he.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function QF(e){return e.forEach(LF),function(n,r){const{handlers:i,nativeHandlers:s,config:d}=qF(n,r||{});return ZF(i,d,void 0,s)}}function ar({e,rect:t,deltaX:n,deltaY:r}){return{rect:t,x:e.clientX,y:e.clientY,deltaX:n??0,deltaY:r??0,nativeEvent:e}}function Pu({onMoveStart:e,onMove:t,onMoveEnd:n,minimumMovement:r=0,preventDefault:i,stopPropagation:s=!0,onPress:d,onLongPress:a,...o}){const f=E.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:l,removeGlobalListener:h}=Np(),u=v=>{!f.el||(e==null?void 0:e(v,f.el))===!1||(f.originalTouchAction=f.el.style.touchAction,f.el.style.touchAction="none",f.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",f.started=!0)},p=v=>{var y;if(v.button===0&&f.id==null){if(f.started=!1,((y=o.onPointerDown)==null?void 0:y.call(o,v))===!1)return;s&&v.stopPropagation(),i&&v.preventDefault(),f.id=v.pointerId,f.el=v.currentTarget,f.lastPosition={x:v.clientX,y:v.clientY},a&&(f.longPressTimer=setTimeout(()=>{a(v,f.el),f.longPressTriggered=!0},400)),(e||t)&&l(window,"pointermove",m,!1),l(window,"pointerup",g,!1),l(window,"pointercancel",g,!1)}},m=v=>{if(v.pointerId===f.id){const y=v.clientX-f.lastPosition.x,b=v.clientY-f.lastPosition.y;(Math.abs(y)>=r||Math.abs(b)>=r)&&!f.started&&u(v),f.started&&(t==null||t(v,y,b),f.lastPosition={x:v.clientX,y:v.clientY})}},g=v=>{var y;if(v.pointerId===f.id){f.longPressTimer&&clearTimeout(f.longPressTimer);const b=f.longPressTriggered;f.longPressTriggered=!1,f.started&&(n==null||n(v)),f.el&&(v.type!=="pointercancel"&&((y=o.onPointerUp)==null||y.call(o,v,f.el),v.target&&f.el.contains(v.target)&&(b?a==null||a(v,f.el):d==null||d(v,f.el))),document.documentElement.style.userSelect=f.originalUserSelect||"",f.el.style.touchAction=f.originalTouchAction||""),f.id=void 0,f.started=!1,h(window,"pointermove",m,!1),h(window,"pointerup",g,!1),h(window,"pointercancel",g,!1)}};return{domProps:{onPointerDown:Lt(p)}}}function JF(e,t){const n={...e};n.left=Math.max(0,n.left);const r=n.left-e.left;r>0&&(n.width-=r),n.top=Math.max(0,n.top);const i=n.top-e.top;return i>0&&(n.height-=i),n.width=Math.min(n.width,t.width-n.left),n.height=Math.min(n.height,t.height-n.top),n}function Oa(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}var en=(e=>(e.topLeft="topLeft",e.topRight="topRight",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight",e))(en||{});let Te={};const EC=(e={})=>{$o(null),Te=e};function TC({aspectRatio:e,boundaryRef:t,boundaryRect:n,restrictWithinBoundary:r=!0,minWidth:i=50,minHeight:s=50,...d}){const a={onMoveStart:(c,f)=>{var h;const l=c.target;if(!l.dataset.resizeHandle||va||(EC({currentRect:Oa(f.getBoundingClientRect()),resizeDir:l.dataset.resizeHandle}),!Te.currentRect))return!1;$o("resize"),n?Te.boundaryRect=n:t!=null&&t.current&&(Te.boundaryRect=Oa(t.current.getBoundingClientRect())),Te.currentRect&&Te.boundaryRect&&(Te.currentRect.left-=Te.boundaryRect.left,Te.currentRect.top-=Te.boundaryRect.top),Te.initialAspectRatio=Te.currentRect.width/Te.currentRect.height,(h=d.onResizeStart)==null||h.call(d,ar({rect:Te.currentRect,e:c}))},onMove:(c,f,l)=>{var m;if(!Te.resizeDir||!Te.currentRect)return;const h=e==="initial"?Te.initialAspectRatio:e,u=eR(Te.currentRect,f,l,h),p=tR(u,i,s,h);(m=d.onResize)==null||m.call(d,ar({rect:p,e:c,deltaX:f,deltaY:l})),Te.currentRect=u},onMoveEnd:c=>{var f;Te.currentRect&&((f=d.onResizeEnd)==null||f.call(d,ar({rect:Te.currentRect,e:c}))),EC()}},{domProps:o}=Pu(a);return{resizeProps:o}}function eR(e,t,n,r){const i={...e},s={...e};return Te.resizeDir==="topRight"?(s.width=Math.floor(s.width+t),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height-n),s.top=Math.floor(s.top+(i.height-s.height))):Te.resizeDir==="bottomRight"?(s.width=Math.floor(s.width+t),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height+n)):Te.resizeDir==="topLeft"?(s.width=Math.floor(s.width-t),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height-n),s.left=Math.floor(s.left+(i.width-s.width)),s.top=Math.floor(s.top+(i.height-s.height))):Te.resizeDir==="bottomLeft"&&(s.width=Math.floor(s.width-t),r?s.height=Math.floor(s.width/r):s.height=Math.floor(s.height+n),s.left=Math.floor(s.left+t)),s}function tR(e,t,n,r){const i=Te.resizeDir==="bottomLeft"||Te.resizeDir==="topLeft",s=Te.resizeDir==="topRight"||Te.resizeDir==="topLeft";let d={...e};d.width=Math.max(t,e.width),d.height=Math.max(n,e.height);const a=d.width-e.width;i&&a>0&&(d.left-=a);const o=d.height-e.height;if(s&&o>0&&(d.top-=o),Te.boundaryRect&&(d=JF(d,Te.boundaryRect)),r){const c=d.width,f=d.height,l=Yp(r,d.width,d.height);d.width=l.width,d.height=l.height,s&&(d.top+=f-d.height),i&&(d.left+=c-d.width)}return d}function Ur({position:e,inset:t=!1}){const n=nR(e,t);return w.jsx("div",{"data-resize-handle":e,className:`border-white absolute w-20 h-20 ${n}`})}function nR(e,t){const n=t?"left-0":"-left-5",r=t?"top-0":"-top-5",i=t?"bottom-0":"-bottom-5",s=t?"right-0":"-right-5";switch(e){case en.topLeft:return`${n} ${r} border-l-4 border-t-4 cursor-nwse-resize`;case en.topRight:return`${s} ${r} border-r-4 border-t-4 cursor-nesw-resize`;case en.bottomRight:return`${s} ${i} border-r-4 border-b-4 cursor-se-resize`;case en.bottomLeft:return`${n} ${i} border-l-4 border-b-4 cursor-sw-resize`;default:return""}}var Pa=(e=>(e.top="maskTop",e.right="maskRight",e.bottom="maskBottom",e.left="maskLeft",e))(Pa||{});function Du({position:e,refs:t}){const n=rR(e);return w.jsx("div",{className:`cropzone-transition bg-black/50 bottom absolute ${n}`,ref:r=>t.current[e]=r})}function rR(e){switch(e){case"maskTop":return"left-0 top-0";case"maskBottom":return"bottom-0 left-0";default:return""}}function Au({name:e,refs:t}){const n=ce("cropzone-transition pointer-events-none absolute left-0 top-0 bg-white/50",e.startsWith("lineHor")?"h-px":"w-px");return w.jsx("div",{className:n,ref:r=>{t.current[e]=r}})}function Da(e,t,n){return Math.min(Math.max(e,t),n)}let Ke={};function OC({boundaryRef:e,boundaryRect:t,minimumMovement:n,restrictWithinBoundary:r=!0,...i}){const s={minimumMovement:n,onMoveStart:(a,o)=>{var c;if(va)return!1;Ke={currentRect:Oa(o.getBoundingClientRect())},$o("move"),t?Ke.boundaryRect=t:e!=null&&e.current&&(Ke.boundaryRect=Oa(e.current.getBoundingClientRect())),Ke.currentRect&&Ke.boundaryRect&&(Ke.currentRect.left-=Ke.boundaryRect.left,Ke.currentRect.top-=Ke.boundaryRect.top),(c=i.onMoveStart)==null||c.call(i,ar({rect:Ke.currentRect,e:a}))},onMove:(a,o,c)=>{var h;if(!Ke.currentRect)return;const f={...Ke.currentRect,left:Ke.currentRect.left+o,top:Ke.currentRect.top+c},l={...f};Ke.boundaryRect&&r&&(l.left=Da(f.left,0,Ke.boundaryRect.width-f.width),l.top=Da(f.top,0,Ke.boundaryRect.height-f.height)),(h=i.onMove)==null||h.call(i,ar({rect:l,e:a,deltaX:o,deltaY:c})),Ke.currentRect=f},onMoveEnd:a=>{var o;Ke.currentRect&&((o=i.onMoveEnd)==null||o.call(i,ar({rect:Ke.currentRect,e:a})),$o(null),Ke={})}},{domProps:d}=Pu(s);return{moveProps:d}}function iR(){const e=E.useRef({}),[t,n]=E.useState(!0),r=se(f=>f.canvasSize),i=se(f=>{var l,h;return(h=(l=f.config.tools)==null?void 0:l.crop)==null?void 0:h.cropzone}),s=se(f=>{var l,h;return(h=(l=f.config.tools)==null?void 0:l.crop)==null?void 0:h.defaultRatio})||null,d=se(f=>f.crop.selectedAspectRatio)||null,{moveProps:a}=OC({boundaryRect:r,onMoveStart:()=>n(!0),onMove:f=>L().crop.drawZone(f.rect),onMoveEnd:()=>n(!1)}),{resizeProps:o}=TC({boundaryRect:r,minHeight:50,minWidth:50,aspectRatio:Xp(d),onResizeStart:()=>n(!0),onResize:f=>L().crop.drawZone(f.rect),onResizeEnd:()=>n(!1)});E.useLayoutEffect(()=>{L().crop.registerRefs(e),L().crop.resetCropzone(s)},[s,r]);const c=ce("cropzone absolute z-cropzone isolate left-0 top-0 w-full h-full overflow-hidden",t&&"moving");return w.jsxs("div",{className:c,onPointerDown:f=>{f.stopPropagation(),f.preventDefault()},children:[w.jsxs("div",{className:"cropzone-transition border-white/50 absolute z-10 left-0 top-0 border",...nr(o,a),ref:f=>e.current.innerZone=f,children:[!(i!=null&&i.hideTopLeft)&&w.jsx(Ur,{position:en.topLeft,inset:!0}),!(i!=null&&i.hideTopRight)&&w.jsx(Ur,{position:en.topRight,inset:!0}),!(i!=null&&i.hideBottomLeft)&&w.jsx(Ur,{position:en.bottomLeft,inset:!0}),!(i!=null&&i.hideBottomRight)&&w.jsx(Ur,{position:en.bottomRight,inset:!0}),w.jsx(Au,{name:"lineVer1",refs:e}),w.jsx(Au,{name:"lineVer2",refs:e}),w.jsx(Au,{name:"lineHor1",refs:e}),w.jsx(Au,{name:"lineHor2",refs:e})]}),w.jsx(Du,{refs:e,position:Pa.top}),w.jsx(Du,{refs:e,position:Pa.left}),w.jsx(Du,{refs:e,position:Pa.right}),w.jsx(Du,{refs:e,position:Pa.bottom})]})}const oR=be(w.jsx("path",{d:"M 7 2 C 6.448 2 6 2.448 6 3 C 6 3.552 6.448 4 7 4 L 20 4 L 20 17 C 20 17.552 20.448 18 21 18 C 21.552 18 22 17.552 22 17 L 22 4 C 22 2.895 21.105 2 20 2 L 7 2 z M 4 6 C 2.895 6 2 6.895 2 8 L 2 20 C 2 21.105 2.895 22 4 22 L 16 22 C 17.105 22 18 21.105 18 20 L 18 8 C 18 6.895 17.105 6 16 6 L 4 6 z M 10 10 C 10.552 10 11 10.448 11 11 L 11 13 L 13 13 C 13.552 13 14 13.448 14 14 C 14 14.552 13.552 15 13 15 L 11 15 L 11 17 C 11 17.552 10.552 18 10 18 C 9.448 18 9 17.552 9 17 L 9 15 L 7 15 C 6.448 15 6 14.552 6 14 C 6 13.448 6.448 13 7 13 L 9 13 L 9 11 C 9 10.448 9.448 10 10 10 z"})),sR=be(w.jsx("path",{d:"M 11 3 L 2 21 L 11 21 L 11 3 z M 13 3 L 13 21 L 22 21 L 13 3 z M 9 11.472656 L 9 19 L 5.2363281 19 L 9 11.472656 z"})),aR=be(w.jsx("path",{d:"M 16.476562 2.4511719 C 16.392047 2.4657656 16.308531 2.5061719 16.238281 2.5761719 L 14.130859 4.6835938 C 13.956859 4.8575938 13.956859 5.1394531 14.130859 5.3144531 L 16.238281 7.4238281 C 16.519281 7.7048281 17 7.5054219 17 7.1074219 L 17 6 L 20 6 L 20 9 A 1.0001 1.0001 0 1 0 22 9 L 22 6 C 22 4.9069372 21.093063 4 20 4 L 17 4 L 17 2.8925781 C 17 2.5940781 16.730109 2.4073906 16.476562 2.4511719 z M 4 5 C 2.9069372 5 2 5.9069372 2 7 L 2 14 C 2 15.093063 2.9069372 16 4 16 L 7 16 L 7 19 C 7 20.105 7.895 21 9 21 L 16 21 C 17.105 21 18 20.105 18 19 L 18 12 C 18 10.895 17.105 10 16 10 L 13 10 L 13 7 C 13 5.9069372 12.093063 5 11 5 L 4 5 z M 4 7 L 11 7 L 11 14 L 4 14 L 4 7 z"})),lR=be(w.jsx("path",{d:"M 10 2 L 9 3 L 3 3 L 3 5 L 21 5 L 21 3 L 15 3 L 14 2 L 10 2 z M 4.3652344 7 L 5.8925781 20.263672 C 6.0245781 21.253672 6.877 22 7.875 22 L 16.123047 22 C 17.121047 22 17.974422 21.254859 18.107422 20.255859 L 19.634766 7 L 4.3652344 7 z"})),cR={width:120,height:30},uR=[{name:"Duplicate",icon:oR,onClick:()=>{L().objects.duplicate()}},{name:"Flip",icon:sR,onClick:()=>{L().objects.flipHorizontally()}},{name:"Bring to front",icon:aR,onClick:()=>{L().objects.bringToFront()}},{name:"Delete",icon:lR,onClick:()=>{L().objects.delete()}}],hR=he.forwardRef((e,t)=>{const r=se(i=>i.objects.active.isMoving)?"opacity-0":"opacity-100";return w.jsx("div",{ref:t,className:`${r} absolute z-obj-box left-0 top-0 flex items-center text-white bg-controls rounded shadow transition-opacity overflow-hidden`,children:uR.map(i=>{const s=i.icon;return w.jsx(Me,{size:"sm",className:"w-30 h-30 hover:bg-white/hover",radius:"rounded-none",onClick:i.onClick,children:w.jsx(s,{})},i.name)})})});function fR(e,t){if(!t)return;const n=e.angle||0,r=n>168&&n<188?-30:-15,i=D().canvasSize,s=D().stageSize,d=cR,a=i.top-s.top,o=i.left-s.left,c=s.width-(o+i.width),f=s.height-(a+i.height),l=-a,h=-(i.left-s.left),u=i.width-d.width+c,p=i.height-d.height+f,m=e.getBoundingRect();let g=m.top-d.height+r,v=m.left+m.width/2-d.width/2;g=Math.min(p,Math.max(l,g)),v=Math.min(u,Math.max(h,v)),t.style.transform=`translate(${v}px, ${g}px) rotate(0deg)`}function dR(e){const t=L().objects.getActive();if(!t||!e.rect.angle)return;const n=fe.fabric.util.radiansToDegrees(e.rect.angle);n!==t.angle&&L().objects.setValues({angle:n})}function pR(e){const t=e.rect.width/2,n=e.rect.height/2;L().objects.setValues({left:(e.rect.left+t)/D().zoom,top:(e.rect.top+n)/D().zoom})}function gR(e){const t=L().objects.getActive();if(!t)return;const n={};mr(t)?(e.deltaX>0||t.getScaledHeight()>=20&&t.getScaledWidth()>=20)&&(n.fontSize=(t.fontSize||1)+e.deltaX):(t.width&&(n.scaleX=e.rect.width/D().zoom/t.width),t.height&&(n.scaleY=e.rect.height/D().zoom/t.height)),L().objects.setValues(n)}function PC(e,t){const n=L().objects.getActive();if(!n||!e.current)return;const r=e.current,i=fe.fabric.util.degreesToRadians(n.angle??0);let s=Math.round(n.getScaledWidth()*D().zoom),d=Math.round(n.getScaledHeight()*D().zoom),a=Math.round((n.left??0)*D().zoom),o=Math.round((n.top??0)*D().zoom);const c=n.originX==="center"?s/2:0,f=n.originY==="center"?d/2:0;n.padding&&(s+=n.padding*2,d+=n.padding*2,a-=n.padding,o-=n.padding),r.style.width=`${s}px`,r.style.height=`${d}px`,r.style.transform=`translate(${a-c}px, ${o-f}px) rotate(${i}rad)`,L().canvas.render(),fR(n,t.current)}function mR(){var t;const e=L().objects.getActive();mr(e)&&(e.enterEditing(),(t=e.hiddenTextarea)==null||t.focus())}function vR(){return w.jsx("div",{className:"absolute -bottom-20 left-1/2 w-2 h-20 bg-white cursor-default -translate-x-1/2",children:w.jsx("div",{"data-rotate-handle":!0,className:"w-18 h-18 absolute -bottom-10 -left-8 bg-white rounded-full cursor-move"})})}let Rn={};function yR(e){const t={onMoveStart:(r,i)=>{var c,f;if(!r.target.dataset.rotateHandle||va)return!1;const d=Oa(i.getBoundingClientRect());if(!d)return!1;const a=(c=i.style.transform.match(/rotate\((.+?)\)/))==null?void 0:c[1],[o="0"]=a?a.split(","):[];AC({currentRect:d,centerX:d.left+d.width/2,centerY:d.top+d.height/2,startAngle:parseFloat(o)}),$o("rotate"),Rn.startAngle=DC(r),(f=e.onRotateStart)==null||f.call(e,ar({rect:d,e:r}))},onMove:(r,i,s)=>{var a;if(!Rn.currentRect)return;const d={...Rn.currentRect};d.angle=DC(r),d.left+=i,d.top+=s,(a=e.onRotate)==null||a.call(e,ar({rect:d,e:r,deltaX:i,deltaY:s})),Rn.currentRect=d},onMoveEnd:r=>{var i;Rn.currentRect&&((i=e.onRotateEnd)==null||i.call(e,ar({rect:Rn.currentRect,e:r}))),AC()}},{domProps:n}=Pu(t);return{rotateProps:n}}function DC(e){const t={x:Rn.centerX||0,y:Rn.centerY||0};return Math.atan2(t.y-e.pageY,t.x-e.pageX)-(Rn.startAngle||0)}const AC=(e={})=>{$o(null),Rn=e};function bR(){const e=E.useRef(null),t=E.useRef(null),n=se(h=>h.objects.active.id),r=se(h=>h.objects.isEditingText),i=se(h=>h.zoom),s=xR(),d=E.useRef(null),a=E.useCallback(()=>{d.current?(clearTimeout(d.current),d.current=null,mR()):d.current=setTimeout(()=>{d.current=null},300)},[]);let{moveProps:o}=OC({boundaryRef:D().canvasRef,restrictWithinBoundary:!1,onMoveEnd:()=>{D().objects.setActiveIsMoving(!1)},onMove:h=>{D().objects.setActiveIsMoving(!0),pR(h)}});s.lockMovement&&(o={});const{resizeProps:c}=TC({minWidth:50,minHeight:50,aspectRatio:s.unlockAspectRatio?null:"initial",boundaryRef:s.containWithinCanvas?D().canvasRef:void 0,restrictWithinBoundary:!1,onResizeEnd:()=>{D().objects.setActiveIsMoving(!1)},onResize:h=>{D().objects.setActiveIsMoving(!0),gR(h)}}),{rotateProps:f}=yR({boundaryRef:D().canvasRef,onRotateEnd:()=>{D().objects.setActiveIsMoving(!1)},onRotate:h=>{D().objects.setActiveIsMoving(!0),dR(h)}});E.useEffect(()=>{de()&&D().editor.on("object:modified",h=>{h.sizeOrPositionChanged&&PC(e,t)})},[]),E.useEffect(()=>{PC(e,t)},[n,i,r]);const l=n&&!r?"block":"hidden";return w.jsxs("div",{className:l,children:[w.jsxs("div",{ref:e,...nr(f,c,o),onClick:a,className:"absolute z-obj-box border-2 border-white shadow-md cursor-move",children:[!s.hideTopLeft&&w.jsx(Ur,{position:en.topLeft}),!s.hideTopRight&&w.jsx(Ur,{position:en.topRight}),!s.hideBottomLeft&&w.jsx(Ur,{position:en.bottomLeft}),!s.hideBottomRight&&w.jsx(Ur,{position:en.bottomRight}),!s.hideRotatingPoint&&w.jsx(vR,{})]}),w.jsx(hR,{ref:t})]})}function xR(){const e=L().objects.getActive();if(!e||!e.name)return{};const t=D().config.objectControls||{},n=e.name;return{...t.global,...t[n]}}function wR(){const e=se(n=>n.activeTool===Pe.CROP),t=se(n=>n.objects.active.id);return w.jsxs("div",{children:[e&&w.jsx(iR,{}),t&&w.jsx(bR,{})]})}const CR=QF([zF,BF]),_R=he.forwardRef((e,t)=>{const[n,r]=E.useState(!1);E.useEffect(()=>se.subscribe(s=>s.loading,s=>{r(!s)}),[]);const i={visible:{opacity:1,transition:{duration:.35,delay:.5}},hidden:{opacity:0,transition:{duration:0}}};return w.jsx(SR,{children:w.jsxs(yt.div,{initial:{opacity:0},variants:i,animate:n?"visible":"hidden",className:"relative m-auto w-max",style:{backgroundImage:`url(${Zt("images/empty-canvas-bg.png")})`},children:[w.jsx(wR,{}),w.jsx("canvas",{ref:t})]})})});function SR({children:e}){const t=E.useRef(null),n=CR({onPinch:r=>{if(!L().zoom.allowUserZoom||!MC(r))return r.cancel();r.direction[0]===1?L().zoom.zoomIn(.01):L().zoom.zoomOut(.01),r.event.stopPropagation(),r.event.preventDefault()},onDrag:r=>{if(r.pinching||!MC(r))return r.cancel();t.current.scrollLeft-=r.delta[0],t.current.scrollTop-=r.delta[1]}});return w.jsx("div",{ref:t,className:"w-full h-full overflow-auto touch-none flex",...n(),children:e})}function MC(e){return!(de().findTarget(e.event,!1)||de().isDrawingMode)}function jg({actionBtn:e,children:t,className:n}){return w.jsxs("div",{className:ce(n,"flex gap-16 items-center h-full"),children:[e&&w.jsx("div",{className:"flex-shrink-0",children:e}),w.jsx("div",{className:"w-full flex-auto",children:t}),e&&w.jsx("div",{className:"w-96"})]})}function qo(){return(qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mu(e,t){if(e==null)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}function Aa(e){var t=E.useRef(e),n=E.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var Ma=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},ja=function(e){return"touches"in e},Ig=function(e){return e&&e.ownerDocument.defaultView||self},jC=function(e,t,n){var r=e.getBoundingClientRect(),i=ja(t)?function(s,d){for(var a=0;a<s.length;a++)if(s[a].identifier===d)return s[a];return s[0]}(t.touches,n):t;return{left:Ma((i.pageX-(r.left+Ig(e).pageXOffset))/r.width),top:Ma((i.pageY-(r.top+Ig(e).pageYOffset))/r.height)}},IC=function(e){!ja(e)&&e.preventDefault()},FC=he.memo(function(e){var t=e.onMove,n=e.onKey,r=Mu(e,["onMove","onKey"]),i=E.useRef(null),s=Aa(t),d=Aa(n),a=E.useRef(null),o=E.useRef(!1),c=E.useMemo(function(){var u=function(g){IC(g),(ja(g)?g.touches.length>0:g.buttons>0)&&i.current?s(jC(i.current,g,a.current)):m(!1)},p=function(){return m(!1)};function m(g){var v=o.current,y=Ig(i.current),b=g?y.addEventListener:y.removeEventListener;b(v?"touchmove":"mousemove",u),b(v?"touchend":"mouseup",p)}return[function(g){var v=g.nativeEvent,y=i.current;if(y&&(IC(v),!function(x,C){return C&&!ja(x)}(v,o.current)&&y)){if(ja(v)){o.current=!0;var b=v.changedTouches||[];b.length&&(a.current=b[0].identifier)}y.focus(),s(jC(y,v,a.current)),m(!0)}},function(g){var v=g.which||g.keyCode;v<37||v>40||(g.preventDefault(),d({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},m]},[d,s]),f=c[0],l=c[1],h=c[2];return E.useEffect(function(){return h},[h]),he.createElement("div",qo({},r,{onTouchStart:f,onMouseDown:f,className:"react-colorful__interactive",ref:i,onKeyDown:l,tabIndex:0,role:"slider"}))}),Fg=function(e){return e.filter(Boolean).join(" ")},RC=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,s=Fg(["react-colorful__pointer",e.className]);return he.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},he.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},ht=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},kR=function(e){return DR(Rg(e))},Rg=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?ht(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?ht(parseInt(e.substring(6,8),16)/255,2):1}},ER=function(e){return PR(OR(e))},TR=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:ht(e.h),s:ht(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:ht(i/2),a:ht(r,2)}},Lg=function(e){var t=TR(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},OR=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),d=r*(1-n),a=r*(1-(t-s)*n),o=r*(1-(1-t+s)*n),c=s%6;return{r:ht(255*[r,a,d,d,o,r][c]),g:ht(255*[o,r,r,a,d,d][c]),b:ht(255*[d,d,o,r,r,a][c]),a:ht(i,2)}},ju=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},PR=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=i<1?ju(ht(255*i)):"";return"#"+ju(t)+ju(n)+ju(r)+s},DR=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),d=s-Math.min(t,n,r),a=d?s===t?(n-r)/d:s===n?2+(r-t)/d:4+(t-n)/d:0;return{h:ht(60*(a<0?a+6:a)),s:ht(s?d/s*100:0),v:ht(s/255*100),a:i}},AR=he.memo(function(e){var t=e.hue,n=e.onChange,r=Fg(["react-colorful__hue",e.className]);return he.createElement("div",{className:r},he.createElement(FC,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Ma(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ht(t),"aria-valuemax":"360","aria-valuemin":"0"},he.createElement(RC,{className:"react-colorful__hue-pointer",left:t/360,color:Lg({h:t,s:100,v:100,a:1})})))}),MR=he.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:Lg({h:t.h,s:100,v:100,a:1})};return he.createElement("div",{className:"react-colorful__saturation",style:r},he.createElement(FC,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Ma(t.s+100*i.left,0,100),v:Ma(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ht(t.s)+"%, Brightness "+ht(t.v)+"%"},he.createElement(RC,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Lg(t)})))}),LC=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},jR=function(e,t){return e.toLowerCase()===t.toLowerCase()||LC(Rg(e),Rg(t))};function IR(e,t,n){var r=Aa(n),i=E.useState(function(){return e.toHsva(t)}),s=i[0],d=i[1],a=E.useRef({color:t,hsva:s});E.useEffect(function(){if(!e.equal(t,a.current.color)){var c=e.toHsva(t);a.current={hsva:c,color:t},d(c)}},[t,e]),E.useEffect(function(){var c;LC(s,a.current.hsva)||e.equal(c=e.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,e,r]);var o=E.useCallback(function(c){d(function(f){return Object.assign({},f,c)})},[]);return[s,o]}var FR=typeof window<"u"?E.useLayoutEffect:E.useEffect,RR=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},zC=new Map,LR=function(e){FR(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!zC.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,zC.set(t,n);var r=RR();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},zR=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,s=e.onChange,d=Mu(e,["className","colorModel","color","onChange"]),a=E.useRef(null);LR(a);var o=IR(n,i,s),c=o[0],f=o[1],l=Fg(["react-colorful",t]);return he.createElement("div",qo({},d,{ref:a,className:l}),he.createElement(MR,{hsva:c,onChange:f}),he.createElement(AR,{hue:c.h,onChange:f,className:"react-colorful__last-control"}))},BR={defaultColor:"000",toHsva:kR,fromHsva:function(e){return ER({h:e.h,s:e.s,v:e.v,a:1})},equal:jR},NR=function(e){return he.createElement(zR,qo({},e,{colorModel:BR}))},$R=/^#?([0-9A-F]{3,8})$/i,VR=function(e){var t=e.color,n=t===void 0?"":t,r=e.onChange,i=e.onBlur,s=e.escape,d=e.validate,a=e.format,o=e.process,c=Mu(e,["color","onChange","onBlur","escape","validate","format","process"]),f=E.useState(function(){return s(n)}),l=f[0],h=f[1],u=Aa(r),p=Aa(i),m=E.useCallback(function(v){var y=s(v.target.value);h(y),d(y)&&u(o?o(y):y)},[s,o,d,u]),g=E.useCallback(function(v){d(v.target.value)||h(s(n)),p(v)},[n,s,d,p]);return E.useEffect(function(){h(s(n))},[n,s]),he.createElement("input",qo({},c,{value:a?a(l):l,spellCheck:"false",onChange:m,onBlur:g}))},BC=function(e){return"#"+e},HR=function(e){var t=e.prefixed,n=e.alpha,r=Mu(e,["prefixed","alpha"]),i=E.useCallback(function(d){return d.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),s=E.useCallback(function(d){return function(a,o){var c=$R.exec(a),f=c?c[1].length:0;return f===3||f===6||!!o&&f===4||!!o&&f===8}(d,n)},[n]);return he.createElement(VR,qo({},r,{escape:i,format:t?BC:void 0,process:BC,validate:s}))},NC={};NC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:" ",green:"","green cyan":" ",hue:" ",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var $C={};$C={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:" ",white:"",yellow:"","yellow green":" "};var VC={};VC={alpha:"Alfa",black:"ern",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hnd","brown yellow":"hndolut",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"tyrkysov","cyan blue":"tyrkysovomodr",dark:"tmav",gray:"ed",grayish:"naedl",green:"Zelen","green cyan":"zelenotyrkysov",hue:"Odstn",light:"svtl",lightness:"Svtlost",magenta:"purpurov","magenta pink":"purpurov rov",orange:"oranov","orange yellow":"oranovolut",pale:"bled",pink:"rov","pink red":"rovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Sytost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prhledn`,"very dark":"velmi tmav","very light":"velmi svtl",vibrant:"ziv",white:"bl",yellow:"lut","yellow green":"lutozelen"};var HC={};HC={alpha:"Alfa",black:"sort",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyan bl",dark:"mrk",gray:"gr",grayish:"grlig",green:"Grn","green cyan":"grn cyan",hue:"Tone",light:"lys",lightness:"Lyshed",magenta:"magenta","magenta pink":"magenta pink",orange:"orange","orange yellow":"orangegul",pale:"bleg",pink:"lyserd","pink red":"lyserdlig rd",purple:"lilla","purple magenta":"lilla magenta",red:"Rd","red orange":"rdorange",saturation:"Farvemtning",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} gennemsigtig`,"very dark":"meget mrk","very light":"meget lys",vibrant:"klar",white:"hvid",yellow:"gul","yellow green":"gulgrn"};var WC={};WC={alpha:"Alpha",black:"Schwarz",blue:"Blau","blue purple":"Blaulila",brightness:"Helligkeit",brown:"Braun","brown yellow":"Braungelb",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"Cyan","cyan blue":"Cyanblau",dark:"dunkles",gray:"Grau",grayish:"gruliches",green:"Grn","green cyan":"Grncyan",hue:"Farbton",light:"helles",lightness:"Leuchtkraft",magenta:"Magenta","magenta pink":"Magentarosa",orange:"Orange","orange yellow":"Orangegelb",pale:"blasses",pink:"Rosa","pink red":"Rosarot",purple:"Lila","purple magenta":"Lilamagenta",red:"Rot","red orange":"Rotorange",saturation:"Sttigung",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, zu ${e.percentTransparent} transparent`,"very dark":"sehr dunkles","very light":"sehr helles",vibrant:"lebhaftes",white:"Wei",yellow:"Gelb","yellow green":"Gelbgrn"};var UC={};UC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var YC={};YC={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"very dark",dark:"dark",light:"light","very light":"very light",pale:"pale",grayish:"grayish",vibrant:"vibrant",black:"black",white:"white",gray:"gray",pink:"pink","pink red":"pink red","red orange":"red orange",brown:"brown",orange:"orange","orange yellow":"orange yellow","brown yellow":"brown yellow",yellow:"yellow","yellow green":"yellow green","green cyan":"green cyan",cyan:"cyan","cyan blue":"cyan blue","blue purple":"blue purple",purple:"purple","purple magenta":"purple magenta",magenta:"magenta","magenta pink":"magenta pink"};var XC={};XC={alpha:"Alpha",black:"negro",blue:"Azul","blue purple":"prpura azulado",brightness:"Brillo",brown:"marrn","brown yellow":"amarillo amarronado",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cian","cyan blue":"azul cian",dark:"oscuro",gray:"gris",grayish:"grisceo",green:"Verde","green cyan":"cian verdoso",hue:"Tono",light:"claro",lightness:"Luminosidad",magenta:"magenta","magenta pink":"rosa magenta",orange:"naranja","orange yellow":"amarillo anaranjado",pale:"plido",pink:"rosa","pink red":"rojo rosado",purple:"morado","purple magenta":"magenta violceo",red:"Rojo","red orange":"naranja rojizo",saturation:"Saturacin",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muy oscuro","very light":"muy claro",vibrant:"intenso",white:"blanco",yellow:"amarillo","yellow green":"verde amarillento"};var GC={};GC={alpha:"Alfa",black:"must",blue:"Sinine","blue purple":"sinakaslilla",brightness:"Heledus",brown:"pruun","brown yellow":"pruunikaskollane",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"tsaan","cyan blue":"tsaansinine",dark:"tume",gray:"hall",grayish:"hallikas",green:"Roheline","green cyan":"tsaanroheline",hue:"Vrv",light:"valgus",lightness:"Valgus",magenta:"magentapunane","magenta pink":"magentaroosa",orange:"oran","orange yellow":"oranikaskollane",pale:"kahvatu",pink:"roosa","pink red":"vaarikapunane",purple:"lilla","purple magenta":"purpurne magenta",red:"Punane","red orange":"punakasoran",saturation:"Kllastus",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} lbipaistev`,"very dark":"vga tume","very light":"vga hele",vibrant:"ere",white:"valge",yellow:"kollane","yellow green":"kollakasroheline"};var KC={};KC={alpha:"Alpha",black:"musta",blue:"Sininen","blue purple":"sinivioletti",brightness:"Kirkkaus",brown:"ruskea","brown yellow":"ruskeankeltainen",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"syaani","cyan blue":"syaaninsininen",dark:"tumma",gray:"harmaa",grayish:"harmahtava",green:"Vihre","green cyan":"vihrensyaani",hue:"Svy",light:"vaalea",lightness:"Valomr",magenta:"magenta","magenta pink":"magentapinkki",orange:"oranssi","orange yellow":"oranssinkeltainen",pale:"vaalea",pink:"pinkki","pink red":"vaaleanpunainen",purple:"violetti","purple magenta":"violettimagenta",red:"Punainen","red orange":"punaoranssi",saturation:"Vrikyllisyys",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} lpinkyv`,"very dark":"hyvin tumma","very light":"erittin vaalea",vibrant:"eloisa",white:"valkea",yellow:"keltainen","yellow green":"keltavihre"};var qC={};qC={alpha:"Alpha",black:"Noir",blue:"Bleu","blue purple":"Violet bleu",brightness:"Luminosit",brown:"Brun","brown yellow":"Jaune brun",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"Cyan","cyan blue":"Bleu cyan",dark:"Sombre",gray:"Gris",grayish:"Gristre",green:"Vert","green cyan":"Cyan vert",hue:"Teinte",light:"Clair",lightness:"Luminosit",magenta:"Magenta","magenta pink":"Rose magenta",orange:"Orange","orange yellow":"Jaune orang",pale:"Ple",pink:"Rose","pink red":"Rouge ros",purple:"Violet","purple magenta":"Magenta violet",red:"Rouge","red orange":"Orange rouge",saturation:"Saturation",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"Trs sombre","very light":"Trs clair",vibrant:"Vif",white:"Blanc",yellow:"Jaune","yellow green":"Vert jaune"};var ZC={};ZC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:" ",magenta:"'","magenta pink":" '",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"' ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var QC={};QC={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavo ljubiasta",brightness:"Svjetlina",brown:"smea","brown yellow":"smee uta",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasto",green:"Zelena","green cyan":"zelena cijan",hue:"Nijansa",light:"svjetlo",lightness:"Osvijetljenost",magenta:"magenta","magenta pink":"magentno ruiasta",orange:"naranasta","orange yellow":"naranasto uta",pale:"blijeda",pink:"ruiasta","pink red":"ruiasto crvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crveno naranasta",saturation:"Zasienost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozirnosti`,"very dark":"jako tamna","very light":"vrlo svijetlo",vibrant:"vibrantna",white:"bijela",yellow:"uto","yellow green":"uto zelena"};var JC={};JC={alpha:"Alfa",black:"fekete",blue:"Kk","blue purple":"kk lila",brightness:"Fnyessg",brown:"barna","brown yellow":"barna srga",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cinkk","cyan blue":"cinkk",dark:"stt",gray:"szrke",grayish:"szrks",green:"Zld","green cyan":"zld cinkk",hue:"Sznrnyalat",light:"vilgos",lightness:"Vilgossg",magenta:"bbor","magenta pink":"bbor rzsaszn",orange:"narancs","orange yellow":"narancssrga",pale:"halvny",pink:"rzsaszn","pink red":"rzsaszn piros",purple:"lila","purple magenta":"lila bbor",red:"Piros","red orange":"piros narancs",saturation:"Teltettsg",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} tltsz`,"very dark":"nagyon stt","very light":"nagyon vilgos",vibrant:"lnk",white:"fehr",yellow:"srga","yellow green":"srga zld"};var e_={};e_={alpha:"Alfa",black:"nero",blue:"Blu","blue purple":"blu viola",brightness:"Luminosit",brown:"marrone","brown yellow":"giallo bruno",colorName:e=>`${e.hue} ${e.chroma} ${e.lightness}`,cyan:"ciano","cyan blue":"blu ciano",dark:"scuro",gray:"grigio",grayish:"grigiastro",green:"Verde","green cyan":"verde ciano",hue:"Tonalit",light:"chiaro",lightness:"Luminosit",magenta:"magenta","magenta pink":"rosa magenta",orange:"arancio","orange yellow":"giallo arancio",pale:"tenue",pink:"rosa","pink red":"rosa rosso",purple:"viola","purple magenta":"viola magenta",red:"Rosso","red orange":"rosso arancio",saturation:"Saturazione",transparentColorName:e=>`${e.hue} ${e.chroma} ${e.lightness}, trasparenza ${e.percentTransparent}`,"very dark":"molto scuro","very light":"molto chiaro",vibrant:"vivace",white:"bianco",yellow:"giallo","yellow green":"giallo verde"};var t_={};t_={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var n_={};n_={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":""};var r_={};r_={alpha:"Alfa",black:"juoda",blue:"Mlyna","blue purple":"melsvai violetin",brightness:"Rykumas",brown:"ruda","brown yellow":"rusvai geltona",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"alsvai mlyna","cyan blue":"alsvai mlyna",dark:"tamsi",gray:"pilka",grayish:"pilkva",green:"alia","green cyan":"alsvai mlyna",hue:"Atspalvis",light:"viesi",lightness:"viesumas",magenta:"rausvai raudona","magenta pink":"purpurin",orange:"oranin","orange yellow":"oraninio atspalvio geltona",pale:"blyki",pink:"roin","pink red":"roin raudona",purple:"violetin","purple magenta":"purpurin rausvai raudona",red:"Raudona","red orange":"rausvai oranin",saturation:"sotinimas",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} skaidri`,"very dark":"labai tamsi","very light":"labai viesi",vibrant:"ryki",white:"balta",yellow:"geltona","yellow green":"gelsvai alia"};var i_={};i_={alpha:"Alfa",black:"melns",blue:"Zila","blue purple":"zili violets",brightness:"Spilgtums",brown:"brns","brown yellow":"brni dzeltens",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cins","cyan blue":"cina zils",dark:"tums",gray:"pelks",grayish:"pelcgs",green:"Zaa","green cyan":"za cins",hue:"Nokrsa",light:"gais",lightness:"Gaiums",magenta:"fuksiju","magenta pink":"fuksiju roz",orange:"orans","orange yellow":"orani dzeltens",pale:"bls",pink:"roz","pink red":"rozgi sarkans",purple:"violets","purple magenta":"violets fuksiju",red:"Sarkana","red orange":"sarkangi orans",saturation:"Piestinjums",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} caurspdgs`,"very dark":"oti tums","very light":"oti gais",vibrant:"kos",white:"balts",yellow:"dzeltens","yellow green":"dzelteni za"};var o_={};o_={alpha:"Alfa",black:"svart",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnn","green cyan":"grnncyan",hue:"Fargetone",light:"lys",lightness:"Lyshet",magenta:"magenta","magenta pink":"magentarosa",orange:"oransje","orange yellow":"oransjegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lilla","purple magenta":"lillamagenta",red:"Rd","red orange":"rdoransje",saturation:"Metning",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} gjennomsiktig`,"very dark":"svrt mrk","very light":"svrt lys",vibrant:"levende",white:"hvit",yellow:"gul","yellow green":"gulgrnn"};var s_={};s_={alpha:"Alfa",black:"zwart",blue:"Blauw","blue purple":"paarsblauw",brightness:"Helderheid",brown:"bruin","brown yellow":"bruingeel",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyaan","cyan blue":"cyaanblauw",dark:"donker",gray:"grijs",grayish:"grijsachtig",green:"Groen","green cyan":"cyaangroen",hue:"Kleurtoon",light:"licht",lightness:"Lichtsterkte",magenta:"magenta","magenta pink":"magentaroze",orange:"oranje","orange yellow":"oranjegeel",pale:"bleek",pink:"roze","pink red":"rozerood",purple:"paars","purple magenta":"magentapaars",red:"Rood","red orange":"roodoranje",saturation:"Verzadiging",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparant`,"very dark":"heel donker","very light":"heel licht",vibrant:"levendig",white:"wit",yellow:"geel","yellow green":"geelgroen"};var a_={};a_={alpha:"Alfa",black:"czarny",blue:"Niebieski","blue purple":"niebiesko-fioletowy",brightness:"Jasno",brown:"brzowy","brown yellow":"brzowo-ty",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyjanowy","cyan blue":"cyjanowo-niebieski",dark:"ciemny",gray:"szary",grayish:"szarawy",green:"Zielony","green cyan":"zielono-cyjanowy",hue:"Odcie",light:"jasny",lightness:"Jaskrawo",magenta:"purpurowy","magenta pink":"purpurowo-rowy",orange:"pomaraczowy","orange yellow":"pomaraczowo-ty",pale:"blady",pink:"rowy","pink red":"rowo-czerwony",purple:"fioletowy","purple magenta":"fioletowo-purpurowy",red:"Czerwony","red orange":"czerwono-pomaraczowy",saturation:"Nasycenie",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} przezroczystoci`,"very dark":"bardzo ciemny","very light":"bardzo jasny",vibrant:"intensywny",white:"biay",yellow:"ty","yellow green":"to-zielony"};var l_={};l_={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"roxo azulado",brightness:"Brilho",brown:"marrom","brown yellow":"marrom amarelado",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinza",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Matiz",light:"claro",lightness:"Luminosidade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo alaranjado",pale:"plido",pink:"rosa","pink red":"rosa avermelhado",purple:"roxo","purple magenta":"roxo-magenta",red:"Vermelho","red orange":"laranja avermelhado",saturation:"Saturao",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde amarelado"};var c_={};c_={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"azul-prpura",brightness:"Luminosidade",brown:"castanho","brown yellow":"amarelo-castanho",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinzento",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Tonalidade",light:"claro",lightness:"Claridade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo-laranja",pale:"plido",pink:"cor-de-rosa","pink red":"vermelho-rosa",purple:"prpura","purple magenta":"prpura-magenta",red:"Vermelho","red orange":"laranja-vermelho",saturation:"Saturao",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde-amarelo"};var u_={};u_={alpha:"Alfa",black:"negru",blue:"Albastru","blue purple":"albastru-violet",brightness:"Luminozitate",brown:"maro","brown yellow":"galben maro",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"bleu","cyan blue":"albastru-bleu",dark:"nchis",gray:"gri",grayish:"cenuiu",green:"Verde","green cyan":"verde bleu",hue:"Nuan",light:"deschis",lightness:"Luminozitate",magenta:"fucsia","magenta pink":"roz-fucsia",orange:"portocaliu","orange yellow":"galben-portocaliu",pale:"pal",pink:"roz","pink red":"roz-rou",purple:"violet","purple magenta":"violet-fucsia",red:"Rou","red orange":"portocaliu-rou",saturation:"Saturaie",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"foarte nchis","very light":"foarte deschis",vibrant:"plin de via",white:"alb",yellow:"galben","yellow green":"galben-verde"};var h_={};h_={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"  ",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue},   ${e.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var f_={};f_={alpha:"Alfa",black:"ierna",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hned","brown yellow":"hnedolt",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"azrov","cyan blue":"azrov modr",dark:"tmav",gray:"siv",grayish:"sivast",green:"Zelen","green cyan":"zelen azrov",hue:"Odtie",light:"svetl",lightness:"Svetlos",magenta:"purpurov","magenta pink":"ruov purpurov",orange:"oranov","orange yellow":"oranovolt",pale:"bled",pink:"ruov","pink red":"ruovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Stos",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} priehadn`,"very dark":"vemi tmav","very light":"vemi svetl",vibrant:"energick",white:"biela",yellow:"lt","yellow green":"ltozelen"};var d_={};d_={alpha:"Alfa",black:"rna",blue:"Modra","blue purple":"modro vijolina",brightness:"Svetlost",brown:"rjava","brown yellow":"rjavo rumena",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cian","cyan blue":"cian modra",dark:"temna",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zelena cian",hue:"Barva",light:"svetla",lightness:"Lahkost",magenta:"krlatna","magenta pink":"krlatno roza",orange:"oranna","orange yellow":"oranno rumena",pale:"bleda",pink:"roza","pink red":"roza rdea",purple:"vijolina","purple magenta":"vijolino krlatna",red:"Rdea","red orange":"rdee oranna",saturation:"Nasienost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozorna`,"very dark":"zelo temna","very light":"zelo svetla",vibrant:"ivahna",white:"bela",yellow:"rumena","yellow green":"rumeno zelena"};var p_={};p_={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavoljubiasta",brightness:"Osvetljenost",brown:"smea","brown yellow":"smeeuta",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zeleno cijan",hue:"Nijansa",light:"svetla",lightness:"Osvetljenje",magenta:"purpurnocrvena","magenta pink":"magenta ruiasta",orange:"narandasta","orange yellow":"narandastouta",pale:"bledo",pink:"ruiasta","pink red":"ruiastocrvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crvenonarandasta",saturation:"Zasienje",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozirna`,"very dark":"veoma tamno","very light":"vrlo svetlo",vibrant:"ivopisna",white:"bela",yellow:"uto","yellow green":"utozelena"};var g_={};g_={alpha:"Alfa",black:"svart",blue:"Bltt","blue purple":"bllila",brightness:"Ljusstyrka",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnt","green cyan":"grn cyan",hue:"Nyans",light:"ljus",lightness:"Ljushet",magenta:"magenta","magenta pink":"magentarosa",orange:"orange","orange yellow":"orangegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lila","purple magenta":"lila magenta",red:"Rtt","red orange":"rdorange",saturation:"Mttnad",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} genomskinlig`,"very dark":"mycket mrk","very light":"mycket ljus",vibrant:"livfull",white:"vit",yellow:"gul","yellow green":"gulgrn"};var m_={};m_={alpha:"Alfa",black:"siyah",blue:"Mavi","blue purple":"mavi mor",brightness:"Parlaklk",brown:"kahverengi","brown yellow":"kahverengi sar",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"camgbei","cyan blue":"camgbei mavi",dark:"koyu",gray:"gri",grayish:"grimsi",green:"Yeil","green cyan":"yeil camgbei",hue:"Ton",light:"ak",lightness:"Canllk",magenta:"eflatun","magenta pink":"eflatun pembe",orange:"turuncu","orange yellow":"turuncu sar",pale:"solgun",pink:"pembe","pink red":"pembe krmz",purple:"mor","purple magenta":"mor eflatun",red:"Krmz","red orange":"krmz portakal",saturation:"Doygunluk",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} saydam`,"very dark":"ok koyu","very light":"ok ak",vibrant:"canl",white:"beyaz",yellow:"sar","yellow green":"sar yeil"};var v_={};v_={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"-",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue},   ${e.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var y_={};y_={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":"/"};var b_={};b_={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var x_={};x_={"ar-AE":NC,"bg-BG":$C,"cs-CZ":VC,"da-DK":HC,"de-DE":WC,"el-GR":UC,"en-US":YC,"es-ES":XC,"et-EE":GC,"fi-FI":KC,"fr-FR":qC,"he-IL":ZC,"hr-HR":QC,"hu-HU":JC,"it-IT":e_,"ja-JP":t_,"ko-KR":n_,"lt-LT":r_,"lv-LV":i_,"nb-NO":o_,"nl-NL":s_,"pl-PL":a_,"pt-BR":l_,"pt-PT":c_,"ro-RO":u_,"ru-RU":h_,"sk-SK":f_,"sl-SI":d_,"sr-SP":p_,"sv-SE":g_,"tr-TR":m_,"uk-UA":v_,"zh-CN":y_,"zh-TW":b_};const WR=Symbol.for("react-aria.i18n.locale"),UR=Symbol.for("react-aria.i18n.strings");let Zo;class Qo{getStringForLocale(t,n){let i=this.getStringsForLocale(n)[t];if(!i)throw new Error(`Could not find intl message ${t} in ${n} locale`);return i}getStringsForLocale(t){let n=this.strings[t];return n||(n=YR(t,this.strings,this.defaultLocale),this.strings[t]=n),n}static getGlobalDictionaryForPackage(t){if(typeof window>"u")return null;let n=window[WR];if(Zo===void 0){let i=window[UR];if(!i)return null;Zo={};for(let s in i)Zo[s]=new Qo({[n]:i[s]},n)}let r=Zo==null?void 0:Zo[t];if(!r)throw new Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(t,n="en-US"){this.strings=Object.fromEntries(Object.entries(t).filter(([,r])=>r)),this.defaultLocale=n}}function YR(e,t,n="en-US"){if(t[e])return t[e];let r=XR(e);if(t[r])return t[r];for(let i in t)if(i.startsWith(r+"-"))return t[i];return t[n]}function XR(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const w_=new Map,C_=new Map;class GR{format(t,n){let r=this.strings.getStringForLocale(t,this.locale);return typeof r=="function"?r(n,this):r}plural(t,n,r="cardinal"){let i=n["="+t];if(i)return typeof i=="function"?i():i;let s=this.locale+":"+r,d=w_.get(s);d||(d=new Intl.PluralRules(this.locale,{type:r}),w_.set(s,d));let a=d.select(t);return i=n[a]||n.other,typeof i=="function"?i():i}number(t){let n=C_.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),C_.set(this.locale,n)),n.format(t)}select(t,n){let r=t[n]||t.other;return typeof r=="function"?r():r}constructor(t,n){this.locale=t,this.strings=n}}let zg=new Map,Bg=!1;try{Bg=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Iu=!1;try{Iu=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const __={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class Ia{format(t){let n="";if(!Bg&&this.options.signDisplay!=null?n=qR(this.numberFormatter,this.options.signDisplay,t):n=this.numberFormatter.format(t),this.options.style==="unit"&&!Iu){var r;let{unit:i,unitDisplay:s="short",locale:d}=this.resolvedOptions();if(!i)return n;let a=(r=__[i])===null||r===void 0?void 0:r[s];n+=a[d]||a.default}return n}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,n);if(n<t)throw new RangeError("End date must be >= start date");return`${this.format(t)}  ${this.format(n)}`}formatRangeToParts(t,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,n);if(n<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),i=this.numberFormatter.formatToParts(n);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!Bg&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!Iu&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,n={}){this.numberFormatter=KR(t,n),this.options=n}}function KR(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${n}`),t.style==="unit"&&!Iu){var r;let{unit:d,unitDisplay:a="short"}=t;if(!d)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=__[d])===null||r===void 0)&&r[a]))throw new Error(`Unsupported unit ${d} with unitDisplay = ${a}`);t={...t,style:"decimal"}}let i=e+(t?Object.entries(t).sort((d,a)=>d[0]<a[0]?-1:1).join():"");if(zg.has(i))return zg.get(i);let s=new Intl.NumberFormat(e,t);return zg.set(i,s),s}function qR(e,t,n){if(t==="auto")return e.format(n);if(t==="never")return e.format(Math.abs(n));{let r=!1;if(t==="always"?r=n>0||Object.is(n,0):t==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=e.format(-n),s=e.format(n),d=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...d].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(d,"+").replace("!!!",s)}else return e.format(n)}}function ZR(e){return e&&e.__esModule?e.default:e}let Ng=new Qo(ZR(x_));function QR(e){let t=Yr.parse(e)||Xr.parse(e)||Gr.parse(e);if(t)return t;throw new Error("Invalid color value: "+e)}const S_=.68,JR=.85,k_=.55,E_=.001,$g=[[0,"pink"],[15,"red"],[48,"orange"],[94,"yellow"],[135,"green"],[175,"cyan"],[264,"blue"],[284,"purple"],[320,"magenta"],[349,"pink"]];class Vg{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(t){if(t in this)return this[t];throw new Error("Unsupported color channel: "+t)}withChannelValue(t,n){if(t in this){let r=this.clone();return r[t]=n,r}throw new Error("Unsupported color channel: "+t)}getChannelName(t,n){return(Qo.getGlobalDictionaryForPackage("@react-stately/color")||Ng).getStringForLocale(t,n)}getColorSpaceAxes(t){let{xChannel:n,yChannel:r}=t,i=n||this.getColorChannels().find(a=>a!==r),s=r||this.getColorChannels().find(a=>a!==i),d=this.getColorChannels().find(a=>a!==i&&a!==s);return{xChannel:i,yChannel:s,zChannel:d}}getColorName(t){let[n,r,i]=O_(this),s=Qo.getGlobalDictionaryForPackage("@react-stately/color")||Ng;if(n>.999)return s.getStringForLocale("white",t);if(n<.001)return s.getStringForLocale("black",t);let d;[d,n]=this.getOklchHue(n,r,i,t);let a="",o="";r<=.1&&r>=E_?n>=.7?o="pale":o="grayish":r>=.15&&(o="vibrant"),n<.3?a="very dark":n<k_?a="dark":n<.7||(n<.85?a="light":a="very light"),o&&(o=s.getStringForLocale(o,t)),a&&(a=s.getStringForLocale(a,t));let c=this.getChannelValue("alpha"),f=new GR(t,s);if(c<1){let l=new Ia(t,{style:"percent"}).format(1-c);return f.format("transparentColorName",{lightness:a,chroma:o,hue:d,percentTransparent:l}).replace(/\s+/g," ").trim()}else return f.format("colorName",{lightness:a,chroma:o,hue:d}).replace(/\s+/g," ").trim()}getOklchHue(t,n,r,i){let s=Qo.getGlobalDictionaryForPackage("@react-stately/color")||Ng;if(n<E_)return[s.getStringForLocale("gray",i),t];for(let d=0;d<$g.length;d++){let[a,o]=$g[d],[c,f]=$g[d+1]||[360,"pink"];if(r>=a&&r<c)return o==="orange"&&(t<S_?o="brown":t=t-S_+k_),r>a+(c-a)/2&&o!==f?o=`${o} ${f}`:o==="yellow"&&t<JR&&(o="yellow green"),[s.getStringForLocale(o,i).toLocaleLowerCase(i),t]}throw new Error("Unexpected hue")}getHueName(t){let[n,r,i]=O_(this),[s]=this.getOklchHue(n,r,i,t);return s}}class Yr extends Vg{static parse(t){let n=[];if(/^#[\da-f]+$/i.test(t)&&[4,5,7,9].includes(t.length)){const s=(t.length<6?t.replace(/[^#]/gi,"$&$&"):t).slice(1).split("");for(;s.length>0;)n.push(parseInt(s.splice(0,2).join(""),16));n[3]=n[3]!==void 0?n[3]/255:void 0}const r=t.match(/^rgba?\((.*)\)$/);r!=null&&r[1]&&(n=r[1].split(",").map(s=>Number(s.trim())),n=n.map((s,d)=>Pi(s,0,d<3?255:1)));var i;return n.length<3?void 0:new Yr(n[0],n[1],n[2],(i=n[3])!==null&&i!==void 0?i:1)}toString(t="css"){switch(t){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+t)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const t=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(t,n,r),s=Math.max(t,n,r),d=s-i,a=s===0?0:d/s;let o=0;if(d!==0){switch(s){case t:o=(n-r)/d+(n<r?6:0);break;case n:o=(r-t)/d+2;break;case r:o=(t-n)/d+4;break}o/=6}return new Xr(Ze(o*360,2),Ze(a*100,2),Ze(s*100,2),this.alpha)}toHSL(){const t=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(t,n,r),s=Math.max(t,n,r),d=(s+i)/2,a=s-i;let o,c;if(a===0)o=c=0;else{switch(c=a/(d<.5?s+i:2-s-i),s){case t:o=(n-r)/a+(n<r?6:0);break;case n:o=(r-t)/a+2;break;case r:o=(t-n)/a+4;break}o/=6}return new Gr(Ze(o*360,2),Ze(c*100,2),Ze(d*100,2),this.alpha)}clone(){return new Yr(this.red,this.green,this.blue,this.alpha)}getChannelRange(t){switch(t){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"red":case"green":case"blue":return{style:"decimal"};case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return new Ia(n,r).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return Yr.colorChannels}constructor(t,n,r,i){super(),this.red=t,this.green=n,this.blue=r,this.alpha=i}}Yr.colorChannels=["red","green","blue"];const eL=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class Xr extends Vg{static parse(t){let n;if(n=t.match(eL)){var r;const[i,s,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(o=>Number(o.trim().replace("%","")));return new Xr(T_(i,360),Pi(s,0,100),Pi(d,0,100),Pi(a??1,0,1))}}toString(t="css"){switch(t){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+t)}}toHSL(){let t=this.saturation/100,n=this.brightness/100,r=n*(1-t/2);return t=r===0||r===1?0:(n-r)/Math.min(r,1-r),new Gr(Ze(this.hue,2),Ze(t*100,2),Ze(r*100,2),this.alpha)}toRGB(){let t=this.hue,n=this.saturation/100,r=this.brightness/100,i=(s,d=(s+t/60)%6)=>r-n*r*Math.max(Math.min(d,4-d,1),0);return new Yr(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new Xr(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"brightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return(t==="saturation"||t==="brightness")&&(i/=100),new Ia(n,r).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return Xr.colorChannels}constructor(t,n,r,i){super(),this.hue=t,this.saturation=n,this.brightness=r,this.alpha=i}}Xr.colorChannels=["hue","saturation","brightness"];const tL=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function T_(e,t){return(e%t+t)%t}class Gr extends Vg{static parse(t){let n;if(n=t.match(tL)){var r;const[i,s,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(o=>Number(o.trim().replace("%","")));return new Gr(T_(i,360),Pi(s,0,100),Pi(d,0,100),Pi(a??1,0,1))}}toString(t="css"){switch(t){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${Ze(this.saturation,2)}%, ${Ze(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+t)}}toHSB(){let t=this.saturation/100,n=this.lightness/100,r=n+t*Math.min(n,1-n);return t=r===0?0:2*(1-n/r),new Xr(Ze(this.hue,2),Ze(t*100,2),Ze(r*100,2),this.alpha)}toRGB(){let t=this.hue,n=this.saturation/100,r=this.lightness/100,i=n*Math.min(r,1-r),s=(d,a=(d+t/30)%12)=>r-i*Math.max(Math.min(a-3,9-a,1),-1);return new Yr(Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255),this.alpha)}clone(){return new Gr(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"lightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return(t==="saturation"||t==="lightness")&&(i/=100),new Ia(n,r).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return Gr.colorChannels}constructor(t,n,r,i){super(),this.hue=t,this.saturation=n,this.lightness=r,this.alpha=i}}Gr.colorChannels=["hue","saturation","lightness"];function O_(e){let t=e.toFormat("rgb"),n=t.getChannelValue("red")/255,r=t.getChannelValue("green")/255,i=t.getChannelValue("blue")/255;[n,r,i]=rL(n,r,i);let[s,d,a]=iL(n,r,i),[o,c,f]=oL(s,d,a);return nL(o,c,f)}function nL(e,t,n){var r=Math.atan2(n,t)*180/Math.PI;return[e,Math.sqrt(t**2+n**2),r>=0?r:r+360]}function rL(e,t,n){return[Hg(e),Hg(t),Hg(n)]}function Hg(e){let t=e<0?-1:1,n=Math.abs(e);return n<=.04045?e/12.92:t*Math.pow((n+.055)/1.055,2.4)}function iL(e,t,n){return Wg([.4123907992659595,.35758433938387796,.1804807884018343,.21263900587151036,.7151686787677559,.07219231536073371,.01933081871559185,.11919477979462599,.9505321522496606],e,t,n)}function oL(e,t,n){const r=[.819022437996703,.3619062600528904,-.1288737815209879,.0329836539323885,.9292868615863434,.0361446663506424,.0481771893596242,.2642395317527308,.6335478284694309],i=[.210454268309314,.7936177747023054,-.0040720430116193,1.9779985324311684,-2.42859224204858,.450593709617411,.0259040424655478,.7827717124575296,-.8086757549230774];let[s,d,a]=Wg(r,e,t,n);return Wg(i,Math.cbrt(s),Math.cbrt(d),Math.cbrt(a))}function Wg(e,t,n,r){let i=e[0]*t+e[1]*n+e[2]*r,s=e[3]*t+e[4]*n+e[5]*r,d=e[6]*t+e[7]*n+e[8]*r;return[i,s,d]}const sL=[{color:"rgb(255, 255, 255)",name:oe("White")},{color:"rgb(239,245,245)",name:oe("Solitude")},{color:"rgb(245,213,174)",name:oe("Wheat")},{color:"rgb(253,227,167)",name:oe("Cape Honey")},{color:"rgb(242,222,186)",name:oe("Milk punch")},{color:"rgb(97,118,75)",name:oe("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:oe("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:oe("Cosmic Latte")},{color:"rgb(233,119,119)",name:oe("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:oe("Sundown")},{color:"rgb(30,139,195)",name:oe("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:oe("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:oe("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:oe("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:oe("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:oe("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:oe("Comet"),foreground:"rgb(255, 255, 255)"}];function aL({onChange:e,value:t,colors:n}){const r=n.map(i=>{const s=t===i;return w.jsx(rr,{onClick:()=>{e==null||e(i)},className:ce("relative block flex-shrink-0 w-26 h-26 border rounded",s&&"shadow-md"),style:{backgroundColor:i},children:s&&w.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return w.jsx("div",{className:"flex flex-wrap gap-6",children:r})}const lL=sL.map(({color:e})=>e).slice(0,14);function cL({defaultValue:e,onChange:t,colorPresets:n,showInput:r}){const[i,s]=E.useState(e),d=n||lL,a=ji({size:"sm"});return w.jsxs("div",{children:[w.jsx(NR,{className:"!w-auto",color:i,onChange:o=>{t==null||t(o),s(o)}}),w.jsxs("div",{className:"px-12 py-20",children:[d&&w.jsx(aL,{colors:d,onChange:o=>{if(o){const c=QR(o).toString("hex");t==null||t(c),s(c)}},value:i}),r&&w.jsx("div",{className:"pt-20",children:w.jsx(HR,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:a.input,color:i,onChange:o=>{t==null||t(o),s(o)}})})]})]})}const Fu=he.createContext(null);function P_(){return E.useContext(Fu)}function Kr(){const{lines:e,localeCode:t}=Cu();return{trans:E.useCallback(r=>uL({...r,lines:e,localeCode:t}),[e,t])}}const uL=ya(e=>{let{lines:t,message:n,values:r,localeCode:i}=e;return n==null?"":(n=(t==null?void 0:t[n])||(t==null?void 0:t[n.toLowerCase()])||n,r&&(n=$2(i,e),Object.entries(r).forEach(([s,d])=>{n=n.replace(`:${s}`,`${d}`)})),n)},{equals:bg,callTimeout:0});function hL({onDismiss:e}){const{trans:t}=Kr(),n=()=>{e&&e()};return w.jsx("button",{className:"sr-only","aria-label":t(oe("Dismiss")),tabIndex:-1,onClick:n})}function Ru(e){const{type:t="modal",dialogProps:n,...r}=E.useContext(Fu),{children:i,className:s,size:d="md",background:a,radius:o="rounded",maxWidth:c="max-w-dialog",...f}=e;let l=null;(t==="popover"||t==="tray")&&(l=w.jsx(hL,{onDismiss:r.close}));const h=d==="fullscreenTakeover"||t==="tray",u=ce("mx-auto pointer-events-auto outline-none flex flex-col overflow-hidden",a||"bg",t!=="tray"&&fL(d),t==="tray"&&"rounded-t border-b-bg",d!=="fullscreenTakeover"&&"shadow-2xl border max-h-dialog",!h&&`${o} ${c}`,s);return w.jsxs("div",{...nr({role:"dialog",tabIndex:-1},n,f),style:{...e.style,"--be-dialog-padding":"24px"},"aria-modal":!0,className:u,children:[E.Children.toArray(i).map(p=>E.isValidElement(p)?E.cloneElement(p,{size:p.props.size??d}):p),l]})}function fL(e){switch(e){case"2xs":return"w-256";case"xs":return"w-320";case"sm":return"w-384";case"md":return"w-440";case"lg":return"w-620";case"xl":return"w-780";case"2xl":return"w-850";case"fullscreen":return"w-1280";case"fullscreenTakeover":return"w-full h-full";default:return e}}const Ug=be(w.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined"),dL=E.forwardRef(({children:e,autoFocus:t=!1,restoreFocus:n=!0,isDismissable:r=!0,isOpen:i=!1,placement:s="center",onClose:d},a)=>{const o=vg(),c=Oi(a);return w.jsxs("div",{className:"fixed inset-0 isolate z-modal",style:o,onKeyDown:f=>{f.key==="Escape"&&(f.stopPropagation(),f.preventDefault(),d())},children:[w.jsx(yg,{onClick:()=>{r&&d()}},"modal-underlay"),w.jsx(yt.div,{ref:c,className:ce("pointer-events-none absolute inset-0 z-20 flex h-full w-full",s==="center"&&"items-center justify-center",s==="top"&&"items-start justify-center pt-40"),role:"presentation",initial:{opacity:0,scale:s==="top"?1:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1},transition:{duration:.1},children:w.jsx(vu,{restoreFocus:n,autoFocus:t,contain:!0,children:e})})]})});function pL({x:e,y:t},n){return{getBoundingClientRect(){return{x:e,y:t,width:0,height:0,top:t,right:e,bottom:t,left:e}},contextElement:n}}function gL(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e}),E.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Lu(e){let{children:t,type:n,disableInitialTransition:r,isDismissable:i=!0,moveFocusToDialog:s=!0,returnFocusToTrigger:d=!0,triggerOnHover:a=!1,triggerOnContextMenu:o=!1,usePortal:c=!0,mobileType:f,alwaysReturnCurrentValueOnClose:l}=e;const h=E.useRef(null),u=o&&!e.triggerRef?h:e.triggerRef,p=E.useRef(e.value),[m,g]=Nr(e.isOpen,e.defaultIsOpen,e.onOpenChange),[v,y]=Nr(e.value,e.defaultValue,e.onValueChange);_u()&&n==="popover"&&(n=f||"modal");const x=E.useRef(null),{x:C,y:_,reference:S,strategy:T,refs:I}=cg({...e,disablePositioning:n==="modal"}),F=n==="popover"?{position:T,top:_??"",left:C??""}:{},$=E.useId(),G=`${$}-label`,ne=`${$}-description`,Y=`${$}-form`,Q=gL(e.onClose),Z=E.useCallback(U=>{typeof U>"u"&&l&&(U=v);const W=typeof U<"u"?U:p.current;Q==null||Q(W,{initialValue:p.current,valueChanged:W!==p.current}),g(!1)},[Q,g,v,l]),ie=E.useCallback(()=>{g(!0),p.current=e.value},[e.value,g]);qt(()=>{u!=null&&u.current&&I.reference.current!==u.current&&S(u.current)},[S,u==null?void 0:u.current,I]);const V=E.useMemo(()=>({"aria-labelledby":G,"aria-describedby":ne}),[G,ne]);let k;n==="modal"?k=dL:n==="tray"?k=N2:k=wu;const P=E.useMemo(()=>({dialogProps:V,type:n,labelId:G,descriptionId:ne,isDismissable:i,close:Z,value:v,initialValue:p.current,setValue:y,formId:Y}),[Z,ne,V,Y,G,n,i,v,y]);a=a&&n==="popover";const A={onPointerEnter:Lt(U=>{ie()}),onPointerLeave:Lt(U=>{x.current=setTimeout(()=>{Z()},150)})},j={onPointerEnter:Lt(U=>{x.current&&clearTimeout(x.current)}),onPointerLeave:Lt(U=>{Z()})},H={onContextMenu:Lt(U=>{U.preventDefault(),h.current=pL({x:U.clientX,y:U.clientY},U.currentTarget),ie()})},M={onClick:Lt(U=>{U.stopPropagation(),m?Z():ie()})},{dialogTrigger:O,dialog:R}=mL(t,P),B=w.jsx(tr,{initial:!r,children:m&&w.jsx(Fu.Provider,{value:P,children:w.jsx(k,{...a?j:{},ref:I.setFloating,triggerRef:I.reference,style:F,restoreFocus:d,autoFocus:s,isOpen:m,onClose:Z,isDismissable:i,isContextMenu:o,placement:e.placement,children:R})})});return w.jsxs(E.Fragment,{children:[O&&E.cloneElement(O,nr({...!u&&!o?{ref:S}:{},...o?{}:M,...a?A:{},...o?H:{}},{...O.props})),c?ii&&jo.createPortal(B,ii):B]})}function mL(e,t){const n=Array.isArray(e)?e:E.Children.toArray(e);let r=n.length===2?n[1]:n[0];return r=typeof r=="function"?r(t):r,n.length===2?{dialogTrigger:n[0],dialog:r}:{dialog:r}}function Ii(e){const{label:t,className:n,value:r,onChange:i,size:s,width:d="w-max"}=e,a=se(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.colorPresets)==null?void 0:g.items})||[],o=ji({size:s}),[c,f]=E.useState(r),[l,h]=E.useState(!1),u=p=>{f(p),i==null||i(p)};return w.jsxs("div",{className:ce(n,d),children:[t&&w.jsx("span",{className:o.label,children:t}),w.jsxs(Lu,{type:"popover",isOpen:l,onOpenChange:h,children:[w.jsxs(rr,{className:ce(o.input,"inline-flex items-center"),"aria-label":e["aria-label"],children:[w.jsx("span",{className:"flex-shrink-0 mr-5 border rounded h-2/4 aspect-square inline-block",style:{backgroundColor:c}}),w.jsx(vL,{isActive:l,className:o.adornment})]}),w.jsx(Ru,{size:"auto",children:w.jsx(cL,{onChange:u,defaultValue:c,colorPresets:a})})]})]})}function vL({isActive:e,className:t}){const n=e?"rotate-180":"rotate-0";return w.jsx(Ug,{size:"sm",className:`transition-transform ml-auto flex-shrink-0 ${n} ${t}`})}function yL(e){const{size:t="md",inline:n,label:r,showValueLabel:i=!!r,className:s,width:d="w-full",slider:a,children:o,trackColor:c="primary",fillColor:f="primary"}=e,{domProps:l,trackRef:h,getThumbPercent:u,getThumbValueLabel:p,labelId:m,groupId:g,thumbIds:v,isDisabled:y,numberFormatter:b,minValue:x,maxValue:C,step:_,values:S,getValueLabel:T}=a;let I="",F=Math.max([...b.format(x)].length,[...b.format(C)].length,[...b.format(_)].length);T?I=T(S[0]):S.length===1?I=p(0):S.length===2&&(I=`${p(0)}  ${p(1)}`,F=3+2*Math.max(F,[...b.format(x)].length,[...b.format(C)].length));const $=ji({size:t,disabled:y,labelDisplay:"flex"}),G=ce("touch-none",s,d,{"flex items-center":n});return w.jsxs("div",{className:G,role:"group",id:g,children:[(r||i)&&w.jsxs("div",{className:ce($.label,"select-none"),children:[r&&w.jsx("label",{onClick:()=>{var ne;(ne=document.getElementById(v[0]))==null||ne.focus()},id:m,htmlFor:g,children:r}),i&&w.jsx("output",{htmlFor:v[0],className:"ml-auto text-right","aria-live":"off",style:F?{width:`${F}ch`,minWidth:`${F}ch`}:void 0,children:I})]}),w.jsxs("div",{ref:h,className:ce("relative",bL(e)),...l,role:"presentation",children:[w.jsx("div",{className:ce("absolute inset-0 m-auto rounded",xL(c,y),D_(t))}),w.jsx("div",{className:ce("absolute inset-0 my-auto rounded",wL(f,y),D_(t)),style:{width:`${Math.max(u(0)*100,0)}%`}}),o]})]})}function bL({size:e,wrapperHeight:t}){if(t)return t;switch(e){case"xs":return"h-14";case"sm":return"h-20";default:return"h-30"}}function D_(e){switch(e){case"xs":return"h-2";case"sm":return"h-3";default:return"h-4"}}function xL(e,t){switch(t&&(e="disabled"),e){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return e}}function wL(e,t){switch(t&&(e="disabled"),e){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return e}}function A_(e={}){const{localeCode:t}=Cu();return E.useMemo(()=>new Ia(t,e),[t,e])}function M_({minValue:e=0,maxValue:t=100,isDisabled:n=!1,step:r=1,formatOptions:i,onChangeEnd:s,onPointerDown:d,label:a,getValueLabel:o,showThumbOnHoverOnly:c,thumbSize:f,onPointerMove:l,...h}){const[u,p]=E.useState(!1),m=A_(i),{addGlobalListener:g,removeGlobalListener:v}=Np(),y=E.useRef(null),[b,x]=Nr(h.value?h.value:void 0,h.defaultValue??[e],h.onChange),C=E.useRef(null);C.current=b;const[_,S]=E.useState(new Array(b.length).fill(!1)),T=E.useRef(null);T.current=_;function I(N){return m.format(N)}const F=N=>{var q;return((q=T.current)==null?void 0:q[N])||!1},$=N=>I(b[N]),G=N=>N===0?e:b[N-1],ne=N=>N===b.length-1?t:b[N+1],Y=(N,q)=>{if(n||!M(N)||!C.current)return;const le=G(N),xe=ne(N);q=yM(q,le,xe,r),C.current=j_(C.current,N,q),x(C.current)},Q=(N,q)=>{var xe;if(n||!M(N))return;const le=(xe=T.current)==null?void 0:xe[N];T.current=j_(T.current||[],N,q),S(T.current),s&&le&&!T.current.some(Boolean)&&s(C.current||[])},[Z,ie]=E.useState(void 0),V=N=>{const q=Math.min(1,(N-e)/(t-e));return isNaN(q)?0:q},k=N=>V(C.current[N]),P=(N,q)=>{Y(N,j(q))},A=N=>Math.round((N-e)/r)*r+e,j=N=>{const q=N*(t-e)+e;return Da(A(q),e,t)},H=E.useRef(new Array(b.length).fill(!0)),M=N=>H.current[N],O=(N,q)=>{H.current[N]=q},R=E.useRef(null),B=E.useRef(void 0),U=N=>{if(!(N.pointerType==="mouse"&&(N.button!==0||N.altKey||N.ctrlKey||N.metaKey))&&(d==null||d(),y.current&&!n&&b.every((q,le)=>!_[le]))){const q=y.current.offsetWidth,le=y.current.getBoundingClientRect().left,me=(N.clientX-le)/q,J=j(me);let ge;const we=b.findIndex(Se=>J-Se<0);if(we===0)ge=we;else if(we===-1)ge=b.length-1;else{const Se=b[we-1],Le=b[we];Math.abs(Se-J)<Math.abs(Le-J)?ge=we-1:ge=we}ge>=0&&M(ge)?(N.preventDefault(),R.current=ge,ie(ge),B.current=N.pointerId,Q(R.current,!0),Y(ge,J),g(window,"pointerup",ue,!1)):R.current=null}},W=E.useRef(null),{domProps:ee}=Pu({onPointerDown:U,onMoveStart(){W.current=null},onMove(N,q){var xe;const le=((xe=y.current)==null?void 0:xe.offsetWidth)||0;if(W.current==null&&(W.current=k(R.current||0)*le),W.current+=q,R.current!=null&&y.current){const me=Da(W.current/le,0,1);P(R.current,me)}},onMoveEnd(){R.current!=null&&(Q(R.current,!1),R.current=null)}}),re=nr(ee,{onPointerEnter:()=>{p(!0)},onPointerLeave:()=>{p(!1)},onPointerMove:N=>{l==null||l(N)}}),ue=N=>{N.pointerId===B.current&&(R.current!=null&&(Q(R.current,!1),R.current=null),v(window,"pointerup",ue,!1))},X=E.useId(),z=a?`${X}-label`:void 0,K=`${X}-group`,te=[...Array(b.length)].map((N,q)=>`${X}-thumb-${q}`);return{domProps:re,trackRef:y,isDisabled:n,step:r,values:b,minValue:e,maxValue:t,focusedThumb:Z,labelId:z,groupId:K,thumbIds:te,numberFormatter:m,getThumbPercent:k,getThumbMinValue:G,getThumbMaxValue:ne,getThumbValueLabel:$,isThumbDragging:F,setThumbValue:Y,updateDraggedThumbs:Q,setThumbEditable:O,setFocusedThumb:ie,getValueLabel:o,isPointerOver:u,showThumbOnHoverOnly:c,thumbSize:f}}function j_(e,t,n){return e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)]}function CL({index:e,slider:t,isDisabled:n,ariaLabel:r,inputRef:i,onBlur:s,fillColor:d="primary"}){const a=Oi(i),{addGlobalListener:o,removeGlobalListener:c}=Np(),{step:f,values:l,focusedThumb:h,labelId:u,thumbIds:p,isDisabled:m,getThumbPercent:g,getThumbMinValue:v,getThumbMaxValue:y,getThumbValueLabel:b,setThumbValue:x,updateDraggedThumbs:C,isThumbDragging:_,setThumbEditable:S,setFocusedThumb:T,isPointerOver:I,showThumbOnHoverOnly:F,thumbSize:$="w-18 h-18"}=t,G=_(e),ne=l[e];S(e,!n);const Y=n||m,Q=E.useCallback(()=>{a.current&&a.current.focus({preventScroll:!0})},[a]),Z=h===e;E.useEffect(()=>{Z&&Q()},[Z,Q]);const ie=E.useRef(void 0),V=P=>{P.pointerId===ie.current&&(Q(),C(e,!1),c(window,"pointerup",V,!1))},k=ce("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",$,!Y&&"shadow-md",_L({fillColor:d,isDisabled:Y,isDragging:G}),!F||F&&G||I?"visible":"invisible");return w.jsx("div",{role:"presentation",className:k,style:{left:`${Math.max(g(e)*100,0)}%`},onPointerDown:P=>{P.button!==0||P.altKey||P.ctrlKey||P.metaKey||(Q(),ie.current=P.pointerId,C(e,!0),o(window,"pointerup",V,!1))},children:w.jsx("input",{id:p[e],onKeyDown:Lt(()=>{C(e,!0)}),onKeyUp:Lt(()=>{C(e,!1)}),ref:a,tabIndex:Y?void 0:0,min:v(e),max:y(e),step:f,value:ne,disabled:Y,"aria-label":r,"aria-labelledby":u,"aria-orientation":"horizontal","aria-valuetext":b(e),onFocus:()=>{T(e)},onBlur:P=>{T(void 0),C(e,!1),s==null||s(P)},onChange:P=>{x(e,parseFloat(P.target.value))},type:"range",className:"sr-only"})})}function _L({isDisabled:e,isDragging:t,fillColor:n}){return e?"bg-slider-disabled cursor-default":n&&n!=="primary"?n:ce("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function Fi({inputRef:e,onBlur:t,...n}){const{onChange:r,onChangeEnd:i,value:s,defaultValue:d,...a}=n,o={...a,value:s!=null?[s]:void 0,defaultValue:d!=null?[d]:void 0,onChange:f=>{r==null||r(f[0])},onChangeEnd:f=>{i==null||i(f[0])}},c=M_(o);return w.jsx(yL,{...o,slider:c,children:w.jsx(CL,{fillColor:n.fillColor,index:0,slider:c,inputRef:e,onBlur:t})})}const I_=he.forwardRef((e,t)=>{let{value:n=0,minValue:r=0,maxValue:i=100,size:s="md",isIndeterminate:d=!1,className:a,position:o="relative",trackColor:c,fillColor:f="border-primary",...l}=e;n=Da(n,r,i);const h=SL(s),u=(n-r)/(i-r),p=A_({style:"percent"});let m="";!d&&!m&&(m=p.format(u));const g={},v={};if(!d){const y=(n-r)/(i-r)*100;let b;y>0&&y<=50?(b=-180+y/50*180,g.transform=`rotate(${b}deg)`,v.transform="rotate(-180deg)"):y>50&&(b=-180+(y-50)/50*180,g.transform="rotate(0deg)",v.transform=`rotate(${b}deg)`)}return w.jsxs("div",{...l,"aria-valuenow":d?void 0:n,"aria-valuemin":r,"aria-valuemax":i,"aria-valuetext":d?void 0:m,role:"progressbar",ref:t,className:ce("progress-circle",o,h,d&&"indeterminate",a),children:[w.jsx("div",{className:ce(h,c,"rounded-full border-4")}),w.jsxs("div",{className:ce("fills absolute left-0 top-0 h-full w-full",d&&"progress-circle-fills-animate"),children:[w.jsx(F_,{circleSize:h,subMaskStyle:g,isIndeterminate:d,className:"rotate-180",fillColor:f,subMaskClassName:ce(d&&"progress-circle-fill-submask-1-animate")}),w.jsx(F_,{circleSize:h,subMaskStyle:v,isIndeterminate:d,fillColor:f,subMaskClassName:ce(d&&"progress-circle-fill-submask-2-animate")})]})]})});function F_({subMaskStyle:e,subMaskClassName:t,className:n,circleSize:r,isIndeterminate:i,fillColor:s}){return w.jsx("div",{className:ce("absolute h-full w-1/2 origin-[100%] overflow-hidden",n),children:w.jsx("div",{className:ce("h-full w-full origin-[100%] rotate-180 overflow-hidden",!i&&"transition-transform duration-100",t),style:e,children:w.jsx("div",{className:ce(r,s,"rounded-full border-4")})})})}function SL(e){switch(e){case"xs":return"w-20 h-20";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-42 h-42";default:return e}}function kL({isLoading:e,icon:t}){const n=E.useRef(null),{trans:r}=Kr(),[i,s]=E.useState(!1),{state:{isOpen:d,inputValue:a}}=Zp(),o=E.useRef(a);return E.useEffect(()=>{e&&!i?(n.current===null&&(n.current=setTimeout(()=>{s(!0)},500)),a!==o.current&&(clearTimeout(n.current),n.current=setTimeout(()=>{s(!0)},500))):e||(s(!1),clearTimeout(n.current),n.current=null),o.current=a},[e,i,a]),i&&(d||e)?w.jsx(I_,{"aria-label":r({message:"Loading"}),size:"sm",isIndeterminate:!0}):t||w.jsx(Ug,{})}function EL(e,t){const n=_u(),{hideCaret:r,placeholder:i=w.jsx(ye,{message:"Select an option..."}),selectedValue:s,onItemSelected:d,onOpenChange:a,onInputValueChange:o,onSelectionChange:c,selectionMode:f,minWidth:l="min-w-128",children:h,searchPlaceholder:u,showEmptyMessage:p,showSearchField:m,defaultInputValue:g,inputValue:v,isLoading:y,isAsync:b,valueClassName:x,floatingWidth:C=n?"auto":"matchTrigger",..._}=e,S=M2({...e,clearInputOnItemSelection:!0,showEmptyMessage:p||m,floatingWidth:C,selectionMode:"single",role:"listbox",virtualFocus:m},t),{state:{selectedValues:T,isOpen:I,setIsOpen:F,activeIndex:$,setSelectedIndex:G,inputValue:ne,setInputValue:Y},collections:Q,focusItem:Z,listboxId:ie,reference:V,refs:k,listContent:P,onInputChange:A}=S,{fieldProps:j,inputProps:H}=iC({..._,focusRef:k.reference}),M=Q.collection.get(T[0]),O=M?w.jsxs("span",{className:"flex items-center gap-10",children:[M.element.props.startIcon,w.jsx("span",{className:ce("overflow-hidden overflow-ellipsis whitespace-nowrap",x),children:M.element.props.children})]}):w.jsx("span",{className:"italic",children:i}),R=ji({...e,endAdornment:!0}),{handleTriggerKeyDown:B,handleListboxKeyboardNavigation:U,handleListboxSearchFieldKeydown:W}=W2(S),{findMatchingItem:ee}=U2(),re=X=>{if(!I)return;const z=ee(X,P,$);z!=null&&Z("increment",z)},ue=X=>{if(I)return;const z=ee(X,P,$);z!=null&&G(z)};return w.jsx(H2,{listbox:S,onKeyDownCapture:m?void 0:re,onKeyDown:U,onClose:m?()=>Y(""):void 0,isLoading:y,searchField:m&&w.jsx(_n,{size:e.size==="xs"||e.size==="sm"?"xs":"sm",placeholder:u,startAdornment:w.jsx(Y2,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":I?"true":"false","aria-haspopup":"listbox","aria-controls":I?ie:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:ne,onChange:A,onKeyDown:X=>{W(X)}}),children:w.jsx(nC,{fieldClassNames:R,...j,endAdornment:!r&&w.jsx(kL,{isLoading:y}),children:w.jsx("button",{...H,type:"button","data-selected-value":M==null?void 0:M.value,"aria-expanded":I?"true":"false","aria-haspopup":"listbox","aria-controls":I?ie:void 0,ref:V,onKeyDown:B,onKeyDownCapture:m?void 0:ue,disabled:_.disabled,onClick:()=>{F(!I)},className:ce(R.input,!j.unstyled&&l),children:O})})})}const Yg=he.forwardRef(EL);function TL(){const e=se(d=>d.filter.selected);if(!e)return null;const t=L().filter.getByName(e).options,n=(d,a)=>{var o;(o=L().filter)==null||o.applyValue(e,d,a),D().setDirty(!0)},r=L().canvas.getMainImage().filters,i=L().filter.findFilterIndex(e,r),s=r==null?void 0:r[i];if(t){const d=Object.entries(t).map(([a,o])=>{let c;const f=s?s[a]:o.current;return o.type==="slider"?c=w.jsx(Fi,{label:w.jsx("span",{className:"capitalize",children:w.jsx(ye,{...Wp[a]})}),minValue:o.min,maxValue:o.max,step:o.step,defaultValue:f,formatOptions:{style:"percent"},size:"sm",onChange:l=>{n(a,l)}}):o.type==="colorPicker"?c=w.jsx(Ii,{label:w.jsx(ye,{...Wp[a]}),size:"sm",width:"w-full",value:f,onChange:l=>{n(a,l)}}):o.type==="select"&&(c=w.jsx(Yg,{selectionMode:"single",size:"sm",label:w.jsx(ye,{...Wp[a]}),defaultValue:f,onSelectionChange:l=>{n(a,l)},children:o.available.map(l=>w.jsx(lu,{value:l.key,children:w.jsx("span",{className:"capitalize",children:w.jsx(ye,{message:l.key})})},l.key))})),w.jsx("div",{className:"pb-10",children:c},a)});return w.jsx(jg,{children:w.jsx("div",{className:"max-w-240 pt-10 mx-auto",children:d})})}return null}function OL(){const e=se(r=>r.frame.active),t=(e==null?void 0:e.mode)==="basic",n=E.useCallback(r=>`${r}%`,[]);return w.jsx(jg,{className:"pb-18 pt-6",children:w.jsxs("div",{className:"max-w-288 m-auto",children:[t&&w.jsx(Ii,{className:"mb-20",width:"w-full",size:"sm",label:w.jsx(ye,{message:"Color"}),value:L().frame.builder.defaultColor,onChange:r=>{L().frame.active.changeColor(r)}}),w.jsx(Fi,{size:"sm",label:w.jsx(ye,{message:"Size"}),step:1,minValue:L().frame.active.getMinSize(),maxValue:L().frame.active.getMaxSize(),defaultValue:L().frame.active.currentSizeInPercent,getValueLabel:n,onChange:r=>{L().frame.resize(r)}})]})})}const Fa=he.createContext(null);function PL(){const{tabsRef:e,selectedTab:t}=E.useContext(Fa),[n,r]=E.useState({width:void 0,transform:void 0,className:void 0});return qt(()=>{if(t!=null&&e.current){const i=e.current[t];if(!i)return;r(s=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:s.width===void 0?"":"transition-all"}))}},[r,t,e]),w.jsx("div",{className:ce("absolute bottom-0 left-0 h-2 bg-primary",n.className),role:"presentation",style:{width:n.width,transform:n.transform}})}function DL({children:e,center:t,expand:n,className:r}){const i=E.Children.toArray(e);return w.jsx(vu,{children:w.jsxs("div",{className:ce("flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",r),role:"tablist","aria-orientation":"horizontal",children:[i.map((s,d)=>E.isValidElement(s)?E.cloneElement(s,{index:d,className:ce(s.props.className,n&&"flex-auto",t&&d===0&&"ml-auto",t&&d===i.length-1&&"mr-auto")}):null),w.jsx(PL,{})]})})}function AL(e){const{size:t="md",children:n,className:r,isLazy:i,overflow:s="overflow-hidden"}=e,d=E.useRef([]),a=E.useId(),[o,c]=Nr(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),f=E.useMemo(()=>({selectedTab:o,setSelectedTab:c,tabsRef:d,size:t,isLazy:i,id:a}),[o,a,i,c,t]);return w.jsx(Fa.Provider,{value:f,children:w.jsx("div",{className:ce(r,s,"max-w-full"),children:n})})}const ML=be(w.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined"),jL=be(w.jsx("path",{d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"}),"FormatStrikethroughOutlined"),IL=be(w.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),FL=be(w.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),RL=be(w.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),LL=be(w.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined");function zL(){return w.jsxs("div",{className:"flex gap-20 justify-center",children:[w.jsx(BL,{}),w.jsx(NL,{}),w.jsx($L,{})]})}function BL(){const e=se(n=>n.objects.active.editableProps.fontSize)??40,{trans:t}=Kr();return w.jsx(_n,{type:"number",size:"xs","aria-label":t({message:"Font Size"}),min:1,max:300,className:"w-64 flex-shrink-0",value:e,onChange:n=>{L().objects.setValues({fontSize:n.target.valueAsNumber}),D().setDirty(!0)}})}function NL(){const e=se(s=>s.objects.active.editableProps.fontStyle),t=se(s=>s.objects.active.editableProps.underline),n=se(s=>s.objects.active.editableProps.linethrough),[r,i]=E.useState([e,t&&"underline",n&&"linethrough"]);return w.jsxs(Su,{size:"xs",variant:"outline",radius:"rounded",value:r,multiple:!0,onChange:s=>{i(s),L().objects.setValues({underline:s.includes("underline"),linethrough:s.includes("linethrough"),fontStyle:s.includes("italic")?"italic":""}),D().setDirty(!0)},children:[w.jsx(Me,{value:"underline",children:w.jsx(ML,{})}),w.jsx(Me,{value:"linethrough",children:w.jsx(jL,{})}),w.jsx(Me,{value:"italic",children:w.jsx(IL,{})})]})}function $L(){const e=se(t=>t.objects.active.editableProps.textAlign);return w.jsxs(Su,{size:"xs",variant:"outline",radius:"rounded",value:e,onChange:t=>{L().objects.setValues({textAlign:t}),D().setDirty(!0)},children:[w.jsx(Me,{value:"left",children:w.jsx(RL,{})}),w.jsx(Me,{value:"center",children:w.jsx(LL,{})}),w.jsx(Me,{value:"right",children:w.jsx(FL,{})})]})}function VL({children:e,className:t}){const{selectedTab:n,isLazy:r}=E.useContext(Fa),i=E.Children.toArray(e).filter(d=>!!d);let s;if(r){const d=i[n];s=E.isValidElement(d)?E.cloneElement(i[n],{index:n}):null}else s=i.map((d,a)=>{if(E.isValidElement(d)){const o=a===n;return E.cloneElement(d,{index:a,"aria-hidden":!o,className:o?d.props.className:ce(d.props.className,"hidden")})}return null});return w.jsx("div",{className:t,children:s})}function Ri({className:e,children:t,index:n,...r}){const{id:i}=E.useContext(Fa),[s,d]=E.useState(0),a=E.useRef(null);return qt(()=>{if(a!=null&&a.current){const o=()=>{const f=sr(a.current,{tabbable:!0});d(f.nextNode()?void 0:0)};o();const c=new MutationObserver(o);return c.observe(a.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{c.disconnect()}}},[a]),w.jsx("div",{tabIndex:s,ref:a,id:`${i}-${n}-tabpanel`,"aria-labelledby":`${i}-${n}-tab`,className:ce(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:t})}const R_=[{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{color:"#ffe47b",offset:0},{color:"#6f9ad3",offset:1}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"#a66fd5"},{offset:.5,color:"#6a48d7"},{offset:1,color:"#200772"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{color:"#ff4040",offset:0},{color:"#e6399b",offset:1}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:20,y2:20},colorStops:[{offset:0,color:"#ffe47b"},{offset:.5,color:"rgb(111,154,211)"},{offset:1,color:"rgb(166,111,213)"}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#FF4F4F"},{offset:1,color:"#ffef40"}]},{type:"radial",coords:{r1:50,r2:80,x1:45,y1:45,x2:52,y2:50},colorStops:[{offset:0,color:"rgb(155, 237, 0)"},{offset:1,color:"rgba(0, 164, 128,0.4)"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"#9ecb2d"},{offset:.5,color:"#72aa00"},{offset:1,color:"#bfd255"}]},{type:"radial",coords:{r1:100,r2:50,x1:30,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#aebcbf"},{offset:1,color:"#0a0809"}]},{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f6f6f6"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#fefcea"},{offset:1,color:"#f1da36"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"rgb(166,111,213)"},{offset:.5,color:"rgba(106, 72, 215, 0.5)"},{offset:1,color:"#ff1a00"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#b7deed"},{offset:1,color:"#21b4e2"}]},{type:"linear",coords:{x1:-80,y1:100,x2:80,y2:-100},colorStops:[{offset:0,color:"#ffe47b"},{offset:1,color:"#6f9ad3"}]}],HL=be(w.jsx("path",{d:"M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3 3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"}),"TextureOutlined"),WL=be(w.jsx("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),UL=be(w.jsx("path",{d:"M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"}),"AddPhotoAlternateOutlined");function L_({property:e}){const{trans:t}=Kr(),n=se(i=>i.objects.active.editableProps[e]),r=se(i=>i.objects.active.name);return w.jsxs("div",{className:"flex items-center justify-center gap-14",children:[w.jsx(Ii,{className:"flex-shrink-0",size:"xs","aria-label":t({message:"Color"}),value:typeof n=="string"?n:kh.fill,onChange:i=>{L().objects.setValues({[e]:i}),D().setDirty(!0)}}),!(r===Fe.Shape&&e==="backgroundColor")&&w.jsxs(w.Fragment,{children:[w.jsx(z_,{type:"gradient",property:e}),w.jsx(z_,{type:"texture",property:e})]})]})}function z_({type:e,property:t}){const n=e==="texture"?w.jsx(HL,{}):w.jsx(WL,{});return w.jsx(E.Fragment,{children:w.jsxs(Lu,{type:"popover",children:[w.jsx(xt,{className:"flex-shrink-0",id:`${e}-panel-trigger`,variant:"outline",size:"xs",startIcon:n,endIcon:w.jsx(Ug,{}),children:w.jsx("span",{className:"capitalize",children:e==="gradient"?w.jsx(ye,{message:"Gradient"}):w.jsx(ye,{message:"Texture"})})}),w.jsx(Ru,{size:"auto",children:w.jsx("div",{className:"grid gap-8 grid-cols-5-min-content p-10 bg-paper rounded shadow-md",children:w.jsx(YL,{property:t,type:e})})})]})})}function YL({type:e,property:t}){const{close:n}=P_(),r=Array.from(Array(e==="gradient"?R_.length:28).keys()),i="w-56 h-56 bg border shadow-sm hover:scale-110",s=r.map(d=>{const a=Zt(`images/${e}s/${d}.png`);return w.jsx(rr,{radius:"rounded",className:i,style:{backgroundImage:`url(${a})`},"aria-label":`Select ${e} #${d}`,onClick:async()=>{n();const o=e==="gradient"?new fe.fabric.Gradient(R_[d]):await B_(a);L().objects.setValues({[t]:o}),D().setDirty(!0)}},d)});return e==="texture"&&s.unshift(w.jsx(XL,{property:t,className:i},"upload-btn")),w.jsx(E.Fragment,{children:s})}function XL({className:e,property:t}){const{close:n}=P_();return w.jsx(rr,{radius:"rounded",className:e,"aria-label":"Upload an image",onClick:async()=>{const r=await L().import.openUploadWindow();if(n(),r){const i=await B_(await r.data);L().objects.setValues({[t]:i})}},children:w.jsx(UL,{className:"icon-md"})})}function B_(e){return new Promise(t=>{fe.fabric.util.loadImage(e,n=>{const r=new fe.fabric.Pattern({source:n,repeat:"repeat"});t(r)})})}function GL(){const e=se(t=>t.objects.active.editableProps.opacity);return w.jsx(Fi,{className:"max-w-240 w-full mx-auto","aria-label":"Opacity",value:e,minValue:.1,step:.1,maxValue:1,onChange:t=>{L().objects.setValues({opacity:t}),D().setDirty(!0)}})}function KL(){const{trans:e}=Kr(),t=se(r=>r.objects.active.editableProps.stroke),n=se(r=>r.objects.active.editableProps.strokeWidth);return w.jsxs("div",{className:"flex items-center gap-40",children:[w.jsx(Ii,{className:"ml-auto flex-shrink-0",size:"xs",value:t,"aria-label":e({message:"Outline Color"}),onChange:r=>{L().objects.setValues({stroke:r}),D().setDirty(!0)}}),w.jsx(Fi,{"aria-label":"Outline Width",className:"max-w-240 mr-auto flex-shrink-0",value:n,onChange:r=>{L().objects.setValues({strokeWidth:r}),D().setDirty(!0)}})]})}const qL=be(w.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined");function ZL(){return w.jsx("div",{className:"flex justify-center",children:w.jsx(xt,{type:"button",variant:"outline",size:"xs",startIcon:w.jsx(qL,{}),radius:"rounded-full",onClick:async()=>{const e=await L().import.openUploadWindow();if(e){const t=L().objects.getActive();if(t&&"setSrc"in t){const n=await e.data;t.setSrc(n,()=>{Xw({src:n}),L().canvas.render()})}}},children:w.jsx(ye,{message:"Replace Image"})})})}const N_={color:"rgba(0, 0, 0, 0.6)",blur:3,offsetX:-1,offsetY:0};function QL(){const{trans:e}=Kr(),t=se(n=>n.objects.active.editableProps.shadow)||N_;return w.jsxs("div",{className:"flex items-center gap-40",children:[w.jsx(Ii,{className:"ml-auto flex-shrink-0",value:t.color,size:"xs","aria-label":e({message:"Shadow Color"}),onChange:n=>{L().objects.setValues({shadow:$_({color:n})}),D().setDirty(!0)}}),w.jsx(Fi,{"aria-label":"Shadow Blur",className:"max-w-240 mr-auto flex-shrink-0",defaultValue:t.blur,onChange:n=>{L().objects.setValues({shadow:$_({blur:n})}),D().setDirty(!0)}})]})}function $_(e){var n;const t=(n=L().objects.getActive())==null?void 0:n.shadow;return t?(Object.entries(e).forEach(([r,i])=>{t[r]=i}),t):new fe.fabric.Shadow({...N_,...e})}function Li({index:e,className:t,isDisabled:n,children:r,padding:i,elementType:s="button",to:d,relative:a,width:o="min-w-min"}){const{selectedTab:c,setSelectedTab:f,tabsRef:l,size:h="md",id:u}=E.useContext(Fa),p=e===c,m=zj(),g=i||(h==="sm"?"px-12":"px-18"),v=ce("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",o,JL({isDisabled:n,isSelected:p}),t,h==="md"&&`${g} h-48`,h==="sm"&&`${g} h-32`,n&&"pointer-events-none"),y=C=>{switch(C.key){case"ArrowLeft":m==null||m.focusPrevious();break;case"ArrowRight":m==null||m.focusNext();break;case"Home":m==null||m.focusFirst();break;case"End":m==null||m.focusLast();break}},b=p?0:-1,x=s;return w.jsx(x,{disabled:n,id:`${u}-${e}-tab`,"aria-controls":`${u}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":p,tabIndex:n?void 0:b,onKeyDown:y,onClick:()=>{f(e)},to:d,relative:a,className:v,ref:C=>{l.current&&C&&(l.current[e]=C)},children:r})}function JL({isDisabled:e,isSelected:t}){return e?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function V_(){const e=se(t=>t.objects.active);return w.jsxs(AL,{size:"sm",className:"pb-18 pt-6",children:[w.jsxs(DL,{center:!0,children:[e.isText&&w.jsx(Li,{children:w.jsx(ye,{message:"Font"})}),!e.isImage&&w.jsx(Li,{children:w.jsx(ye,{message:"Color"})}),!(e.isImage||e.isText||e.name==Fe.Sticker)&&w.jsx(Li,{children:w.jsx(ye,{message:"Background"})}),e.isImage&&w.jsx(Li,{children:w.jsx(ye,{message:"Image"})}),w.jsx(Li,{children:w.jsx(ye,{message:"Opacity"})}),e.name!==Fe.Sticker&&w.jsx(Li,{children:w.jsx(ye,{message:"Outline"})}),w.jsx(Li,{children:w.jsx(ye,{message:"Shadow"})})]}),w.jsxs(VL,{className:"pt-16 h-50",children:[e.isText&&w.jsx(Ri,{children:w.jsx(zL,{})},"font"),!e.isImage&&w.jsx(Ri,{children:w.jsx(L_,{property:"fill"})}),!(e.isImage||e.isText||e.name==Fe.Sticker)&&w.jsx(Ri,{children:w.jsx(L_,{property:"backgroundColor"})}),e.isImage&&w.jsx(Ri,{children:w.jsx(ZL,{})}),w.jsx(Ri,{children:w.jsx(GL,{})}),e.name!==Fe.Sticker&&w.jsx(Ri,{children:w.jsx(KL,{})}),w.jsx(Ri,{children:w.jsx(QL,{})})]})]})}function ez(){const t=!_u()&&w.jsx(xt,{size:"sm",color:"primary",variant:"outline",onClick:()=>{L().text.add(),D().setDirty(!0)},children:w.jsx(ye,{message:"New Text"})});return w.jsx(jg,{actionBtn:t,children:w.jsx(V_,{})})}const tz=be(w.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined"),H_=500,Ln={};let Ra=!1,lr=null,zi=null;const W_=e=>{var t;for(const n in Ln)n!==e&&((t=Ln[n])==null||t.call(Ln,!0),delete Ln[n])},nz=E.forwardRef(({children:e,label:t,placement:n="top",offset:r=10,variant:i="neutral",delay:s=1500,isDisabled:d,usePortal:a=!0,...o},c)=>{const{x:f,y:l,reference:h,strategy:u,arrowRef:p,arrowStyle:m,refs:g}=cg({placement:n,offset:r,ref:c,showArrow:!0}),[v,y]=E.useState(!1),b=E.useId(),x=E.useRef(),C=()=>{clearTimeout(x.current),x.current=void 0,W_(b),Ln[b]=_,Ra=!0,y(!0),lr&&(clearTimeout(lr),lr=null),zi&&(clearTimeout(zi),zi=null)},_=E.useCallback(F=>{F?(clearTimeout(x.current),x.current=void 0,y(!1)):x.current||(x.current=setTimeout(()=>{x.current=void 0,y(!1)},H_)),lr&&(clearTimeout(lr),lr=null),Ra&&(zi&&clearTimeout(zi),zi=setTimeout(()=>{delete Ln[b],zi=null,Ra=!1},H_))},[b]),S=()=>{W_(b),Ln[b]=_,!v&&!lr&&!Ra?lr=setTimeout(()=>{lr=null,Ra=!0,C()},s):v||C()},T=F=>{!F&&s>0&&!x.current?S():C()};E.useEffect(()=>()=>{clearTimeout(x.current),Ln[b]&&delete Ln[b]},[b]),E.useEffect(()=>{const F=$=>{$.key==="Escape"&&_(!0)};if(v)return document.addEventListener("keydown",F,!0),()=>{document.removeEventListener("keydown",F,!0)}},[v,_]);const I=w.jsx(tr,{children:v&&w.jsxs(yt.div,{...xu,ref:g.setFloating,id:b,role:"tooltip",onPointerEnter:()=>{T(!0)},onPointerLeave:()=>{_()},className:ce("z-tooltip my-4 max-w-240 break-words rounded px-8 py-4 text-xs text-white shadow",i==="positive"&&"bg-positive",i==="danger"&&"bg-danger",i==="neutral"&&"bg-toast"),style:{position:u,top:l??"",left:f??""},children:[w.jsx("div",{ref:p,className:"absolute h-8 w-8 rotate-45 bg-inherit",style:m}),t]})});return w.jsxs(E.Fragment,{children:[E.cloneElement(e,nr({"aria-describedby":v?b:void 0,ref:h,onPointerEnter:F=>{F.pointerType==="mouse"&&T()},onFocus:F=>{F.target.matches(":focus-visible")&&T(!0)},onPointerLeave:F=>{F.pointerType==="mouse"&&_()},onPointerDown:()=>{_(!0)},onBlur:()=>{_()},"aria-label":typeof t=="string"?t:t.props.message},o)),a?ii&&jo.createPortal(I,ii):I]})});function rz(){const e=se(s=>s.activeToolOverlay),t=se(s=>s.objects.active.id),n=iz(e,t),[r,i]=E.useState(!0);return w.jsxs("div",{className:"relative z-tool-overlay text-sm",children:[n&&w.jsx("div",{className:ce("absolute right-16 text-muted z-50 transition-all",!r&&"rotate-180","-top-40"),children:w.jsx(nz,{label:r?w.jsx(ye,{message:"Hide options"}):w.jsx(ye,{message:"Show options"}),children:w.jsx(Me,{variant:"outline",radius:"rounded-lg",size:"xs",onClick:()=>{i(!r)},children:w.jsx(tz,{})})})}),w.jsx(tr,{children:n&&r&&w.jsx(yt.div,{initial:{y:0,opacity:0},animate:{y:"-100%",opacity:1},exit:{y:0,opacity:0},transition:{type:"tween",duration:.15},className:"absolute inset-x-0 gap-16 px-5vw bg bg-opacity-95 border-t",children:n},"tool-controls-overlay")})]})}function iz(e,t){switch(e){case nn.Filter:return w.jsx(TL,{});case nn.Frame:return w.jsx(OL,{});case nn.Text:return t&&w.jsx(ez,{});case nn.ActiveObject:return t&&w.jsx(V_,{});default:return null}}const Xg=be(w.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");function oz({filter:e}){const t=se(d=>d.filter.applied.includes(e)),n=L().filter.hasOptions(e),r=ce("block flex-shrink-0 rounded",{"text-primary border-primary":t}),i=FM[e],s=w.jsxs(E.Fragment,{children:[w.jsxs("div",{className:"relative",children:[w.jsx(sz,{filter:e}),t&&w.jsx(az,{filter:e,hasOptions:n})]}),w.jsx("div",{className:"mt-4 text-center text-xs capitalize",children:i?w.jsx(ye,{...i}):e})]});return t&&n?w.jsx("div",{className:r,children:s}):w.jsx(rr,{className:r,onClick:()=>{t?L().filter.remove(e):L().filter.apply(e)},children:s})}function sz({filter:e}){const t=se(r=>r.filter.selected===e),n=ce("m-auto w-96 h-56 border rounded object-cover",{shadow:t});return w.jsx("img",{src:Zt(`images/filter/${e}.jpg`),className:n,alt:""})}function az({filter:e,hasOptions:t}){const n=w.jsx(Me,{color:"primary",size:"md",onClick:()=>{L().filter.remove(e)},children:w.jsx(Xg,{})});return w.jsxs("div",{className:"flex items-center justify-center bg-background/70 absolute inset-0 border-2 border-primary rounded",children:[t?n:w.jsx(Xg,{className:"svg-icon icon-md"}),t&&w.jsx(lz,{filter:e,hasOptions:t})]})}function lz({filter:e,hasOptions:t}){return w.jsx(Me,{color:"primary",size:"md",onClick:()=>{D().activeToolOverlay===nn.Filter&&D().filter.selected===e?D().setActiveTool(D().activeTool,null):D().filter.select(e,t)},children:w.jsx(rv,{})})}const Bi=E.forwardRef(({children:e,className:t,gap:n="gap-10"},r)=>{const i=he.Children.map(e,(s,d)=>he.isValidElement(s)?he.cloneElement(s,{isFirst:d===0,isLast:he.Children.count(e)===d+1}):s);return w.jsx("div",{ref:r,className:ce("tiny-scrollbar pb-20 overflow-x-auto relative flex items-center",n,t),children:i})});function cr({isFirst:e,isLast:t,children:n,className:r}){const i=ce(r,"flex-shrink-0",{"ml-auto":e,"mr-auto":t});return w.jsx("div",{className:i,children:n})}function cz(){const e=se(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.filter)==null?void 0:i.items})||[];E.useEffect(()=>{L().filter.syncState()},[]);const t=e.map(n=>w.jsx(cr,{children:w.jsx(oz,{filter:n})},n));return w.jsx(Bi,{children:t})}const uz=be(w.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),hz=be(w.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined"),fz=be(w.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlankOutlined"),dz=be(w.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),U_=be(w.jsx("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"}),"CheckBox"),pz=E.forwardRef((e,t)=>{const{size:n="md",children:r,className:i,icon:s,checkedIcon:d,disabled:a,isIndeterminate:o,errorMessage:c,invalid:f,orientation:l="horizontal",onChange:h,autoFocus:u,required:p,value:m,name:g,inputTestId:v}=e,y=ji({...e,label:r}),b=s||fz,x=d||(o?U_:dz),C=Oi(t);kg({autoFocus:u},C),E.useEffect(()=>{C.current&&(C.current.indeterminate=o||!1)});const[_,S]=Nr(e.checked,e.defaultChecked||!1),T=E.useCallback(G=>{h==null||h(G),S(G.target.checked)},[h,S]),I=ce("select-none",i,f&&"text-danger",!f&&a&&"text-disabled");let F,$=f?"text-danger":null;return o?(F=U_,$=$||"text-primary"):_?(F=x,$=$||"text-primary"):(F=b,$=$||"text-muted"),w.jsxs("div",{children:[w.jsx("label",{className:I,children:w.jsxs("div",{className:ce("relative flex items-center",l==="vertical"&&"flex-col flex-col-reverse"),children:[w.jsx("input",{className:"absolute -left-4 -top-5 h-24 w-24 appearance-none overflow-hidden rounded outline-none ring-inset transition-shadow focus-visible:ring",type:"checkbox","aria-checked":o?"mixed":_,"aria-invalid":f||void 0,onChange:T,ref:C,required:p,disabled:a,value:m,name:g,"data-testid":v}),w.jsx(F,{size:n,className:ce("pointer-events-none",a?"text-disabled":$)}),r&&w.jsx("div",{className:ce("first-letter:capitalize",y.size.font,l==="vertical"?"mb-6":"ml-6"),children:r})]})}),c&&w.jsx("div",{className:y.error,children:c})]})});function gz(){const{trans:e}=Kr(),{minWidth:t=50,minHeight:n=50,maxHeight:r=5e3,maxWidth:i=5e3}=se(l=>{var h;return(h=l.config.tools)==null?void 0:h.resize})||{},s=se(l=>l.original),d=se(l=>l.resize.formValue);E.useEffect(()=>{D().resize.setFormValue({...s})},[s]),E.useEffect(()=>{D().setDirty(!0)},[]);const a=l=>{const h={...d,width:l};d.maintainAspect&&(h.height=su(l,d.usePercentages)),D().resize.setFormValue(h)},o=l=>{const h={...d,height:l};l&&d.maintainAspect&&(h.width=Up(l,d.usePercentages)),D().resize.setFormValue(h)},c=l=>{const h={...d,maintainAspect:l};l&&(h.height=su(h.width,h.usePercentages)),D().resize.setFormValue(h)},f=l=>{l.preventDefault(),D().applyChanges()};return w.jsxs("form",{className:"flex items-center justify-center gap-16 w-full",onSubmit:f,children:[w.jsx(_n,{type:"number",min:t,max:i,size:"sm",className:"w-full max-w-112",label:w.jsx(ye,{message:"Width"}),value:d.width,onChange:l=>{a(l.target.valueAsNumber)}}),w.jsx("div",{className:"mt-24",children:w.jsx(pz,{size:"md",checked:d.maintainAspect,onChange:l=>{c(!d.maintainAspect)},"aria-label":e({message:"Maintain aspect ratio"}),checkedIcon:uz,icon:hz})}),w.jsx(_n,{type:"number",min:n,max:r,size:"sm",className:"w-full max-w-112",label:w.jsx(ye,{message:"Height"}),value:d.height,onChange:l=>{o(l.target.valueAsNumber)}}),w.jsx("button",{type:"submit",className:"hidden",children:w.jsx(ye,{message:"Resize"})})]})}function mz(){const e=se(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.crop)==null?void 0:d.presets})||[],t=se(i=>i.crop.selectedAspectRatio),n=se(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.crop)==null?void 0:d.allowCustomRatio})??!0,r=e.filter(i=>i.ratio||!i.ratio&&n).map(i=>w.jsx(cr,{children:w.jsxs(rr,{onClick:()=>L().crop.resetCropzone(i.ratio),className:"flex flex-col items-center justify-between cursor-pointer h-56",children:[w.jsx(vz,{preset:i,selectedRatio:t}),w.jsx(yz,{preset:i,selectedRatio:t})]})},i.ratio||i.name));return w.jsx(Bi,{gap:"gap-18",children:r})}function vz({preset:e,selectedRatio:t}){let n=40,r=30;if(e.ratio){const s=Xp(e.ratio);({width:n,height:r}=Yp(s,n,r))}const i=ce("border-2",{"border-dotted":e.ratio===null,"border-primary":t===e.ratio});return w.jsx("div",{style:{width:`${n}px`,height:`${r}px`},className:i})}function yz({preset:e,selectedRatio:t}){const n=ce("mt-4 text-center text-xs",{"text-primary":t===e.ratio});return w.jsx("div",{className:n,children:e.name?w.jsx(ye,{message:e.name}):e.ratio})}const Y_=be(w.jsx("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"}),"FlipOutlined");function bz(){return w.jsxs("div",{children:[w.jsx(Me,{size:"sm",onClick:()=>{L().transform.flip("vertical"),D().setDirty(!0)},children:w.jsx(Y_,{})}),w.jsx(Me,{size:"sm",onClick:()=>{L().transform.flip("horizontal"),D().setDirty(!0)},children:w.jsx(Y_,{className:"rotate-90"})})]})}const xz=be(w.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeftOutlined"),wz=be(w.jsx("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRightOutlined");function Cz(){return w.jsxs("div",{children:[w.jsx(Me,{size:"sm",onClick:()=>{L().transform.rotateLeft(),D().setDirty(!0)},children:w.jsx(xz,{})}),w.jsx(Me,{size:"sm",onClick:()=>{L().transform.rotateRight(),D().setDirty(!0)},children:w.jsx(wz,{})})]})}function _z(){return w.jsxs("div",{className:"flex items-center justify-center gap-16",children:[w.jsx(bz,{}),w.jsx(Sz,{}),w.jsx(Cz,{})]})}function Sz(){const e=E.useRef(null),{domProps:t,groupId:n,thumbIds:r,trackRef:i,getThumbValueLabel:s}=M_({minValue:-45,maxValue:45,step:1,defaultValue:[D().crop.straightenAngle],onChange:d=>{const a=d[0];L().transform.straighten(a),D().crop.setTransformAngle(a),D().setDirty(!0),e.current.style.transform=`translateX(${a}px)`}});return w.jsx("div",{id:n,role:"group",className:"flex-auto flex-shrink-0 max-w-320 touch-none isolate",children:w.jsxs("div",{...t,ref:i,className:"h-36 relative",children:[w.jsxs("output",{htmlFor:r[0],"aria-live":"off",className:"absolute left-1/2 top-1/2 w-40 text-center bg -translate-x-1/2 -translate-y-1/2 z-10",children:[s(0),""]}),w.jsx(kz,{ref:e})]})})}const kz=he.forwardRef((e,t)=>{const n=[...Array(80).keys()],r=n.map(i=>w.jsx("circle",{cx:2+i*10,cy:"20",r:i%5?.75:2},i));return w.jsx("div",{className:"relative h-full cursor-pointer overflow-hidden",children:w.jsx("svg",{ref:t,style:{width:n.length*10},className:"absolute -left-80 h-full fill-current",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:r})})});function Ez(){return E.useEffect(()=>(D().setDirty(!0),L().frame.active.hide(),()=>{L().frame.active.show()}),[]),w.jsxs("div",{className:"pb-16",children:[w.jsx("div",{className:"mb-10",children:w.jsx(_z,{})}),w.jsx(mz,{})]})}const Tz=be(w.jsx("path",{d:"M 16 6 C 12.484375 6 9.273438 7.070313 6.90625 8.84375 C 4.539063 10.617188 3 13.15625 3 16 C 3 18.84375 4.539063 21.382813 6.90625 23.15625 C 9.273438 24.929688 12.484375 26 16 26 C 19.515625 26 22.726563 24.929688 25.09375 23.15625 C 27.460938 21.382813 29 18.84375 29 16 C 29 13.15625 27.460938 10.617188 25.09375 8.84375 C 22.726563 7.070313 19.515625 6 16 6 Z M 16 8 C 19.109375 8 21.898438 8.957031 23.875 10.4375 C 25.851563 11.917969 27 13.875 27 16 C 27 18.125 25.851563 20.082031 23.875 21.5625 C 21.898438 23.042969 19.109375 24 16 24 C 12.890625 24 10.101563 23.042969 8.125 21.5625 C 6.148438 20.082031 5 18.125 5 16 C 5 13.875 6.148438 11.917969 8.125 10.4375 C 10.101563 8.957031 12.890625 8 16 8 Z "})),Oz=be(w.jsx("path",{d:"M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z "})),Pz=be(w.jsx("path",{d:"M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 24 L 5 24 Z "})),Dz=be(w.jsx("path",{d:"M 16 4.90625 L 15.125 6.40625 L 4.71875 24.5 L 3.875 26 L 28.125 26 L 27.28125 24.5 L 16.875 6.40625 Z M 16 8.9375 L 24.65625 24 L 7.34375 24 Z "}));function Az(){const t=(se(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.shapes)==null?void 0:i.items})||[]).map(n=>w.jsx(cr,{children:w.jsx(Me,{variant:"outline",radius:"rounded-2xl",size:"xl",onClick:()=>{L().shape.addBasicShape(n.name),D().setDirty(!0)},children:w.jsx(Mz,{shape:n})})},n.name));return w.jsx(Bi,{children:t})}function Mz({shape:e}){var t;return e.type==="Path"?w.jsx("svg",{className:"m-auto w-36 h-36",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -100 512 700",children:w.jsx("path",{className:"fill-transparent stroke-current",d:(t=e.options)==null?void 0:t.path,strokeWidth:25})}):he.cloneElement(jz[e.name],{className:"w-30 h-30"})}const jz={circle:w.jsx(Oz,{viewBox:"0 0 32 32"}),square:w.jsx(Pz,{viewBox:"0 0 32 32"}),triangle:w.jsx(Dz,{viewBox:"0 0 32 32"}),ellipse:w.jsx(Tz,{viewBox:"0 0 32 32"})};function La(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,d,a,o;let c;n.key&&((s=n.debug)!=null&&s.call(n))&&(c=Date.now());const f=e();if(!(f.length!==r.length||f.some((u,p)=>r[p]!==u)))return i;r=f;let h;if(n.key&&((d=n.debug)!=null&&d.call(n))&&(h=Date.now()),i=t(...f),n.key&&((a=n.debug)!=null&&a.call(n))){const u=Math.round((Date.now()-c)*100)/100,p=Math.round((Date.now()-h)*100)/100,m=p/16,g=(v,y)=>{for(v=String(v);v.length<y;)v=" "+v;return v};console.info(`%c ${g(p,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(o=n==null?void 0:n.onChange)==null||o.call(n,i),i}}function Gg(e,t){if(e===void 0)throw new Error(`Unexpected undefined${t?`: ${t}`:""}`);return e}const Iz=(e,t)=>Math.abs(e-t)<1,Fz=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},Rz=e=>e,Lz=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},zz=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=d=>{const{width:a,height:o}=d;t({width:Math.round(a),height:Math.round(o)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(d=>{const a=d[0];if(a!=null&&a.borderBoxSize){const o=a.borderBoxSize[0];if(o){i({width:o.inlineSize,height:o.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},X_={passive:!0},Bz=typeof window>"u"?!0:"onscrollend"in window,Nz=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=Bz?()=>{}:Fz(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),d=c=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(i,c)},a=d(!0),o=d(!1);return o(),n.addEventListener("scroll",a,X_),n.addEventListener("scrollend",o,X_),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",o)}},$z=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Vz=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const d=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:d,behavior:n})};class Hz{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Rz,rangeExtractor:Lz,onChange:()=>{},measureElement:$z,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var i,s;const{startIndex:d,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},o=this.calculateRange();(n||d!==(o==null?void 0:o.startIndex)||a!==(o==null?void 0:o.endIndex))&&((s=(i=this.options).onChange)==null||s.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var n;const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.scrollOffset<i?"forward":"backward":null,this.scrollOffset=i;const d=this.isScrolling;this.isScrolling=s,this.notify(d!==s,s)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=La(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,i,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let d=r-1;d>=0;d--){const a=n[d];if(i.has(a.lane))continue;const o=s.get(a.lane);if(o==null||a.end>o.end?s.set(a.lane,a):a.end<o.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((d,a)=>d.end===a.end?d.index-a.index:d.end-a.end)[0]:void 0},this.getMeasurements=La(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s},d)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const o=this.measurementsCache.slice(0,a);for(let c=a;c<n;c++){const f=s(c),l=this.options.lanes===1?o[c-1]:this.getFurthestMeasurement(o,c),h=l?l.end+this.options.gap:r+i,u=d.get(f),p=typeof u=="number"?u:this.options.estimateSize(c),m=h+p,g=l?l.lane:c%this.options.lanes;o[c]={index:c,start:h,size:p,end:m,key:f,lane:g}}return this.measurementsCache=o,o},{key:!1,debug:()=>this.options.debug}),this.calculateRange=La(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,i)=>this.range=n.length>0&&r>0?Wz({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=La(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.measurementsCache[this.indexFromElement(n)];if(!i||!n.isConnected){this.measureElementCache.forEach((a,o)=>{a===n&&(this.observer.unobserve(n),this.measureElementCache.delete(o))});return}const s=this.measureElementCache.get(i.key);s!==n&&(s&&this.observer.unobserve(s),this.observer.observe(n),this.measureElementCache.set(i.key,n));const d=this.options.measureElement(n,r,this);this.resizeItem(i,d)},this.resizeItem=(n,r)=>{const i=this.itemSizeCache.get(n.key)??n.size,s=r-i;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,s,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=La(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,d=n.length;s<d;s++){const a=n[s],o=r[a];i.push(o)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return Gg(r[G_(0,r.length-1,i=>Gg(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-this.getSize();return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=Gg(this.getMeasurements()[n]);if(r==="auto")if(i.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(i.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const s=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(s,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[s,d]=this.getOffsetForIndex(n,r);this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[o]=this.getOffsetForIndex(n,d);Iz(o,this.scrollOffset)||this.scrollToIndex(n,{align:d,behavior:i})}else this.scrollToIndex(n,{align:d,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const G_=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function Wz({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=G_(0,r,a=>e[a].start,n);let d=s;for(;d<r&&e[d].end<n+t;)d++;return{startIndex:s,endIndex:d}}const Uz=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Yz(e){const t=E.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var d;s?jo.flushSync(t):t(),(d=e.onChange)==null||d.call(e,i,s)}},[r]=E.useState(()=>new Hz(n));return r.setOptions(n),E.useEffect(()=>r._didMount(),[]),Uz(()=>r._willUpdate()),r}function Xz(e){return Yz({observeElementRect:zz,observeElementOffset:Nz,scrollToFn:Vz,...e})}function K_(){const e=se(t=>{var n;return(n=t.config.ui)==null?void 0:n.activeTheme});return se(t=>{var n;return(((n=t.config.ui)==null?void 0:n.themes)||[]).find(r=>r.name===e)})}function Gz({category:e}){const t=K_(),n=e.name,r=e.list?e.list:Array.from(Array(e.items).keys()),i=E.useRef(null),s=Xz({horizontal:!0,count:r.length,getScrollElement:()=>i.current,estimateSize:E.useCallback(()=>52,[]),overscan:5});return E.useEffect(()=>{s.scrollToIndex(0)},[n]),w.jsx(E.Fragment,{children:w.jsx("div",{ref:i,className:"overflow-x-auto overflow-y-hidden",style:{height:"62px"},children:w.jsx("div",{className:"h-full relative mx-auto",style:{width:`${s.getTotalSize()}px`},children:s.getVirtualItems().map(d=>{const a=`${r[d.index]}`;return w.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${d.size}px`,transform:`translateX(${d.start}px)`},children:w.jsx(xt,{variant:"outline",radius:"rounded-xl",size:"md",equalWidth:!0,onClick:async()=>{await L().shape.addSticker(e.name,a),D().setDirty(!0)},children:w.jsx("img",{className:ce("m-auto m-auto w-28 h-28",e.invertPreview&&(t==null?void 0:t.isDark)&&"invert"),src:Gp(e,a),alt:a})})},d.index)})})})})}function Kz(){const e=se(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.stickers)==null?void 0:d.items})||[],[t,n]=E.useState(e[0]),r=e.map(i=>{const s=t===i,d=xk[i.name];return w.jsx(xt,{size:"xs",color:s?"primary":null,value:i,children:w.jsx("span",{className:"capitalize",children:d?w.jsx(ye,{...d}):i.name})},i.name)});return w.jsxs("div",{className:"h-112",children:[w.jsx("div",{className:"mb-10 w-full hide-scrollbar overflow-x-auto overflow-y-hidden flex",children:w.jsx(Su,{value:t,onChange:i=>n(i),variant:"outline",radius:"rounded-full",className:"mx-auto",children:r})}),t&&w.jsx(Gz,{category:t})]})}function qz(){const e=se(r=>{var i,s;return(s=(i=r.config.tools)==null?void 0:i.frame)==null?void 0:s.items})||[],t=se(r=>r.frame.active);E.useEffect(()=>{D().frame.active&&D().frame.showOptionsPanel()},[]);const n=e.map(r=>{const i=Zt(`images/frames/${r.name}/thumbnail.png`),s=(t==null?void 0:t.name)===r.name,d=s?"border-primary":"";return w.jsx(cr,{children:w.jsxs("button",{type:"button",className:`border-2 overflow-hidden relative rounded border cursor-pointer ${d}`,onClick:()=>{D().setDirty(!0),s?L().frame.remove():L().frame.add(r.name)},children:[s&&w.jsx(Zz,{}),w.jsx("img",{draggable:"false",className:"w-64 h-64",src:i,alt:r.name})]})},r.name)});return w.jsx(Bi,{children:n})}function Zz(){return w.jsx("span",{className:"bg-background/70 absolute inset-0 text-primary",children:w.jsx(Xg,{className:"svg-icon icon-md absolute inset-0 block m-auto"})})}function Qz(){const e=se(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.text)==null?void 0:i.items});E.useEffect(()=>{e&&Zw(e,{prefixSrc:Zt,id:"pixie-fonts"}).catch(()=>{})},[e]),E.useEffect(()=>{L().text.selectOrAddText()&&D().setDirty(!0)},[]);const t=(e||[]).map(n=>w.jsx(cr,{children:w.jsx(Jz,{fontConfig:n})},n.family));return w.jsx(Bi,{className:"pt-6",children:t})}function Jz({fontConfig:e}){var r;const t=se(i=>i.objects.active.editableProps.fontFamily),n=ce("block px-6 w-110 h-68 text-sm bg border rounded-2xl",{"border-primary":t===e.family,"text-primary":t===e.family});return w.jsx("button",{type:"button",className:n,style:{fontFamily:e.family.includes('"')?e.family:`"${e.family}"`,fontWeight:((r=e.descriptors)==null?void 0:r.weight)||"normal"},onClick:async()=>{L().text.selectOrAddText(),D().setDirty(!0),L().objects.setValues({fontFamily:e.family})},children:e.family})}const e7=be(w.jsx("path",{d:"M290.7 57.4L57.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H288h9.4H512c17.7 0 32-14.3 32-32s-14.3-32-32-32H387.9L518.6 285.3c25-25 25-65.5 0-90.5L381.3 57.4c-25-25-65.5-25-90.5 0zM297.4 416H288l-105.4 0-80-80L227.3 211.3 364.7 348.7 297.4 416z"}),"EraserFA","0 0 576 512");function t7(){return E.useEffect(()=>(L().draw.enable(),()=>{L().draw.disable()}),[]),w.jsxs(Bi,{gap:"gap-16",children:[w.jsx(cr,{children:w.jsx(Ii,{size:"sm",label:w.jsx(ye,{message:"Brush Color"}),value:L().draw.currentBrush.color,onChange:e=>{L().draw.setBrushColor(e)}})}),w.jsx(cr,{children:w.jsx(r7,{})}),w.jsx(cr,{children:w.jsx(n7,{})})]})}function n7(){const e=se(r=>{var i,s;return(s=(i=r.config.tools)==null?void 0:i.draw)==null?void 0:s.brushSizes})||[],[t,n]=E.useState(L().draw.currentBrush.width);return w.jsx(Yg,{selectionMode:"single",selectedValue:t,onSelectionChange:r=>{n(r),L().draw.setBrushSize(r)},size:"sm",label:w.jsx(ye,{message:"Brush Size"}),children:e.map(r=>w.jsx(lu,{value:r,children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"flex-shrink-0 mr-8 border-[3px] rounded-full",style:{width:`${r}px`,height:`${r}px`}}),r]})},r))})}function r7(){const e=se(i=>{var s,d;return(d=(s=i.config.tools)==null?void 0:s.draw)==null?void 0:d.brushTypes})||[],t=K_(),[n,r]=E.useState(L().draw.currentBrush.type);return w.jsx(Yg,{selectionMode:"single",selectedValue:n,onSelectionChange:i=>{r(i),L().draw.setBrushType(i)},size:"sm",label:w.jsx(ye,{message:"Brush Type"}),children:e.map(i=>w.jsx(lu,{value:i,children:w.jsxs("div",{className:"flex items-center",children:[i==="EraserBrush"?w.jsx(e7,{className:"mr-8"}):w.jsx("img",{className:"flex-shrink-0 mr-8 w-24 h-24",src:i7(i,t==null?void 0:t.isDark),alt:""}),w.jsx(ye,{message:i.replace(/([A-Z])/g," $1").trim()})]})},i))})}function i7(e,t=!1){const n=e.replace("Brush","").toLowerCase();return Zt(`images/brushes/${t?"white":"black"}/${n}.png`)}function o7(){const{trans:e}=Kr(),t=se(n=>n.corners.radius);return E.useEffect(()=>(D().setDirty(!0),L().corners.showPreview(),()=>L().corners.hidePreview()),[]),w.jsx("div",{className:"max-w-320 mx-auto",children:w.jsx(Fi,{minValue:1,maxValue:300,label:e({message:"Radius"}),getValueLabel:n=>`${n}px`,onChange:n=>{L().corners.updatePreview(n),D().corners.setRadius(n)},value:t})})}const q_={initial:{y:"130%",opacity:0},animate:{y:0,opacity:1},exit:{y:"130%",opacity:0,left:0,position:"absolute",overflowY:"hidden"},transition:{type:"tween",duration:.15}};function s7({activeTool:e}){const t=a7(e);return w.jsx(yt.div,{className:"relative h-full w-full text-sm bg select-none overflow-hidden",...q_,children:t})}function a7(e){switch(e){case Pe.FILTER:return w.jsx(cz,{});case Pe.RESIZE:return w.jsx(gz,{});case Pe.CROP:return w.jsx(Ez,{});case Pe.DRAW:return w.jsx(t7,{});case Pe.TEXT:return w.jsx(Qz,{});case Pe.SHAPES:return w.jsx(Az,{});case Pe.STICKERS:return w.jsx(Kz,{});case Pe.FRAME:return w.jsx(qz,{});case Pe.CORNERS:return w.jsx(o7,{});default:return null}}function Z_({className:e}){const t=se(n=>n.activeTool);return w.jsx("nav",{className:ce("z-navbar min-h-105 flex-shrink-0 px-16 relative overflow-hidden",e),children:w.jsx(tr,{initial:!1,children:t?w.jsx(s7,{activeTool:t},"tool-controls"):w.jsx(l7,{},"nav-items")})})}function l7(){const e=se(t=>{var n,r;return(r=(n=t.config.ui)==null?void 0:n.nav)==null?void 0:r.items})||[];return w.jsx(yt.div,{className:"w-full h-full bg-inherit",...q_,children:w.jsx(Bi,{children:e.map(t=>w.jsx(cr,{children:w.jsx(c7,{item:t})},t.name))})})}function c7({item:e}){const t=()=>{typeof e.action=="string"?Wh(e.action):typeof e.action=="function"&&e.action(D().editor)},n=zk[e.name];return w.jsxs(rr,{variant:"outline",color:"paper",className:"flex-col flex-shrink-0 w-68 h-68",radius:"rounded-2xl",onClick:t,children:[w.jsx("div",{className:"mb-1",children:w.jsx(Eg,{className:"icon-md",icon:e.icon})}),w.jsx("div",{className:"mt-6 text-xs capitalize max-w-[90%] overflow-hidden overflow-ellipsis",children:n?w.jsx(ye,{...n}):e.name})]})}function u7(){const e=se(n=>n.history.items),t=se(n=>n.history.pointer);return w.jsxs(yt.div,{...xu,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[w.jsxs("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[w.jsx(ye,{message:"History"}),w.jsx(Me,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{D().togglePanel("history",!1)},children:w.jsx(Wr,{})})]}),w.jsx("div",{className:"p-10",children:e.map(n=>{const r=n.id===e[t].id,i=At[n.name],s=i.icon&&he.createElement(i.icon,{className:"icon-sm"});return w.jsx(xt,{onClick:()=>{r||L().history.load(n)},variant:"outline",color:r?"primary":null,size:"sm",className:ce("w-full mb-8",r&&"pointer-events-none"),justify:"justify-start",startIcon:s,children:w.jsx(ye,{...i.name})},n.id)})})]})}function h7(e){const{children:t,className:n,color:r,onDismiss:i,leftAdornment:s,rightAdornment:d,hideDismissButton:a=!1,size:o,showDivider:c,justify:f="justify-between",titleFontWeight:l="font-semibold",titleTextSize:h=o==="xs"?"text-xs":"text-sm",closeButtonSize:u=o==="xs"?"xs":"sm",actions:p}=e,{labelId:m,isDismissable:g,close:v}=E.useContext(Fu);return w.jsxs("div",{className:ce(n,"flex flex-shrink-0 items-center gap-10",l,c&&"border-b",f7(e),r||"text-main",f),children:[s,w.jsx("h3",{id:m,className:ce(h,"mr-auto leading-5 opacity-90"),children:t}),d,p,g&&!a&&w.jsx(Me,{"aria-label":"Dismiss",onClick:()=>{i?i():v()},size:u,className:ce("-mr-8 text-muted",d&&"sr-only"),children:w.jsx(Wr,{})})]})}function f7({size:e,padding:t}){if(t)return t;switch(e){case"2xs":case"xs":return"px-14 py-4";case"sm":return"px-18 py-4";default:return"px-24 py-6"}}const Q_=E.forwardRef((e,t)=>{const{children:n,className:r,padding:i,size:s,...d}=e;return w.jsx("div",{...d,ref:t,className:ce(r,d7(e),"overflow-y-auto overflow-x-hidden overscroll-contain text-sm flex-auto"),children:n})});function d7({size:e,padding:t}){if(t)return t;switch(e){case"xs":return"p-14";case"sm":return"p-18";default:return"px-24 py-20"}}function p7(){const e=se(t=>t.openPanels.newImage);return w.jsx(Lu,{isOpen:e,disableInitialTransition:!0,type:"modal",isDismissable:!1,children:w.jsx(g7,{})})}function g7(){const[e,t]=E.useState("default");return w.jsxs(Ru,{className:"text-center max-w-max text-main",size:"auto",children:[w.jsx(h7,{padding:"px-24 pt-24 pb-12",showDivider:!1,children:w.jsx(ye,{message:"Open a photo or design to get started"})}),w.jsx(Q_,{children:e==="default"?w.jsx(m7,{setActivePanel:t}):w.jsx(y7,{setActivePanel:t})})]})}function m7({setActivePanel:e}){return w.jsxs(w.Fragment,{children:[w.jsx(xt,{className:"mr-20",size:"sm",variant:"raised",color:"primary",onClick:()=>{L().import.uploadAndReplaceMainImage()},children:w.jsx(ye,{message:"Open Photo"})}),w.jsx(xt,{variant:"outline",size:"sm",color:"primary",onClick:()=>{e("newCanvas")},children:w.jsx(ye,{message:"Create New"})}),w.jsx(v7,{})]})}function v7(){const e=se(t=>{var n,r;return(r=(n=t.config.ui)==null?void 0:n.openImageDialog)==null?void 0:r.sampleImages});return e!=null&&e.length?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"relative py-20 text-main",children:[w.jsx("hr",{className:"absolute h-1 border-none bg-divider w-full top inset-0 m-auto"}),w.jsx("span",{className:"text-sm bg px-6 relative",children:w.jsx(ye,{message:"or use sample"})})]}),w.jsx("ul",{className:"flex items-center gap-16",children:e.map(t=>w.jsx("li",{className:"shrink-0",children:w.jsx("button",{type:"button",onClick:async()=>{typeof t.action=="function"?t.action():t.url.endsWith(".json")?(await _l(Zt(t.url)),D().togglePanel("newImage",!1)):(await L().import.openBackgroundImage(Zt(t.url)),D().togglePanel("newImage",!1))},children:w.jsx("img",{className:"w-80 h-80 rounded overflow-hidden transition-shadow hover:shadow-md",src:Zt(t.thumbnail),alt:""})})},t.url||t.thumbnail))})]}):null}function y7({setActivePanel:e}){const[t,n]=E.useState({width:800,height:600,bgColor:"transparent"});return w.jsxs("form",{onSubmit:r=>{r.preventDefault();const{width:i,height:s,bgColor:d}=t;i&&s&&(D().setConfig({blankCanvasSize:{width:i,height:s}}),L().canvas.openNew(i,s,d),D().togglePanel("newImage",!1),L().history.addInitial())},children:[w.jsx(_n,{type:"number",label:w.jsx(ye,{message:"Width"}),value:t.width,min:1,required:!0,className:"mb-16",onChange:r=>{n({...t,width:r.target.valueAsNumber})}}),w.jsx(_n,{type:"number",label:w.jsx(ye,{message:"Height"}),value:t.height,min:1,required:!0,className:"mb-16",onChange:r=>{n({...t,height:r.target.valueAsNumber})}}),w.jsx(Ii,{onChange:r=>{n({...t,bgColor:r})},className:"mb-16",value:t.bgColor,label:w.jsx(ye,{message:"Background color"})}),w.jsxs("div",{className:"text-right",children:[w.jsx(xt,{size:"sm",variant:"text",className:"mr-10",onClick:()=>{e("default")},children:w.jsx(ye,{message:"Cancel"})}),w.jsx(xt,{size:"sm",type:"submit",variant:"raised",color:"primary",children:w.jsx(ye,{message:"Create"})})]})]})}const b7=E.forwardRef((e,t)=>{const n=ji(e),{label:r,children:i,size:s,className:d,orientation:a="horizontal",disabled:o,required:c,invalid:f,errorMessage:l,description:h}=e,u={},p=E.useId(),m=e.name||p;return w.jsxs("fieldset",{"aria-describedby":h?`${p}-description`:void 0,ref:t,className:ce("text-left",d),children:[r&&w.jsx("legend",{className:n.label,...u,children:r}),w.jsx("div",{className:ce("flex",r?"mt-6":"mt-0",a==="vertical"?"flex-col gap-10":"flex-row gap-16"),children:E.Children.map(i,g=>{if(E.isValidElement(g))return E.cloneElement(g,{name:m,size:s,invalid:g.props.invalid||f||void 0,disabled:g.props.disabled||o,required:g.props.required||c})})}),h&&!l&&w.jsx("div",{className:n.description,id:`${p}-description`,children:h}),l&&w.jsx("div",{className:n.error,children:l})]})}),Kg=E.forwardRef((e,t)=>{const{children:n,autoFocus:r,size:i,invalid:s,isFirst:d,...a}=e,o=Oi(t);kg({autoFocus:r},o);const c=x7(i);return w.jsxs("label",{className:ce("inline-flex gap-8 select-none items-center whitespace-nowrap align-middle",c.label,e.disabled&&"text-disabled pointer-events-none",e.invalid&&"text-danger"),children:[w.jsx("input",{type:"radio",className:ce("focus-visible:ring outline-none","rounded-full transition-button border-2 appearance-none","border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark","before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark","before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200","checked:before:scale-[.65] checked:before:opacity-100",c.circle),ref:o,...a}),n&&w.jsx("span",{children:n})]})});function x7(e){switch(e){case"xs":return{circle:"h-12 w-12",label:"text-xs"};case"sm":return{circle:"h-16 w-16",label:"text-sm"};case"lg":return{circle:"h-24 w-24",label:"text-lg"};default:return{circle:"h-20 w-20",label:"text-base"}}}function w7(){const e=se(t=>t.openPanels.export);return w.jsx(Lu,{isOpen:e,onOpenChange:t=>{t||D().togglePanel("export",!1)},type:"modal",children:w.jsx(C7,{})})}function C7(){const[e,t]=E.useState(()=>{var n,r,i,s,d,a;return{filename:((r=(n=D().config.tools)==null?void 0:n.export)==null?void 0:r.defaultName)||"image",format:((s=(i=D().config.tools)==null?void 0:i.export)==null?void 0:s.defaultFormat)||"jpeg",quality:((a=(d=D().config.tools)==null?void 0:d.export)==null?void 0:a.defaultQuality)||.8}});return w.jsx(Ru,{className:"text-center max-w-max text-main",size:"auto",children:w.jsx(Q_,{children:w.jsxs("form",{onSubmit:n=>{n.preventDefault(),L().export.save(e.filename,e.format,e.quality),D().togglePanel("export",!1)},children:[w.jsx(_n,{required:!0,size:"sm",label:w.jsx(ye,{message:"Save As"}),value:e.filename,onChange:n=>{t({...e,filename:n.target.value})}}),w.jsxs(b7,{size:"sm",className:"my-20","aria-label":"Image format",children:[w.jsx(Kg,{value:"jpeg",checked:e.format==="jpeg",onChange:n=>{t({...e,format:n.target.value})},children:"JPEG"}),w.jsx(Kg,{value:"png",checked:e.format==="png",onChange:n=>{t({...e,format:n.target.value})},children:"PNG"}),w.jsx(Kg,{value:"json",checked:e.format==="json",onChange:n=>{t({...e,format:n.target.value})},children:"JSON"})]}),w.jsx(Fi,{size:"sm",minValue:.1,step:.1,maxValue:1,value:e.quality,onChange:n=>{t({...e,quality:n})},formatOptions:{style:"percent"},label:w.jsx(ye,{message:"Quality"})}),w.jsx(xt,{variant:"raised",color:"primary",type:"submit",className:"mt-20 w-full",size:"sm",children:w.jsx(ye,{message:"Save"})})]})})})}function _7(){const e=se(n=>n.objects.all),t=se(n=>n.objects.active.id);return w.jsxs(yt.div,{...xu,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[w.jsxs("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[w.jsx(ye,{message:"Objects"}),w.jsx(Me,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{D().togglePanel("objects",!1)},children:w.jsx(Wr,{})})]}),w.jsx("div",{className:"p-8",children:e.map(n=>{const r=n.id===t,i=n.name;if(!i)return null;const s=HE[i],d=s.icon&&he.createElement(s.icon,{className:"icon-sm"});return w.jsx(xt,{onClick:()=>{r||!n.selectable||L().objects.select(n.id)},variant:"outline",color:r?"primary":null,size:"sm",className:ce("w-full mb-8",(r||!n.selectable)&&"pointer-events-none"),justify:"justify-start",startIcon:d,children:w.jsx(ye,{...s.name})},n.id)})})]})}function S7(){const e=se(n=>n.openPanels.history),t=se(n=>n.openPanels.objects);return w.jsxs("div",{className:"z-modal",children:[w.jsxs(tr,{children:[e&&w.jsx(u7,{},"historyPanel"),t&&w.jsx(_7,{},"objListPanel")]}),w.jsx(p7,{}),w.jsx(w7,{})]})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qg(){return qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qg.apply(this,arguments)}var J_;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(J_||(J_={}));function ur(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eS(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function tS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var nS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nS||(nS={}));function k7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function E7(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?tS(e):e;return{pathname:n?n.startsWith("/")?n:T7(n,t):t,search:P7(r),hash:D7(i)}}function T7(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zg(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O7(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rS(e,t){let n=O7(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function iS(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=tS(e):(i=qg({},e),ur(!i.pathname||!i.pathname.includes("?"),Zg("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),Zg("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),Zg("#","search","hash",i)));let s=e===""||i.pathname==="",d=s?"/":i.pathname,a;if(d==null)a=n;else{let l=t.length-1;if(!r&&d.startsWith("..")){let h=d.split("/");for(;h[0]==="..";)h.shift(),l-=1;i.pathname=h.join("/")}a=l>=0?t[l]:"/"}let o=E7(i,a),c=d&&d!=="/"&&d.endsWith("/"),f=(s||d===".")&&n.endsWith("/");return!o.pathname.endsWith("/")&&(c||f)&&(o.pathname+="/"),o}const oS=e=>e.join("/").replace(/\/\/+/g,"/"),P7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,D7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,sS=["post","put","patch","delete"];new Set(sS);const A7=["get",...sS];new Set(A7);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qg.apply(this,arguments)}const aS=E.createContext(null),za=E.createContext(null),lS=E.createContext(null),zu=E.createContext({outlet:null,matches:[],isDataRoute:!1});function M7(e,t){let{relative:n}=t===void 0?{}:t;Jg()||ur(!1);let{basename:r,navigator:i}=E.useContext(za),{hash:s,pathname:d,search:a}=uS(e,{relative:n}),o=d;return r!=="/"&&(o=d==="/"?r:oS([r,d])),i.createHref({pathname:o,search:a,hash:s})}function Jg(){return E.useContext(lS)!=null}function em(){return Jg()||ur(!1),E.useContext(lS).location}function cS(e){E.useContext(za).static||E.useLayoutEffect(e)}function j7(){let{isDataRoute:e}=E.useContext(zu);return e?z7():I7()}function I7(){Jg()||ur(!1);let e=E.useContext(aS),{basename:t,future:n,navigator:r}=E.useContext(za),{matches:i}=E.useContext(zu),{pathname:s}=em(),d=JSON.stringify(rS(i,n.v7_relativeSplatPath)),a=E.useRef(!1);return cS(()=>{a.current=!0}),E.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let l=iS(c,JSON.parse(d),s,f.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:oS([t,l.pathname])),(f.replace?r.replace:r.push)(l,f.state,f)},[t,r,d,s,e])}function uS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=E.useContext(za),{matches:i}=E.useContext(zu),{pathname:s}=em(),d=JSON.stringify(rS(i,r.v7_relativeSplatPath));return E.useMemo(()=>iS(e,JSON.parse(d),s,n==="path"),[e,d,s,n])}var hS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hS||{}),fS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fS||{});function F7(e){let t=E.useContext(aS);return t||ur(!1),t}function R7(e){let t=E.useContext(zu);return t||ur(!1),t}function L7(e){let t=R7(),n=t.matches[t.matches.length-1];return n.route.id||ur(!1),n.route.id}function z7(){let{router:e}=F7(hS.UseNavigateStable),t=L7(fS.UseNavigateStable),n=E.useRef(!1);return cS(()=>{n.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Qg({fromRouteId:t},s)))},[e,t])}new Promise(()=>{});/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tm.apply(this,arguments)}function B7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function N7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $7(e,t){return e.button===0&&(!t||t==="_self")&&!N7(e)}const V7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],H7="6";try{window.__reactRouterVersion=H7}catch{}const W7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y7=E.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:d,state:a,target:o,to:c,preventScrollReset:f,unstable_viewTransition:l}=t,h=B7(t,V7),{basename:u}=E.useContext(za),p,m=!1;if(typeof c=="string"&&U7.test(c)&&(p=c,W7))try{let b=new URL(window.location.href),x=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=k7(x.pathname,u);x.origin===b.origin&&C!=null?c=C+x.search+x.hash:m=!0}catch{}let g=M7(c,{relative:i}),v=X7(c,{replace:d,state:a,target:o,preventScrollReset:f,relative:i,unstable_viewTransition:l});function y(b){r&&r(b),b.defaultPrevented||v(b)}return E.createElement("a",tm({},h,{href:p||g,onClick:m||s?r:y,ref:n,target:o}))});var dS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dS||(dS={}));var pS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pS||(pS={}));function X7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:d,unstable_viewTransition:a}=t===void 0?{}:t,o=j7(),c=em(),f=uS(e,{relative:d});return E.useCallback(l=>{if($7(l,n)){l.preventDefault();let h=r!==void 0?r:eS(c)===eS(f);o(e,{replace:h,state:i,preventScrollReset:s,relative:d,unstable_viewTransition:a})}},[c,o,f,r,i,n,e,s,d,a])}const G7=be(w.jsx("path",{d:"M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutlineOutlined"),K7=be(w.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),q7={opacity:0,y:50,scale:.3},Z7={opacity:1,y:0,scale:1},Q7={opacity:0,scale:.5};function J7(){const e=Kv(t=>t.toasts);return w.jsx("div",{className:"pointer-events-none relative",children:w.jsx(tr,{initial:!1,children:e.map(t=>w.jsx("div",{className:ce("fixed z-toast mx-auto p-20",t.position==="bottom-center"?"bottom-0 left-0 right-0":"bottom-0 right-0"),children:w.jsxs(yt.div,{initial:t.disableEnterAnimation?void 0:q7,animate:t.disableEnterAnimation?void 0:Z7,exit:t.disableExitAnimation?void 0:Q7,className:ce("pointer-events-auto mx-auto flex max-h-100 min-h-50 w-min min-w-288 max-w-500 items-center gap-10 rounded-lg border bg-paper bg-paper py-6 pl-16 pr-6 text-sm text-main shadow-lg"),onPointerEnter:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onPointerLeave:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},role:"alert","aria-live":t.type==="danger"?"assertive":"polite",children:[t.type==="danger"&&w.jsx(G7,{className:"flex-shrink-0 text-danger",size:"md"}),t.type==="loading"&&w.jsx(I_,{size:"sm",className:"flex-shrink-0",isIndeterminate:!0}),t.type==="positive"&&w.jsx(K7,{className:"flex-shrink-0 text-positive",size:"md"}),w.jsx("div",{className:"mr-auto w-max overflow-hidden overflow-ellipsis","data-testid":"toast-message",children:w.jsx(Tg,{value:t.message})}),t.action&&w.jsx(xt,{variant:"text",color:"primary",size:"sm",className:"flex-shrink-0",onFocus:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},onClick:()=>no().remove(t.id),elementType:Y7,to:t.action.action,children:w.jsx(Tg,{value:t.action.label})}),t.type!=="loading"&&w.jsx(Me,{onFocus:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},type:"button",className:"flex-shrink-0",onClick:()=>{no().remove(t.id)},size:"sm",children:w.jsx(Wr,{})})]})},t.id))})})}function gS(e){return $w()?e.metaKey:e.ctrlKey}function eB(e){switch(e.key){case"z":gS(e)&&(e.preventDefault(),e.stopPropagation(),e.shiftKey?L().history.redo():L().history.undo());break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),L().objects.move("up");break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),L().objects.move("right");break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),L().objects.move("down");break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),L().objects.move("left");break;case"Delete":e.preventDefault(),e.stopPropagation(),L().objects.delete();break;case"v":gS(e)&&(e.preventDefault(),e.stopPropagation(),tB());break}}async function tB(){try{const e=await navigator.clipboard.read();for(const t of e)for(const n of t.types)if(n.startsWith("image/")){const r=await t.getType(n),i=new FileReader;i.onload=s=>{var d;(d=s.target)!=null&&d.result&&L().import.addImageFromData(s.target.result)},i.readAsDataURL(r);return}}catch(e){console.error(e)}}const nB=new Map,nm=new Map,mS={status:"inactive"};async function*rB(e){const t=[];for(const n of e.items)if(n.kind==="file"){const r=n.webkitGetAsEntry();r&&t.push(r)}for(const n of t)if(n.isFile){if(n.name===".DS_Store")continue;const r=await yS(n);yield new au(r,n.fullPath)}else n.isDirectory&&(yield*vS(n))}async function*vS(e){const t=e.createReader();let n;do{n=await new Promise((r,i)=>{t.readEntries(r,i)});for(const r of n)if(r.isFile){if(r.name===".DS_Store")continue;const i=await yS(r);yield new au(i,r.fullPath)}else r.isDirectory&&(yield*vS(r))}while(n.length>0)}function yS(e){return new Promise((t,n)=>e.file(t,n))}async function iB(e){const t=[];for await(const n of e)t.push(n);return t}const oB=400;function sB({id:e,disabled:t,ref:n,...r}){const i=E.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,s=E.useRef(r);s.current=r,E.useLayoutEffect(()=>(nm.set(e,{...nm.get(e),disabled:t,id:e,ref:n}),()=>{nm.delete(e)}),[e,s,t,n]);const d=h=>{var m;const u=s.current,p=u.allowDragEventsFromItself||n.current!==((m=h.ref)==null?void 0:m.current);return!!(h!=null&&h.type&&p&&u.types.includes(h.type)&&(!u.acceptsDrop||u.acceptsDrop(h)))},a=h=>{var p,m;const u=Ba(h);u&&((m=(p=s.current).onDragLeave)==null||m.call(p,u))};return{droppableProps:t?{}:{onDragOver:h=>{var p,m;h.preventDefault(),h.stopPropagation();const u=Ba(h);u&&d(u)&&((m=(p=s.current).onDragOver)==null||m.call(p,u,h))},onDragEnter:h=>{var p,m;if(h.stopPropagation(),i.dragOverElements.add(h.target),i.dragOverElements.size>1)return;const u=Ba(h);u&&d(u)&&((m=(p=s.current).onDragEnter)==null||m.call(p,u),clearTimeout(i.dropActivateTimer),typeof s.current.onDropActivate=="function"&&(i.dropActivateTimer=setTimeout(()=>{var g,v;u&&((v=(g=s.current).onDropActivate)==null||v.call(g,u))},oB)))},onDragLeave:h=>{h.stopPropagation(),i.dragOverElements.delete(h.target);for(const p of i.dragOverElements)h.currentTarget.contains(p)||i.dragOverElements.delete(p);if(i.dragOverElements.size>0)return;const u=Ba(h);u&&d(u)&&(a(h),clearTimeout(i.dropActivateTimer))},onDrop:async h=>{var p,m,g,v;h.preventDefault(),h.stopPropagation(),i.dragOverElements.clear(),a(h),clearTimeout(i.dropActivateTimer);const u=Ba(h);u&&((m=(p=s.current).onDragLeave)==null||m.call(p,u),d(u)&&((v=(g=s.current).onDrop)==null||v.call(g,u)))}}}}function Ba(e){if(mS.dragTargetId!=null)return nB.get(mS.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>iB(rB(e.dataTransfer))}}function aB(){const e=se(p=>{var m;return(m=p.config.ui)==null?void 0:m.visible})??!0,t=se(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.nav)==null?void 0:g.position})??"bottom",n=se(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.menubar)==null?void 0:g.position})??"top",r=se(p=>{var m;return(m=p.config.ui)==null?void 0:m.allowEditorClose})??!0,i=E.useRef(null),s=E.useRef(null),{isModal:d,isMobile:a}=ku(),o=E.useCallback(async p=>{var g,v;if(D().activeTool||D().dirty||p.type!=="nativeFile")return;const m=await p.getData();L().import.fileIsValid(m[0])&&(((v=(g=D().config.tools)==null?void 0:g.import)==null?void 0:v.openDroppedImageAsBackground)??!1?await L().import.openBackgroundImage(m[0]):await L().import.openUploadedFile(m[0]))},[]),{droppableProps:c}=sB({id:"pixie-root",ref:s,types:["nativeFile"],onDrop:o});E.useEffect(()=>{var g,v;D().fabric||(se.setState({canvasRef:i}),E8(i.current),(g=D().config.ui)!=null&&g.defaultTool&&D().setActiveTool((v=D().config.ui)==null?void 0:v.defaultTool,null),L().canvas.loadInitialContent().then(()=>{var y,b;(b=(y=D().config).onLoad)==null||b.call(y,D().editor)}));const p=l2(s,()=>{D().setStageSize(c2(s.current))}),m=l2(i,()=>{D().setCanvasSize(c2(i.current))});return()=>{p(),m()}},[s]);const f={visible:{opacity:1,scale:1,display:"flex"},hidden:{opacity:0,transitionEnd:{display:"none"}}},l=ce("pixie-root flex flex-col overflow-hidden bg-background text-main no-tap-highlight w-full h-full",{relative:!d,"fixed inset-0 w-full h-full z-20":d,"shadow-lg border rounded-md m-auto max-h-[calc(100vh-90px)] max-w-[calc(100vw-90px)]":d&&!a}),h=d&&e&&!a&&r,u=d&&e;return w.jsxs(ZA,{features:QA,strict:!0,children:[h&&w.jsx(Me,{className:"z-20 fixed right-2 top-2 text-white",size:"lg",onClick:()=>{D().editor.close()},children:w.jsx(Wr,{})}),u&&w.jsx(yg,{position:"fixed",disableInitialTransition:!0}),w.jsxs(yt.div,{initial:!1,variants:f,animate:e?"visible":"hidden",className:l,children:[n==="top"&&w.jsx(oC,{}),t==="top"&&w.jsx(Z_,{className:"pt-14"}),w.jsxs("main",{className:"relative flex-auto my-20 overflow-hidden outline-none",tabIndex:-1,...nr(c,{onKeyDownCapture:eB}),ref:s,children:[w.jsx(qI,{}),w.jsx(_R,{ref:i})]}),w.jsx(rz,{}),t==="bottom"&&w.jsx(Z_,{}),n==="bottom"&&w.jsx(oC,{}),w.jsx(S7,{}),w.jsx(J7,{})]})]})}(function(){fabric.Object.ENLIVEN_PROPS.push("eraser");var e=fabric.Object.prototype._drawClipPath,t=fabric.Object.prototype.needsItsOwnCache,n=fabric.Object.prototype.toObject,r=fabric.Object.prototype.getSvgCommons,i=fabric.Object.prototype._createBaseClipPathSVGMarkup,s=fabric.Object.prototype._createBaseSVGMarkup;fabric.Object.prototype.cacheProperties.push("eraser"),fabric.Object.prototype.stateProperties.push("eraser"),fabric.util.object.extend(fabric.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return t.call(this)||!!this.eraser},_drawClipPath:function(o,c){if(e.call(this,o,c),this.eraser){var f=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:f.x,height:f.y}),e.call(this,o,this.eraser)}},toObject:function(o){var c=n.call(this,["erasable"].concat(o));return this.eraser&&!this.eraser.excludeFromExport&&(c.eraser=this.eraser.toObject(o)),c},getSvgCommons:function(){return r.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(o){return this.eraser?(this.eraser.clipPathId="MASK_"+fabric.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(o),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(o,c){return[this._createEraserSVGMarkup(c&&c.reviver),i.call(this,o,c)].join("")},_createBaseSVGMarkup:function(o,c){return[this._createEraserSVGMarkup(c&&c.reviver),s.call(this,o,c)].join("")}});var d=fabric.Group.prototype._restoreObjectsState;fabric.util.object.extend(fabric.Group.prototype,{_addEraserPathToObjects:function(o){this._objects.forEach(function(c){fabric.EraserBrush.prototype._addPathToObjectEraser.call(fabric.EraserBrush.prototype,c,o)})},applyEraserToObjects:function(){var o=this,c=this.eraser;if(c){delete this.eraser;var f=o.calcTransformMatrix();c.clone(function(l){var h=o.clipPath;l.getObjects("path").forEach(function(u){var p=fabric.util.multiplyTransformMatrices(f,u.calcTransformMatrix());fabric.util.applyTransformToObject(u,p),h?h.clone(function(m){var g=fabric.EraserBrush.prototype.applyClipPathToPath.call(fabric.EraserBrush.prototype,u,m,f);o._addEraserPathToObjects(g)},["absolutePositioned","inverted"]):o._addEraserPathToObjects(u)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),d.call(this)}}),fabric.Eraser=fabric.util.createClass(fabric.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(o){o.save(),o.fillStyle="black",o.fillRect(-this.width/2,-this.height/2,this.width,this.height),o.restore(),this.callSuper("drawObject",o)},_getBounds:function(){},_toSVG:function(o){var c=["<g ","COMMON_PARTS",` >
`],f=-this.width/2,l=-this.height/2,h=["<rect ",'fill="white" ','x="',f,'" y="',l,'" width="',this.width,'" height="',this.height,`" />
`].join("");c.push("		",h);for(var u=0,p=this._objects.length;u<p;u++)c.push("		",this._objects[u].toSVG(o));return c.push(`</g>
`),c}}),fabric.Eraser.fromObject=function(o,c){var f=o.objects;fabric.util.enlivenObjects(f,function(l){var h=fabric.util.object.clone(o,!0);delete h.objects,fabric.util.enlivenObjectEnlivables(o,h,function(){c&&c(new fabric.Eraser(l,h,!0))})})};var a=fabric.Canvas.prototype._renderOverlay;fabric.util.object.extend(fabric.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(o){a.call(this,o),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),fabric.EraserBrush=fabric.util.createClass(fabric.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(o){return o.erasable!==!1},_prepareCollectionTraversal:function(o,c,f){o.forEachObject(function(l){l.forEachObject&&l.erasable==="deep"?this._prepareCollectionTraversal(l,c,f):!this.inverted&&l.erasable&&l.visible?(l.visible=!1,o.dirty=!0,f.visibility.push(l),f.collection.push(o)):this.inverted&&l.visible&&(l.erasable&&l.eraser?(l.eraser.inverted=!0,l.dirty=!0,o.dirty=!0,f.eraser.push(l),f.collection.push(o)):(l.visible=!1,o.dirty=!0,f.visibility.push(l),f.collection.push(o)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=fabric.util.createCanvasElement());var o=this._patternCanvas;o.width=this.canvas.width,o.height=this.canvas.height;var c=o.getContext("2d");if(this.canvas._isRetinaScaling()){var f=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(f,o,c)}var l=this.canvas.backgroundImage,h=l&&this._isErasable(l),u=this.canvas.overlayImage,p=u&&this._isErasable(u);if(!this.inverted&&(l&&!h||this.canvas.backgroundColor))h&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(c),h&&(this.canvas.backgroundImage=l);else if(this.inverted&&l&&h){var m=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(c),this.canvas.backgroundColor=m}c.save(),c.transform.apply(c,this.canvas.viewportTransform);var g={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,c,g),this.canvas._renderObjects(c,this.canvas._objects),g.visibility.forEach(function(v){v.visible=!0}),g.eraser.forEach(function(v){v.eraser.inverted=!1,v.dirty=!0}),g.collection.forEach(function(v){v.dirty=!0}),c.restore(),!this.inverted&&(u&&!p||this.canvas.overlayColor))p&&(this.canvas.overlayImage=void 0),a.call(this.canvas,c),p&&(this.canvas.overlayImage=u);else if(this.inverted&&u&&p){var m=this.canvas.overlayColor;this.canvas.overlayColor=void 0,a.call(this.canvas,c),this.canvas.overlayColor=m}},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle="black"},_saveAndTransform:function(o){this.callSuper("_saveAndTransform",o),this._setBrushStyles(o),o.globalCompositeOperation=o===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(o,c){this.canvas._isMainEvent(c.e)&&(this._prepareForDrawing(o),this._captureDrawingPath(o),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var o;this.inverted||(o=this.canvas.getContext(),this.callSuper("_render",o)),o=this.canvas.contextTop,this.canvas.clearContext(o),this.callSuper("_render",o),o.save();var c=this.canvas.getRetinaScaling(),f=1/c;o.scale(f,f),o.globalCompositeOperation="source-in",o.drawImage(this._patternCanvas,0,0),o.restore()},createPath:function(o){var c=this.callSuper("createPath",o);return c.globalCompositeOperation=this.inverted?"source-over":"destination-out",c.stroke=this.inverted?"white":"black",c},applyClipPathToPath:function(o,c,f){var l=fabric.util.invertTransform(o.calcTransformMatrix()),h=c.calcTransformMatrix(),u=c.absolutePositioned?l:fabric.util.multiplyTransformMatrices(l,f);return c.absolutePositioned=!1,fabric.util.applyTransformToObject(c,fabric.util.multiplyTransformMatrices(u,h)),o.clipPath=o.clipPath?fabric.util.mergeClipPaths(c,o.clipPath):c,o},clonePathWithClipPath:function(o,c,f){var l=c.calcTransformMatrix(),h=c.clipPath,u=this;o.clone(function(p){h.clone(function(m){f(u.applyClipPathToPath(p,m,l))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(o,c){var f=this;if(o.forEachObject&&o.erasable==="deep"){var l=o._objects.filter(function(u){return u.erasable});l.length>0&&o.clipPath?this.clonePathWithClipPath(c,o,function(u){l.forEach(function(p){f._addPathToObjectEraser(p,u)})}):l.length>0&&l.forEach(function(u){f._addPathToObjectEraser(u,c)});return}var h=o.eraser;h||(h=new fabric.Eraser,o.eraser=h),c.clone(function(u){var p=fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(o.calcTransformMatrix()),u.calcTransformMatrix());fabric.util.applyTransformToObject(u,p),h.addWithUpdate(u),o.set("dirty",!0),o.fire("erasing:end",{path:u}),o.group&&Array.isArray(f.__subTargets)&&f.__subTargets.push(o)})},applyEraserToCanvas:function(o){var c=this.canvas,f={};return["backgroundImage","overlayImage"].forEach(function(l){var h=c[l];h&&h.erasable&&(this._addPathToObjectEraser(h,o),f[l]=h)},this),f},_finalizeAndAddPath:function(){var o=this.canvas.contextTop,c=this.canvas;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),c.clearContext(c.contextTop),this._isErasing=!1;var f=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!f||this._isEmptySVGPath(f)){c.fire("erasing:end"),c.requestRenderAll();return}var l=this.createPath(f);l.setCoords(),c.fire("before:path:created",{path:l});var h=this.applyEraserToCanvas(l),u=this;this.__subTargets=[];var p=[];c.forEachObject(function(m){m.erasable&&m.intersectsWithObject(l,!0,!0)&&(u._addPathToObjectEraser(m,l),p.push(m))}),c.fire("erasing:end",{path:l,targets:p,subTargets:this.__subTargets,drawables:h}),delete this.__subTargets,c.requestRenderAll(),this._resetShadow(),c.fire("path:created",{path:l})}})})(),Xu.enableBoundaryChecking(!1);const rm=class xS{constructor(t){if(this.tools={},this.fabric=null,t.sentryDsn&&mk({dsn:t.sentryDsn}),HS(TT),!t.selector)throw new Error('Pixie required "selector" option.');const n=document.querySelector(t.selector);if(!n)return;n.classList.add("pi"),CT(n),this.setConfig(t),se.setState({editor:this}),ix(n).render(w.jsx(he.StrictMode,{children:w.jsx(aB,{})}))}get state(){return D()}get defaultConfig(){return xS.defaultConfig}open(t={}){return new Promise(async n=>{var r;Object.keys(t).length?await this.resetEditor({...Ev(t,{ui:{visible:!0},image:t.image||D().config.image,state:t.state||D().config.state,blankCanvasSize:t.blankCanvasSize||D().config.blankCanvasSize})}):(r=D().config.ui)!=null&&r.visible||D().setConfig({ui:{visible:!0}}),n()})}close(){var t,n,r;(t=D().config.ui)!=null&&t.visible&&(this.setConfig({ui:{visible:!1}}),(r=(n=D().config).onClose)==null||r.call(n))}setConfig(t){D().setConfig(t)}uploadAndAddImage(){return L().import.uploadAndAddImage()}uploadAndReplaceMainImage(){return L().import.uploadAndReplaceMainImage()}uploadAndOpenStateFile(){return L().import.uploadAndOpenStateFile()}newCanvas(t,n,r){return L().canvas.openNew(t,n,r)}getState(t){return JSON.stringify(Sl(t))}setState(t){return L().import.loadState(t)}async setStateFromUrl(t){const n=await _l(t);return L().import.loadState(n)}openTool(t){Wh(t)}applyChanges(){D().applyChanges()}cancelChanges(){D().cancelChanges()}async resetEditor(t){await Hh(t),await L().canvas.loadInitialContent()}togglePanel(t,n){t==="objects"&&D().togglePanel("history",!1),t==="history"&&D().togglePanel("objects",!1),D().togglePanel(t,n)}on(t,n){var r;(r=this.fabric)==null||r.on(t,n)}isDirty(){return D().dirty}get(t){return this.tools[t]}notify(t){return ro(t)}static init(t){return new Promise(n=>{const r=t.onLoad;t.onLoad=i=>{r==null||r(i),n(i)},new this(t)})}};return rm.defaultConfig=sv,rm.version=Nk,rm});
//# sourceMappingURL=pixie.umd.js.map
