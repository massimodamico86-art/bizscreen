---
phase: 03-auth-hardening
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/auth/SignupPage.jsx
  - src/auth/UpdatePasswordPage.jsx
autonomous: true

must_haves:
  truths:
    - "User cannot submit signup form with password shorter than 8 characters"
    - "User cannot submit signup form without uppercase, lowercase, and number"
    - "User sees real-time password strength feedback while typing"
    - "User cannot update password to weak password after reset"
  artifacts:
    - path: "src/auth/SignupPage.jsx"
      provides: "Password validation integration"
      contains: "validatePassword"
    - path: "src/auth/UpdatePasswordPage.jsx"
      provides: "Password validation integration"
      contains: "validatePassword"
  key_links:
    - from: "src/auth/SignupPage.jsx"
      to: "src/services/passwordService.js"
      via: "import validatePassword"
      pattern: "import.*validatePassword.*passwordService"
    - from: "src/auth/SignupPage.jsx"
      to: "src/components/security/PasswordStrengthIndicator.jsx"
      via: "import PasswordStrengthIndicator"
      pattern: "import PasswordStrengthIndicator"
---

<objective>
Integrate existing password validation infrastructure into auth forms

Purpose: SignupPage and UpdatePasswordPage currently use weak 6-char validation. The passwordService.js already implements 8+ char requirement with complexity (uppercase, lowercase, number, special character) and HIBP breach checking. This plan wires the existing infrastructure into the forms.

Output: Both auth pages validate passwords using passwordService before submission and show real-time feedback via PasswordStrengthIndicator.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-auth-hardening/03-CONTEXT.md
@.planning/phases/03-auth-hardening/03-RESEARCH.md
@src/services/passwordService.js
@src/components/security/PasswordStrengthIndicator.jsx
@src/auth/SignupPage.jsx
@src/auth/UpdatePasswordPage.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate password validation into SignupPage</name>
  <files>src/auth/SignupPage.jsx</files>
  <action>
Update SignupPage.jsx to use existing password validation infrastructure:

1. Add imports:
   - `import { validatePassword } from '../services/passwordService';`
   - `import PasswordStrengthIndicator from '../components/security/PasswordStrengthIndicator';`

2. Add state for password validity tracking:
   - `const [isPasswordValid, setIsPasswordValid] = useState(false);`

3. Replace weak validation in handleSubmit:
   - REMOVE: `if (formData.password.length < 6)` block
   - ADD: `const validation = validatePassword(formData.password, formData.email);`
   - ADD: `if (!validation.valid) { setError(validation.errors[0]); setLoading(false); return; }`

4. Add PasswordStrengthIndicator below password input:
   ```jsx
   <PasswordStrengthIndicator
     password={formData.password}
     email={formData.email}
     checkBreaches={true}
     showRequirements={true}
     onValidationChange={(result) => setIsPasswordValid(result.valid)}
   />
   ```

5. Update password placeholder from "At least 6 characters" to "Create a strong password"

6. Disable submit button when password is invalid:
   - Update button: `disabled={loading || !isPasswordValid}`
  </action>
  <verify>
  - File compiles without errors: `npm run build 2>&1 | grep -i error || echo "Build OK"`
  - PasswordStrengthIndicator import exists
  - validatePassword import exists
  - Old 6-char validation removed
  </verify>
  <done>SignupPage shows password strength indicator and validates using passwordService rules</done>
</task>

<task type="auto">
  <name>Task 2: Integrate password validation into UpdatePasswordPage</name>
  <files>src/auth/UpdatePasswordPage.jsx</files>
  <action>
Update UpdatePasswordPage.jsx to use existing password validation infrastructure:

1. Add imports:
   - `import { validatePassword } from '../services/passwordService';`
   - `import PasswordStrengthIndicator from '../components/security/PasswordStrengthIndicator';`

2. Add state for password validity tracking:
   - `const [isPasswordValid, setIsPasswordValid] = useState(false);`

3. Replace weak validation in handleSubmit:
   - REMOVE: `if (password.length < 6)` block (keep passwords match check)
   - ADD BEFORE match check: `const validation = validatePassword(password);`
   - ADD: `if (!validation.valid) { setError(validation.errors[0]); return; }`

4. Add PasswordStrengthIndicator below new password input (before confirm password):
   ```jsx
   <PasswordStrengthIndicator
     password={password}
     checkBreaches={true}
     showRequirements={true}
     onValidationChange={(result) => setIsPasswordValid(result.valid)}
   />
   ```

5. Update password placeholder from "At least 6 characters" to "Create a strong password"

6. Update minLength on password inputs from 6 to 8

7. Disable submit button when password is invalid:
   - Update button: `disabled={loading || !isPasswordValid}`
  </action>
  <verify>
  - File compiles without errors: `npm run build 2>&1 | grep -i error || echo "Build OK"`
  - PasswordStrengthIndicator import exists
  - validatePassword import exists
  - Old 6-char validation removed
  - Passwords match validation preserved
  </verify>
  <done>UpdatePasswordPage shows password strength indicator and validates using passwordService rules</done>
</task>

</tasks>

<verification>
1. Both files import validatePassword from passwordService
2. Both files import and render PasswordStrengthIndicator
3. No references to 6-character minimum remain
4. Build completes without errors
</verification>

<success_criteria>
- SignupPage rejects passwords shorter than 8 characters
- SignupPage rejects passwords without complexity (uppercase, lowercase, number)
- UpdatePasswordPage applies same validation rules
- Real-time password strength feedback visible while typing
- Submit buttons disabled until password meets requirements
</success_criteria>

<output>
After completion, create `.planning/phases/03-auth-hardening/03-01-SUMMARY.md`
</output>
