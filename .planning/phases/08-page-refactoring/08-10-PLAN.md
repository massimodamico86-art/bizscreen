---
phase: 08-page-refactoring
plan: 10
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/PlaylistEditorPage.jsx
  - src/pages/components/PlaylistEditorComponents.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "PlaylistEditorPage.jsx is under 700 lines"
    - "Inline components are extracted to separate file"
    - "Page functionality is unchanged after extraction"
  artifacts:
    - path: "src/pages/components/PlaylistEditorComponents.jsx"
      provides: "Extracted components for PlaylistEditorPage"
      exports: ["PlaylistStripItem", "LibraryMediaItem"]
    - path: "src/pages/PlaylistEditorPage.jsx"
      provides: "Main page component"
      max_lines: 700
  key_links:
    - from: "src/pages/PlaylistEditorPage.jsx"
      to: "src/pages/components/PlaylistEditorComponents.jsx"
      via: "import statement"
      pattern: "from.*PlaylistEditorComponents"
---

<objective>
Extract inline components from PlaylistEditorPage.jsx to reach 700-line target.

Purpose: PlaylistEditorPage is 48% over target (1036 lines vs 700). Hook extraction (08-03) moved state logic out but ~170 lines of inline UI components remain: PlaylistStripItem (~110 lines) and LibraryMediaItem (~56 lines). Additional extraction may be needed to reach target.

Output: PlaylistEditorPage.jsx under 700 lines with inline components extracted to src/pages/components/PlaylistEditorComponents.jsx
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-page-refactoring/08-VERIFICATION.md
@src/pages/PlaylistEditorPage.jsx
@src/pages/hooks/usePlaylistEditor.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract inline components</name>
  <files>
    src/pages/components/PlaylistEditorComponents.jsx
    src/pages/PlaylistEditorPage.jsx
  </files>
  <action>
Create src/pages/components/PlaylistEditorComponents.jsx containing:

1. Move these inline components from PlaylistEditorPage.jsx:
   - PlaylistStripItem (line ~69, ~110 lines) - draggable strip item with duration control
   - LibraryMediaItem (line ~181, ~56 lines) - library media item for adding to playlist

2. Add necessary imports at top of new file:
   - React hooks (useRef, useState if needed)
   - Design system components
   - Lucide icons (Image, Video, Music, FileText, Globe, GripVertical, X, Minus, Plus)
   - Any media type mappings needed

3. Export both components.

4. Update PlaylistEditorPage.jsx:
   - Import PlaylistStripItem and LibraryMediaItem from './components/PlaylistEditorComponents'
   - Remove inline component definitions
   - Keep main PlaylistEditorPage component and usePlaylistEditor import

5. If page is still over 700 lines after extraction:
   - Look for additional extractable UI sections (e.g., playlist header bar, library sidebar)
   - Extract any additional inline components needed to reach target

6. Ensure drag-drop props are preserved:
   - PlaylistStripItem receives onDragStart, onDragEnd, onDragOver, onDrop
   - These are passed through from the parent, not defined in component
  </action>
  <verify>
    - `wc -l src/pages/PlaylistEditorPage.jsx` shows under 700 lines
    - `wc -l src/pages/components/PlaylistEditorComponents.jsx` shows ~170+ lines
    - `npm run lint -- src/pages/PlaylistEditorPage.jsx src/pages/components/PlaylistEditorComponents.jsx` passes
    - `npm run build` succeeds
  </verify>
  <done>PlaylistEditorPage.jsx is under 700 lines, inline components extracted</done>
</task>

<task type="auto">
  <name>Task 2: Verify page functionality</name>
  <files>src/pages/PlaylistEditorPage.jsx</files>
  <action>
1. Run existing tests:
   - `npm test -- --run` (should pass all tests)

2. Check that imports resolve:
   - No "module not found" errors
   - PlaylistStripItem and LibraryMediaItem imported and used

3. Confirm drag-drop still works:
   - PlaylistStripItem receives drag handlers from parent
   - Drag state (isDragOver, isDragging) passed as props
   - onRemove, onUpdateDuration handlers passed through
  </action>
  <verify>
    - `npm test -- --run` passes
    - `npm run build` succeeds
    - Grep confirms components imported: `grep "from.*PlaylistEditorComponents" src/pages/PlaylistEditorPage.jsx`
  </verify>
  <done>All tests pass, build succeeds, drag-drop functionality preserved</done>
</task>

</tasks>

<verification>
- PlaylistEditorPage.jsx line count under 700
- PlaylistEditorComponents.jsx exports PlaylistStripItem and LibraryMediaItem
- npm run lint passes for both files
- npm run build succeeds
- npm test passes
</verification>

<success_criteria>
1. PlaylistEditorPage.jsx is under 700 lines
2. PlaylistStripItem and LibraryMediaItem are extracted
3. Drag-drop functionality works (handlers passed as props)
4. Build and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/08-page-refactoring/08-10-SUMMARY.md`
</output>
