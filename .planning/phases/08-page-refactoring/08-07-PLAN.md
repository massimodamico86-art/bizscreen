---
phase: 08-page-refactoring
plan: 07
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/FeatureFlagsPage.jsx
  - src/pages/components/FeatureFlagsComponents.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "FeatureFlagsPage.jsx is under 600 lines"
    - "All inline tab components are extracted to separate file"
    - "All inline modals are extracted to separate file"
    - "Page functionality is unchanged after extraction"
  artifacts:
    - path: "src/pages/components/FeatureFlagsComponents.jsx"
      provides: "Extracted tab components and modals"
      exports: ["FeatureFlagsTab", "ExperimentsTab", "FeedbackTab", "AnnouncementsTab", "FlagModal", "ExperimentModal", "AnnouncementModal"]
    - path: "src/pages/FeatureFlagsPage.jsx"
      provides: "Main page component"
      max_lines: 600
  key_links:
    - from: "src/pages/FeatureFlagsPage.jsx"
      to: "src/pages/components/FeatureFlagsComponents.jsx"
      via: "import statement"
      pattern: "from.*FeatureFlagsComponents"
---

<objective>
Extract inline tab components and modals from FeatureFlagsPage.jsx to reach 600-line target.

Purpose: FeatureFlagsPage is 110% over target (1256 lines vs 600). Hook extraction (08-01) moved state logic out but ~1000 lines of inline UI components remain: 4 tab components (~500 lines) and 3 modals (~500 lines).

Output: FeatureFlagsPage.jsx under 600 lines with all tab components and modals extracted to src/pages/components/FeatureFlagsComponents.jsx
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-page-refactoring/08-VERIFICATION.md
@src/pages/FeatureFlagsPage.jsx
@src/pages/hooks/useFeatureFlags.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract tab components and modals</name>
  <files>
    src/pages/components/FeatureFlagsComponents.jsx
    src/pages/FeatureFlagsPage.jsx
  </files>
  <action>
Create src/pages/components/FeatureFlagsComponents.jsx containing:

1. Move these inline components from FeatureFlagsPage.jsx:
   - FeatureFlagsTab (lines ~240-375, ~135 lines)
   - ExperimentsTab (lines ~381-511, ~130 lines)
   - FeedbackTab (lines ~517-645, ~128 lines)
   - AnnouncementsTab (lines ~651-744, ~93 lines)
   - FlagModal (lines ~746-929, ~183 lines)
   - ExperimentModal (lines ~930-1074, ~144 lines)
   - AnnouncementModal (lines ~1075-end, ~181 lines)

2. Each component keeps its same props interface - no changes to how they receive data.

3. Add necessary imports at top of new file:
   - React hooks (useState, useEffect)
   - Design system components (Card, CardHeader, CardContent, Button, Modal, etc.)
   - Lucide icons used by each component
   - Service imports if modals call APIs directly

4. Export all 7 components from the new file.

5. Update FeatureFlagsPage.jsx:
   - Import all 7 components from './components/FeatureFlagsComponents'
   - Remove the inline component definitions
   - Keep the tabs array, main component, and useFeatureFlags import

6. Ensure the page structure remains identical:
   - Tab buttons still render in the same location
   - Tab content still renders conditionally based on activeTab
   - Modals still receive editingItem and handlers
  </action>
  <verify>
    - `wc -l src/pages/FeatureFlagsPage.jsx` shows under 600 lines
    - `wc -l src/pages/components/FeatureFlagsComponents.jsx` shows ~1000 lines
    - `npm run lint -- src/pages/FeatureFlagsPage.jsx src/pages/components/FeatureFlagsComponents.jsx` passes
    - `npm run build` succeeds
  </verify>
  <done>FeatureFlagsPage.jsx is under 600 lines, all tab and modal components extracted</done>
</task>

<task type="auto">
  <name>Task 2: Verify page functionality</name>
  <files>src/pages/FeatureFlagsPage.jsx</files>
  <action>
1. Run existing tests to confirm no regressions:
   - `npm test -- --run` (should pass all tests)

2. Check that all imports resolve correctly:
   - No "module not found" errors in build output
   - All component references in FeatureFlagsPage point to imports

3. Confirm the extraction maintains functionality:
   - Tab switching still works (components receive activeTab state)
   - Modal opening/closing still works (components receive show* props)
   - CRUD operations still work (components receive handlers from useFeatureFlags)
  </action>
  <verify>
    - `npm test -- --run` passes
    - `npm run build` succeeds without warnings about missing modules
    - Grep confirms all 7 components are imported: `grep -E "(FeatureFlagsTab|ExperimentsTab|FeedbackTab|AnnouncementsTab|FlagModal|ExperimentModal|AnnouncementModal)" src/pages/FeatureFlagsPage.jsx`
  </verify>
  <done>All tests pass, build succeeds, page uses imported components</done>
</task>

</tasks>

<verification>
- FeatureFlagsPage.jsx line count under 600
- FeatureFlagsComponents.jsx exports all 7 components
- npm run lint passes for both files
- npm run build succeeds
- npm test passes
</verification>

<success_criteria>
1. FeatureFlagsPage.jsx is under 600 lines
2. All inline tab components (4) and modals (3) are extracted
3. Page functionality unchanged (tabs switch, modals open/close, CRUD works)
4. Build and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/08-page-refactoring/08-07-SUMMARY.md`
</output>
