---
phase: 08-page-refactoring
plan: 09
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/ScreensPage.jsx
  - src/pages/components/ScreensComponents.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "ScreensPage.jsx is under 700 lines"
    - "All inline components and modals are extracted"
    - "Page functionality is unchanged after extraction"
  artifacts:
    - path: "src/pages/components/ScreensComponents.jsx"
      provides: "Extracted components and modals for ScreensPage"
      exports: ["DemoPairingBanner", "LimitWarningBanner", "NoScreensState", "PromoCards", "ScreenRow", "ScreenActionMenu", "AddScreenModal", "LimitReachedModal", "AnalyticsModal", "ScreensErrorState", "EditScreenModal", "KioskModeModal"]
    - path: "src/pages/ScreensPage.jsx"
      provides: "Main page component"
      max_lines: 700
  key_links:
    - from: "src/pages/ScreensPage.jsx"
      to: "src/pages/components/ScreensComponents.jsx"
      via: "import statement"
      pattern: "from.*ScreensComponents"
---

<objective>
Extract inline components and modals from ScreensPage.jsx to reach 700-line target.

Purpose: ScreensPage is 83% over target (1278 lines vs 700). Hook extraction (08-04) moved state logic out but ~600 lines of inline UI components remain: ScreenRow (~110 lines), ScreenActionMenu (~100 lines), and 5 modals (~400 lines total).

Output: ScreensPage.jsx under 700 lines with all inline components extracted to src/pages/components/ScreensComponents.jsx
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-page-refactoring/08-VERIFICATION.md
@src/pages/ScreensPage.jsx
@src/pages/hooks/useScreensData.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract components and modals</name>
  <files>
    src/pages/components/ScreensComponents.jsx
    src/pages/ScreensPage.jsx
  </files>
  <action>
Create src/pages/components/ScreensComponents.jsx containing:

1. Move these inline components from ScreensPage.jsx:
   - DemoPairingBanner (line ~98, ~45 lines)
   - LimitWarningBanner (line ~144, ~25 lines)
   - NoScreensState (line ~169, ~15 lines)
   - PromoCards (line ~185, ~35 lines)
   - ScreenRow (line ~219, ~110 lines)
   - ScreenActionMenu (line ~329, ~100 lines)
   - AddScreenModal (line ~427, ~110 lines)
   - LimitReachedModal (line ~538, ~45 lines)
   - AnalyticsModal (line ~582, ~130 lines)
   - ScreensErrorState (line ~710, ~45 lines)
   - EditScreenModal (line ~753, ~115 lines)
   - KioskModeModal (line ~868, ~80 lines)

2. Add necessary imports at top of new file:
   - React hooks (useState, useEffect, useMemo)
   - Design system components (Card, Button, Modal, FormField, Input, Select, etc.)
   - Lucide icons used by each component
   - useTranslation if components use translations

3. Export all 12 components.

4. Update ScreensPage.jsx:
   - Import all components from './components/ScreensComponents'
   - Remove inline component definitions
   - Keep the main ScreensPage component and useScreensData import

5. Maintain same props interfaces - components receive data and handlers as props, don't call services directly.
  </action>
  <verify>
    - `wc -l src/pages/ScreensPage.jsx` shows under 700 lines
    - `wc -l src/pages/components/ScreensComponents.jsx` shows ~800 lines
    - `npm run lint -- src/pages/ScreensPage.jsx src/pages/components/ScreensComponents.jsx` passes
    - `npm run build` succeeds
  </verify>
  <done>ScreensPage.jsx is under 700 lines, all components extracted</done>
</task>

<task type="auto">
  <name>Task 2: Verify page functionality</name>
  <files>src/pages/ScreensPage.jsx</files>
  <action>
1. Run existing tests:
   - `npm test -- --run` (should pass all tests)

2. Check that all imports resolve:
   - No "module not found" errors
   - All 12 components imported and used

3. Confirm extraction maintains functionality:
   - Screen list renders (ScreenRow components)
   - Action menus work (ScreenActionMenu)
   - All modals open/close (Add, Edit, Limit, Analytics, Kiosk)
  </action>
  <verify>
    - `npm test -- --run` passes
    - `npm run build` succeeds
    - Grep confirms all 12 components imported: `grep -E "from.*ScreensComponents" src/pages/ScreensPage.jsx`
  </verify>
  <done>All tests pass, build succeeds, page uses imported components</done>
</task>

</tasks>

<verification>
- ScreensPage.jsx line count under 700
- ScreensComponents.jsx exports all 12 components
- npm run lint passes for both files
- npm run build succeeds
- npm test passes
</verification>

<success_criteria>
1. ScreensPage.jsx is under 700 lines
2. All inline components (4 utilities, 2 UI components, 6 modals) extracted
3. Page functionality unchanged (screen list, action menus, modals)
4. Build and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/08-page-refactoring/08-09-SUMMARY.md`
</output>
