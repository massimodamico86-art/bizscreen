---
phase: 29-fix-auto-removed-imports
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/Player.jsx
  - tests/unit/player/Player.test.jsx
  - tests/unit/player/Player.heartbeat.test.jsx
  - tests/unit/player/Player.offline.test.jsx
  - tests/unit/player/Player.sync.test.jsx
  - tests/unit/player/PinEntry.test.jsx
  - tests/unit/pages/DashboardComponents.test.jsx
  - tests/unit/pages/HelpCenterPage.test.jsx
  - tests/unit/security/SafeHTML.test.jsx
  - tests/unit/components/ScreenGroupSettingsTab.test.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Player.jsx has all imports and /player route loads without errors"
    - "All 10 affected test files have restored imports"
    - "Test suite passes with 0 failures (2071+ tests passing)"
  artifacts:
    - path: "src/Player.jsx"
      provides: "Player routing component"
      contains: "import { Routes, Route, Navigate }"
    - path: "tests/unit/player/Player.test.jsx"
      provides: "Player characterization tests"
      contains: "import { MemoryRouter"
  key_links:
    - from: "src/Player.jsx"
      to: "react-router-dom"
      via: "import statement"
      pattern: "import.*Routes.*Route.*Navigate.*from.*react-router-dom"
    - from: "src/Player.jsx"
      to: "player/components/PairPage"
      via: "import statement"
      pattern: "import.*PairPage.*from"
---

<objective>
Restore imports removed by ESLint auto-fix during Phase 28-01

Purpose: Fix critical runtime failure on /player route and restore 198 failing tests caused by
missing imports. ESLint's unused-imports plugin incorrectly removed JSX-used imports.

Output: Player.jsx and 9 test files with restored imports, full test suite passing
</objective>

<execution_context>
@/Users/massimodamico/.claude/get-shit-done/workflows/execute-plan.md
@/Users/massimodamico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/29-fix-auto-removed-imports/29-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restore imports to Player.jsx</name>
  <files>src/Player.jsx</files>
  <action>
Add the following imports at the top of src/Player.jsx (after the comment header):

```javascript
import { Routes, Route, Navigate } from 'react-router-dom';
import { PairPage } from './player/components/PairPage';
import { ViewPage } from './player/pages/ViewPage';
```

These imports were removed by ESLint auto-fix in Phase 28-01. The components are used in JSX
but were not detected by the unused-imports plugin.

Verify the file structure remains:
1. Comment header (existing)
2. Import statements (add these)
3. JSDoc comment (existing)
4. Player function (existing)
  </action>
  <verify>
Run: `npm run lint -- --quiet src/Player.jsx`
Expected: No errors (ESLint passes)
  </verify>
  <done>Player.jsx has imports for Routes, Route, Navigate, PairPage, and ViewPage</done>
</task>

<task type="auto">
  <name>Task 2: Restore imports to Player test files</name>
  <files>
tests/unit/player/Player.test.jsx
tests/unit/player/Player.heartbeat.test.jsx
tests/unit/player/Player.offline.test.jsx
tests/unit/player/Player.sync.test.jsx
tests/unit/player/PinEntry.test.jsx
  </files>
  <action>
For each Player test file, add missing imports after the existing import block:

**Player.test.jsx** - Add after line 45 (after @testing-library import):
```javascript
import { MemoryRouter, Routes, Route } from 'react-router-dom';
```

**Player.heartbeat.test.jsx** - Add after line 16 (after @testing-library import):
```javascript
import { MemoryRouter, Routes, Route } from 'react-router-dom';
```

**Player.offline.test.jsx** - Add after line 16 (after @testing-library import):
```javascript
import { MemoryRouter, Routes, Route } from 'react-router-dom';
```

**Player.sync.test.jsx** - Add after line 13 (after @testing-library import):
```javascript
import { MemoryRouter, Routes, Route } from 'react-router-dom';
```

**PinEntry.test.jsx** - Add after line 11 (after @testing-library import):
```javascript
import { PinEntry } from '../../../src/player/components/PinEntry';
```

Note: PinEntry is a named export, not a default export.
  </action>
  <verify>
Run: `npm test -- tests/unit/player/ --reporter=verbose 2>&1 | grep -E "(PASS|FAIL|✓|✗)" | head -20`
Expected: All Player test files pass
  </verify>
  <done>All 5 Player test files have restored imports and tests pass</done>
</task>

<task type="auto">
  <name>Task 3: Restore imports to other test files</name>
  <files>
tests/unit/pages/DashboardComponents.test.jsx
tests/unit/pages/HelpCenterPage.test.jsx
tests/unit/security/SafeHTML.test.jsx
tests/unit/components/ScreenGroupSettingsTab.test.jsx
  </files>
  <action>
For each remaining test file, add missing imports after the existing import block:

**DashboardComponents.test.jsx** - Add after line 9 (after @testing-library import):
```javascript
import { BrowserRouter } from 'react-router-dom';
import { DashboardErrorState, ScreenRow, StatsGrid } from '../../../src/pages/DashboardPage';
```

**HelpCenterPage.test.jsx** - Add after line 12 (after @testing-library import):
```javascript
import HelpCenterPage from '../../../src/pages/HelpCenterPage';
```
Note: HelpCenterPage is a DEFAULT export (no curly braces).

**SafeHTML.test.jsx** - Add after line 12 (after @testing-library import):
```javascript
import { SafeHTML } from '../../../src/security/SafeHTML.jsx';
```
Note: SafeHTML is a named export (with curly braces).

**ScreenGroupSettingsTab.test.jsx** - Add after line 9 (after @testing-library import):
```javascript
import { BrowserRouter } from 'react-router-dom';
import ScreenGroupSettingsTab from '../../../src/components/screens/ScreenGroupSettingsTab';
```
Note: ScreenGroupSettingsTab is a DEFAULT export (no curly braces).
  </action>
  <verify>
Run: `npm test -- tests/unit/pages/ tests/unit/security/ tests/unit/components/ --reporter=verbose 2>&1 | grep -E "(PASS|FAIL)" | head -20`
Expected: All test files pass
  </verify>
  <done>All 4 remaining test files have restored imports and tests pass</done>
</task>

</tasks>

<verification>
## Final Verification

1. **ESLint check on Player.jsx:**
   ```bash
   npm run lint -- --quiet src/Player.jsx
   ```
   Expected: No errors

2. **Full test suite:**
   ```bash
   npm test
   ```
   Expected: 0 failures, 2071+ tests passing

3. **Dev server route check (manual if needed):**
   ```bash
   npm run dev &
   # Navigate to http://localhost:5173/player
   # Navigate to http://localhost:5173/player/view
   # Check browser console for errors
   ```
   Expected: No "undefined" errors, routes render correctly
</verification>

<success_criteria>
1. src/Player.jsx contains imports for Routes, Route, Navigate from react-router-dom
2. src/Player.jsx contains imports for PairPage and ViewPage from local paths
3. All 9 test files have restored imports (4 Player tests, PinEntry, DashboardComponents, HelpCenterPage, SafeHTML, ScreenGroupSettingsTab)
4. `npm test` passes with 0 failures and 2071+ tests passing
5. ESLint passes on all modified files
</success_criteria>

<output>
After completion, create `.planning/phases/29-fix-auto-removed-imports/29-01-SUMMARY.md`
</output>
