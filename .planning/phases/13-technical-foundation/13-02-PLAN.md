---
phase: 13-technical-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/services/adminService.js
  - src/services/analyticsService.js
  - src/services/approvalService.js
  - src/services/assistantService.js
  - src/services/auditService.js
  - src/services/autoBuildService.js
  - src/services/billingService.js
  - src/services/cacheService.js
  - src/services/campaignService.js
  - src/services/canvaService.js
  - src/services/contentAnalyticsService.js
  - src/services/domainService.js
  - src/services/exportService.js
  - src/services/healthService.js
  - src/services/industryWizardService.js
  - src/services/layoutService.js
  - src/services/licenseService.js
  - src/services/localeService.js
  - src/services/marketplaceService.js
  - src/services/mediaService.js
  - src/services/permissionsService.js
  - src/services/playlistService.js
  - src/services/previewService.js
  - src/services/reportSettingsService.js
  - src/services/resellerService.js
  - src/services/sceneAiService.js
  - src/services/sceneDesignService.js
  - src/services/sceneService.js
  - src/services/scheduleService.js
  - src/services/scimService.js
  - src/services/screenDiagnosticsService.js
  - src/services/screenGroupService.js
  - src/services/ssoService.js
  - src/services/svgAnalyzerService.js
  - src/services/teamService.js
  - src/services/tenantService.js
  - src/services/webhookService.js
autonomous: true

must_haves:
  truths:
    - "All 37 services use createScopedLogger"
    - "No console.log/error/warn calls remain in services"
    - "Log levels used appropriately (info for business, error for exceptions)"
    - "All tests pass after migration"
  artifacts:
    - path: "src/services/campaignService.js"
      provides: "Campaign CRUD with structured logging"
      contains: "createScopedLogger"
    - path: "src/services/scheduleService.js"
      provides: "Schedule management with structured logging"
      contains: "createScopedLogger"
    - path: "src/services/mediaService.js"
      provides: "Media operations with structured logging"
      contains: "createScopedLogger"
  key_links:
    - from: "src/services/*Service.js"
      to: "src/services/loggingService.js"
      via: "import createScopedLogger"
      pattern: "import.*createScopedLogger.*from.*loggingService"
---

<objective>
Migrate remaining 37 services to structured logging using createScopedLogger pattern.

Purpose: Currently 66 services (66%) use structured logging. The remaining 37 services (34%) need migration to achieve 100% coverage, enabling consistent log aggregation, PII redaction, and correlation IDs.
Output: All 100+ services use createScopedLogger with appropriate log levels.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-technical-foundation/13-RESEARCH.md

# Logging pattern reference
@src/services/loggingService.js
@src/services/playerService.js (example of migrated service)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate first batch of services (A-L)</name>
  <files>
    src/services/adminService.js
    src/services/analyticsService.js
    src/services/approvalService.js
    src/services/assistantService.js
    src/services/auditService.js
    src/services/autoBuildService.js
    src/services/billingService.js
    src/services/cacheService.js
    src/services/campaignService.js
    src/services/canvaService.js
    src/services/contentAnalyticsService.js
    src/services/domainService.js
    src/services/exportService.js
    src/services/healthService.js
    src/services/industryWizardService.js
    src/services/layoutService.js
    src/services/licenseService.js
    src/services/localeService.js
  </files>
  <action>
For each service file, apply this pattern:

1. Add import at top of file:
   `import { createScopedLogger } from './loggingService';`

2. Create logger after imports:
   `const logger = createScopedLogger('ServiceName');`
   (Use PascalCase service name: AdminService, AnalyticsService, etc.)

3. Replace console calls with logger:
   - `console.log('message', data)` -> `logger.info('message', { ...data })`
   - `console.error('message', error)` -> `logger.error('message', { error })`
   - `console.warn('message')` -> `logger.warn('message')`

4. Use appropriate log levels:
   - `logger.info()` - Business events (created, updated, deleted)
   - `logger.debug()` - Diagnostics (function entry, timing, raw data)
   - `logger.error()` - Exceptions only (caught errors, failed operations)
   - `logger.warn()` - Degraded states (fallback used, retry succeeded)

5. If no existing console calls, add strategic logging:
   - Entry point functions: `logger.debug('functionName called', { params })`
   - Success operations: `logger.info('operation completed', { id })`
   - Error catches: `logger.error('operation failed', { error })`

Note: industryWizardService.js is large (2794 lines) - focus on key functions only.
  </action>
  <verify>
Verify logging added: `grep -l "createScopedLogger" src/services/{admin,analytics,approval,assistant,audit,autoBuild,billing,cache,campaign,canva,contentAnalytics,domain,export,health,industryWizard,layout,license,locale}Service.js | wc -l` should equal 18
No console calls: `grep -E "console\.(log|error|warn)" src/services/{admin,analytics,approval,assistant,audit,autoBuild,billing,cache,campaign,canva,contentAnalytics,domain,export,health,industryWizard,layout,license,locale}Service.js` should return empty
Run tests: `npm test`
  </verify>
  <done>
18 services migrated to structured logging.
No console.log/error/warn calls remain in migrated services.
All tests pass.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate second batch of services (M-Z)</name>
  <files>
    src/services/marketplaceService.js
    src/services/mediaService.js
    src/services/permissionsService.js
    src/services/playlistService.js
    src/services/previewService.js
    src/services/reportSettingsService.js
    src/services/resellerService.js
    src/services/sceneAiService.js
    src/services/sceneDesignService.js
    src/services/sceneService.js
    src/services/scheduleService.js
    src/services/scimService.js
    src/services/screenDiagnosticsService.js
    src/services/screenGroupService.js
    src/services/ssoService.js
    src/services/svgAnalyzerService.js
    src/services/teamService.js
    src/services/tenantService.js
    src/services/webhookService.js
  </files>
  <action>
Apply same migration pattern to remaining 19 services:

1. Add import: `import { createScopedLogger } from './loggingService';`
2. Create logger: `const logger = createScopedLogger('ServiceName');`
3. Replace console calls with appropriate logger methods
4. Add strategic logging if no existing console calls

Service names for logger creation:
- MarketplaceService, MediaService, PermissionsService, PlaylistService
- PreviewService, ReportSettingsService, ResellerService, SceneAiService
- SceneDesignService, SceneService, ScheduleService, ScimService
- ScreenDiagnosticsService, ScreenGroupService, SsoService
- SvgAnalyzerService, TeamService, TenantService, WebhookService

Note: mediaService.js (1239 lines), sceneDesignService.js (1535 lines), scheduleService.js (1048 lines) are larger - focus on error handlers and key business operations.

Final verification:
- Count services with logging: `grep -l "createScopedLogger" src/services/*.js | wc -l` should be 100+
- No console calls remain: `grep -E "console\.(log|error|warn)" src/services/*.js` should only show loggingService.js (internal use)
  </action>
  <verify>
Verify all 37 migrated: `for svc in adminService analyticsService approvalService assistantService auditService autoBuildService billingService cacheService campaignService canvaService contentAnalyticsService domainService exportService healthService industryWizardService layoutService licenseService localeService marketplaceService mediaService permissionsService playlistService previewService reportSettingsService resellerService sceneAiService sceneDesignService sceneService scheduleService scimService screenDiagnosticsService screenGroupService ssoService svgAnalyzerService teamService tenantService webhookService; do grep -q "createScopedLogger" src/services/${svc}.js && echo "OK: $svc" || echo "MISSING: $svc"; done`
Full test suite: `npm test`
Console audit: `grep -rE "console\.(log|error|warn)" src/services/*.js --include="*.js" | grep -v loggingService.js` should return empty or only acceptable uses
  </verify>
  <done>
All 37 services migrated to structured logging.
100% of services now use createScopedLogger.
No rogue console.log/error/warn calls.
All tests pass.
  </done>
</task>

</tasks>

<verification>
1. Coverage check: `grep -l "createScopedLogger" src/services/*.js | wc -l` shows 100+ services
2. Console audit: `grep -rE "console\.(log|error|warn)" src/services/*.js | grep -v loggingService.js` returns empty
3. Full test suite: `npm test` passes all tests
4. Spot check log output: Run app and verify structured logs appear in console
</verification>

<success_criteria>
- All 37 services now use createScopedLogger (100% coverage)
- No console.log/error/warn calls remain in service files (except loggingService.js internal use)
- All existing tests pass
- Log levels used appropriately (info for business events, error for exceptions)
</success_criteria>

<output>
After completion, create `.planning/phases/13-technical-foundation/13-02-SUMMARY.md`
</output>
