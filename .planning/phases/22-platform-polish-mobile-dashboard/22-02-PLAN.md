---
phase: 22-platform-polish-mobile-dashboard
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/tables/ResponsiveTable.jsx
  - src/pages/ScreensPage.jsx
  - src/pages/SchedulesPage.jsx
  - src/pages/PlaylistsPage.jsx
autonomous: true

must_haves:
  truths:
    - "Data tables have horizontal scroll on mobile"
    - "Essential columns visible, secondary columns hidden on mobile"
    - "Row actions accessible via tap-to-expand or always-visible"
    - "Tables don't break layout on narrow screens"
  artifacts:
    - path: "src/components/tables/ResponsiveTable.jsx"
      provides: "Responsive table wrapper component"
      exports: ["ResponsiveTable"]
  key_links:
    - from: "src/pages/ScreensPage.jsx"
      to: "src/components/tables/ResponsiveTable.jsx"
      via: "wraps table content"
      pattern: "ResponsiveTable"
---

<objective>
Make data tables mobile-responsive with horizontal scroll and smart column hiding.

Purpose: Ensure table data is accessible and usable on mobile devices (MOBIL-02).
Output: ResponsiveTable component applied to key admin pages.
</objective>

<execution_context>
@/Users/massimodamico/.claude/get-shit-done/workflows/execute-plan.md
@/Users/massimodamico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/pages/ScreensPage.jsx
@src/pages/SchedulesPage.jsx
@src/pages/PlaylistsPage.jsx
@src/hooks/useMediaQuery.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ResponsiveTable wrapper component</name>
  <files>src/components/tables/ResponsiveTable.jsx</files>
  <action>
Create the responsive table wrapper that provides horizontal scroll on mobile:

```javascript
/**
 * ResponsiveTable Component
 * Wrapper for tables that enables horizontal scroll on mobile
 * and provides column visibility control.
 */
import { useBreakpoints } from '../../hooks/useMediaQuery';

/**
 * ResponsiveTable wrapper
 * @param {Object} props
 * @param {React.ReactNode} props.children - Table content
 * @param {string} [props.className] - Additional classes
 */
export function ResponsiveTable({ children, className = '' }) {
  return (
    <div
      className={`overflow-x-auto -webkit-overflow-scrolling-touch ${className}`}
      style={{ WebkitOverflowScrolling: 'touch' }}
    >
      {children}
    </div>
  );
}

/**
 * Responsive table cell that hides on mobile
 * Use for non-essential columns
 */
export function HiddenOnMobile({ children, className = '', as: Component = 'td' }) {
  return (
    <Component className={`hidden sm:table-cell ${className}`}>
      {children}
    </Component>
  );
}

/**
 * Responsive table header cell that hides on mobile
 */
export function HiddenOnMobileHeader({ children, className = '' }) {
  return (
    <th className={`hidden sm:table-cell ${className}`}>
      {children}
    </th>
  );
}

/**
 * Hook for responsive column visibility
 * Returns object with visibility flags per breakpoint
 */
export function useResponsiveColumns() {
  const { isMobile, isTablet, isDesktop } = useBreakpoints();

  return {
    // Always visible
    showEssential: true,
    // Hidden on mobile, visible on tablet+
    showSecondary: !isMobile,
    // Only on desktop
    showTertiary: isDesktop,
    // Convenience flags
    isMobile,
    isTablet,
    isDesktop,
  };
}

export default ResponsiveTable;
```

Also create index file for the tables directory:
```javascript
// src/components/tables/index.js
export { ResponsiveTable, HiddenOnMobile, HiddenOnMobileHeader, useResponsiveColumns } from './ResponsiveTable';
```
  </action>
  <verify>File exists at src/components/tables/ResponsiveTable.jsx with exports</verify>
  <done>ResponsiveTable wrapper enables horizontal scroll with iOS touch support</done>
</task>

<task type="auto">
  <name>Task 2: Apply responsive table to ScreensPage</name>
  <files>src/pages/ScreensPage.jsx, src/pages/components/ScreensComponents.jsx</files>
  <action>
Update ScreensPage to use responsive table wrapper. The screen list uses a card/row layout rather than a traditional table, so the main changes are:

1. Import ResponsiveTable and useResponsiveColumns:
```javascript
import { ResponsiveTable, useResponsiveColumns } from '../components/tables';
```

2. In the ScreenRow component (ScreensComponents.jsx), hide non-essential info on mobile:
- Essential (always show): Device name, online status
- Secondary (hide on mobile): Assigned content, last seen
- Keep actions visible

Update ScreenRow to accept responsive columns:
```javascript
export function ScreenRow({ screen, onEdit, onDelete, showSecondary = true, ...props }) {
  // ...existing code...
  return (
    <div className="flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors">
      <div className="flex items-center gap-3 min-w-0 flex-1">
        <div className={`w-2.5 h-2.5 rounded-full flex-shrink-0 ${isOnline ? 'bg-green-500' : 'bg-gray-300'}`} />
        <div className="min-w-0 flex-1">
          <p className="font-medium text-gray-900 truncate">{screen.device_name || 'Unnamed'}</p>
          {/* Hide secondary info on mobile */}
          {showSecondary && (
            <p className="text-sm text-gray-500 truncate">
              {screen.assigned_playlist?.name || screen.assigned_layout?.name || 'No content'}
            </p>
          )}
        </div>
      </div>
      {/* Status badge - always visible */}
      <div className="flex items-center gap-2 ml-2">
        <span className={`text-xs px-2 py-1 rounded-full ${isOnline ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`}>
          {isOnline ? 'Online' : 'Offline'}
        </span>
        {/* Actions */}
      </div>
    </div>
  );
}
```

3. In ScreensPage, pass showSecondary based on breakpoint:
```javascript
const { showSecondary } = useResponsiveColumns();
// ...
<ScreenRow screen={screen} showSecondary={showSecondary} ... />
```

4. Wrap the screen list in ResponsiveTable for any overflow edge cases:
```javascript
<ResponsiveTable>
  <div className="space-y-2">
    {screens.map(screen => (
      <ScreenRow key={screen.id} screen={screen} showSecondary={showSecondary} />
    ))}
  </div>
</ResponsiveTable>
```
  </action>
  <verify>On mobile, ScreensPage shows device name + status, hides assigned content text</verify>
  <done>ScreensPage adapts to mobile with essential columns visible</done>
</task>

<task type="auto">
  <name>Task 3: Apply responsive patterns to SchedulesPage and PlaylistsPage</name>
  <files>src/pages/SchedulesPage.jsx, src/pages/PlaylistsPage.jsx</files>
  <action>
Apply similar responsive patterns to other key pages:

**SchedulesPage:**
1. Import responsive utilities
2. Essential columns: Schedule name, status indicator
3. Secondary columns (hide on mobile): Date range, priority, assigned devices
4. Wrap schedule list in ResponsiveTable

**PlaylistsPage:**
1. Import responsive utilities
2. Essential columns: Playlist name, item count
3. Secondary columns (hide on mobile): Duration, last updated
4. Wrap playlist list in ResponsiveTable

For both pages:
```javascript
import { ResponsiveTable, useResponsiveColumns } from '../components/tables';

// In component:
const { showSecondary, showTertiary } = useResponsiveColumns();

// In render:
<ResponsiveTable>
  {/* existing list/table content */}
  {/* Use showSecondary to conditionally render non-essential columns */}
</ResponsiveTable>
```

Add responsive classes to hide columns:
- `hidden sm:block` or `hidden sm:table-cell` for secondary info
- Keep primary identifiers and action buttons always visible
  </action>
  <verify>Resize browser - schedules and playlists pages don't overflow on mobile</verify>
  <done>SchedulesPage and PlaylistsPage adapt to mobile screens</done>
</task>

</tasks>

<verification>
1. ResponsiveTable component created with horizontal scroll support
2. ScreensPage shows essential info on mobile, full info on desktop
3. SchedulesPage adapts columns for mobile
4. PlaylistsPage adapts columns for mobile
5. No horizontal overflow/layout breaks on 320px width
6. Touch scroll works smoothly on iOS Safari
</verification>

<success_criteria>
- ResponsiveTable wrapper component created
- Tables have horizontal scroll with iOS touch support
- Non-essential columns hidden on mobile
- Essential columns (name, status) always visible
- Row actions accessible on mobile
</success_criteria>

<output>
After completion, create `.planning/phases/22-platform-polish-mobile-dashboard/22-02-SUMMARY.md`
</output>
